var _r = Object.defineProperty, yr = Object.defineProperties; var gr = Object.getOwnPropertyDescriptors; var Xo = Object.getOwnPropertySymbols; var hr = Object.prototype.hasOwnProperty, br = Object.prototype.propertyIsEnumerable; var Rl = (e, t, n) => t in e ? _r(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, re = (e, t) => { for (var n in t || (t = {})) hr.call(t, n) && Rl(e, n, t[n]); if (Xo) for (var n of Xo(t)) br.call(t, n) && Rl(e, n, t[n]); return e }, Ce = (e, t) => yr(e, gr(t)); var mt = (e, t, n) => (Rl(e, typeof t != "symbol" ? t + "" : t, n), n); import { d as Ft, s as Pt, c as $r, l as M, b as wr, e as kr, f as Sr, g as Cr, h as Vr, i as Fr, j as Ar, k as Ir, n as z, u as x, o as V, r as c, p as m, q as C, w as d, t as a, v as E, y as _e, z as Xt, A as je, B as S, C as b, D as et, E as ye, F as we, G as ee, H as Ae, I as R, J as Et, K as de, L as Ne, M as Je, N as xe, O as dt, P as D, Q as at, R as Tt, S as Zt, T as ht, U as tt, V as I, W as Zo, X as Er, Y as se, Z as Yt, _ as gn, $ as he, a0 as an, a1 as Qe, a2 as Xe, a3 as Dr, a4 as Tr, a5 as Pr, a6 as Or, a7 as Yo, a8 as xo, a9 as ea, aa as At, ab as rl, ac as Ml, ad as ta, ae as na, af as Ul, ag as Rn, ah as Lr, ai as jr, aj as Mn, ak as Ot, al as la, am as Nl, an as dl, ao as oa, ap as Rr, aq as Mr, ar as bt, as as Ur, at as Nr, au as Br, av as qr, aw as zr, ax as Ke, ay as aa, az as Kr, aA as kt, aB as $t, aC as Bl, aD as Hr, aE as Lt, aF as ql, aG as zl, aH as Kl, aI as ia, aJ as Hl, aK as sa, aL as Wr, aM as Gr, aN as Jr, aO as Qr, aP as Xr, aQ as Zr, aR as Yr, aS as xr, aT as ed, aU as td, aV as nd, aW as ld, aX as od, aY as ad, aZ as id, a_ as sd, a$ as rd, b0 as dd, b1 as ud, b2 as cd, b3 as pd, b4 as md, b5 as fd, b6 as vd, b7 as ra, b8 as _d, b9 as yd, ba as gd, bb as hd, bc as bd, bd as qt, be as $d, bf as da, bg as sn, bh as wd, bi as kd, bj as Sd, bk as Un, bl as hn, bm as ua, bn as Cd, bo as zt, bp as Vd, bq as Fd, br as Ad, bs as Wl, bt as ca, bu as Id, bv as Ed, bw as Dd, bx as Td, by as Pd, bz as Od, bA as Ld, bB as jd, bC as Rd } from "./assets/vendor.c46e17d6.js"; import { g as Md, u as Re, d as rn, a as ot, b as vt, S as Ud, A as Nd, c as Bd, e as ul, f as _t, h as Me, i as cl, j as pl } from "./assets/use-sync.864aa3cf.js"; const qd = function () { const t = document.createElement("link").relList; if (t && t.supports && t.supports("modulepreload")) return; for (const i of document.querySelectorAll('link[rel="modulepreload"]')) l(i); new MutationObserver(i => { for (const u of i) if (u.type === "childList") for (const o of u.addedNodes) o.tagName === "LINK" && o.rel === "modulepreload" && l(o) }).observe(document, { childList: !0, subtree: !0 }); function n(i) { const u = {}; return i.integrity && (u.integrity = i.integrity), i.referrerpolicy && (u.referrerPolicy = i.referrerpolicy), i.crossorigin === "use-credentials" ? u.credentials = "include" : i.crossorigin === "anonymous" ? u.credentials = "omit" : u.credentials = "same-origin", u } function l(i) { if (i.ep) return; i.ep = !0; const u = n(i); fetch(i.href, u) } }; qd(); const pa = "9.1.2", wt = Ft({ id: "appStore", state: () => ({ sidebarOpen: !1, notificationsDrawerOpen: !1, fullScreen: !1, hydrated: !1, hydrating: !1, error: null, authenticated: !1, accessTokenExpiry: 0, basemap: "OpenStreetMap" }) }), zd = "modulepreload", ma = {}, Kd = "", j = function (t, n) { return !n || n.length === 0 ? t() : Promise.all(n.map(l => { if (l = `${Kd}${l}`, l in ma) return; ma[l] = !0; const i = l.endsWith(".css"), u = i ? '[rel="stylesheet"]' : ""; if (document.querySelector(`link[href="${l}"]${u}`)) return; const o = document.createElement("link"); if (o.rel = i ? "stylesheet" : zd, i || (o.as = "script", o.crossOrigin = ""), o.href = l, document.head.appendChild(o), i) return new Promise((s, r) => { o.addEventListener("load", s), o.addEventListener("error", r) }) })).then(() => t()) }, Hd = Pt([]), Wd = Pt([]); function xt() { return { displays: Wd, displaysRaw: Hd } } const Gd = Pt([]), Jd = Pt([]); function St() { return { interfaces: Jd, interfacesRaw: Gd } } const Qd = Pt([]), Xd = Pt([]); function ml() { return { panels: Xd, panelsRaw: Qd } } const Zd = Pt([]), Yd = Pt([]); function dn() { return { layouts: Yd, layoutsRaw: Zd } } const xd = Pt([]), eu = Pt([]); function Gl() { return { modules: eu, modulesRaw: xd } } var tu = { "en-US": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !0 } }, "bg-BG": { short: { year: "numeric", month: "numeric", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "cs-CZ": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "de-DE": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "fr-FR": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "it-IT": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "ms-MY": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "nl-NL": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "pl-PL": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "pt-BR": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "ru-RU": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !1 } }, "zh-CN": { short: { year: "numeric", month: "short", day: "numeric" }, long: { year: "numeric", month: "short", day: "numeric", weekday: "short", hour: "numeric", minute: "numeric", hour12: !0 } } }, nu = { "en-US": { currency: { style: "currency", currency: "USD", notation: "standard" }, decimal: { style: "decimal", minimumFractionDigits: 2, maximumFractionDigits: 2 }, percent: { style: "percent", useGrouping: !1 } } }, $ = { identifier: "Identifier", avatar: "Avatar", default_provider: "Default", published: "Published", draft: "Draft", archived: "Archived", modules: "Modules", module_bar: "Module Bar", tile_size: "Tile Size", edit_field: "Edit Field", conditions: "Conditions", maps: "Maps", item_creation: "Item Creation", item_revision: "Item Revision", enter_a_name: "Enter a Name...", duplicate_field: "Duplicate Field", half_width: "Half Width", full_width: "Full Width", group: "Group", and: "And", or: "Or", fill_width: "Fill Width", field_name_translations: "Field Name Translations", enter_password_to_enable_tfa: "Enter your password to enable Two-Factor Authentication", add_field: "Add Field", role_name: "Role Name", branch: "Branch", leaf: "Leaf", indeterminate: "Indeterminate", edit_collection: "Edit Collection", exclusive: "Exclusive", children: "Children", db_only_click_to_configure: "Database Only: Click to Configure", show_archived_items: "Show Archived Items", edited: "Value Edited", required: "Required", required_for_app_access: "Required for App Access", requires_value: "Requires value", create_preset: "Create Preset", create_panel: "Create Panel", create_role: "Create Role", create_user: "Create User", delete_panel: "Delete Panel", create_webhook: "Create Webhook", invite_users: "Invite Users", invite: "Invite", email_already_invited: 'Email "{email}" has already been invited', subject: "Subject", inbox: "Inbox", emails: "Emails", connection_excellent: "Excellent Connection", connection_good: "Good Connection", connection_fair: "Fair Connection", connection_poor: "Poor Connection", primary: "Primary", rename_folder: "Rename Folder", delete_folder: "Delete Folder", prefix: "Prefix", suffix: "Suffix", reset_bookmark: "Reset Bookmark", rename_bookmark: "Rename Bookmark", update_bookmark: "Update Bookmark", delete_bookmark: "Delete Bookmark", delete_bookmark_copy: 'Are you sure you want to delete the "{bookmark}" bookmark? This action cannot be undone.', logoutReason: { SIGN_OUT: "Signed out", SESSION_EXPIRED: "Session expired" }, public_label: "Public", public_description: "Controls what API data is available without authenticating.", not_allowed: "Not Allowed", directus_version: "Directus Version", node_version: "Node Version", node_uptime: "Node Uptime", os_type: "OS Type", os_version: "OS Version", os_uptime: "OS Uptime", os_totalmem: "OS Memory", archive: "Archive", archive_confirm: "Are you sure you want to archive this item?", archive_confirm_count: "No Items Selected | Are you sure you want to archive this item? | Are you sure you want to archive these {count} items?", reset_system_permissions_to: "Reset System Permissions to:", reset_system_permissions_copy: "This action will overwrite any custom permissions you may have applied to the system collections. Are you sure?", the_following_are_minimum_permissions: 'The following are minimum permissions required when "App Access" is enabled. You can extend permissions beyond this, but not below.', app_access_minimum: "App Access Minimum", recommended_defaults: "Recommended Defaults", unarchive: "Unarchive", unarchive_confirm: "Are you sure you want to unarchive this item?", nested_files_folders_will_be_moved: "Nested files and folders will be moved one level up.", unknown_validation_errors: "There were validation errors for the following hidden fields:", validationError: { eq: "Value has to be {valid}", neq: "Value can't be {invalid}", in: "Value has to be one of {valid}", nin: "Value can't be one of {invalid}", contains: "Value has to contain {substring}", ncontains: "Value can't contain {substring}", gt: "Value has to be greater than {valid}", gte: "Value has to be greater than or equal to {valid}", lt: "Value has to be less than {valid}", lte: "Value has to be less than or equal to {valid}", empty: "Value has to be empty", nempty: "Value can't be empty", null: "Value has to be null", nnull: "Value can't be null", required: "Value is required", unique: "Value has to be unique", regex: "Value doesn't have the correct format" }, all_access: "All Access", no_access: "No Access", use_custom: "Use Custom", nullable: "Nullable", allow_null_value: "Allow NULL value", allow_multiple: "Allow Multiple", allow_multiple_to_be_open: "Allow Multiple to be Opened", enter_value_to_replace_nulls: "Please enter a new value to replace any NULLs currently within this field.", field_standard: "Standard", field_presentation: "Presentation & Aliases", field_file: "Single File", field_files: "Multiple Files", field_m2o: "M2O Relationship", field_m2a: "M2A Relationship", field_o2m: "O2M Relationship", field_m2m: "M2M Relationship", field_translations: "Translations", field_group: "Field Group", item_permissions: "Item Permissions", field_permissions: "Field Permissions", field_validation: "Field Validation", field_presets: "Field Presets", permissions_for_role: "Items the {role} Role can {action}.", fields_for_role: "Fields the {role} Role can {action}.", validation_for_role: "Field {action} rules the {role} Role must obey.", presets_for_role: "Field value defaults for the {role} Role.", presentation_and_aliases: "Presentation & Aliases", revision_post_create: "Here is what this item looked like when it was created.", revision_post_update: "Here is what this item looked like after the update.", changes_made: "Below are the specific changes made in this revision.", no_relational_data: "Keep in mind that relational data is not included here.", hide_field_on_detail: "Hide Field on Detail", show_field_on_detail: "Show Field on Detail", delete_field: "Delete Field", fields_and_layout: "Fields & Layout", field_create_success: 'Created Field: "{field}"', field_update_success: 'Updated Field: "{field}"', duplicate_where_to: "Where would you like to duplicate this field to?", language: "Language", aggregate_function: "Aggregate Function", aggregate_precision: "Aggregate Precision", group_aggregation: "Group Aggregation", group_precision: "Group Precision", global: "Global", admins_have_all_permissions: "Admins have all permissions", camera: "Camera", show_zero: "Show Zero", create_in_advanced_field_creation_mode: "Create Field in Advanced Mode", continue_in_advanced_field_creation_mode: "Continue in Advanced Field Creation Mode", sum: "Sum", sum_distinct: "Sum Distinct", avg: "Average", avg_distinct: "Average Distinct", count: "Count", count_distinct: "Count Distinct", min: "Min", max: "Max", exposure: "Exposure", shutter: "Shutter", iso: "ISO", focal_length: "Focal Length", schema_setup_key: "This field's database column name and API key", create_field: "Create Field", creating_new_field: "New Field ({collection})", field_in_collection: "{field} ({collection})", reset_page_preferences: "Reset Page Preferences", hidden_field: "Hidden Field", hidden_on_detail: "Hidden on Detail", disabled_editing_value: "Disable editing value", key: "Key", alias: "Alias", bigInteger: "Big Integer", boolean: "Boolean", date: "Date", date_range: "Date Range", datetime: "DateTime", dateTime: "DateTime", precision: "Precision", decimal: "Decimal", float: "Float", integer: "Integer", json: "JSON", xml: "XML", string: "String", text: "Text", time: "Time", timestamp: "Timestamp", uuid: "UUID", hash: "Hash", geometry: "Geometry (All)", "geometry.Point": "Point", "geometry.LineString": "LineString", "geometry.Polygon": "Polygon", "geometry.MultiPoint": "MultiPoint", "geometry.MultiLineString": "MultiLineString", "geometry.MultiPolygon": "MultiPolygon", not_available_for_type: "Not Available for this Type", create_translations: "Create Translations", auto_refresh: "Auto Refresh", refresh_interval: "Refresh Interval", no_refresh: "Do not refresh", refresh_interval_seconds: "Refresh Instantly | Every Second | Every {seconds} Seconds", refresh_interval_minutes: "Every Minute | Every {minutes} Minutes", auto_generate: "Auto-Generate", this_will_auto_setup_fields_relations: "This will automatically setup all required fields and relations.", click_here: "Click here", to_manually_setup_translations: "to manually setup translations.", click_to_manage_translated_fields: "There are no translated fields yet. Click here to create them. | There is one translated field. Click here to manage it. | There are {count} translated fields. Click here to manage them.", fields_group: "Fields Group", no_collections_found: "No collections found.", new_data_alert: "The following will be created within your Data Model:", search_collection: "Search Collection...", new_field: "New Field", new_collection: "New Collection", add_m2o_to_collection: 'Add M2O to "{collection}"', add_o2m_to_collection: 'Add O2M to "{collection}"', add_m2m_to_collection: 'Add M2M to "{collection}"', choose_a_type: "Choose a Type...", determined_by_relationship: "Determined by Relationship", add_note: "Add a helpful note for users...", add_link: "Add Link", custom_link: "Custom Link", default_value: "Default Value", standard_field: "Standard Field", single_file: "Single File", multiple_files: "Multiple Files", m2o_relationship: "Many to One Relationship", o2m_relationship: "One to Many Relationship", m2m_relationship: "Many to Many Relationship", m2a_relationship: "Many to Any Relationship", invalid_item: "Invalid Item", next: "Next", field_name: "Field Name", translations: "Translations", no_translations: "No Translations", note: "Note", enter_a_value: "Enter a value...", enter_a_placeholder: "Enter a placeholder...", length: "Length", precision_scale: "Precision & Scale", readonly: "Readonly", unique: "Unique", updated_on: "Updated On", updated_by: "Updated By", primary_key: "Primary Key", foreign_key: "Foreign Key", finish_setup: "Finish Setup", dismiss: "Dismiss", raw_value: "Raw value", edit_raw_value: "Edit Raw Value", enter_raw_value: "Enter raw value...", clear_value: "Clear value", clear_changes: "Clear Changes", reset_to_default: "Reset to default", undo_changes: "Undo changes", notifications: "Notifications", show_all_activity: "Show All Activity", page_not_found: "Page Not Found", page_not_found_body: "The page you are looking for doesn't seem to exist.", confirm_revert: "Confirm Revert", confirm_revert_body: "This will revert the item to the selected state.", display: "Display", settings_update_success: "Settings updated", title: "Title", revision_delta_created: "Created", revision_delta_created_externally: "Created Externally", revision_delta_updated: "Updated 1 Field | Updated {count} Fields", revision_delta_deleted: "Deleted", revision_delta_reverted: "Reverted", revision_delta_other: "Revision", revision_delta_by: "{date} by {user}", private_user: "Private User", creation_preview: "Creation Preview", revision_preview: "Revision Preview", updates_made: "Updates Made", leave_comment: "Leave a comment...", post_comment_success: "Comment posted", item_create_success: "Item Created | Items Created", item_update_success: "Item Updated | Items Updated", item_delete_success: "Item Deleted | Items Deleted", this_collection: "This Collection", related_collection: "Related Collection", related_collections: "Related Collections", translations_collection: "Translation Collection", languages_collection: "Languages Collection", export_data: "Export Data", format: "Format", use_current_filters_settings: "Use Current Filters & Settings", export_collection: "Export {collection}", last_page: "Last Page", last_access: "Last Access", fill_template: "Fill with Template Value", a_unique_table_name: "A unique table name...", a_unique_column_name: "A unique column name...", enable_custom_values: "Enable custom values", submit: "Submit", move_to_folder: "Move to Folder", move: "Move", system: "System", add_field_related: "Add Field to Related Collection", interface_label: "Interface", today: "Today", yesterday: "Yesterday", delete_comment: "Delete Comment", "date-fns_date": "PPP", "date-fns_time": "h:mm:ss a", "date-fns_time_no_seconds": "h:mm a", "date-fns_date_short": "MMM d, u", "date-fns_time_short": "h:mma", "date-fns_date_short_no_year": "MMM d", minutes: "Minutes", hours: "Hours", month: "Month", year: "Year", select_all: "Select All", months: { january: "January", february: "February", march: "March", april: "April", may: "May", june: "June", july: "July", august: "August", september: "September", october: "October", november: "November", december: "December" }, drag_mode: "Drag Mode", cancel_crop: "Cancel Crop", original: "Original", url: "URL", import_label: "Import", file_details: "File Details", dimensions: "Dimensions", size: "Size", created: "Created", modified: "Modified", checksum: "Checksum", owner: "Owner", edited_by: "Edited by", folder: "Folder", zoom: "Zoom", download: "Download", open: "Open", open_in_new_window: "Open in New Window", open_folder: 'Open "{folder}" folder', foreground_color: "Foreground Color", background_color: "Background Color", upload_from_device: "Upload File from Device", choose_from_library: "Choose File from Library", import_from_url: "Import File from URL", replace_from_device: "Replace File from Device", replace_from_library: "Replace File from Library", replace_from_url: "Replace File from URL", no_file_selected: "No File Selected", download_file: "Download File", collection_key: "Collection Key", name: "Name", primary_key_field: "Primary Key Field", type: "Type", creating_new_collection: "Creating New Collection", created_by: "Created By", created_on: "Created On", creating_collection_info: "Name the collection and setup its unique \u201Ckey\u201D field...", creating_collection_system: "Enable and rename any of these optional fields.", auto_increment_integer: "Auto-incremented integer", generated_uuid: "Generated UUID", manual_string: "Manually entered string", save_and_create_new: "Save and Create New", save_and_stay: "Save and Stay", save_as_copy: "Save as Copy", add_existing: "Add Existing", creating_items: "Creating Items", enable_create_button: "Enable Create Button", selecting_items: "Selecting Items", enable_select_button: "Enable Select Button", comments: "Comments", no_comments: "No Comments Yet", click_to_expand: "Click to Expand", select_item: "Select Item", no_items: "No items", search_items: "Search items...", disabled: "Disabled", information: "Information", report_bug: "Report Bug", request_feature: "Request Feature", interface_not_found: 'Interface "{interface}" not found.', reset_interface: "Reset Interface", display_not_found: 'Display "{display}" not found.', reset_display: "Reset Display", "list-m2a": "Builder (M2A)", item_count: "No Items | One Item | {count} Items", no_items_copy: "There are no items in this collection yet.", file_count: "No Files | One File | {count} Files", no_files_copy: "There are no files here.", user_count: "No Users | One User | {count} Users", no_users_copy: "There are no users in this role yet.", webhooks_count: "No Webhooks | One Webhook | {count} Webhooks", no_webhooks_copy: "No webhooks have been configured yet. Get started by creating one below.", no_notifications: "No Notifications", no_notifications_copy: "You're all caught up!", activity_log: "Activity Log", all_items: "All Items", any: "Any", csv: "CSV", no_collections: "No Collections", create_collection: "Create Collection", no_collections_copy_admin: "You don\u2019t have any Collections yet. Click the button below to get started.", no_collections_copy: "You don\u2019t have any Collections yet. Please contact your system administrator.", relationship_not_setup: "The relationship hasn't been configured correctly", display_template_not_setup: "The display template option is misconfigured", collection_field_not_setup: "The collection field option is misconfigured", select_a_collection: "Select a Collection", select_a_field: "Select a Field", active: "Active", move_to: "Move To...", copy: "Copy", copy_to: "Copy To...", no_other_dashboards_copy: "You don't have any other Dashboards yet.", inactive: "Inactive", users: "Users", activity: "Activity", activity_item: "Activity Item", action: "Action", ip_address: "IP Address", user_agent: "User Agent", webhooks: "Webhooks", decimals: "Decimals", value_decimals: "Value Decimals", min_value: "Min Value", max_value: "Max Value", automatic: "Automatic", field_width: "Field Width", add_filter: "Add Filter", upper_limit: "Upper limit...", lower_limit: "Lower limit...", user_directory: "User Directory", documentation: "Documentation", sidebar: "Sidebar", duration: "Duration", charset: "Charset", second: "second", file_moved: "File Moved", collection_created: "Collection Created", modified_on: "Modified On", card_size: "Card Size", sort_field: "Sort Field", add_sort_field: "Add Sort Field", sort: "Sort", status: "Status", remove: "Remove", toggle_manual_sorting: "Toggle Manual Sorting", bookmark_doesnt_exist: "Bookmark Doesn't Exist", bookmark_doesnt_exist_copy: "The bookmark you're trying to open couldn't be found.", bookmark_doesnt_exist_cta: "Return to collection", select_an_item: "Select an item...", edit: "Edit", enabled: "Enabled", disable_tfa: "Disable 2FA", tfa_scan_code: "Scan the code in your authenticator app to finish setting up 2FA", enter_otp_to_disable_tfa: "Enter the OTP to disable 2FA", create_account: "Create Account", account_created_successfully: "Account Created Successfully", auto_fill: "Auto Fill", corresponding_field: "Corresponding Field", errors: { COLLECTION_NOT_FOUND: "Collection doesn't exist", FIELD_NOT_FOUND: "Field not found", FORBIDDEN: "Forbidden", INVALID_CREDENTIALS: "Wrong username or password", INVALID_OTP: "Wrong one-time password", INVALID_PAYLOAD: "Invalid payload", INVALID_QUERY: "Invalid query", ITEM_LIMIT_REACHED: "Item limit reached", ITEM_NOT_FOUND: "Item not found", ROUTE_NOT_FOUND: "Not found", RECORD_NOT_UNIQUE: "Duplicate value detected", USER_SUSPENDED: "User Suspended", CONTAINS_NULL_VALUES: "Field contains null values", UNPROCESSABLE_ENTITY: "Unprocessable entity", INTERNAL_SERVER_ERROR: "Unexpected Error", NOT_NULL_VIOLATION: "Value can't be null", ILLEGAL_ASSET_TRANSFORMATION: "Image source too large to preview", UNKNOWN: "Unexpected Error" }, security: "Security", value_hashed: "Value Securely Hashed", bookmark_name: "Bookmark name...", create_bookmark: "Create Bookmark", edit_bookmark: "Edit Bookmark", bookmarks: "Bookmarks", presets: "Presets", unexpected_error: "Unexpected Error", unexpected_error_copy: "An unexpected error has occurred. Please try again later.", copy_details: "Copy Details", no_app_access: "No App Access", no_app_access_copy: "This user isn't allowed to use the admin app.", password_reset_sent: "We've sent you a secure link to reset your password", password_reset_successful: "Password successfully reset", back: "Back", filter: "Filter", editing_image: "Editing Image", square: "Square", free: "Free", flip_horizontal: "Flip Horizontal", flip_vertical: "Flip Vertical", aspect_ratio: "Aspect Ratio", rotate: "Rotate", all_users: "All Users", delete_collection: "Delete Collection", update_collection_success: "Updated Collection", delete_collection_success: "Deleted Collection", make_collection_visible: "Make Collection Visible", make_collection_hidden: "Make Collection Hidden", start_end_of_count_items: "{start}-{end} of {count} items", start_end_of_count_filtered_items: "{start}-{end} of {count} filtered items", one_item: "1 item", one_filtered_item: "1 filtered item", delete_collection_are_you_sure: "Are you sure you want to delete this collection? This will delete the collection and all items in it. This action is permanent.", collections_shown: "Collections Shown", visible_collections: "Visible Collections", hidden_collections: "Hidden Collections", show_hidden_collections: "Show Hidden Collections", hide_hidden_collections: "Hide Hidden Collections", show_header: "Show Header", unmanaged_collections: "Unconfigured Collections", system_collections: "System Collections", placeholder: "Placeholder", icon_left: "Icon Left", icon_right: "Icon Right", count_other_revisions: "{count} Other Revisions", font: "Font", sans_serif: "Sans Serif", serif: "Serif", monospace: "Monospace", divider: "Divider", color: "Color", circle: "Circle", empty_item: "Empty Item", log_in_with: "Log In with {provider}", conditional_styles: "Conditional Styles", advanced_settings: "Advanced Settings", advanced_filter: "Advanced Filter", delete_advanced_filter: "Delete Filter", change_advanced_filter_operator: "Change Operator", operators: { eq: "Equals", neq: "Doesn't equal", lt: "Less than", gt: "Greater than", lte: "Less than or equal to", gte: "Greater than or equal to", in: "Is one of", nin: "Is not one of", null: "Is null", nnull: "Isn't null", contains: "Contains", ncontains: "Doesn't contain", starts_with: "Starts with", nstarts_with: "Doesn't start with", ends_with: "Ends with", nends_with: "Doesn't end with", between: "Is between", nbetween: "Isn't between", empty: "Is empty", nempty: "Isn't empty", all: "Contains these keys", has: "Contains some of these keys", intersects: "Intersects", nintersects: "Doesn't intersect", intersects_bbox: "Intersects bounding box", nintersects_bbox: "Doesn't intersect bounding box" }, loading: "Loading...", drop_to_upload: "Drop to Upload", item: "Item", items: "Items", upload_file: "Upload File", upload_file_indeterminate: "Uploading File...", upload_file_success: "File Uploaded", upload_files_indeterminate: "Uploading files {done}/{total}", upload_files_success: "{count} Files Uploaded", upload_pending: "Upload Pending", drag_file_here: "Drag & Drop a File Here", click_to_browse: "Click to Browse", interface_options: "Interface Options", layout_options: "Layout Options", rows: "Rows", columns: "Columns", collection_setup: "Collection Setup", optional_system_fields: "Optional System Fields", value_unique: "Value has to be unique", all_activity: "All Activity", create_item: "Create Item", display_template: "Display Template", language_display_template: "Language Display Template", translations_display_template: "Translations Display Template", n_items_selected: "No Items Selected | 1 Item Selected | {n} Items Selected", per_page: "Per Page", all_files: "All Files", my_files: "My Files", recent_files: "Recent Files", create_folder: "Create Folder", edit_folder: "Edit Folder", folder_name: "Folder Name...", folder_key: "Folder Key...", add_file: "Add File", replace_file: "Replace File", no_results: "No Results", no_results_copy: "Adjust or clear search filters to see results.", clear_filters: "Clear Filters", saves_automatically: "Saves Automatically", role: "Role", rule: "Rule", user: "User", no_presets: "No Presets", no_presets_copy: "No presets or bookmarks have been saved yet.", no_presets_cta: "Add Preset", presets_only: "Presets Only", create: "Create", on_create: "On Create", on_update: "On Update", read: "Read", update: "Update", select_fields: "Select Fields", format_text: "Format Text", format_value: "Format Value", abbreviate_value: "Abbreviate Value", operator: "Operator", bold: "Bold", toggle: "Toggle", icon_on: "Icon On", icon_off: "Icon Off", label: "Label", insights: "Insights", dashboard: "Dashboard", panel: "Panel", panel_options: "Panel Options", panel_header: "Panel Header", panel_name_placeholder: "Name this panel...", panel_note_placeholder: "Optional details about this panel...", panel_delete_confirm: "Are you sure you want to delete this panel? This action can not be undone.", dashboard_delete_confirm: "Are you sure you want to delete this dashboard? This action can not be undone.", edit_dashboard: "Edit Dashboard", delete_dashboard: "Delete Dashboard", visible: "Visible", prefix_placeholder: "Text before value...", suffix_placeholder: "Text after value...", decimals_placeholder: "Number of decimal places...", no_dashboards: "No Dashboards", no_dashboards_copy: "You don\u2019t have any Dashboards yet.", no_data: "No Data", create_dashboard: "Create Dashboard", dashboard_name: "Dashboard Name", full_screen: "Full Screen", edit_panels: "Edit Panels", fit_to_screen: "Fit to Screen", image_url: "Image Url", alt_text: "Alternative Text", media: "Media", quality: "Quality", width: "Width", height: "Height", source: "Source", url_placeholder: "Enter an url...", display_text: "Display Text", display_text_placeholder: "Enter a display text...", interface_group_text_and_numbers: "Text & Numbers", interface_group_selection: "Selection", interface_group_relational: "Relational", interface_group_presentation: "Presentation", interface_group_groups: "Groups", interface_group_other: "Other", tooltip: "Tooltip", tooltip_placeholder: "Enter a tooltip...", unlimited: "Unlimited", open_link_in: "Open link in", new_tab: "New tab", current_tab: "Current tab", wysiwyg_options: { aligncenter: "Align Center", alignjustify: "Align Justify", alignleft: "Align Left", alignnone: "Align None", alignright: "Align Right", forecolor: "Foreground Color", backcolor: "Background Color", bold: "Bold", italic: "Italic", underline: "Underline", strikethrough: "Strikethrough", subscript: "Subscript", superscript: "Superscript", codeblock: "Code", blockquote: "Blockquote", bullist: "Bullet List", numlist: "Numbered List", hr: "Horizontal Rule", link: "Add/Edit Link", unlink: "Remove Link", media: "Add/Edit Media", image: "Add/Edit Image", copy: "Copy", cut: "Cut", paste: "Paste", heading: "Heading", h1: "Heading 1", h2: "Heading 2", h3: "Heading 3", h4: "Heading 4", h5: "Heading 5", h6: "Heading 6", fontselect: "Select Font", fontsizeselect: "Select Font Size", indent: "Indent", outdent: "Outdent", undo: "Undo", redo: "Redo", remove: "Remove", removeformat: "Remove Format", selectall: "Select All", table: "Table", visualaid: "View invisible elements", source_code: "Edit Source Code", fullscreen: "Full Screen", directionality: "Directionality" }, dropdown: "Dropdown", choices: "Choices", choices_option_configured_incorrectly: "Choices configured incorrectly", deselect: "Deselect", deselect_all: "Deselect All", other: "Other...", adding_user: "Adding User", unknown_user: "Unknown User", creating_in: "Creating Item in {collection}", editing_in: "Editing Item in {collection}", creating_unit: "Creating {unit}", editing_unit: "Editing {unit}", editing_in_batch: "Batch Editing {count} Items", no_options_available: "No options available", settings_data_model: "Data Model", settings_permissions: "Roles & Permissions", settings_project: "Project Settings", settings_webhooks: "Webhooks", settings_presets: "Presets & Bookmarks", one_or_more_options_are_missing: "One or more options are missing", scope: "Scope", select: "Select...", layout: "Layout", tree_view: "Tree View", changes_are_permanent: "Changes are permanent", preset_name_placeholder: "Serves as default when empty...", preset_search_placeholder: "Search query...", editing_preset: "Editing Preset", layout_preview: "Layout Preview", layout_setup: "Layout Setup", unsaved_changes: "Unsaved Changes", unsaved_changes_copy: "Are you sure you want to leave this page?", discard_changes: "Discard Changes", discard_all_changes: "Discard All Changes", discard_changes_copy: "Are you sure you want to discard all the changes made?", show_x_axis: "Show X Axis", show_y_axis: "Show Y Axis", keep_editing: "Keep Editing", page_help_collections_overview: "**Collections Overview** \u2014 List of all collections you have access to.", page_help_collections_collection: "**Browse Items** \u2014 Lists all {collection} items you have access to. Customize layout, filters, and sorting to tailor your view, and even save bookmarks of these different configurations for quick access.", page_help_collections_item: "**Item Detail** \u2014 A form for viewing and managing this item. This sidebar also contains a full history of revisions, and embedded comments.", page_help_activity_collection: "**Browse Activity** \u2014 A comprehensive listing of all your user's system and content activity.", page_help_docs_global: "**Documentation Overview** \u2014 Docs tailored specifically to this project's version and schema.", page_help_files_collection: "**File Library** \u2014 Lists all file assets uploaded to this project. Customize layout, filters, and sorting to tailor your view, and even save bookmarks of these different configurations for quick access.", page_help_files_item: "**File Detail** \u2014 A form for managing file metadata, editing the original asset, and updating access settings.", page_help_settings_project: "**Project Settings** \u2014 Your project's global configuration options.", page_help_settings_datamodel_collections: "**Data Model: Collections** \u2014 Lists all collections available. This includes visible, hidden, and system collections, as well as unmanaged database tables that can be added.", page_help_settings_datamodel_fields: "**Data Model: Collection** \u2014 A form for managing this collection and its fields.", page_help_settings_roles_collection: "**Browse Roles** \u2014 Lists the Admin, Public and custom User Roles.", page_help_settings_roles_item: "**Role Detail** \u2014 Manage a role's permissions and other settings.", page_help_settings_presets_collection: "**Browse Presets** \u2014 Lists all presets in the project, including: user, role, and global bookmarks, as well as default views.", page_help_settings_presets_item: "**Preset Detail** \u2014 A form for managing bookmarks and default collection presets.", page_help_settings_webhooks_collection: "**Browse Webhooks** \u2014 Lists all webhooks within the project.", page_help_settings_webhooks_item: "**Webhook Detail** \u2014 A form for creating and managing project webhooks.", page_help_users_collection: "**User Directory** \u2014 Lists all system users within this project.", page_help_users_item: "**User Detail** \u2014 Manage your account information, or view the details of other users.", page_help_insights_overview: "**Insights** \u2014 List of dashboards you have access to.", page_help_insights_dashboard: "**Dashboard** \u2014 Workspace for managing one or more panels", activity_feed: "Activity Feed", add_new: "Add New", create_new: "Create New", all: "All", none: "None", no_layout_collection_selected_yet: "No layout/collection selected yet", batch_delete_confirm: "No items have been selected | Are you sure you want to delete this item? This action can not be undone. | Are you sure you want to delete these {count} items? This action can not be undone.", cancel: "Cancel", no_upscale: "Don't upscale images", collection: "Collection", collections: "Collections", content: "Content", singleton: "Singleton", singleton_label: "Treat as single object", system_fields_locked: "System fields are locked and can't be edited", directus_collection: { directus_activity: "Accountability logs for all events", directus_collections: "Additional collection configuration and metadata", directus_dashboards: "Dashboards within the Insights module", directus_fields: "Additional field configuration and metadata", directus_files: "Metadata for all managed file assets", directus_folders: "Provides virtual directories for files", directus_migrations: "What version of the database you're using", directus_panels: "Individual panels within Insights dashboards", directus_permissions: "Access permissions for each role", directus_notifications: "Notifications sent to users", directus_presets: "Presets for collection defaults and bookmarks", directus_relations: "Relationship configuration and metadata", directus_revisions: "Data snapshots for all activity", directus_roles: "Permission groups for system users", directus_sessions: "User session information", directus_settings: "Project configuration options", directus_users: "System users for the platform", directus_webhooks: "Configuration for event-based HTTP requests" }, fields: { directus_activity: { item: "Item Primary Key", action: "Action", collection: "Collection", timestamp: "Action On", user: "Action By", comment: "Comment", user_agent: "User Agent", ip: "IP Address", revisions: "Revisions" }, directus_collections: { collection: "Collection", icon: "Icon", note: "Note", color: "Color", display_template: "Display Template", hidden: "Hidden", singleton: "Singleton", translations: "Collection Naming Translations", archive_app_filter: "Archive App Filter", archive_value: "Archive Value", unarchive_value: "Unarchive Value", sort_field: "Sort Field", accountability: "Activity & Revision Tracking", archive_field: "Archive Field", item_duplication_fields: "Item Duplication Fields" }, directus_files: { $thumbnail: "Thumbnail", title: "Title", description: "Description", tags: "Tags", location: "Location", storage: "Storage", filename_disk: "Filename (Disk)", filename_download: "Filename (Download)", metadata: "Metadata", type: "Mime Type", filesize: "Filesize", modified_by: "Modified By", modified_on: "Modified On", created_on: "Created On", created_by: "Created By", embed: "Embed", uploaded_by: "Uploaded By", folder: "Folder", width: "Width", uploaded_on: "Uploaded On", height: "Height", charset: "Charset", duration: "Duration" }, directus_users: { first_name: "First Name", last_name: "Last Name", email: "Email", password: "Password", avatar: "Avatar", location: "Location", title: "Title", description: "Description", tags: "Tags", user_preferences: "User Preferences", language: "Language", theme: "Theme", theme_auto: "Automatic (Based on System)", theme_light: "Light Mode", theme_dark: "Dark Mode", tfa_secret: "Two-Factor Authentication", admin_options: "Admin Options", status: "Status", status_draft: "Draft", status_invited: "Invited", status_active: "Active", status_suspended: "Suspended", status_archived: "Archived", role: "Role", token: "Token", token_placeholder: "Enter a secure access token...", provider: "Provider", external_identifier: "External Identifier", last_page: "Last Page", last_access: "Last Access" }, directus_settings: { jpg: "JPEG", png: "PNG", webP: "WebP", tiff: "Tiff", mapping: "Mapping", basemaps: "Basemaps", basemaps_raster: "Raster", basemaps_tile: "Raster TileJSON", basemaps_style: "Mapbox Style", mapbox_key: "Mapbox Access Token", mapbox_placeholder: "pk.eyJ1Ijo.....", transforms_note: "The Sharp method name and its arguments. See https://sharp.pixelplumbing.com/api-constructor for more information.", additional_transforms: "Additional Transformations", project_name: "Project Name", project_url: "Project URL", project_color: "Project Color", project_logo: "Project Logo", branding: "Branding & Style", public_foreground: "Public Foreground", public_background: "Public Background", public_note: "Public Note", auth_password_policy: "Auth Password Policy", auth_login_attempts: "Auth Login Attempts", files_and_thumbnails: "Files & Storage", storage_default_folder: "Default Folder", storage_asset_presets: "Transformation Presets", storage_asset_transform: "Allowed Transformations", overrides: "App Overrides", custom_css: "Custom CSS", module_bar: "Module Bar", transformations_all: "Allow all transformations", transformations_none: "Disable transformations", transformations_presets: "Limit transformations to presets below" }, directus_fields: { collection: "Collection Name", icon: "Collection Icon", note: "Note", hidden: "Hidden", singleton: "Singleton", translation: "Field Name Translations", display_template: "Template" }, directus_roles: { name: "Role Name", icon: "Role Icon", description: "Description", app_access: "App Access", admin_access: "Admin Access", ip_access: "IP Access", enforce_tfa: "Require 2FA", users: "Users in Role", module_list: "Module Navigation" }, directus_webhooks: { name: "Name", method: "Method", status: "Status", data: "Data", header: "Header", value: "Value", headers: "Request Headers", data_label: "Send Event Data", triggers: "Triggers", actions: "Actions", collections: "Collections" } }, field_options: { directus_settings: { project_name_placeholder: "My project...", project_color_note: "Login & Logo Background", project_logo_note: "White 40x40 SVG/PNG", public_note_placeholder: "A short, public message that supports markdown formatting...", security_divider_title: "Security", auth_password_policy: { none_text: "None \u2013 Not Recommended", weak_text: "Weak \u2013 Minimum 8 Characters", strong_text: "Strong \u2013 Upper / Lowercase / Numbers / Special" }, storage_asset_presets: { fit_label: "Fit", upscaling: "Upscaling", fit: { contain_text: "Contain (preserve aspect ratio)", cover_text: "Cover (forces exact size)", fit_text: "Fit inside", outside_text: "Fit outside" } }, additional_transforms: "Additional Transformations", transforms_note: "The Sharp method name and its arguments. See https://sharp.pixelplumbing.com/api-constructor for more information.", mapbox_key: "Mapbox Access Token", mapbox_placeholder: "pk.eyJ1Ijo.....", basemaps: "Basemaps", basemaps_name_placeholder: "Enter the basemap name...", basemaps_raster: "Raster", basemaps_tile: "Raster TileJSON", basemaps_style: "Mapbox Style", files_divider_title: "Files & Thumbnails", overrides_divider_title: "App Overrides" }, directus_activity: { login: "Login", create: "Create", update: "Update", delete: "Delete" }, directus_collections: { track_activity_revisions: "Track Activity & Revisions", only_track_activity: "Only Track Activity", do_not_track_anything: "Do Not Track Anything", collection_setup: "Collection Setup", note_placeholder: "A description of this collection...", hidden_label: "Hide within the App", singleton: "Treat as single object", language: "Language", translation: "Translation", translation_placeholder: "Enter a translation...", collection_name: "Collection Name", singular_unit: "Singular Unit", plural_unit: "Plural Unit", archive_divider: "Archive", archive_field_placeholder: "Choose a field...", archive_app_filter: "Enable App Archive Filter", archive_value: "Value set when archiving...", unarchive_value: "Value set when unarchiving...", sort_divider: "Sort", sort_field: "Choose a field...", accountability_divider: "Accountability", duplication_divider: "Duplication" }, directus_files: { title: "A unique title...", description: "An optional description...", location: "An optional location...", storage_divider: "File Naming", filename_disk: "Name on disk storage...", filename_download: "Name when downloading..." }, directus_roles: { name: "The unique name for this role...", description: "A description of this role...", ip_access: "Add allowed IP addresses, leave empty to allow all...", fields: { icon_name: "Icon", name_name: "Name", name_placeholder: "Enter a title...", link_name: "Link", link_placeholder: "Relative or absolute URL..." }, collections_name: "Collections", collections_addLabel: "Add Collection..." }, directus_users: { preferences_divider: "User Preferences", dropdown_auto: "Automatic (Based on System)", dropdown_light: "Light Mode", dropdown_dark: "Dark Mode", admin_divider: "Admin Options", status_dropdown_draft: "Draft", status_dropdown_invited: "Invited", status_dropdown_active: "Active", status_dropdown_suspended: "Suspended", status_dropdown_archived: "Archived", token: "Enter a secure access token..." }, directus_webhooks: { status_options_active: "Active", status_options_inactive: "Inactive", data_label: "Send Event Data", triggers_divider: "Triggers", actions_create: "Create", actions_update: "Update", actions_delete: "Delete", actions_login: "Login", headers: { header: "Header", value: "Value", add: "Add Header" } } }, no_fields_in_collection: 'There are no fields in "{collection}" yet', no_value: "No value", do_nothing: "Do Nothing", generate_and_save_uuid: "Generate and Save UUID", save_current_user_id: "Save Current User ID", save_current_user_role: "Save Current User Role", save_current_datetime: "Save Current Date/Time", always_open: "Always Open", start_open: "Start Open", start_collapsed: "Start Collapsed", block: "Block", inline: "Inline", comment: "Comment", relational_triggers: "Relational Triggers", referential_action_field_label_m2o: "On Delete of {collection}...", referential_action_field_label_o2m: "On Deselect of {collection}...", referential_action_no_action: "Prevent the deletion", referential_action_cascade: "Delete the {collection} item (cascade)", referential_action_set_null: "Nullify the {field} field", referential_action_set_default: "Set {field} to its default value", choose_action: "Choose Action", continue_label: "Continue", continue_as: "{name} is currently authenticated. If you recognize this account, press continue.", editing_role: "{role} Role", creating_webhook: "Creating Webhook", default_label: "Default", delete_label: "Delete", delete_are_you_sure: "This action is permanent and can not be undone. Are you sure you would like to proceed?", delete_field_are_you_sure: 'Are you sure you want to delete the field "{field}"? This action can not be undone.', description: "Description", done: "Done", duplicate: "Duplicate", limit: "Limit", email: "Email", embed: "Embed", fallback_icon: "Fallback Icon", field: "Field | Fields", file: "File", file_library: "File Library", forgot_password: "Forgot Password", hidden: "Hidden", icon: "Icon", info: "Info", normal: "Normal", success: "Success", warning: "Warning", danger: "Danger", junction_collection: "Junction Collection", latency: "Latency", login: "Log in", my_activity: "My Activity", not_authenticated: "Not Authenticated", authenticated: "Authenticated", options: "Options", otp: "One-Time Password", password: "Password", permissions: "Permissions", relationship: "Relationship", reset: "Reset", reset_password: "Reset Password", revisions: "Revisions", revert: "Revert", save: "Save", schema: "Schema", search: "Search", select_existing: "Select Existing", select_field_type: "Select a field type", select_interface: "Select an interface", settings: "Settings", sign_in: "Sign In", sign_out: "Sign Out", sign_out_confirm: "Are you sure you want to sign out?", something_went_wrong: "Something went wrong.", sort_direction: "Sort Direction", sort_asc: "Sort Ascending", sort_desc: "Sort Descending", template: "Template", require_value_to_be_set: "Require value to be set", translation: "Translation", translation_placeholder: "Enter a translation...", value: "Value", view_project: "View Project", weeks: {}, report_error: "Report Error", start: "Start", interfaces: { filter: { name: "Filter", description: "Configure a filter object.", add_filter: "Add Filter", add_group: "And / Or group", add_value: "Add Value", all: "All", any: "Any", and: "and", of_the_following: "of the following", no_rules: "No configured rules", change_value: "Click to change value", placeholder: "Drag rules here" }, "group-accordion": { name: "Accordion", description: "Display fields or groups as accordion sections", start: "Start", all_closed: "All Closed", first_opened: "First Opened", all_opened: "All Opened", accordion_mode: "Accordion Mode", max_one_section_open: "Max 1 Section Open" }, "presentation-links": { "presentation-links": "Button Links", links: "Links", description: "Configurable link buttons for launching dynamic URLs", style: "Style", primary: "Primary", link: "Links", button: "Buttons", error: "Cannot perform action" }, "select-multiple-checkbox": { checkboxes: "Checkboxes", description: "Choose between multiple options via checkboxes", allow_other: "Allow Other", show_more: "Show {count} more", items_shown: "Items Shown" }, "select-multiple-checkbox-tree": { name: "Checkboxes (Tree)", description: "Choose between multiple options via nested checkboxes", value_combining: "Value Combining", value_combining_note: "Controls what value is stored when nested selections are made.", show_all: "Show All", show_selected: "Show Selected" }, "input-code": { code: "Code", description: "Write or share code snippets", line_number: "Line Number", placeholder: "Enter code here..." }, "system-collection": { collection: "Collection", description: "Select between existing collections", include_system_collections: "Include System Collections" }, "system-collections": { collections: "Collections", description: "Select between existing collections", include_system_collections: "Include System Collections" }, "select-color": { color: "Color", description: "Enter or select a color value", placeholder: "Choose a color...", preset_colors: "Preset Colors", preset_colors_add_label: "Add new color...", name_placeholder: "Enter color name..." }, datetime: { datetime: "Datetime", description: "Enter dates and times", include_seconds: "Include Seconds", set_to_now: "Set to Now", use_24: "Use 24-Hour Format" }, "system-display-template": { "display-template": "Display Template", description: "Mix static text and dynamic field values", collection_field: "Collection field", collection_field_not_setup: "The collection field option is misconfigured", select_a_collection: "Select a Collection" }, "presentation-divider": { divider: "Divider", description: "Label and divide fields into sections", title_placeholder: "Enter a title, or leave blank to only show a line...", inline_title: "Inline Title", inline_title_label: "Show title inside line", margin_top: "Margin Top", margin_top_label: "Increase Top Margin" }, "select-dropdown": { description: "Select a value from a dropdown", choices_placeholder: "Add a new choice", allow_other: "Allow Other", allow_other_label: "Allow Other Values", allow_none: "Allow None", allow_none_label: "Allow No Selection", choices_name_placeholder: "Enter a name...", choices_value_placeholder: "Enter a value..." }, "select-multiple-dropdown": { "select-multiple-dropdown": "Dropdown (Multiple)", description: "Select multiple values from a dropdown" }, file: { file: "File", description: "Select or upload a file" }, files: { files: "Files", description: "Select or upload multiple files" }, "input-hash": { hash: "Hash", description: "Enter a value to be hashed", masked: "Masked", masked_label: "Hide the true values" }, "select-icon": { icon: "Icon", description: "Select an icon from a dropdown", search_for_icon: "Search for icon..." }, "file-image": { image: "Image", description: "Select or upload an image" }, "system-interface": { interface: "Interface", description: "Select an existing interface", placeholder: "Select an interface..." }, "system-interface-options": { "interface-options": "Interface Options", description: "A modal for selecting options of an interface" }, "list-m2m": { "many-to-many": "Many to Many", description: "Select multiple related junction items" }, "select-dropdown-m2o": { "many-to-one": "Many to One", description: "Select a single related item", display_template: "Display Template" }, "input-rich-text-md": { markdown: "Markdown", description: "Enter and preview markdown", customSyntax: "Custom Blocks", customSyntax_label: "Add custom syntax types", customSyntax_add: "Add custom syntax", box: "Block / Inline", imageToken: "Image Token", imageToken_label: "What (static) token to append to image sources", preview: "Preview", editor: "Editor" }, map: { map: "Map", description: "Select a location on a map", zoom: "Zoom", geometry_type: "Geometry Type", geometry_format: "Geometry Format", default_view: "Default View", invalid_options: "Invalid options", invalid_format: "Invalid format ({format})", unexpected_geometry: "Expected {expected}, got {got}.", fit_bounds: "Fit view to data", native: "Native", geojson: "GeoJSON", lnglat: "Longitude, Latitude", wkt: "WKT", wkb: "WKB", click_to_select: "Click to select {geometry}" }, "presentation-notice": { notice: "Notice", description: "Display a short notice", text: "Enter notice content here..." }, "list-o2m": { "one-to-many": "One to Many", description: "Select multiple related items", no_collection: "The collection could not be found" }, "system-folder": { folder: "Folder", description: "Select a folder", field_hint: "Folder for uploaded files. Does not affect existing files.", root_name: "File Library Root", system_default: "System Defaults" }, "select-radio": { "radio-buttons": "Radio Buttons", description: "Select one of multiple choices" }, list: { repeater: "Repeater", description: "Create multiple entries of the same structure", edit_fields: "Edit Fields", add_label: '"Create New" Label', field_name_placeholder: "Enter field name...", field_note_placeholder: "Enter field note..." }, slider: { slider: "Slider", description: "Select a number using a slider", always_show_value: "Always show value" }, tags: { tags: "Tags", description: "Select or add tags", whitespace: "Whitespace", hyphen: "Replace with hyphen", underscore: "Replace with underscore", remove: "Remove whitespace", capitalization: "Capitalization", uppercase: "Convert Uppercase", lowercase: "Convert Lowercase", auto_formatter: "Use Title Auto-Formatter", alphabetize: "Alphabetize", alphabetize_label: "Force Alphabetical Order", add_tags: "Add tags..." }, input: { input: "Input", description: "Manually enter a value", trim: "Trim", trim_label: "Trim the start and end", mask: "Masked", mask_label: "Hide the real value", clear: "Cleared Value", clear_label: "Save as empty string", minimum_value: "Minimum Value", maximum_value: "Maximum Value", step_interval: "Step Interval", slug: "Slugify", slug_label: "Make entered value URL safe" }, "input-multiline": { textarea: "Textarea", description: "Enter multiline plain-text" }, boolean: { toggle: "Toggle", description: "Switch between on and off", label_placeholder: "Enter a label...", label_default: "Enabled" }, translations: { display_template: "Display Template", no_collection: "No Collection", toggle_split_view: "Toggle Split View", language_field: "Language Indicator Field" }, "list-o2m-tree-view": { description: "Tree view for nested recursive one-to-many items", recursive_only: "The tree view interface only works for recursive relationships." }, user: { user: "User", description: "Select an existing directus user", select_mode: "Select Mode", modes: { auto: "Auto", dropdown: "Dropdown", modal: "Modal" } }, "input-rich-text-html": { wysiwyg: "WYSIWYG", description: "A rich-text editor writing HTML content", toolbar: "Toolbar", custom_formats: "Custom Formats", options_override: "Options Override" }, "input-autocomplete-api": { "input-autocomplete-api": "Autocomplete Input (API)", description: "A search typeahead for external API values.", results_path: "Results Path", value_path: "Value Path", trigger: "Trigger", rate: "Rate" }, "group-raw": { name: "Raw Group", description: "Render the fields as-is" }, "group-detail": { name: "Detail Group", description: "Render the fields as a collapsable section", show_header: "Show Group Header", header_icon: "Header Icon", header_color: "Header Color", start_open: "Start Open", start_closed: "Start Closed" } }, displays: { translations: { translations: "Translations", description: "Preview translations", enable: "Enable", user_language: "Use Current User Language", default_language: "Default Language", language_field: "Language Indicator Field" }, boolean: { boolean: "Boolean", description: "Display on and off states", label_on: "Label On", label_on_placeholder: "Enter an on label...", label_off: "Label Off", label_off_placeholder: "Enter an off label...", icon_on: "Icon On", icon_off: "Icon Off", color_on: "Color On", color_off: "Color Off" }, collection: { collection: "Collection", description: "Display a collection", icon_label: "Show the collection's icon" }, color: { color: "Color", description: "Display a colored dot", default_color: "Default Color" }, datetime: { datetime: "Datetime", description: "Display values related to time", format: "Format", format_note: "The custom format accepts the __[Date Field Symbol Table](https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table)__", long: "Long", short: "Short", relative: "Relative", relative_label: "Show relative time, eg: 5 minutes ago" }, file: { file: "File", description: "Display files" }, filesize: { filesize: "File Size", description: "Display the size of a file" }, "formatted-value": { "formatted-value": "Formatted Value", description: "Display a formatted version of the text", format_title: "Format Title", format_title_label: "Auto-format casing", bold_label: "Use bold style" }, "formatted-json-value": { "formatted-json-value": "Formatted JSON value", description: "Display a formatted version of the object" }, icon: { icon: "Icon", description: "Display an icon", filled: "Filled", filled_label: "Use the filled variant" }, image: { image: "Image", description: "Display a tiny image preview", circle: "Circle", circle_label: "Display as a circle" }, labels: { labels: "Labels", description: "Display either a single or a list of labels", default_foreground: "Default Foreground", default_background: "Default Background", format_label: "Format each label", show_as_dot: "Show As Dot", choices_value_placeholder: "Enter a value...", choices_text_placeholder: "Enter a text..." }, "mime-type": { "mime-type": "MIME Type", description: "Show the MIME-Type of a file", extension_only: "Extension Only", extension_only_label: "Only show the file extension" }, rating: { rating: "Rating", description: "Visualize a number as stars relative to the max-value", simple: "Simple", simple_label: "Show stars in a simple format" }, raw: { raw: "Raw Value" }, "related-values": { "related-values": "Related Values", description: "Display relative values" }, user: { user: "User", description: "Display a directus user", avatar: "Avatar", name: "Name", both: "Both", circle_label: "Show user in a circle" } }, layouts: { cards: { cards: "Cards", image_source: "Image Source", image_fit: "Image Fit", crop: "Crop", contain: "Contain", title: "Title", subtitle: "Subtitle" }, tabular: { tabular: "Table", fields: "Fields", spacing: "Spacing", comfortable: "Comfortable", compact: "Compact", cozy: "Cozy" }, calendar: { calendar: "Calendar", start_date_field: "Start Date Field", end_date_field: "End Date Field" }, map: { map: "Map", basemap: "Basemap", layers: "Layers", cluster_options: "Clustering options", cluster: "Cluster Nearby Data", cluster_radius: "Cluster radius", cluster_minpoints: "Cluster minimum size", cluster_maxzoom: "Maximum zoom for clustering", field: "Geospatial Field", invalid_geometry: "Invalid geometry", find_location: "Find location...", default_template: "Using Collection Default...", no_compatible_fields: "No compatible fields" } }, panels: { metric: { name: "Metric", description: "Show a single value based on a query", field: "Field" }, time_series: { name: "Time Series", description: "Render a line chart based on values over time", date_field: "Date Field", value_field: "Value Field" }, label: { name: "Label", description: "Show some text" }, list: { name: "List", description: "Filter and list fields from a collection" } } }, lu = $.identifier, ou = $.avatar, au = $.default_provider, iu = $.published, su = $.draft, ru = $.archived, du = $.modules, uu = $.module_bar, cu = $.tile_size, pu = $.edit_field, mu = $.conditions, fu = $.maps, vu = $.item_creation, _u = $.item_revision, yu = $.enter_a_name, gu = $.duplicate_field, hu = $.half_width, bu = $.full_width, $u = $.group, wu = $.and, ku = $.or, Su = $.fill_width, Cu = $.field_name_translations, Vu = $.enter_password_to_enable_tfa, Fu = $.add_field, Au = $.role_name, Iu = $.branch, Eu = $.leaf, Du = $.indeterminate, Tu = $.edit_collection, Pu = $.exclusive, Ou = $.children, Lu = $.db_only_click_to_configure, ju = $.show_archived_items, Ru = $.edited, Mu = $.required, Uu = $.required_for_app_access, Nu = $.requires_value, Bu = $.create_preset, qu = $.create_panel, zu = $.create_role, Ku = $.create_user, Hu = $.delete_panel, Wu = $.create_webhook, Gu = $.invite_users, Ju = $.invite, Qu = $.email_already_invited, Xu = $.subject, Zu = $.inbox, Yu = $.emails, xu = $.connection_excellent, ec = $.connection_good, tc = $.connection_fair, nc = $.connection_poor, lc = $.primary, oc = $.rename_folder, ac = $.delete_folder, ic = $.prefix, sc = $.suffix, rc = $.reset_bookmark, dc = $.rename_bookmark, uc = $.update_bookmark, cc = $.delete_bookmark, pc = $.delete_bookmark_copy, mc = $.logoutReason, fc = $.public_label, vc = $.public_description, _c = $.not_allowed, yc = $.directus_version, gc = $.node_version, hc = $.node_uptime, bc = $.os_type, $c = $.os_version, wc = $.os_uptime, kc = $.os_totalmem, Sc = $.archive, Cc = $.archive_confirm, Vc = $.archive_confirm_count, Fc = $.reset_system_permissions_to, Ac = $.reset_system_permissions_copy, Ic = $.the_following_are_minimum_permissions, Ec = $.app_access_minimum, Dc = $.recommended_defaults, Tc = $.unarchive, Pc = $.unarchive_confirm, Oc = $.nested_files_folders_will_be_moved, Lc = $.unknown_validation_errors, jc = $.validationError, Rc = $.all_access, Mc = $.no_access, Uc = $.use_custom, Nc = $.nullable, Bc = $.allow_null_value, qc = $.allow_multiple, zc = $.allow_multiple_to_be_open, Kc = $.enter_value_to_replace_nulls, Hc = $.field_standard, Wc = $.field_presentation, Gc = $.field_file, Jc = $.field_files, Qc = $.field_m2o, Xc = $.field_m2a, Zc = $.field_o2m, Yc = $.field_m2m, xc = $.field_translations, ep = $.field_group, tp = $.item_permissions, np = $.field_permissions, lp = $.field_validation, op = $.field_presets, ap = $.permissions_for_role, ip = $.fields_for_role, sp = $.validation_for_role, rp = $.presets_for_role, dp = $.presentation_and_aliases, up = $.revision_post_create, cp = $.revision_post_update, pp = $.changes_made, mp = $.no_relational_data, fp = $.hide_field_on_detail, vp = $.show_field_on_detail, _p = $.delete_field, yp = $.fields_and_layout, gp = $.field_create_success, hp = $.field_update_success, bp = $.duplicate_where_to, $p = $.language, wp = $.aggregate_function, kp = $.aggregate_precision, Sp = $.group_aggregation, Cp = $.group_precision, Vp = $.global, Fp = $.admins_have_all_permissions, Ap = $.camera, Ip = $.show_zero, Ep = $.create_in_advanced_field_creation_mode, Dp = $.continue_in_advanced_field_creation_mode, Tp = $.sum, Pp = $.sum_distinct, Op = $.avg, Lp = $.avg_distinct, jp = $.count, Rp = $.count_distinct, Mp = $.min, Up = $.max, Np = $.exposure, Bp = $.shutter, qp = $.iso, zp = $.focal_length, Kp = $.schema_setup_key, Hp = $.create_field, Wp = $.creating_new_field, Gp = $.field_in_collection, Jp = $.reset_page_preferences, Qp = $.hidden_field, Xp = $.hidden_on_detail, Zp = $.disabled_editing_value, Yp = $.key, xp = $.alias, em = $.bigInteger, tm = $.boolean, nm = $.date, lm = $.date_range, om = $.datetime, am = $.dateTime, im = $.precision, sm = $.decimal, rm = $.float, dm = $.integer, um = $.json, cm = $.xml, pm = $.string, mm = $.text, fm = $.time, vm = $.timestamp, _m = $.uuid, ym = $.hash, gm = $.geometry, hm = $.not_available_for_type, bm = $.create_translations, $m = $.auto_refresh, wm = $.refresh_interval, km = $.no_refresh, Sm = $.refresh_interval_seconds, Cm = $.refresh_interval_minutes, Vm = $.auto_generate, Fm = $.this_will_auto_setup_fields_relations, Am = $.click_here, Im = $.to_manually_setup_translations, Em = $.click_to_manage_translated_fields, Dm = $.fields_group, Tm = $.no_collections_found, Pm = $.new_data_alert, Om = $.search_collection, Lm = $.new_field, jm = $.new_collection, Rm = $.add_m2o_to_collection, Mm = $.add_o2m_to_collection, Um = $.add_m2m_to_collection, Nm = $.choose_a_type, Bm = $.determined_by_relationship, qm = $.add_note, zm = $.add_link, Km = $.custom_link, Hm = $.default_value, Wm = $.standard_field, Gm = $.single_file, Jm = $.multiple_files, Qm = $.m2o_relationship, Xm = $.o2m_relationship, Zm = $.m2m_relationship, Ym = $.m2a_relationship, xm = $.invalid_item, ef = $.next, tf = $.field_name, nf = $.translations, lf = $.no_translations, of = $.note, af = $.enter_a_value, sf = $.enter_a_placeholder, rf = $.length, df = $.precision_scale, uf = $.readonly, cf = $.unique, pf = $.updated_on, mf = $.updated_by, ff = $.primary_key, vf = $.foreign_key, _f = $.finish_setup, yf = $.dismiss, gf = $.raw_value, hf = $.edit_raw_value, bf = $.enter_raw_value, $f = $.clear_value, wf = $.clear_changes, kf = $.reset_to_default, Sf = $.undo_changes, Cf = $.notifications, Vf = $.show_all_activity, Ff = $.page_not_found, Af = $.page_not_found_body, If = $.confirm_revert, Ef = $.confirm_revert_body, Df = $.display, Tf = $.settings_update_success, Pf = $.title, Of = $.revision_delta_created, Lf = $.revision_delta_created_externally, jf = $.revision_delta_updated, Rf = $.revision_delta_deleted, Mf = $.revision_delta_reverted, Uf = $.revision_delta_other, Nf = $.revision_delta_by, Bf = $.private_user, qf = $.creation_preview, zf = $.revision_preview, Kf = $.updates_made, Hf = $.leave_comment, Wf = $.post_comment_success, Gf = $.item_create_success, Jf = $.item_update_success, Qf = $.item_delete_success, Xf = $.this_collection, Zf = $.related_collection, Yf = $.related_collections, xf = $.translations_collection, ev = $.languages_collection, tv = $.export_data, nv = $.format, lv = $.use_current_filters_settings, ov = $.export_collection, av = $.last_page, iv = $.last_access, sv = $.fill_template, rv = $.a_unique_table_name, dv = $.a_unique_column_name, uv = $.enable_custom_values, cv = $.submit, pv = $.move_to_folder, mv = $.move, fv = $.system, vv = $.add_field_related, _v = $.interface_label, yv = $.today, gv = $.yesterday, hv = $.delete_comment, bv = $.minutes, $v = $.hours, wv = $.month, kv = $.year, Sv = $.select_all, Cv = $.months, Vv = $.drag_mode, Fv = $.cancel_crop, Av = $.original, Iv = $.url, Ev = $.import_label, Dv = $.file_details, Tv = $.dimensions, Pv = $.size, Ov = $.created, Lv = $.modified, jv = $.checksum, Rv = $.owner, Mv = $.edited_by, Uv = $.folder, Nv = $.zoom, Bv = $.download, qv = $.open, zv = $.open_in_new_window, Kv = $.open_folder, Hv = $.foreground_color, Wv = $.background_color, Gv = $.upload_from_device, Jv = $.choose_from_library, Qv = $.import_from_url, Xv = $.replace_from_device, Zv = $.replace_from_library, Yv = $.replace_from_url, xv = $.no_file_selected, e_ = $.download_file, t_ = $.collection_key, n_ = $.name, l_ = $.primary_key_field, o_ = $.type, a_ = $.creating_new_collection, i_ = $.created_by, s_ = $.created_on, r_ = $.creating_collection_info, d_ = $.creating_collection_system, u_ = $.auto_increment_integer, c_ = $.generated_uuid, p_ = $.manual_string, m_ = $.save_and_create_new, f_ = $.save_and_stay, v_ = $.save_as_copy, __ = $.add_existing, y_ = $.creating_items, g_ = $.enable_create_button, h_ = $.selecting_items, b_ = $.enable_select_button, $_ = $.comments, w_ = $.no_comments, k_ = $.click_to_expand, S_ = $.select_item, C_ = $.no_items, V_ = $.search_items, F_ = $.disabled, A_ = $.information, I_ = $.report_bug, E_ = $.request_feature, D_ = $.interface_not_found, T_ = $.reset_interface, P_ = $.display_not_found, O_ = $.reset_display, L_ = $.item_count, j_ = $.no_items_copy, R_ = $.file_count, M_ = $.no_files_copy, U_ = $.user_count, N_ = $.no_users_copy, B_ = $.webhooks_count, q_ = $.no_webhooks_copy, z_ = $.no_notifications, K_ = $.no_notifications_copy, H_ = $.activity_log, W_ = $.all_items, G_ = $.any, J_ = $.csv, Q_ = $.no_collections, X_ = $.create_collection, Z_ = $.no_collections_copy_admin, Y_ = $.no_collections_copy, x_ = $.relationship_not_setup, ey = $.display_template_not_setup, ty = $.collection_field_not_setup, ny = $.select_a_collection, ly = $.select_a_field, oy = $.active, ay = $.move_to, iy = $.copy, sy = $.copy_to, ry = $.no_other_dashboards_copy, dy = $.inactive, uy = $.users, cy = $.activity, py = $.activity_item, my = $.action, fy = $.ip_address, vy = $.user_agent, _y = $.webhooks, yy = $.decimals, gy = $.value_decimals, hy = $.min_value, by = $.max_value, $y = $.automatic, wy = $.field_width, ky = $.add_filter, Sy = $.upper_limit, Cy = $.lower_limit, Vy = $.user_directory, Fy = $.documentation, Ay = $.sidebar, Iy = $.duration, Ey = $.charset, Dy = $.second, Ty = $.file_moved, Py = $.collection_created, Oy = $.modified_on, Ly = $.card_size, jy = $.sort_field, Ry = $.add_sort_field, My = $.sort, Uy = $.status, Ny = $.remove, By = $.toggle_manual_sorting, qy = $.bookmark_doesnt_exist, zy = $.bookmark_doesnt_exist_copy, Ky = $.bookmark_doesnt_exist_cta, Hy = $.select_an_item, Wy = $.edit, Gy = $.enabled, Jy = $.disable_tfa, Qy = $.tfa_scan_code, Xy = $.enter_otp_to_disable_tfa, Zy = $.create_account, Yy = $.account_created_successfully, xy = $.auto_fill, eg = $.corresponding_field, tg = $.errors, ng = $.security, lg = $.value_hashed, og = $.bookmark_name, ag = $.create_bookmark, ig = $.edit_bookmark, sg = $.bookmarks, rg = $.presets, dg = $.unexpected_error, ug = $.unexpected_error_copy, cg = $.copy_details, pg = $.no_app_access, mg = $.no_app_access_copy, fg = $.password_reset_sent, vg = $.password_reset_successful, _g = $.back, yg = $.filter, gg = $.editing_image, hg = $.square, bg = $.free, $g = $.flip_horizontal, wg = $.flip_vertical, kg = $.aspect_ratio, Sg = $.rotate, Cg = $.all_users, Vg = $.delete_collection, Fg = $.update_collection_success, Ag = $.delete_collection_success, Ig = $.make_collection_visible, Eg = $.make_collection_hidden, Dg = $.start_end_of_count_items, Tg = $.start_end_of_count_filtered_items, Pg = $.one_item, Og = $.one_filtered_item, Lg = $.delete_collection_are_you_sure, jg = $.collections_shown, Rg = $.visible_collections, Mg = $.hidden_collections, Ug = $.show_hidden_collections, Ng = $.hide_hidden_collections, Bg = $.show_header, qg = $.unmanaged_collections, zg = $.system_collections, Kg = $.placeholder, Hg = $.icon_left, Wg = $.icon_right, Gg = $.count_other_revisions, Jg = $.font, Qg = $.sans_serif, Xg = $.serif, Zg = $.monospace, Yg = $.divider, xg = $.color, eh = $.circle, th = $.empty_item, nh = $.log_in_with, lh = $.conditional_styles, oh = $.advanced_settings, ah = $.advanced_filter, ih = $.delete_advanced_filter, sh = $.change_advanced_filter_operator, rh = $.operators, dh = $.loading, uh = $.drop_to_upload, ch = $.item, ph = $.items, mh = $.upload_file, fh = $.upload_file_indeterminate, vh = $.upload_file_success, _h = $.upload_files_indeterminate, yh = $.upload_files_success, gh = $.upload_pending, hh = $.drag_file_here, bh = $.click_to_browse, $h = $.interface_options, wh = $.layout_options, kh = $.rows, Sh = $.columns, Ch = $.collection_setup, Vh = $.optional_system_fields, Fh = $.value_unique, Ah = $.all_activity, Ih = $.create_item, Eh = $.display_template, Dh = $.language_display_template, Th = $.translations_display_template, Ph = $.n_items_selected, Oh = $.per_page, Lh = $.all_files, jh = $.my_files, Rh = $.recent_files, Mh = $.create_folder, Uh = $.edit_folder, Nh = $.folder_name, Bh = $.folder_key, qh = $.add_file, zh = $.replace_file, Kh = $.no_results, Hh = $.no_results_copy, Wh = $.clear_filters, Gh = $.saves_automatically, Jh = $.role, Qh = $.rule, Xh = $.user, Zh = $.no_presets, Yh = $.no_presets_copy, xh = $.no_presets_cta, eb = $.presets_only, tb = $.create, nb = $.on_create, lb = $.on_update, ob = $.read, ab = $.update, ib = $.select_fields, sb = $.format_text, rb = $.format_value, db = $.abbreviate_value, ub = $.operator, cb = $.bold, pb = $.toggle, mb = $.icon_on, fb = $.icon_off, vb = $.label, _b = $.insights, yb = $.dashboard, gb = $.panel, hb = $.panel_options, bb = $.panel_header, $b = $.panel_name_placeholder, wb = $.panel_note_placeholder, kb = $.panel_delete_confirm, Sb = $.dashboard_delete_confirm, Cb = $.edit_dashboard, Vb = $.delete_dashboard, Fb = $.visible, Ab = $.prefix_placeholder, Ib = $.suffix_placeholder, Eb = $.decimals_placeholder, Db = $.no_dashboards, Tb = $.no_dashboards_copy, Pb = $.no_data, Ob = $.create_dashboard, Lb = $.dashboard_name, jb = $.full_screen, Rb = $.edit_panels, Mb = $.fit_to_screen, Ub = $.image_url, Nb = $.alt_text, Bb = $.media, qb = $.quality, zb = $.width, Kb = $.height, Hb = $.source, Wb = $.url_placeholder, Gb = $.display_text, Jb = $.display_text_placeholder, Qb = $.interface_group_text_and_numbers, Xb = $.interface_group_selection, Zb = $.interface_group_relational, Yb = $.interface_group_presentation, xb = $.interface_group_groups, e0 = $.interface_group_other, t0 = $.tooltip, n0 = $.tooltip_placeholder, l0 = $.unlimited, o0 = $.open_link_in, a0 = $.new_tab, i0 = $.current_tab, s0 = $.wysiwyg_options, r0 = $.dropdown, d0 = $.choices, u0 = $.choices_option_configured_incorrectly, c0 = $.deselect, p0 = $.deselect_all, m0 = $.other, f0 = $.adding_user, v0 = $.unknown_user, _0 = $.creating_in, y0 = $.editing_in, g0 = $.creating_unit, h0 = $.editing_unit, b0 = $.editing_in_batch, $0 = $.no_options_available, w0 = $.settings_data_model, k0 = $.settings_permissions, S0 = $.settings_project, C0 = $.settings_webhooks, V0 = $.settings_presets, F0 = $.one_or_more_options_are_missing, A0 = $.scope, I0 = $.select, E0 = $.layout, D0 = $.tree_view, T0 = $.changes_are_permanent, P0 = $.preset_name_placeholder, O0 = $.preset_search_placeholder, L0 = $.editing_preset, j0 = $.layout_preview, R0 = $.layout_setup, M0 = $.unsaved_changes, U0 = $.unsaved_changes_copy, N0 = $.discard_changes, B0 = $.discard_all_changes, q0 = $.discard_changes_copy, z0 = $.show_x_axis, K0 = $.show_y_axis, H0 = $.keep_editing, W0 = $.page_help_collections_overview, G0 = $.page_help_collections_collection, J0 = $.page_help_collections_item, Q0 = $.page_help_activity_collection, X0 = $.page_help_docs_global, Z0 = $.page_help_files_collection, Y0 = $.page_help_files_item, x0 = $.page_help_settings_project, e1 = $.page_help_settings_datamodel_collections, t1 = $.page_help_settings_datamodel_fields, n1 = $.page_help_settings_roles_collection, l1 = $.page_help_settings_roles_item, o1 = $.page_help_settings_presets_collection, a1 = $.page_help_settings_presets_item, i1 = $.page_help_settings_webhooks_collection, s1 = $.page_help_settings_webhooks_item, r1 = $.page_help_users_collection, d1 = $.page_help_users_item, u1 = $.page_help_insights_overview, c1 = $.page_help_insights_dashboard, p1 = $.activity_feed, m1 = $.add_new, f1 = $.create_new, v1 = $.all, _1 = $.none, y1 = $.no_layout_collection_selected_yet, g1 = $.batch_delete_confirm, h1 = $.cancel, b1 = $.no_upscale, $1 = $.collection, w1 = $.collections, k1 = $.content, S1 = $.singleton, C1 = $.singleton_label, V1 = $.system_fields_locked, F1 = $.directus_collection, A1 = $.fields, I1 = $.field_options, E1 = $.no_fields_in_collection, D1 = $.no_value, T1 = $.do_nothing, P1 = $.generate_and_save_uuid, O1 = $.save_current_user_id, L1 = $.save_current_user_role, j1 = $.save_current_datetime, R1 = $.always_open, M1 = $.start_open, U1 = $.start_collapsed, N1 = $.block, B1 = $.inline, q1 = $.comment, z1 = $.relational_triggers, K1 = $.referential_action_field_label_m2o, H1 = $.referential_action_field_label_o2m, W1 = $.referential_action_no_action, G1 = $.referential_action_cascade, J1 = $.referential_action_set_null, Q1 = $.referential_action_set_default, X1 = $.choose_action, Z1 = $.continue_label, Y1 = $.continue_as, x1 = $.editing_role, e2 = $.creating_webhook, t2 = $.default_label, n2 = $.delete_label, l2 = $.delete_are_you_sure, o2 = $.delete_field_are_you_sure, a2 = $.description, i2 = $.done, s2 = $.duplicate, r2 = $.limit, d2 = $.email, u2 = $.embed, c2 = $.fallback_icon, p2 = $.field, m2 = $.file, f2 = $.file_library, v2 = $.forgot_password, _2 = $.hidden, y2 = $.icon, g2 = $.info, h2 = $.normal, b2 = $.success, $2 = $.warning, w2 = $.danger, k2 = $.junction_collection, S2 = $.latency, C2 = $.login, V2 = $.my_activity, F2 = $.not_authenticated, A2 = $.authenticated, I2 = $.options, E2 = $.otp, D2 = $.password, T2 = $.permissions, P2 = $.relationship, O2 = $.reset, L2 = $.reset_password, j2 = $.revisions, R2 = $.revert, M2 = $.save, U2 = $.schema, N2 = $.search, B2 = $.select_existing, q2 = $.select_field_type, z2 = $.select_interface, K2 = $.settings, H2 = $.sign_in, W2 = $.sign_out, G2 = $.sign_out_confirm, J2 = $.something_went_wrong, Q2 = $.sort_direction, X2 = $.sort_asc, Z2 = $.sort_desc, Y2 = $.template, x2 = $.require_value_to_be_set, e$ = $.translation, t$ = $.translation_placeholder, n$ = $.value, l$ = $.view_project, o$ = $.weeks, a$ = $.report_error, i$ = $.start, s$ = $.interfaces, r$ = $.displays, d$ = $.layouts, u$ = $.panels, c$ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: $, identifier: lu, avatar: ou, default_provider: au, published: iu, draft: su, archived: ru, modules: du, module_bar: uu, tile_size: cu, edit_field: pu, conditions: mu, maps: fu, item_creation: vu, item_revision: _u, enter_a_name: yu, duplicate_field: gu, half_width: hu, full_width: bu, group: $u, and: wu, or: ku, fill_width: Su, field_name_translations: Cu, enter_password_to_enable_tfa: Vu, add_field: Fu, role_name: Au, branch: Iu, leaf: Eu, indeterminate: Du, edit_collection: Tu, exclusive: Pu, children: Ou, db_only_click_to_configure: Lu, show_archived_items: ju, edited: Ru, required: Mu, required_for_app_access: Uu, requires_value: Nu, create_preset: Bu, create_panel: qu, create_role: zu, create_user: Ku, delete_panel: Hu, create_webhook: Wu, invite_users: Gu, invite: Ju, email_already_invited: Qu, subject: Xu, inbox: Zu, emails: Yu, connection_excellent: xu, connection_good: ec, connection_fair: tc, connection_poor: nc, primary: lc, rename_folder: oc, delete_folder: ac, prefix: ic, suffix: sc, reset_bookmark: rc, rename_bookmark: dc, update_bookmark: uc, delete_bookmark: cc, delete_bookmark_copy: pc, logoutReason: mc, public_label: fc, public_description: vc, not_allowed: _c, directus_version: yc, node_version: gc, node_uptime: hc, os_type: bc, os_version: $c, os_uptime: wc, os_totalmem: kc, archive: Sc, archive_confirm: Cc, archive_confirm_count: Vc, reset_system_permissions_to: Fc, reset_system_permissions_copy: Ac, the_following_are_minimum_permissions: Ic, app_access_minimum: Ec, recommended_defaults: Dc, unarchive: Tc, unarchive_confirm: Pc, nested_files_folders_will_be_moved: Oc, unknown_validation_errors: Lc, validationError: jc, all_access: Rc, no_access: Mc, use_custom: Uc, nullable: Nc, allow_null_value: Bc, allow_multiple: qc, allow_multiple_to_be_open: zc, enter_value_to_replace_nulls: Kc, field_standard: Hc, field_presentation: Wc, field_file: Gc, field_files: Jc, field_m2o: Qc, field_m2a: Xc, field_o2m: Zc, field_m2m: Yc, field_translations: xc, field_group: ep, item_permissions: tp, field_permissions: np, field_validation: lp, field_presets: op, permissions_for_role: ap, fields_for_role: ip, validation_for_role: sp, presets_for_role: rp, presentation_and_aliases: dp, revision_post_create: up, revision_post_update: cp, changes_made: pp, no_relational_data: mp, hide_field_on_detail: fp, show_field_on_detail: vp, delete_field: _p, fields_and_layout: yp, field_create_success: gp, field_update_success: hp, duplicate_where_to: bp, language: $p, aggregate_function: wp, aggregate_precision: kp, group_aggregation: Sp, group_precision: Cp, global: Vp, admins_have_all_permissions: Fp, camera: Ap, show_zero: Ip, create_in_advanced_field_creation_mode: Ep, continue_in_advanced_field_creation_mode: Dp, sum: Tp, sum_distinct: Pp, avg: Op, avg_distinct: Lp, count: jp, count_distinct: Rp, min: Mp, max: Up, exposure: Np, shutter: Bp, iso: qp, focal_length: zp, schema_setup_key: Kp, create_field: Hp, creating_new_field: Wp, field_in_collection: Gp, reset_page_preferences: Jp, hidden_field: Qp, hidden_on_detail: Xp, disabled_editing_value: Zp, key: Yp, alias: xp, bigInteger: em, boolean: tm, date: nm, date_range: lm, datetime: om, dateTime: am, precision: im, decimal: sm, float: rm, integer: dm, json: um, xml: cm, string: pm, text: mm, time: fm, timestamp: vm, uuid: _m, hash: ym, geometry: gm, not_available_for_type: hm, create_translations: bm, auto_refresh: $m, refresh_interval: wm, no_refresh: km, refresh_interval_seconds: Sm, refresh_interval_minutes: Cm, auto_generate: Vm, this_will_auto_setup_fields_relations: Fm, click_here: Am, to_manually_setup_translations: Im, click_to_manage_translated_fields: Em, fields_group: Dm, no_collections_found: Tm, new_data_alert: Pm, search_collection: Om, new_field: Lm, new_collection: jm, add_m2o_to_collection: Rm, add_o2m_to_collection: Mm, add_m2m_to_collection: Um, choose_a_type: Nm, determined_by_relationship: Bm, add_note: qm, add_link: zm, custom_link: Km, default_value: Hm, standard_field: Wm, single_file: Gm, multiple_files: Jm, m2o_relationship: Qm, o2m_relationship: Xm, m2m_relationship: Zm, m2a_relationship: Ym, invalid_item: xm, next: ef, field_name: tf, translations: nf, no_translations: lf, note: of, enter_a_value: af, enter_a_placeholder: sf, length: rf, precision_scale: df, readonly: uf, unique: cf, updated_on: pf, updated_by: mf, primary_key: ff, foreign_key: vf, finish_setup: _f, dismiss: yf, raw_value: gf, edit_raw_value: hf, enter_raw_value: bf, clear_value: $f, clear_changes: wf, reset_to_default: kf, undo_changes: Sf, notifications: Cf, show_all_activity: Vf, page_not_found: Ff, page_not_found_body: Af, confirm_revert: If, confirm_revert_body: Ef, display: Df, settings_update_success: Tf, title: Pf, revision_delta_created: Of, revision_delta_created_externally: Lf, revision_delta_updated: jf, revision_delta_deleted: Rf, revision_delta_reverted: Mf, revision_delta_other: Uf, revision_delta_by: Nf, private_user: Bf, creation_preview: qf, revision_preview: zf, updates_made: Kf, leave_comment: Hf, post_comment_success: Wf, item_create_success: Gf, item_update_success: Jf, item_delete_success: Qf, this_collection: Xf, related_collection: Zf, related_collections: Yf, translations_collection: xf, languages_collection: ev, export_data: tv, format: nv, use_current_filters_settings: lv, export_collection: ov, last_page: av, last_access: iv, fill_template: sv, a_unique_table_name: rv, a_unique_column_name: dv, enable_custom_values: uv, submit: cv, move_to_folder: pv, move: mv, system: fv, add_field_related: vv, interface_label: _v, today: yv, yesterday: gv, delete_comment: hv, minutes: bv, hours: $v, month: wv, year: kv, select_all: Sv, months: Cv, drag_mode: Vv, cancel_crop: Fv, original: Av, url: Iv, import_label: Ev, file_details: Dv, dimensions: Tv, size: Pv, created: Ov, modified: Lv, checksum: jv, owner: Rv, edited_by: Mv, folder: Uv, zoom: Nv, download: Bv, open: qv, open_in_new_window: zv, open_folder: Kv, foreground_color: Hv, background_color: Wv, upload_from_device: Gv, choose_from_library: Jv, import_from_url: Qv, replace_from_device: Xv, replace_from_library: Zv, replace_from_url: Yv, no_file_selected: xv, download_file: e_, collection_key: t_, name: n_, primary_key_field: l_, type: o_, creating_new_collection: a_, created_by: i_, created_on: s_, creating_collection_info: r_, creating_collection_system: d_, auto_increment_integer: u_, generated_uuid: c_, manual_string: p_, save_and_create_new: m_, save_and_stay: f_, save_as_copy: v_, add_existing: __, creating_items: y_, enable_create_button: g_, selecting_items: h_, enable_select_button: b_, comments: $_, no_comments: w_, click_to_expand: k_, select_item: S_, no_items: C_, search_items: V_, disabled: F_, information: A_, report_bug: I_, request_feature: E_, interface_not_found: D_, reset_interface: T_, display_not_found: P_, reset_display: O_, item_count: L_, no_items_copy: j_, file_count: R_, no_files_copy: M_, user_count: U_, no_users_copy: N_, webhooks_count: B_, no_webhooks_copy: q_, no_notifications: z_, no_notifications_copy: K_, activity_log: H_, all_items: W_, any: G_, csv: J_, no_collections: Q_, create_collection: X_, no_collections_copy_admin: Z_, no_collections_copy: Y_, relationship_not_setup: x_, display_template_not_setup: ey, collection_field_not_setup: ty, select_a_collection: ny, select_a_field: ly, active: oy, move_to: ay, copy: iy, copy_to: sy, no_other_dashboards_copy: ry, inactive: dy, users: uy, activity: cy, activity_item: py, action: my, ip_address: fy, user_agent: vy, webhooks: _y, decimals: yy, value_decimals: gy, min_value: hy, max_value: by, automatic: $y, field_width: wy, add_filter: ky, upper_limit: Sy, lower_limit: Cy, user_directory: Vy, documentation: Fy, sidebar: Ay, duration: Iy, charset: Ey, second: Dy, file_moved: Ty, collection_created: Py, modified_on: Oy, card_size: Ly, sort_field: jy, add_sort_field: Ry, sort: My, status: Uy, remove: Ny, toggle_manual_sorting: By, bookmark_doesnt_exist: qy, bookmark_doesnt_exist_copy: zy, bookmark_doesnt_exist_cta: Ky, select_an_item: Hy, edit: Wy, enabled: Gy, disable_tfa: Jy, tfa_scan_code: Qy, enter_otp_to_disable_tfa: Xy, create_account: Zy, account_created_successfully: Yy, auto_fill: xy, corresponding_field: eg, errors: tg, security: ng, value_hashed: lg, bookmark_name: og, create_bookmark: ag, edit_bookmark: ig, bookmarks: sg, presets: rg, unexpected_error: dg, unexpected_error_copy: ug, copy_details: cg, no_app_access: pg, no_app_access_copy: mg, password_reset_sent: fg, password_reset_successful: vg, back: _g, filter: yg, editing_image: gg, square: hg, free: bg, flip_horizontal: $g, flip_vertical: wg, aspect_ratio: kg, rotate: Sg, all_users: Cg, delete_collection: Vg, update_collection_success: Fg, delete_collection_success: Ag, make_collection_visible: Ig, make_collection_hidden: Eg, start_end_of_count_items: Dg, start_end_of_count_filtered_items: Tg, one_item: Pg, one_filtered_item: Og, delete_collection_are_you_sure: Lg, collections_shown: jg, visible_collections: Rg, hidden_collections: Mg, show_hidden_collections: Ug, hide_hidden_collections: Ng, show_header: Bg, unmanaged_collections: qg, system_collections: zg, placeholder: Kg, icon_left: Hg, icon_right: Wg, count_other_revisions: Gg, font: Jg, sans_serif: Qg, serif: Xg, monospace: Zg, divider: Yg, color: xg, circle: eh, empty_item: th, log_in_with: nh, conditional_styles: lh, advanced_settings: oh, advanced_filter: ah, delete_advanced_filter: ih, change_advanced_filter_operator: sh, operators: rh, loading: dh, drop_to_upload: uh, item: ch, items: ph, upload_file: mh, upload_file_indeterminate: fh, upload_file_success: vh, upload_files_indeterminate: _h, upload_files_success: yh, upload_pending: gh, drag_file_here: hh, click_to_browse: bh, interface_options: $h, layout_options: wh, rows: kh, columns: Sh, collection_setup: Ch, optional_system_fields: Vh, value_unique: Fh, all_activity: Ah, create_item: Ih, display_template: Eh, language_display_template: Dh, translations_display_template: Th, n_items_selected: Ph, per_page: Oh, all_files: Lh, my_files: jh, recent_files: Rh, create_folder: Mh, edit_folder: Uh, folder_name: Nh, folder_key: Bh, add_file: qh, replace_file: zh, no_results: Kh, no_results_copy: Hh, clear_filters: Wh, saves_automatically: Gh, role: Jh, rule: Qh, user: Xh, no_presets: Zh, no_presets_copy: Yh, no_presets_cta: xh, presets_only: eb, create: tb, on_create: nb, on_update: lb, read: ob, update: ab, select_fields: ib, format_text: sb, format_value: rb, abbreviate_value: db, operator: ub, bold: cb, toggle: pb, icon_on: mb, icon_off: fb, label: vb, insights: _b, dashboard: yb, panel: gb, panel_options: hb, panel_header: bb, panel_name_placeholder: $b, panel_note_placeholder: wb, panel_delete_confirm: kb, dashboard_delete_confirm: Sb, edit_dashboard: Cb, delete_dashboard: Vb, visible: Fb, prefix_placeholder: Ab, suffix_placeholder: Ib, decimals_placeholder: Eb, no_dashboards: Db, no_dashboards_copy: Tb, no_data: Pb, create_dashboard: Ob, dashboard_name: Lb, full_screen: jb, edit_panels: Rb, fit_to_screen: Mb, image_url: Ub, alt_text: Nb, media: Bb, quality: qb, width: zb, height: Kb, source: Hb, url_placeholder: Wb, display_text: Gb, display_text_placeholder: Jb, interface_group_text_and_numbers: Qb, interface_group_selection: Xb, interface_group_relational: Zb, interface_group_presentation: Yb, interface_group_groups: xb, interface_group_other: e0, tooltip: t0, tooltip_placeholder: n0, unlimited: l0, open_link_in: o0, new_tab: a0, current_tab: i0, wysiwyg_options: s0, dropdown: r0, choices: d0, choices_option_configured_incorrectly: u0, deselect: c0, deselect_all: p0, other: m0, adding_user: f0, unknown_user: v0, creating_in: _0, editing_in: y0, creating_unit: g0, editing_unit: h0, editing_in_batch: b0, no_options_available: $0, settings_data_model: w0, settings_permissions: k0, settings_project: S0, settings_webhooks: C0, settings_presets: V0, one_or_more_options_are_missing: F0, scope: A0, select: I0, layout: E0, tree_view: D0, changes_are_permanent: T0, preset_name_placeholder: P0, preset_search_placeholder: O0, editing_preset: L0, layout_preview: j0, layout_setup: R0, unsaved_changes: M0, unsaved_changes_copy: U0, discard_changes: N0, discard_all_changes: B0, discard_changes_copy: q0, show_x_axis: z0, show_y_axis: K0, keep_editing: H0, page_help_collections_overview: W0, page_help_collections_collection: G0, page_help_collections_item: J0, page_help_activity_collection: Q0, page_help_docs_global: X0, page_help_files_collection: Z0, page_help_files_item: Y0, page_help_settings_project: x0, page_help_settings_datamodel_collections: e1, page_help_settings_datamodel_fields: t1, page_help_settings_roles_collection: n1, page_help_settings_roles_item: l1, page_help_settings_presets_collection: o1, page_help_settings_presets_item: a1, page_help_settings_webhooks_collection: i1, page_help_settings_webhooks_item: s1, page_help_users_collection: r1, page_help_users_item: d1, page_help_insights_overview: u1, page_help_insights_dashboard: c1, activity_feed: p1, add_new: m1, create_new: f1, all: v1, none: _1, no_layout_collection_selected_yet: y1, batch_delete_confirm: g1, cancel: h1, no_upscale: b1, collection: $1, collections: w1, content: k1, singleton: S1, singleton_label: C1, system_fields_locked: V1, directus_collection: F1, fields: A1, field_options: I1, no_fields_in_collection: E1, no_value: D1, do_nothing: T1, generate_and_save_uuid: P1, save_current_user_id: O1, save_current_user_role: L1, save_current_datetime: j1, always_open: R1, start_open: M1, start_collapsed: U1, block: N1, inline: B1, comment: q1, relational_triggers: z1, referential_action_field_label_m2o: K1, referential_action_field_label_o2m: H1, referential_action_no_action: W1, referential_action_cascade: G1, referential_action_set_null: J1, referential_action_set_default: Q1, choose_action: X1, continue_label: Z1, continue_as: Y1, editing_role: x1, creating_webhook: e2, default_label: t2, delete_label: n2, delete_are_you_sure: l2, delete_field_are_you_sure: o2, description: a2, done: i2, duplicate: s2, limit: r2, email: d2, embed: u2, fallback_icon: c2, field: p2, file: m2, file_library: f2, forgot_password: v2, hidden: _2, icon: y2, info: g2, normal: h2, success: b2, warning: $2, danger: w2, junction_collection: k2, latency: S2, login: C2, my_activity: V2, not_authenticated: F2, authenticated: A2, options: I2, otp: E2, password: D2, permissions: T2, relationship: P2, reset: O2, reset_password: L2, revisions: j2, revert: R2, save: M2, schema: U2, search: N2, select_existing: B2, select_field_type: q2, select_interface: z2, settings: K2, sign_in: H2, sign_out: W2, sign_out_confirm: G2, something_went_wrong: J2, sort_direction: Q2, sort_asc: X2, sort_desc: Z2, template: Y2, require_value_to_be_set: x2, translation: e$, translation_placeholder: t$, value: n$, view_project: l$, weeks: o$, report_error: a$, start: i$, interfaces: s$, displays: r$, layouts: d$, panels: u$ }); const ze = $r({ legacy: !1, locale: "en-US", fallbackLocale: "en-US", messages: { "en-US": $ }, silentTranslationWarn: !0, datetimeFormats: tu, numberFormats: nu }), fa = ["en-US"]; function Kt(e) { var u, o, s, r, p; const t = ze.global.t("unexpected_error"); let n = e; if (typeof e == "object" && (n = (p = (r = (s = (o = (u = e == null ? void 0 : e.response) == null ? void 0 : u.data) == null ? void 0 : o.errors) == null ? void 0 : s[0]) == null ? void 0 : r.extensions) == null ? void 0 : p.code), !e || !n === void 0) return t; const l = `errors.${n}`; return ze.global.te(l) === !1 ? t : ze.global.t(l) } function va(e) { let t = e; return typeof e == "string" && e.startsWith("$t:") && (t = ze.global.t(e.replace("$t:", ""))), t } function Ct(e) { const t = M.exports.cloneDeep(e); return Object.entries(t).forEach(([n, l]) => { l && typeof l == "object" && (t[n] = Ct(l)), l && typeof l == "string" && (t[n] = va(l)) }), t } var _a = { "af-ZA": "Afrikaans (South Africa)", "ar-SA": "Arabic (Saudi Arabia)", "bn-IN": "Bengali (India)", "br-FR": "Breton (France)", "bg-BG": "Bulgarian (Bulgaria)", "ca-ES": "Catalan (Spain)", "zh-CN": "Chinese (Simplified)", "cs-CZ": "Czech (Czech Republic)", "da-DK": "Danish (Denmark)", "nl-NL": "Dutch (Netherlands)", "en-US": "English (United States)", "et-EE": "Estonian (Estonia)", "fi-FI": "Finnish (Finland)", "fr-FR": "French (France)", "ka-GE": "Georgian (Georgia)", "de-DE": "German (Germany)", "el-GR": "Greek (Greece)", "he-IL": "Hebrew (Israel)", "hi-IN": "Hindi (India)", "hu-HU": "Hungarian (Hungary)", "is-IS": "Icelandic (Iceland)", "id-ID": "Indonesian (Indonesia)", "it-IT": "Italian (Italy)", "ja-JP": "Japanese (Japan)", "ko-KR": "Korean (Korea)", "lt-LT": "Lithuanian (Lithuania)", "ms-MY": "Malay (Malaysia)", "no-NO": "Norwegian (Norway)", "fa-IR": "Farci (Iran)", "pl-PL": "Polish (Poland)", "pt-BR": "Portuguese (Brazil)", "pt-PT": "Portuguese (Portugal)", "ro-RO": "Romanian (Romania)", "ru-RU": "Russian (Russian Federation)", "sr-SP": "Serbian (Cyrillic) (Serbia and Montenegro)", "sr-CS": "Serbian (Latin) (Serbia and Montenegro)", "si-LK": "Sinhala (Sri Lanka)", "sk-SK": "Slovak (Slovakia)", "sl-SI": "Slovenian (Slovenia)", "es-ES": "Spanish (Spain)", "es-419": "Spanish (Latin America)", "es-cl": "Spanish (Chile)", "sv-SE": "Swedish (Sweden)", "zh-TW": "Taiwanese Mandarin (Taiwan)", "th-TH": "Thai (Thailand)", "tr-TR": "Turkish (Turkey)", "uk-UA": "Ukrainian (Ukraine)", "vi-VN": "Vietnamese (Vietnam)" }; function p$(e) { switch (e) { case "./translations/af-ZA.yaml": return j(() => import("./assets/af-ZA.5bc87dbc.js"), []); case "./translations/ar-SA.yaml": return j(() => import("./assets/ar-SA.3368322c.js"), []); case "./translations/bg-BG.yaml": return j(() => import("./assets/bg-BG.15567df7.js"), []); case "./translations/bn-IN.yaml": return j(() => import("./assets/bn-IN.1385676c.js"), []); case "./translations/br-FR.yaml": return j(() => import("./assets/br-FR.7a926846.js"), []); case "./translations/ca-ES.yaml": return j(() => import("./assets/ca-ES.2e706764.js"), []); case "./translations/cs-CZ.yaml": return j(() => import("./assets/cs-CZ.0db773a3.js"), []); case "./translations/da-DK.yaml": return j(() => import("./assets/da-DK.0bec4b59.js"), []); case "./translations/de-DE.yaml": return j(() => import("./assets/de-DE.4b4b8e70.js"), []); case "./translations/el-GR.yaml": return j(() => import("./assets/el-GR.bd4d0ff3.js"), []); case "./translations/en-GB.yaml": return j(() => import("./assets/en-GB.1b37c659.js"), []); case "./translations/en-US.yaml": return j(() => Promise.resolve().then(function () { return c$ }), void 0); case "./translations/es-419.yaml": return j(() => import("./assets/es-419.4da87d2f.js"), []); case "./translations/es-CL.yaml": return j(() => import("./assets/es-CL.b5d67084.js"), []); case "./translations/es-ES.yaml": return j(() => import("./assets/es-ES.aeba85de.js"), []); case "./translations/et-EE.yaml": return j(() => import("./assets/et-EE.8aa32a45.js"), []); case "./translations/fa-IR.yaml": return j(() => import("./assets/fa-IR.68ac8c0a.js"), []); case "./translations/fi-FI.yaml": return j(() => import("./assets/fi-FI.26f5b2cc.js"), []); case "./translations/fr-FR.yaml": return j(() => import("./assets/fr-FR.8a6c9f09.js"), []); case "./translations/he-IL.yaml": return j(() => import("./assets/he-IL.64ff8581.js"), []); case "./translations/hi-IN.yaml": return j(() => import("./assets/hi-IN.f686e98f.js"), []); case "./translations/hu-HU.yaml": return j(() => import("./assets/hu-HU.1043806e.js"), []); case "./translations/id-ID.yaml": return j(() => import("./assets/id-ID.42c8e6ba.js"), []); case "./translations/is-IS.yaml": return j(() => import("./assets/is-IS.35706417.js"), []); case "./translations/it-IT.yaml": return j(() => import("./assets/it-IT.45005969.js"), []); case "./translations/ja-JP.yaml": return j(() => import("./assets/ja-JP.1e745c98.js"), []); case "./translations/ka-GE.yaml": return j(() => import("./assets/ka-GE.eff8ef9c.js"), []); case "./translations/ko-KR.yaml": return j(() => import("./assets/ko-KR.f3349212.js"), []); case "./translations/ku-TR.yaml": return j(() => import("./assets/ku-TR.3322375c.js"), []); case "./translations/lt-LT.yaml": return j(() => import("./assets/lt-LT.69b9046b.js"), []); case "./translations/mn-MN.yaml": return j(() => import("./assets/mn-MN.27ed8744.js"), []); case "./translations/ms-MY.yaml": return j(() => import("./assets/ms-MY.f51ba91a.js"), []); case "./translations/nl-NL.yaml": return j(() => import("./assets/nl-NL.bff34791.js"), []); case "./translations/no-NO.yaml": return j(() => import("./assets/no-NO.66c87fac.js"), []); case "./translations/pl-PL.yaml": return j(() => import("./assets/pl-PL.8f26d744.js"), []); case "./translations/pt-BR.yaml": return j(() => import("./assets/pt-BR.26238be4.js"), []); case "./translations/pt-PT.yaml": return j(() => import("./assets/pt-PT.b923e241.js"), []); case "./translations/ro-RO.yaml": return j(() => import("./assets/ro-RO.23969e56.js"), []); case "./translations/ru-RU.yaml": return j(() => import("./assets/ru-RU.33141bc5.js"), []); case "./translations/si-LK.yaml": return j(() => import("./assets/si-LK.2e97c6ef.js"), []); case "./translations/sk-SK.yaml": return j(() => import("./assets/sk-SK.8e0ff1f5.js"), []); case "./translations/sl-SI.yaml": return j(() => import("./assets/sl-SI.bfbe276b.js"), []); case "./translations/sr-CS.yaml": return j(() => import("./assets/sr-CS.b4de8472.js"), []); case "./translations/sr-SP.yaml": return j(() => import("./assets/sr-SP.2cb9f65c.js"), []); case "./translations/sv-SE.yaml": return j(() => import("./assets/sv-SE.060d5c25.js"), []); case "./translations/th-TH.yaml": return j(() => import("./assets/th-TH.81e128af.js"), []); case "./translations/tr-TR.yaml": return j(() => import("./assets/tr-TR.0be85b79.js"), []); case "./translations/uk-UA.yaml": return j(() => import("./assets/uk-UA.46578a03.js"), []); case "./translations/vi-VN.yaml": return j(() => import("./assets/vi-VN.14101822.js"), []); case "./translations/zh-CN.yaml": return j(() => import("./assets/zh-CN.355da8e5.js"), []); case "./translations/zh-TW.yaml": return j(() => import("./assets/zh-TW.3efec3f7.js"), []); default: return new Promise(function (t, n) { (typeof queueMicrotask == "function" ? queueMicrotask : setTimeout)(n.bind(null, new Error("Unknown variable dynamic import: " + e))) }) } } const { modules: m$, modulesRaw: f$ } = Gl(), { layouts: v$, layoutsRaw: _$ } = dn(), { interfaces: y$, interfacesRaw: g$ } = St(), { panels: h$, panelsRaw: b$ } = ml(), { displays: $$, displaysRaw: w$ } = xt(); async function ya(e) { const t = He(), n = Pe(); if (Object.keys(_a).includes(e) === !1) console.warn(`"${e}" is not an available language in the Directus app.`); else { if (fa.includes(e) === !1) try { const { default: l } = await p$(`./translations/${e}.yaml`); ze.global.mergeLocaleMessage(e, l), fa.push(e) } catch (l) { console.warn(l) } ze.global.locale.value = e, document.querySelector("html").setAttribute("lang", e) } return m$.value = Ct(f$.value), v$.value = Ct(_$.value), y$.value = Ct(g$.value), h$.value = Ct(b$.value), $$.value = Ct(w$.value), t.translateCollections(), n.translateFields(), !0 } function k$(e, t) { var n; e = M.exports.clone(e); const l = /^((?:-|\+)?\d*?\.?\d+?) *?(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mth|mo|years?|yrs?|y)?$/i.exec(t.trim()); if (!l || !l[1]) return; const i = parseFloat(l[1]); switch (((n = l[2]) !== null && n !== void 0 ? n : "days").toLowerCase()) { case "years": case "year": case "yrs": case "yr": case "y": return Ir(e, i); case "months": case "month": case "mth": case "mo": return Ar(e, i); case "weeks": case "week": case "w": return Fr(e, i); case "days": case "day": case "d": return Vr(e, i); case "hours": case "hour": case "hrs": case "hr": case "h": return Cr(e, i); case "minutes": case "minute": case "mins": case "min": case "m": return Sr(e, i); case "seconds": case "second": case "secs": case "sec": case "s": return kr(e, i); case "milliseconds": case "millisecond": case "msecs": case "msec": case "ms": return wr(e, i); default: return } } function S$(e) { return e.schema ? "table" : e.meta ? "alias" : "unknown" } function ga(e) { switch (e) { case "binary": case "hash": case "string": case "csv": return ["contains", "ncontains", "starts_with", "nstarts_with", "ends_with", "nends_with", "eq", "neq", "empty", "nempty", "null", "nnull", "in", "nin"]; case "uuid": return ["eq", "neq", "null", "nnull", "in", "nin"]; case "json": return ["null", "nnull"]; case "boolean": return ["eq", "neq", "null", "nnull"]; case "bigInteger": case "integer": case "decimal": case "float": return ["eq", "neq", "lt", "lte", "gt", "gte", "between", "nbetween", "null", "nnull", "in", "nin"]; case "dateTime": case "date": case "time": return ["eq", "neq", "null", "nnull", "lt", "lte", "gt", "gte", "between", "nbetween", "null", "nnull", "in", "nin"]; case "geometry": return ["null", "nnull", "intersects", "nintersects", "intersects_bbox", "nintersects_bbox"]; default: return ["contains", "ncontains", "eq", "neq", "lt", "lte", "gt", "gte", "between", "nbetween", "empty", "nempty", "null", "nnull", "in", "nin"] } } const C$ = ["$NOW", "$CURRENT_USER", "$CURRENT_ROLE"]; function V$(e) { return typeof e == "string" && C$.some(t => e.startsWith(t)) } const F$ = ["alias", "bigInteger", "boolean", "date", "dateTime", "decimal", "float", "integer", "json", "string", "text", "time", "timestamp", "binary", "uuid", "hash", "csv", "geometry", "geometry.Point", "geometry.LineString", "geometry.Polygon", "geometry.MultiPoint", "geometry.MultiLineString", "geometry.MultiPolygon", "unknown"], ha = ["Point", "LineString", "Polygon", "MultiPoint", "MultiLineString", "MultiPolygon"], A$ = ["standard", "file", "files", "m2o", "o2m", "m2m", "m2a", "presentation", "translations", "group"], I$ = /\(([^)]+)\)/; function fl(e, t, n = "and") { return e ? t ? { [`_${n}`]: [e, t] } : e : t } function vl(e) { return typeof e == "string" ? e.split(",") : Array.isArray(e) ? e : [e] } function Jl(e, t, n = {}) { return e ? Object.entries(e).reduce((l, [i, u]) => (["_or", "_and"].includes(String(i)) ? l[i] = u.map(o => Jl(o, t, n)) : ["_in", "_nin", "_between", "_nbetween"].includes(String(i)) ? l[i] = vl(u).flatMap(o => ba(o, t, n)) : String(i).startsWith("_") ? l[i] = ba(u, t, n) : l[i] = Jl(u, t, n), l), {}) : null } function ba(e, t, n) { return e === "true" ? !0 : e === "false" ? !1 : e === "null" || e === "NULL" ? null : V$(e) ? E$(e, t, n) : e } function E$(e, t, n) { var l, i, u; if (e.startsWith("$NOW")) { if (e.includes("(") && e.includes(")")) { const o = (l = e.match(I$)) === null || l === void 0 ? void 0 : l[1]; return o ? k$(new Date, o) : new Date } return new Date } if (e.startsWith("$CURRENT_USER")) return e === "$CURRENT_USER" ? (i = t == null ? void 0 : t.user) !== null && i !== void 0 ? i : null : Ql(n, e, null); if (e.startsWith("$CURRENT_ROLE")) return e === "$CURRENT_ROLE" ? (u = t == null ? void 0 : t.role) !== null && u !== void 0 ? u : null : Ql(n, e, null) } function Ql(e, t, n) { const [l, ...i] = t.split("."), u = Array.isArray(e) ? e.map(o => o[l]) : e == null ? void 0 : e[l]; return i.length > 0 ? Ql(u, i.join("."), n) : u != null ? u : n } function _l(e, t, n) { const l = []; if (Object.keys(e)[0] === "_and") { const i = Object.values(e)[0], u = M.exports.flatten(i.map(o => _l(o, t, n))).filter(o => o); l.push(...u) } else if (Object.keys(e)[0] === "_or") { const i = Object.values(e)[0], u = M.exports.flatten(i.map(s => _l(s, t, n))); i.length === u.length && l.push(...u) } else { const i = Md(e, n), { error: u } = i.validate(t, { abortEarly: !1 }); u && l.push(u) } return l } function yt(e) { return e.first_name && e.last_name ? `${e.first_name} ${e.last_name}` : e.first_name ? e.first_name : e.email ? e.email : ze.global.t("unknown_user") } const Ze = Ft({ id: "userStore", state: () => ({ currentUser: null, loading: !1, error: null }), getters: { fullName() { return this.currentUser === null ? null : yt(this.currentUser) }, isAdmin() { var e; return ((e = this.currentUser) == null ? void 0 : e.role.admin_access) === !0 || !1 } }, actions: { async hydrate() { this.loading = !0; try { const { data: e } = await ue.get("/users/me", { params: { fields: "*,avatar.id,role.*" } }); this.currentUser = e.data } catch (e) { this.error = e } finally { this.loading = !1 } }, async dehydrate() { this.$reset() }, async trackPage(e) { const t = Uo(), n = performance.now(); await ue.patch("/users/me/track/page", { last_page: e }); const l = performance.now(); t.save({ timestamp: new Date, latency: l - n }), this.currentUser && (this.currentUser.last_page = e) } } }); var B = (e, t) => { const n = e.__vccOpts || e; for (const [l, i] of t) n[l] = i; return n }; const D$ = z({ props: { filter: { type: Object, default: null } }, emits: ["update:filter"], setup(e, { emit: t }) { const { t: n } = x(), l = Ze(), i = V(() => { var p; return (p = l.currentUser) == null ? void 0 : p.id }), u = V(() => { var p, f; return (f = Object.keys((p = e.filter) != null ? p : {})[0]) != null ? f : null }), o = V(() => { var p, f, v; return (v = (f = Object.values((p = e.filter) != null ? p : {})[0]) == null ? void 0 : f._eq) != null ? v : null }); return { t: n, currentUserID: i, setNavFilter: s, clearNavFilter: r, filterField: u, filterValue: o }; function s(p, f) { t("update:filter", { [p]: { _eq: f } }) } function r() { t("update:filter", null) } } }); function T$(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-text-overflow"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-divider"), _ = c("v-list"); return m(), C(_, { nav: "" }, { default: d(() => [a(f, { clickable: "", active: !e.filterField, onClick: e.clearNavFilter }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "access_time" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("all_activity") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active", "onClick"]), a(f, { clickable: "", active: e.filterField === "user" && e.filterValue === e.currentUserID, onClick: t[0] || (t[0] = y => e.setNavFilter("user", e.currentUserID)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "face" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("my_activity") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"]), a(v), a(f, { clickable: "", active: e.filterField === "action" && e.filterValue === "create", onClick: t[1] || (t[1] = y => e.setNavFilter("action", "create")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "add" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("create") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"]), a(f, { clickable: "", active: e.filterField === "action" && e.filterValue === "update", onClick: t[2] || (t[2] = y => e.setNavFilter("action", "update")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "check" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("update") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"]), a(f, { clickable: "", active: e.filterField === "action" && e.filterValue === "delete", onClick: t[3] || (t[3] = y => e.setNavFilter("action", "delete")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "clear" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("delete_label") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"]), a(f, { clickable: "", active: e.filterField === "action" && e.filterValue === "comment", onClick: t[4] || (t[4] = y => e.setNavFilter("action", "comment")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "chat_bubble_outline" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("comment") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"]), a(f, { clickable: "", active: e.filterField === "action" && e.filterValue === "login", onClick: t[5] || (t[5] = y => e.setNavFilter("action", "login")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "login" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("login") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["active"])]), _: 1 }) } var P$ = B(D$, [["render", T$]]); function bn(e, t = E(null), n = !1) { const l = Tn(), i = Ze(), u = E(!1), o = V(() => t.value ? !!l.getBookmark(t.value) : !1), s = E({}); T(); const r = E(!0), p = V(() => s.value.user === i.currentUser.id), f = async O => { if (n) return; u.value = !0; const U = await l.savePreset(O || s.value); return s.value = Ce(re({}, s.value), { id: U.id, user: U.user }), r.value = !0, u.value = !1, U }, v = M.exports.debounce(async () => { f() }, 450); function _() { if (o.value) { const O = l.getBookmark(Number(t.value)); r.value = M.exports.isEqual(s.value, O) } else v() } _e([e, t], () => { T() }); const y = V({ get() { var O; return s.value.layout && ((O = s.value.layout_options) == null ? void 0 : O[s.value.layout]) || null }, set(O) { if (!s.value.layout) return null; s.value = Ce(re({}, s.value), { layout_options: Ce(re({}, s.value.layout_options), { [s.value.layout]: O }) }), _() } }), g = V({ get() { var O; return s.value.layout && ((O = s.value.layout_query) == null ? void 0 : O[s.value.layout]) || null }, set(O) { if (!s.value.layout) return null; s.value = Ce(re({}, s.value), { layout_query: Ce(re({}, s.value.layout_query), { [s.value.layout]: O }) }), _() } }), w = V({ get() { return s.value.layout || "tabular" }, set(O) { s.value = Ce(re({}, s.value), { layout: O }), _() } }), h = V({ get() { var O; return (O = s.value.filter) != null ? O : null }, set(O) { s.value = Ce(re({}, s.value), { filter: O }), _() } }), k = V({ get() { return s.value.refresh_interval || null }, set(O) { s.value = Ce(re({}, s.value), { refresh_interval: O }), _() } }), F = V({ get() { return s.value.search || null }, set(O) { s.value = Ce(re({}, s.value), { search: O }), _() } }), A = V({ get() { var O; return ((O = s.value) == null ? void 0 : O.bookmark) || null }, set(O) { s.value = Ce(re({}, s.value), { bookmark: O }), f() } }); return { bookmarkExists: o, layout: w, layoutOptions: y, layoutQuery: g, filter: h, search: F, refreshInterval: k, savePreset: f, saveCurrentAsBookmark: N, bookmarkTitle: A, resetPreset: L, bookmarkSaved: r, bookmarkIsMine: p, busy: u, clearLocalSave: P, localPreset: s }; function P() { const O = l.getBookmark(Number(t.value)); O && (s.value = re({}, O)), r.value = !0 } async function L() { s.value = Ce(re({}, s.value), { layout_query: null, layout_options: null, layout: "tabular", filter: null, search: null, refresh_interval: null }), await f() } function T() { if (t.value === null) s.value = re({}, l.getPresetForCollection(e.value)); else { if (o.value === !1) return; s.value = re({}, l.getBookmark(Number(t.value))) } s.value.layout || (s.value = Ce(re({}, s.value), { layout: "tabular" })) } async function N(O) { const U = re(re({}, s.value), O); return U.id && delete U.id, U.user = i.currentUser.id, await f(U) } } const Xl = "wrapper", $a = ["selection", "layoutOptions", "layoutQuery"]; function O$(e) { return $a.includes(e) } function L$(e) { return z({ name: `${e.id}-${Xl}`, props: { collection: { type: String, required: !0 }, selection: { type: Array, default: () => [] }, layoutOptions: { type: Object, default: () => ({}) }, layoutQuery: { type: Object, default: () => ({}) }, filter: { type: Object, default: null }, filterUser: { type: Object, default: null }, filterSystem: { type: Object, default: null }, search: { type: String, default: null }, selectMode: { type: Boolean, default: !1 }, readonly: { type: Boolean, default: !1 }, resetPreset: { type: Function, default: null }, clearFilters: { type: Function, default: null } }, emits: $a.map(t => `update:${t}`), setup(t, { emit: n }) { const l = Xt(re(re({}, e.setup(t, { emit: n })), je(t))); for (const i in l) l[`onUpdate:${i}`] = u => { O$(i) ? n(`update:${i}`, u) : Object.keys(t).includes(i) || (l[i] = u) }; return { state: l } }, render(t) { return t.$slots.default !== void 0 ? t.$slots.default({ layoutState: t.state }) : null } }) } function un(e) { const { layouts: t } = dn(), n = V(() => t.value.map(i => L$(i))); return { layoutWrapper: V(() => { const i = n.value.find(u => u.name === `${e.value}-${Xl}`); return i === void 0 ? n.value.find(u => u.name === `tabular-${Xl}`) : i }) } } const j$ = z({ props: { modelValue: { type: String, default: "tabular" } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), { layouts: l } = dn(), i = V(() => { const o = l.value.find(s => s.id === e.modelValue); return o === void 0 ? l.value.find(s => s.id === "tabular") : o }), u = Re(e, "modelValue", t); return { t: n, currentLayout: i, layouts: l, layout: u } } }), R$ = { class: "layout-options" }, M$ = { class: "field" }, U$ = { class: "type-label" }; function N$(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-select"), r = c("sidebar-detail"); return m(), C(r, { icon: "layers", title: e.t("layout_options") }, { default: d(() => [S("div", R$, [S("div", M$, [S("div", U$, b(e.t("layout")), 1), a(s, { modelValue: e.layout, "onUpdate:modelValue": t[0] || (t[0] = p => e.layout = p), items: e.layouts, "item-text": "name", "item-value": "id", "item-icon": "icon" }, et({ _: 2 }, [e.currentLayout.icon ? { name: "prepend", fn: d(() => [a(o, { name: e.currentLayout.icon }, null, 8, ["name"])]) } : void 0]), 1032, ["modelValue", "items"])]), ye(e.$slots, "default", {}, void 0, !0)])]), _: 3 }, 8, ["title"]) } var Nn = B(j$, [["render", N$], ["__scopeId", "data-v-1ebcb13a"]]); const B$ = z({ props: { modelValue: { type: String, default: null }, collection: { type: String, required: !0 }, filter: { type: Object, default: null } }, emits: ["update:modelValue", "update:filter"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null), i = E(e.modelValue !== null), u = E(!1), o = E(!1); _e(i, v => { v === !0 && l.value !== null && l.value.focus() }); const s = V(() => { if (!e.filter) return 0; let v = []; return _(e.filter), v.length; function _(y) { for (const [g, w] of Object.entries(y)) g === "_and" || g === "_or" ? w.forEach(_) : g.startsWith("_") ? v.push(g) : M.exports.isObject(w) && _(w) } }); return { t: n, active: i, disable: p, input: l, emitValue: f, activeFilterCount: s, filterActive: u, onClickOutside: r, filterBorder: o }; function r(v) { return !(v.path || v.composedPath()).some(y => { var g; return (g = y == null ? void 0 : y.classList) == null ? void 0 : g.contains("v-menu-content") }) } function p() { i.value = !1, u.value = !1 } function f() { var _; if (!l.value) return; const v = (_ = l.value) == null ? void 0 : _.value; t("update:modelValue", v) } } }), q$ = ["value", "placeholder"], z$ = { class: "filter" }; function K$(e, t, n, l, i, u) { const o = c("v-icon"), s = c("interface-system-filter"), r = c("transition-expand"), p = c("v-badge"), f = we("tooltip"), v = we("click-outside"); return m(), C(p, { bottom: "", right: "", class: "search-badge", value: e.activeFilterCount, disabled: !e.activeFilterCount || e.filterActive }, { default: d(() => [ee(S("div", { class: de(["search-input", { active: e.active, "filter-active": e.filterActive, "has-content": !!e.modelValue, "filter-border": e.filterBorder }]), onClick: t[7] || (t[7] = _ => e.active = !0) }, [ee(a(o, { name: "search", class: "icon-search", clickable: !e.active }, null, 8, ["clickable"]), [[f, e.active ? null : e.t("search"), void 0, { bottom: !0 }]]), S("input", { ref: "input", value: e.modelValue, placeholder: e.t("search_items"), onInput: t[0] || (t[0] = (..._) => e.emitValue && e.emitValue(..._)), onPaste: t[1] || (t[1] = (..._) => e.emitValue && e.emitValue(..._)) }, null, 40, q$), e.modelValue ? (m(), C(o, { key: 0, clickable: "", class: "icon-empty", name: "close", onClick: t[2] || (t[2] = Ae(_ => e.$emit("update:modelValue", null), ["stop"])) })) : R("", !0), ee(a(o, { clickable: "", class: "icon-filter", name: "filter_list", onClick: t[3] || (t[3] = _ => e.filterActive = !e.filterActive) }, null, 512), [[f, e.t("filter"), void 0, { bottom: !0 }]]), a(r, { onBeforeEnter: t[5] || (t[5] = _ => e.filterBorder = !0), onAfterLeave: t[6] || (t[6] = _ => e.filterBorder = !1) }, { default: d(() => [ee(S("div", z$, [a(s, { class: "filter-input", inline: "", value: e.filter, "collection-name": e.collection, onInput: t[4] || (t[4] = _ => e.$emit("update:filter", _)) }, null, 8, ["value", "collection-name"])], 512), [[Et, e.filterActive]])]), _: 1 })], 2), [[v, { handler: e.disable, middleware: e.onClickOutside }]])]), _: 1 }, 8, ["value", "disabled"]) } var $n = B(B$, [["render", K$], ["__scopeId", "data-v-bdf227f4"]]); const H$ = z({ name: "ActivityCollection", components: { ActivityNavigation: P$, LayoutSidebarDetail: Nn, SearchInput: $n }, props: { primaryKey: { type: String, default: null } }, setup() { const { t: e } = x(), { layout: t, layoutOptions: n, layoutQuery: l, filter: i, search: u } = bn(E("directus_activity")), { breadcrumb: o } = p(), { layoutWrapper: s } = un(t), r = E(null); return { t: e, breadcrumb: o, layout: t, layoutWrapper: s, layoutOptions: n, layoutQuery: l, search: u, filter: i, roleFilter: r, mergeFilters: fl }; function p() { return { breadcrumb: V(() => [{ name: e("collection", 2), to: "/content" }]) } } } }), W$ = { class: "page-description" }; function G$(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("search-input"), p = c("activity-navigation"), f = c("v-info"), v = c("router-view"), _ = c("sidebar-detail"), y = c("layout-sidebar-detail"), g = c("private-view"), w = we("md"); return m(), C(Ne(e.layoutWrapper), { "layout-options": e.layoutOptions, "onUpdate:layout-options": t[4] || (t[4] = h => e.layoutOptions = h), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[5] || (t[5] = h => e.layoutQuery = h), filter: e.mergeFilters(e.filter, e.roleFilter), "filter-user": e.filter, "filter-system": e.roleFilter, search: e.search, collection: "directus_activity" }, { default: d(({ layoutState: h }) => [a(g, { title: e.t("activity_feed") }, { "title-outer:prepend": d(() => [a(s, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(o, { name: "access_time" })]), _: 1 })]), "actions:prepend": d(() => [(m(), C(Ne(`layout-actions-${e.layout}`), Je(xe(h)), null, 16))]), actions: d(() => [a(r, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = k => e.search = k), filter: e.filter, "onUpdate:filter": t[1] || (t[1] = k => e.filter = k), collection: "directus_activity" }, null, 8, ["modelValue", "filter"])]), navigation: d(() => [a(p, { filter: e.roleFilter, "onUpdate:filter": t[2] || (t[2] = k => e.roleFilter = k) }, null, 8, ["filter"])]), sidebar: d(() => [a(_, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", W$, null, 512), [[w, e.t("page_help_activity_collection")]])]), _: 1 }, 8, ["title"]), a(y, { modelValue: e.layout, "onUpdate:modelValue": t[3] || (t[3] = k => e.layout = k) }, { default: d(() => [(m(), C(Ne(`layout-options-${e.layout}`), Je(xe(h)), null, 16))]), _: 2 }, 1032, ["modelValue"]), (m(), C(Ne(`layout-sidebar-${e.layout}`), Je(xe(h)), null, 16))]), default: d(() => [(m(), C(Ne(`layout-${e.layout}`), dt(h, { class: "layout" }), { "no-results": d(() => [a(f, { title: e.t("no_results"), icon: "search", center: "" }, { default: d(() => [D(b(e.t("no_results_copy")), 1)]), _: 1 }, 8, ["title"])]), "no-items": d(() => [a(f, { title: e.t("item_count", 0), icon: "access_time", center: "" }, { default: d(() => [D(b(e.t("no_items_copy")), 1)]), _: 1 }, 8, ["title"])]), _: 2 }, 1040)), a(v, { name: "detail", "primary-key": e.primaryKey }, null, 8, ["primary-key"])]), _: 2 }, 1032, ["title"])]), _: 1 }, 8, ["layout-options", "layout-query", "filter", "filter-user", "filter-system", "search"]) } var J$ = B(H$, [["render", G$], ["__scopeId", "data-v-e228796c"]]); const wa = Symbol(); function cn() { const e = E(!1); let t; const n = new Promise(i => { t = i }); return at(() => { e.value = !0 }), Tt(() => (e.value = !1, n)), Zt(wa, l), e; function l() { t() } } function Q$() { return ht(wa, void 0) } const X$ = z({ name: "ActivityDetail", props: { primaryKey: { type: String, required: !0 } }, setup(e) { const { t, te: n } = x(), l = tt(), i = cn(), u = E(), o = E(!1), s = E(null), r = V(() => { if (!(!u.value || u.value.collection.startsWith("directus_"))) return `/content/${u.value.collection}/${encodeURIComponent(u.value.item)}` }); return _e(() => e.primaryKey, p, { immediate: !0 }), { t, isOpen: i, item: u, loading: o, error: s, close: f, openItemLink: r, userName: yt }; async function p() { o.value = !0; try { const v = await ue.get(`/activity/${e.primaryKey}`, { params: { fields: ["user.id", "user.email", "user.first_name", "user.last_name", "action", "timestamp", "ip", "user_agent", "collection", "item"] } }); u.value = v.data.data, u.value && (n(`field_options.directus_activity.${u.value.action}`) && (u.value.action = t(`field_options.directus_activity.${u.value.action}`)), u.value.timestamp = new Date(u.value.timestamp).toLocaleString(ze.global.locale.value)) } catch (v) { s.value = v } finally { o.value = !1 } } function f() { l.push("/activity") } } }), Z$ = { key: 1, class: "content" }, Y$ = { key: 2, class: "content" }, x$ = { class: "type-label" }, ew = { class: "type-label" }, tw = { class: "type-label" }, nw = { class: "type-label" }, lw = { class: "type-label" }, ow = { class: "type-label" }, aw = { class: "type-label" }; function iw(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = c("v-notice"), r = c("user-popover"), p = c("v-icon"), f = c("v-button"), v = c("v-drawer"), _ = we("tooltip"); return m(), C(v, { "model-value": e.isOpen, title: e.t("activity_item"), "onUpdate:modelValue": e.close, onCancel: e.close }, { actions: d(() => [e.openItemLink ? ee((m(), C(f, { key: 0, to: e.openItemLink, icon: "", rounded: "" }, { default: d(() => [a(p, { name: "launch" })]), _: 1 }, 8, ["to"])), [[_, e.t("open"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(f, { to: "/activity", icon: "", rounded: "" }, { default: d(() => [a(p, { name: "check" })]), _: 1 }, 512), [[_, e.t("done"), void 0, { bottom: !0 }]])]), default: d(() => [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : e.error ? (m(), I("div", Z$, [a(s, { type: "danger" }, { default: d(() => [D(b(e.error), 1)]), _: 1 })])) : (m(), I("div", Y$, [S("p", x$, b(e.t("user")) + ":", 1), e.item.user ? (m(), C(r, { key: 0, user: e.item.user.id }, { default: d(() => [D(b(e.userName(e.item.user)), 1)]), _: 1 }, 8, ["user"])) : R("", !0), S("p", ew, b(e.t("action")) + ":", 1), S("p", null, b(e.item.action), 1), S("p", tw, b(e.t("date")) + ":", 1), S("p", null, b(e.item.timestamp), 1), S("p", nw, b(e.t("ip_address")) + ":", 1), S("p", null, b(e.item.ip), 1), S("p", lw, b(e.t("user_agent")) + ":", 1), S("p", null, b(e.item.user_agent), 1), S("p", ow, b(e.t("collection")) + ":", 1), S("p", null, b(e.item.collection), 1), S("p", aw, b(e.t("item")) + ":", 1), S("p", null, b(e.item.item), 1)]))]), _: 1 }, 8, ["model-value", "title", "onUpdate:modelValue", "onCancel"]) } var sw = B(X$, [["render", iw], ["__scopeId", "data-v-4615f290"]]), rw = rn({ id: "activity", hidden: !0, name: "$t:activity", icon: "notifications", routes: [{ name: "activity-collection", path: "", component: J$, props: !0, children: [{ name: "activity-item", path: ":primaryKey", components: { detail: sw } }] }] }), dw = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: rw }); function Zl(e, t) { const n = []; for (const [l, i] of Object.entries(t)) n.push(`${l}=${i}`); return e.includes("?") ? `${e}&${n.join("&")}` : `${e}?${n.join("&")}` } const pn = () => Zo(Er); pn.displayName = "router-passthrough"; let Yl, wn; function ka(e) { const t = He(); return wn || (wn = E(t.collections.filter(n => { var l, i; return ((l = n.meta) == null ? void 0 : l.collapse) === "open" || ((i = n.meta) == null ? void 0 : i.collapse) === "locked" }).map(({ collection: n }) => n))), Yl === void 0 && (Yl = E(!1)), _e(e, n => { var u; if (n === null) return; let l = t.getCollection(n); const i = []; for (; (u = l == null ? void 0 : l.meta) == null ? void 0 : u.group;)wn.value.includes(l.meta.group) === !1 && i.push(l.meta.group), l = t.getCollection(l.meta.group); wn.value = [...wn.value, ...i] }, { immediate: !0 }), { showHidden: Yl, activeGroups: wn } } const uw = z({ props: { icon: { type: String, default: "label" }, color: { type: String, default: "var(--foreground-normal)" }, name: { type: String, required: !0 }, search: { type: String, default: null } } }); function cw(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-text-overflow"), p = c("v-list-item-content"); return m(), I(se, null, [a(s, null, { default: d(() => { var f; return [a(o, { name: (f = e.icon) != null ? f : "label", color: e.color }, null, 8, ["name", "color"])] }), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.name, highlight: e.search }, null, 8, ["text", "highlight"])]), _: 1 })], 64) } var pw = B(uw, [["render", cw]]); let xl; function Ve(e) { var l, i, u, o, s, r, p, f, v, _; xl || (xl = el()); const t = ((s = (o = (u = (i = (l = e.response) == null ? void 0 : l.data) == null ? void 0 : i.errors) == null ? void 0 : u[0]) == null ? void 0 : o.extensions) == null ? void 0 : s.code) || ((r = e == null ? void 0 : e.extensions) == null ? void 0 : r.code) || "UNKNOWN", n = ((_ = (v = (f = (p = e.response) == null ? void 0 : p.data) == null ? void 0 : f.errors) == null ? void 0 : v[0]) == null ? void 0 : _.message) || e.message || void 0; console.warn(e), xl.add({ title: ze.global.t(`errors.${t}`), text: n, type: "error", dialog: !0, error: e }) } const mw = z({ props: { bookmark: { type: Object, required: !0 } }, setup(e) { const { t } = x(), n = tt(), l = Yt(), i = Ze(), u = Tn(), o = V(() => e.bookmark.user === i.currentUser.id), { renameActive: s, renameValue: r, renameSave: p, renameSaving: f } = w(), { deleteActive: v, deleteValue: _, deleteSave: y, deleteSaving: g } = h(); return { t, isMine: o, renameActive: s, renameValue: r, renameSave: p, renameSaving: f, deleteActive: v, deleteValue: _, deleteSave: y, deleteSaving: g }; function w() { const k = E(!1), F = E(e.bookmark.bookmark), A = E(!1); return { renameActive: k, renameValue: F, renameSave: P, renameSaving: A }; async function P() { A.value = !0; try { await u.savePreset(Ce(re({}, e.bookmark), { bookmark: F.value })), k.value = !1 } catch (L) { Ve(L) } finally { A.value = !1 } } } function h() { const k = E(!1), F = E(e.bookmark.bookmark), A = E(!1); return { deleteActive: k, deleteValue: F, deleteSave: P, deleteSaving: A }; async function P() { var L; A.value = !0; try { let T = null; +((L = l.query) == null ? void 0 : L.bookmark) === e.bookmark.id && (T = `/content/${e.bookmark.collection}`), await u.delete(e.bookmark.id), k.value = !1, T && n.replace(T) } catch (T) { Ve(T) } finally { A.value = !1 } } } } }); function fw(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-text-overflow"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-list"), _ = c("v-menu"), y = c("v-card-title"), g = c("v-input"), w = c("v-card-text"), h = c("v-button"), k = c("v-card-actions"), F = c("v-card"), A = c("v-dialog"), P = we("context-menu"); return ee((m(), C(f, { to: `/content/${e.bookmark.collection}?bookmark=${e.bookmark.id}`, query: "", class: "bookmark", clickable: "" }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "bookmark_outline" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.bookmark.bookmark }, null, 8, ["text"])]), _: 1 }), a(_, { ref: "contextMenu", "show-arrow": "", placement: "bottom-start" }, { default: d(() => [a(v, null, { default: d(() => [a(f, { clickable: "", disabled: e.isMine === !1, onClick: t[0] || (t[0] = L => e.renameActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "edit", outline: "" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("rename_bookmark") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(f, { clickable: "", class: "danger", disabled: e.isMine === !1, onClick: t[1] || (t[1] = L => e.deleteActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("delete_bookmark") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["disabled"])]), _: 1 })]), _: 1 }, 512), a(A, { modelValue: e.renameActive, "onUpdate:modelValue": t[4] || (t[4] = L => e.renameActive = L), persistent: "", onEsc: t[5] || (t[5] = L => e.renameActive = !1) }, { default: d(() => [a(F, null, { default: d(() => [a(y, null, { default: d(() => [D(b(e.t("rename_bookmark")), 1)]), _: 1 }), a(w, null, { default: d(() => [a(g, { modelValue: e.renameValue, "onUpdate:modelValue": t[2] || (t[2] = L => e.renameValue = L), autofocus: "", onKeyup: gn(e.renameSave, ["enter"]) }, null, 8, ["modelValue", "onKeyup"])]), _: 1 }), a(k, null, { default: d(() => [a(h, { secondary: "", onClick: t[3] || (t[3] = L => e.renameActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(h, { disabled: e.renameValue === null, loading: e.renameSaving, onClick: e.renameSave }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(A, { modelValue: e.deleteActive, "onUpdate:modelValue": t[7] || (t[7] = L => e.deleteActive = L), persistent: "", onEsc: t[8] || (t[8] = L => e.deleteActive = !1) }, { default: d(() => [a(F, null, { default: d(() => [a(y, null, { default: d(() => [D(b(e.t("delete_bookmark_copy", { bookmark: e.bookmark.bookmark })), 1)]), _: 1 }), a(k, null, { default: d(() => [a(h, { secondary: "", onClick: t[6] || (t[6] = L => e.deleteActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(h, { loading: e.deleteSaving, kind: "danger", onClick: e.deleteSave }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["to"])), [[P, "contextMenu"]]) } var vw = B(mw, [["render", fw], ["__scopeId", "data-v-417005a4"]]); const _w = z({ name: "NavigationItem", components: { NavigationItemContent: pw, NavigationBookmark: vw }, props: { collection: { type: Object, required: !0 }, showHidden: { type: Boolean, default: !1 }, search: { type: String, default: null } }, setup(e) { const { t } = x(), { isAdmin: n } = Ze(), l = He(), i = Tn(), u = V(() => _(e.collection)), o = V(() => y(e.collection)), s = V(() => { var g, w; return ((g = e.collection.meta) == null ? void 0 : g.archive_field) && ((w = e.collection.meta) == null ? void 0 : w.archive_app_filter) }), r = V(() => u.value.length > 0 || o.value.length > 0), p = V(() => e.collection.schema ? `/content/${e.collection.collection}` : ""), f = V(() => { if (!e.search || e.search.length < 3) return !0; const g = e.search.toLowerCase(); return h(e.collection) || w(u.value, o.value); function w(F, A) { return F.some(P => { const L = _(P), T = y(P); return h(P) || w(L, T) }) || A.some(P => k(P)) } function h(F) { return F.collection.includes(g) || F.name.toLowerCase().includes(g) } function k(F) { var A; return (A = F.bookmark) == null ? void 0 : A.toLowerCase().includes(g) } }), v = V(() => s.value || n); return { childCollections: u, childBookmarks: o, isGroup: r, to: p, matchesSearch: f, isAdmin: n, t, hasArchive: s, hasContextMenu: v }; function _(g) { let w = l.collections.filter(h => { var k; return ((k = h.meta) == null ? void 0 : k.group) === g.collection }); return e.showHidden === !1 && (w = w.filter(h => { var k; return ((k = h.meta) == null ? void 0 : k.hidden) !== !0 })), M.exports.orderBy(w, ["meta.sort", "collection"]) } function y(g) { return i.bookmarks.filter(w => w.collection === g.collection) } } }); function yw(e, t, n, l, i, u) { var F, A; const o = c("navigation-item-content"), s = c("navigation-item", !0), r = c("navigation-bookmark"), p = c("v-list-group"), f = c("v-list-item"), v = c("v-icon"), _ = c("v-list-item-icon"), y = c("v-text-overflow"), g = c("v-list-item-content"), w = c("v-list"), h = c("v-menu"), k = we("context-menu"); return m(), I(se, null, [e.isGroup && e.matchesSearch ? ee((m(), C(p, { key: 0, to: e.to, scope: "content-navigation", value: e.collection.collection, query: "", "arrow-placement": ((F = e.collection.meta) == null ? void 0 : F.collapse) === "locked" ? !1 : "after" }, { activator: d(() => { var P, L; return [a(o, { search: e.search, name: e.collection.name, icon: (P = e.collection.meta) == null ? void 0 : P.icon, color: (L = e.collection.meta) == null ? void 0 : L.color }, null, 8, ["search", "name", "icon", "color"])] }), default: d(() => [(m(!0), I(se, null, he(e.childCollections, P => (m(), C(s, { key: P.collection, collection: P, search: e.search }, null, 8, ["collection", "search"]))), 128)), (m(!0), I(se, null, he(e.childBookmarks, P => (m(), C(r, { key: P.id, bookmark: P }, null, 8, ["bookmark"]))), 128))]), _: 1 }, 8, ["to", "value", "arrow-placement"])), [[k, "contextMenu"]]) : e.matchesSearch ? ee((m(), C(f, { key: 1, to: e.to, value: e.collection.collection, class: de({ hidden: (A = e.collection.meta) == null ? void 0 : A.hidden }), query: "" }, { default: d(() => { var P, L; return [a(o, { search: e.search, name: e.collection.name, icon: (P = e.collection.meta) == null ? void 0 : P.icon, color: (L = e.collection.meta) == null ? void 0 : L.color }, null, 8, ["search", "name", "icon", "color"])] }), _: 1 }, 8, ["to", "value", "class"])), [[k, e.hasContextMenu ? "contextMenu" : null]]) : R("", !0), e.hasContextMenu ? (m(), C(h, { key: 2, ref: "contextMenu", "show-arrow": "", placement: "bottom-start" }, { default: d(() => [a(w, null, { default: d(() => [e.hasArchive ? (m(), C(f, { key: 0, clickable: "", to: `/content/${e.collection.collection}?archive`, exact: "", query: "" }, { default: d(() => [a(_, null, { default: d(() => [a(v, { name: "archive", outline: "" })]), _: 1 }), a(g, null, { default: d(() => [a(y, { text: e.t("show_archived_items") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["to"])) : R("", !0), e.isAdmin ? (m(), C(f, { key: 1, clickable: "", to: `/settings/data-model/${e.collection.collection}` }, { default: d(() => [a(_, null, { default: d(() => [a(v, { name: "list_alt" })]), _: 1 }), a(g, null, { default: d(() => [a(y, { text: e.t("edit_collection") }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["to"])) : R("", !0)]), _: 1 })]), _: 1 }, 512)) : R("", !0)], 64) } var gw = B(_w, [["render", yw], ["__scopeId", "data-v-05859c07"]]); const hw = z({ components: { NavigationItem: gw }, props: { currentCollection: { type: String, default: null } }, setup(e) { const { t } = x(), { currentCollection: n } = je(e), { activeGroups: l, showHidden: i } = ka(n), u = E(""), o = He(), s = V(() => { const v = i.value ? o.allCollections : o.visibleCollections; return M.exports.orderBy(v.filter(_ => { var y; return M.exports.isNil((y = _ == null ? void 0 : _.meta) == null ? void 0 : y.group) }), ["meta.sort", "collection"]) }), r = V(() => o.visibleCollections.length > 5), p = V(() => o.visibleCollections.length > 20), f = V(() => o.allCollections.length > o.visibleCollections.length); return { t, activeGroups: l, showHidden: i, rootItems: s, dense: r, search: u, showSearch: p, hasHiddenCollections: f } } }), bw = { class: "content-navigation-wrapper" }, $w = { key: 0, class: "search-input" }; function ww(e, t, n, l, i, u) { const o = c("v-input"), s = c("navigation-item"), r = c("v-icon"), p = c("v-list-item-icon"), f = c("v-text-overflow"), v = c("v-list-item-content"), _ = c("v-list-item"), y = c("v-menu"), g = c("v-list"), w = we("context-menu"); return m(), I("div", bw, [e.showSearch ? (m(), I("div", $w, [a(o, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = h => e.search = h), type: "search", placeholder: e.t("search_collection") }, null, 8, ["modelValue", "placeholder"])])) : R("", !0), ee(a(g, { modelValue: e.activeGroups, "onUpdate:modelValue": t[2] || (t[2] = h => e.activeGroups = h), scope: "content-navigation", class: "content-navigation", tabindex: "-1", nav: "", mandatory: !1, dense: e.dense }, { default: d(() => [(m(!0), I(se, null, he(e.rootItems, h => (m(), C(s, { key: h.collection, "show-hidden": e.showHidden, collection: h, search: e.search }, null, 8, ["show-hidden", "collection", "search"]))), 128)), e.hasHiddenCollections ? (m(), C(y, { key: 0, ref: "contextMenu", "show-arrow": "", placement: "bottom-start" }, { default: d(() => [a(_, { clickable: "", onClick: t[1] || (t[1] = h => e.showHidden = !e.showHidden) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: e.showHidden ? "visibility_off" : "visibility" }, null, 8, ["name"])]), _: 1 }), a(v, null, { default: d(() => [a(f, { text: e.showHidden ? e.t("hide_hidden_collections") : e.t("show_hidden_collections") }, null, 8, ["text"])]), _: 1 })]), _: 1 })]), _: 1 }, 512)) : R("", !0)]), _: 1 }, 8, ["modelValue", "dense"]), [[w, "contextMenu"]])]) } var yl = B(hw, [["render", ww], ["__scopeId", "data-v-970f0324"]]); const kw = z({ components: { ContentNavigation: yl }, setup() { const { t: e } = x(); return { t: e } } }), Sw = { class: "not-found" }; function Cw(e, t, n, l, i, u) { const o = c("content-navigation"), s = c("v-info"), r = c("private-view"); return m(), C(r, { title: e.t("page_not_found") }, { navigation: d(() => [a(o)]), default: d(() => [S("div", Sw, [a(s, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])])]), _: 1 }, 8, ["title"]) } var eo = B(kw, [["render", Cw], ["__scopeId", "data-v-cc545b6a"]]); const Vw = z({ props: { modelValue: { type: Number, default: null } }, emits: ["update:modelValue", "refresh"], setup(e, { emit: t }) { const { t: n } = x(), l = V({ get() { return e.modelValue }, set(s) { t("update:modelValue", s) } }), i = E(null); _e(l, s => { i.value !== null && clearInterval(i.value), s !== null && s > 0 && (i.value = setInterval(() => { t("refresh") }, s * 1e3)) }, { immediate: !0 }); const u = V(() => [null, 10, 30, 60, 300].map(r => r === null ? { text: n("no_refresh"), value: null } : r >= 60 && r % 60 == 0 ? { text: n("refresh_interval_minutes", { minutes: r / 60 }, r / 60), value: r } : { text: n("refresh_interval_seconds", { seconds: r }, r), value: r })), o = V(() => l.value !== null); return { t: n, active: o, interval: l, items: u } } }), Fw = { class: "fields" }, Aw = { class: "field full" }, Iw = { class: "type-label" }; function Ew(e, t, n, l, i, u) { const o = c("v-select"), s = c("sidebar-detail"); return m(), C(s, { icon: e.active ? "sync" : "sync_disabled", title: e.t("auto_refresh"), badge: e.active }, { default: d(() => [S("div", Fw, [S("div", Aw, [S("p", Iw, b(e.t("refresh_interval")), 1), a(o, { modelValue: e.interval, "onUpdate:modelValue": t[0] || (t[0] = r => e.interval = r), items: e.items }, null, 8, ["modelValue", "items"])])])]), _: 1 }, 8, ["icon", "title", "badge"]) } var Dw = B(Vw, [["render", Ew], ["__scopeId", "data-v-3c22b9bc"]]); const Tw = z({ props: { modelValue: { type: Boolean, default: !1 }, saving: { type: Boolean, default: !1 } }, emits: ["save", "update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null); return { t: n, bookmarkName: l, cancel: i }; function i() { l.value = null, t("update:modelValue", !1) } } }); function Pw(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-input"), r = c("v-card-text"), p = c("v-button"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"); return m(), C(_, { "model-value": e.modelValue, persistent: "", "onUpdate:modelValue": t[3] || (t[3] = y => e.$emit("update:modelValue", y)), onEsc: e.cancel }, { activator: d(y => [ye(e.$slots, "activator", Je(xe(y)))]), default: d(() => [a(v, null, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("create_bookmark")), 1)]), _: 1 }), a(r, null, { default: d(() => [a(s, { modelValue: e.bookmarkName, "onUpdate:modelValue": t[0] || (t[0] = y => e.bookmarkName = y), autofocus: "", placeholder: e.t("bookmark_name"), onKeyup: t[1] || (t[1] = gn(y => e.$emit("save", e.bookmarkName), ["enter"])) }, null, 8, ["modelValue", "placeholder"])]), _: 1 }), a(f, null, { default: d(() => [a(p, { secondary: "", onClick: e.cancel }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(p, { disabled: e.bookmarkName === null || e.bookmarkName.length === 0, loading: e.saving, onClick: t[2] || (t[2] = y => e.$emit("save", e.bookmarkName)) }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading"])]), _: 1 })]), _: 1 })]), _: 3 }, 8, ["model-value", "onEsc"]) } var Ow = B(Tw, [["render", Pw]]); const Lw = z({ props: { modelValue: { type: Boolean, default: !1 }, saving: { type: Boolean, default: !1 }, name: { type: String, required: !0 } }, emits: ["save", "update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = E(e.name); return _e(() => e.name, u => l.value = u), { t: n, bookmarkName: l, cancel: i }; function i() { t("update:modelValue", !1) } } }); function jw(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-input"), r = c("v-card-text"), p = c("v-button"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"); return m(), C(_, { "model-value": e.modelValue, persistent: "", "onUpdate:modelValue": t[3] || (t[3] = y => e.$emit("update:modelValue", y)), onEsc: e.cancel }, { activator: d(y => [ye(e.$slots, "activator", Je(xe(y)))]), default: d(() => [a(v, null, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("edit_bookmark")), 1)]), _: 1 }), a(r, null, { default: d(() => [a(s, { modelValue: e.bookmarkName, "onUpdate:modelValue": t[0] || (t[0] = y => e.bookmarkName = y), autofocus: "", placeholder: e.t("bookmark_name"), onKeyup: t[1] || (t[1] = gn(y => e.$emit("save", e.bookmarkName), ["enter"])) }, null, 8, ["modelValue", "placeholder"])]), _: 1 }), a(f, null, { default: d(() => [a(p, { secondary: "", onClick: e.cancel }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(p, { disabled: e.bookmarkName === null || e.bookmarkName.length === 0, loading: e.saving, onClick: t[2] || (t[2] = y => e.$emit("save", e.bookmarkName)) }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading"])]), _: 1 })]), _: 1 })]), _: 3 }, 8, ["model-value", "onEsc"]) } var Rw = B(Lw, [["render", jw]]); const gl = ["FAILED_VALIDATION", "RECORD_NOT_UNIQUE"], Mw = `

\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u283B\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F6\u28E6\u28E4\u28C0\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2880\u2800\u283B\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F7\u28E6\u28C0\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2819\u28FF\u28FF\u28FF\u28F7\u28FE\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u287F\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F7\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28E4\u28FF\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u281B\u281B\u283F\u283F\u283F\u283F\u283F\u281B\u281B\u2809\u2800\u28B0\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F7\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28B0\u28FF\u28FF\u28FF\u28FF\u28F6\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F6\u28F6\u28E6\u28E4\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FE\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u2801\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2808\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F7\u28F6\u28F6\u28F6\u28FE\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u287F\u283F\u283F\u281B\u2809\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u280B\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28B8\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2880\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u284C\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2880\u28E4\u28F6\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u2801\u281B\u281B\u283F\u28BF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F6\u28F6\u28E4\u28E4\u28C0\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2880\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u281F\u2801\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u281B\u28FF\u28FF\u28FF\u28FF\u28FF\u2846\u28BF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28F6\u28C4\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u287F\u283F\u281B\u281B\u280B\u2809\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u281B\u283F\u28FF\u28C4\u2808\u283B\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28FF\u28E6\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u28FE\u28FF\u28FF\u28FF\u28FF\u280B\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u2809\u2809\u2809\u2809\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u28BF\u28FF\u28FF\u28FF\u28F7\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2800\u28E4\u28FF\u28FF\u28FF\u28FF\u281F\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2809\u2809\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u28F4\u28FF\u28FF\u28FF\u28FF\u281F\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800
\u2800\u2800\u2800\u2800\u2809\u2809\u2801\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800\u2800

`, Uw = ["directus_activity", "directus_collections", "directus_fields", "directus_migrations", "directus_relations", "directus_revisions", "directus_sessions", "directus_settings"], mn = [{ type: "module", id: "content", enabled: !0 }, { type: "module", id: "users", enabled: !0 }, { type: "module", id: "files", enabled: !0 }, { type: "module", id: "insights", enabled: !0 }, { type: "module", id: "docs", enabled: !0 }, { type: "module", id: "settings", enabled: !0, locked: !0 }], Nw = [{ text: "$t:string", value: "string" }, { text: "$t:text", value: "text" }, { divider: !0 }, { text: "$t:boolean", value: "boolean" }, { divider: !0 }, { text: "$t:integer", value: "integer" }, { text: "$t:bigInteger", value: "bigInteger" }, { text: "$t:float", value: "float" }, { text: "$t:decimal", value: "decimal" }, { divider: !0 }, { text: "$t:geometry", value: "geometry" }, { divider: !0 }, { text: "$t:timestamp", value: "timestamp" }, { text: "$t:datetime", value: "dateTime" }, { text: "$t:date", value: "date" }, { text: "$t:time", value: "time" }, { divider: !0 }, { text: "$t:json", value: "json" }, { text: "$t:csv", value: "csv" }, { text: "$t:uuid", value: "uuid" }, { text: "$t:hash", value: "hash" }], to = "default", Sa = ["oauth2", "openid"]; const Bw = z({ props: { active: { type: Boolean, default: !1 }, collection: { type: String, required: !0 }, edits: { type: Object, default: void 0 }, primaryKeys: { type: Array, required: !0 } }, emits: ["update:active", "refresh"], setup(e, { emit: t }) { const { t: n } = x(), { internalEdits: l } = f(), { internalActive: i } = v(), { save: u, cancel: o, saving: s, validationErrors: r } = _(), { collection: p } = je(e); return { t: n, internalActive: i, internalEdits: l, save: u, saving: s, cancel: o, validationErrors: r }; function f() { const y = E({}); return { internalEdits: V({ get() { return e.edits !== void 0 ? re(re({}, e.edits), y.value) : y.value }, set(w) { y.value = w } }) } } function v() { const y = E(!1); return { internalActive: V({ get() { return e.active === void 0 ? y.value : e.active }, set(w) { y.value = w, t("update:active", w) } }) } } function _() { const y = E(!1), g = E([]), w = V(() => p.value.startsWith("directus_") ? `/${p.value.substring(9)}` : `/items/${p.value}`); return { save: h, cancel: k, saving: y, validationErrors: g }; async function h() { y.value = !0; try { await ue.patch(w.value, { keys: e.primaryKeys, data: l.value }), t("refresh"), i.value = !1, l.value = {} } catch (F) { g.value = F.response.data.errors.filter(P => { var L; return gl.includes((L = P == null ? void 0 : P.extensions) == null ? void 0 : L.code) }).map(P => P.extensions); const A = F.response.data.errors.filter(P => { var L; return gl.includes((L = P == null ? void 0 : P.extensions) == null ? void 0 : L.code) === !1 }); A.length > 0 && A.forEach(Ve) } finally { y.value = !1 } } function k() { i.value = !1, l.value = {} } } } }), qw = { class: "drawer-batch-content" }; function zw(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-form"), p = c("v-drawer"), f = we("tooltip"); return m(), C(p, { modelValue: e.internalActive, "onUpdate:modelValue": t[1] || (t[1] = v => e.internalActive = v), title: e.t("editing_in_batch", { count: e.primaryKeys.length }), persistent: "", onCancel: e.cancel }, { actions: d(() => [ee(a(s, { icon: "", rounded: "", loading: e.saving, onClick: e.save }, { default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["loading", "onClick"]), [[f, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", qw, [a(r, { modelValue: e.internalEdits, "onUpdate:modelValue": t[0] || (t[0] = v => e.internalEdits = v), collection: e.collection, "batch-mode": "", "primary-key": "+", "validation-errors": e.validationErrors }, null, 8, ["modelValue", "collection", "validation-errors"])])]), _: 1 }, 8, ["modelValue", "title", "onCancel"]) } var no = B(Bw, [["render", zw], ["__scopeId", "data-v-5d0693b1"]]); const Kw = z({ name: "ContentCollection", components: { ContentNavigation: yl, ContentNotFound: eo, LayoutSidebarDetail: Nn, SearchInput: $n, BookmarkAdd: Ow, BookmarkEdit: Rw, DrawerBatch: no, RefreshSidebarDetail: Dw }, props: { collection: { type: String, required: !0 }, bookmark: { type: String, default: null }, archive: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = tt(), { layouts: l } = dn(), i = Ze(), u = Dt(), o = E(), { collection: s } = je(e), r = V(() => e.bookmark ? +e.bookmark : null), { selection: p } = De(), { info: f } = ot(s), { addNewLink: v, currentCollectionLink: _ } = lt(), { breadcrumb: y } = Ie(), { layout: g, layoutOptions: w, layoutQuery: h, filter: k, search: F, savePreset: A, bookmarkExists: P, saveCurrentAsBookmark: L, bookmarkTitle: T, resetPreset: N, bookmarkSaved: O, bookmarkIsMine: U, refreshInterval: q, busy: K, clearLocalSave: W } = bn(s, r), { layoutWrapper: te } = un(g), { confirmDelete: G, deleting: X, batchDelete: ve, confirmArchive: ae, archive: ne, archiving: Y, error: ce, batchEditActive: pe } = Be(), { bookmarkDialogActive: H, creatingBookmark: Q, createBookmark: Z, editingBookmark: le, editBookmark: fe } = Te(), J = V(() => l.value.find(Le => Le.id === g.value)); _e(s, () => { g.value === null && (g.value = "tabular") }, { immediate: !0 }); const { batchEditAllowed: ie, batchArchiveAllowed: oe, batchDeleteAllowed: me, createAllowed: ge } = qe(), be = V(() => { var Se, We, $e; if (!((Se = f.value) == null ? void 0 : Se.meta) || !(($e = (We = f.value) == null ? void 0 : We.meta) == null ? void 0 : $e.archive_app_filter)) return null; const Le = f.value.meta.archive_field; if (!Le) return null; let Fe = f.value.meta.archive_value; return Fe === "true" && (Fe = !0), Fe === "false" && (Fe = !1), e.archive ? { [Le]: { _eq: Fe } } : { [Le]: { _neq: Fe } } }); return { t, addNewLink: v, batchDelete: ve, batchEditActive: pe, confirmDelete: G, currentCollection: f, deleting: X, filter: k, layoutRef: o, layoutWrapper: te, selection: p, layoutOptions: w, layoutQuery: h, layout: g, search: F, savePreset: A, bookmarkExists: P, currentCollectionLink: _, bookmarkDialogActive: H, creatingBookmark: Q, createBookmark: Z, bookmarkTitle: T, editingBookmark: le, editBookmark: fe, breadcrumb: y, clearFilters: Oe, confirmArchive: ae, archiveItems: ne, archiving: Y, batchEditAllowed: ie, batchArchiveAllowed: oe, batchDeleteAllowed: me, deleteError: ce, createAllowed: ge, resetPreset: N, bookmarkSaved: O, bookmarkIsMine: U, bookmarkSaving: K, clearLocalSave: W, refresh: ke, refreshInterval: q, currentLayout: J, archiveFilter: be, mergeFilters: fl }; async function ke() { var Le, Fe, Se; await ((Se = (Fe = (Le = o.value) == null ? void 0 : Le.state) == null ? void 0 : Fe.refresh) == null ? void 0 : Se.call(Fe)) } function Ie() { return { breadcrumb: V(() => { var Fe; return [{ name: (Fe = f.value) == null ? void 0 : Fe.name, to: `/content/${e.collection}` }] }) } } function De() { const Le = E([]); return _e(() => e.collection, () => Le.value = []), { selection: Le } } function Be() { const Le = E(!1), Fe = E(!1), Se = E(!1), We = E(!1), $e = E(!1), Ue = E(null); return { batchEditActive: Se, confirmDelete: Le, deleting: Fe, batchDelete: Ge, confirmArchive: We, archiving: $e, archiveItems: it, error: Ue }; async function Ge() { Fe.value = !0; const pt = p.value; try { await ue.delete(`/items/${e.collection}`, { data: pt }), await ke(), p.value = [], Le.value = !1 } catch (gt) { Ue.value = gt } finally { Fe.value = !1 } } async function it() { var gt, jn; if (!((jn = (gt = f.value) == null ? void 0 : gt.meta) == null ? void 0 : jn.archive_field)) return; $e.value = !0; let pt = f.value.meta.archive_value; pt === "true" && (pt = !0), pt === "false" && (pt = !1); try { await ue.patch(`/items/${e.collection}`, { keys: p.value, data: { [f.value.meta.archive_field]: pt } }), We.value = !1, p.value = [], await ke() } catch (sl) { Ue.value = sl } finally { $e.value = !1 } } } function lt() { const Le = V(() => `/content/${e.collection}/+`), Fe = V(() => `/content/${e.collection}`); return { addNewLink: Le, currentCollectionLink: Fe } } function Te() { const Le = E(!1), Fe = E(!1), Se = E(!1); return { bookmarkDialogActive: Le, creatingBookmark: Fe, createBookmark: We, editingBookmark: Se, editBookmark: $e }; async function We(Ue) { Fe.value = !0; try { const Ge = await L({ bookmark: Ue }); n.push(`/content/${Ge.collection}?bookmark=${Ge.id}`), Le.value = !1 } catch (Ge) { Ve(Ge) } finally { Fe.value = !1 } } async function $e(Ue) { T.value = Ue, Le.value = !1 } } function Oe() { k.value = null, F.value = null } function qe() { const Le = V(() => { var Ge; return ((Ge = i == null ? void 0 : i.currentUser) == null ? void 0 : Ge.role.admin_access) === !0 ? !0 : !!u.permissions.find(it => it.action === "update" && it.collection === s.value) }), Fe = V(() => { var Ge, it, pt; if (!((it = (Ge = f.value) == null ? void 0 : Ge.meta) == null ? void 0 : it.archive_field)) return !1; if (((pt = i == null ? void 0 : i.currentUser) == null ? void 0 : pt.role.admin_access) === !0) return !0; const Ue = u.permissions.find(gt => gt.action === "update" && gt.collection === s.value); return !Ue || !Ue.fields ? !1 : Ue.fields.includes("*") ? !0 : Ue.fields.includes(f.value.meta.archive_field) }), Se = V(() => { var Ge; return ((Ge = i == null ? void 0 : i.currentUser) == null ? void 0 : Ge.role.admin_access) === !0 ? !0 : !!u.permissions.find(it => it.action === "delete" && it.collection === s.value) }), We = V(() => { var Ge; return ((Ge = i == null ? void 0 : i.currentUser) == null ? void 0 : Ge.role.admin_access) === !0 ? !0 : !!u.permissions.find(it => it.action === "create" && it.collection === s.value) }); return { batchEditAllowed: Le, batchArchiveAllowed: Fe, batchDeleteAllowed: Se, createAllowed: We } } } }), Hw = { class: "bookmark-controls" }, Ww = { class: "page-description" }; function Gw(e, t, n, l, i, u) { const o = c("content-not-found"), s = c("v-icon"), r = c("v-button"), p = c("v-breadcrumb"), f = c("bookmark-add"), v = c("search-input"), _ = c("v-card-title"), y = c("v-card-actions"), g = c("v-card"), w = c("v-dialog"), h = c("content-navigation"), k = c("v-info"), F = c("drawer-batch"), A = c("sidebar-detail"), P = c("layout-sidebar-detail"), L = c("refresh-sidebar-detail"), T = c("export-sidebar-detail"), N = c("v-error"), O = c("v-card-text"), U = c("private-view"), q = we("tooltip"), K = we("md"); return m(), C(Ne(e.layoutWrapper), { ref: "layoutRef", selection: e.selection, "onUpdate:selection": t[16] || (t[16] = W => e.selection = W), "layout-options": e.layoutOptions, "onUpdate:layout-options": t[17] || (t[17] = W => e.layoutOptions = W), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[18] || (t[18] = W => e.layoutQuery = W), "filter-user": e.filter, "filter-system": e.archiveFilter, filter: e.mergeFilters(e.filter, e.archiveFilter), search: e.search, collection: e.collection, "reset-preset": e.resetPreset, "clear-filters": e.clearFilters }, { default: d(({ layoutState: W }) => { var te; return [!e.currentCollection || e.collection.startsWith("directus_") ? (m(), C(o, { key: 0 })) : (m(), C(U, { key: 1, title: e.bookmark ? e.bookmarkTitle : e.currentCollection.name, "small-header": (te = e.currentLayout) == null ? void 0 : te.smallHeader }, { "title-outer:prepend": d(() => [a(r, { class: de(["header-icon", { archive: e.archive }]), rounded: "", icon: "", secondary: "", disabled: "" }, { default: d(() => [a(s, { name: e.archive ? "archive" : e.currentCollection.icon, color: e.currentCollection.color }, null, 8, ["name", "color"])]), _: 1 }, 8, ["class"])]), headline: d(() => [e.bookmark ? (m(), C(p, { key: 0, items: e.breadcrumb }, null, 8, ["items"])) : (m(), C(p, { key: 1, items: [{ name: e.t("content"), to: "/content" }] }, null, 8, ["items"]))]), "title-outer:append": d(() => [S("div", Hw, [e.bookmark ? e.bookmarkSaved ? (m(), C(s, { key: 1, class: "saved", name: "bookmark" })) : e.bookmarkIsMine ? ee((m(), C(s, { key: 2, class: "save", clickable: "", name: "bookmark_save", onClick: t[1] || (t[1] = G => e.savePreset()) }, null, 512)), [[q, e.t("update_bookmark"), void 0, { bottom: !0 }]]) : (m(), C(f, { key: 3, modelValue: e.bookmarkDialogActive, "onUpdate:modelValue": t[2] || (t[2] = G => e.bookmarkDialogActive = G), class: "add", saving: e.creatingBookmark, onSave: e.createBookmark }, { activator: d(({ on: G }) => [a(s, { class: "toggle", name: "bookmark_outline", clickable: "", onClick: G }, null, 8, ["onClick"])]), _: 1 }, 8, ["modelValue", "saving", "onSave"])) : (m(), C(f, { key: 0, modelValue: e.bookmarkDialogActive, "onUpdate:modelValue": t[0] || (t[0] = G => e.bookmarkDialogActive = G), class: "add", saving: e.creatingBookmark, onSave: e.createBookmark }, { activator: d(({ on: G }) => [ee(a(s, { class: "toggle", clickable: "", name: "bookmark_outline", onClick: G }, null, 8, ["onClick"]), [[q, e.t("create_bookmark"), void 0, { right: !0 }]])]), _: 1 }, 8, ["modelValue", "saving", "onSave"])), e.bookmark && !e.bookmarkSaving && e.bookmarkSaved === !1 ? ee((m(), C(s, { key: 4, name: "settings_backup_restore", clickable: "", class: "clear", onClick: e.clearLocalSave }, null, 8, ["onClick"])), [[q, e.t("reset_bookmark"), void 0, { bottom: !0 }]]) : R("", !0)])]), "actions:prepend": d(() => [(m(), C(Ne(`layout-actions-${e.layout || "tabular"}`), Je(xe(W)), null, 16))]), actions: d(() => [a(v, { modelValue: e.search, "onUpdate:modelValue": t[3] || (t[3] = G => e.search = G), filter: e.filter, "onUpdate:filter": t[4] || (t[4] = G => e.filter = G), collection: e.collection }, null, 8, ["modelValue", "filter", "collection"]), e.selection.length > 0 ? (m(), C(w, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[6] || (t[6] = G => e.confirmDelete = G), onEsc: t[7] || (t[7] = G => e.confirmDelete = !1) }, { activator: d(({ on: G }) => [ee(a(r, { disabled: e.batchDeleteAllowed !== !0, rounded: "", icon: "", class: "action-delete", onClick: G }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[q, e.batchDeleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("batch_delete_confirm", e.selection.length)), 1)]), _: 1 }), a(y, null, { default: d(() => [a(r, { secondary: "", onClick: t[5] || (t[5] = G => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.batchDelete }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 0 && e.currentCollection.meta && e.currentCollection.meta.archive_field ? (m(), C(w, { key: 1, modelValue: e.confirmArchive, "onUpdate:modelValue": t[9] || (t[9] = G => e.confirmArchive = G), onEsc: t[10] || (t[10] = G => e.confirmArchive = !1) }, { activator: d(({ on: G }) => [ee(a(r, { disabled: e.batchArchiveAllowed !== !0, rounded: "", icon: "", class: "action-archive", onClick: G }, { default: d(() => [a(s, { name: "archive", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[q, e.batchArchiveAllowed ? e.t("archive") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("archive_confirm_count", e.selection.length)), 1)]), _: 1 }), a(y, null, { default: d(() => [a(r, { secondary: "", onClick: t[8] || (t[8] = G => e.confirmArchive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "warning", loading: e.archiving, onClick: e.archiveItems }, { default: d(() => [D(b(e.t("archive")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 1 ? ee((m(), C(r, { key: 2, rounded: "", icon: "", class: "action-batch", disabled: e.batchEditAllowed === !1, onClick: t[11] || (t[11] = G => e.batchEditActive = !0) }, { default: d(() => [a(s, { name: "edit", outline: "" })]), _: 1 }, 8, ["disabled"])), [[q, e.batchEditAllowed ? e.t("edit") : e.t("not_allowed"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(r, { rounded: "", icon: "", to: e.addNewLink, disabled: e.createAllowed === !1 }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to", "disabled"]), [[q, e.createAllowed ? e.t("create_item") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(h, { "current-collection": e.collection }, null, 8, ["current-collection"])]), sidebar: d(() => [a(A, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", Ww, null, 512), [[K, e.t("page_help_collections_collection", { collection: e.currentCollection.name })]])]), _: 1 }, 8, ["title"]), a(P, { modelValue: e.layout, "onUpdate:modelValue": t[13] || (t[13] = G => e.layout = G) }, { default: d(() => [(m(), C(Ne(`layout-options-${e.layout || "tabular"}`), Je(xe(W)), null, 16))]), _: 2 }, 1032, ["modelValue"]), (m(), C(Ne(`layout-sidebar-${e.layout || "tabular"}`), Je(xe(W)), null, 16)), a(L, { modelValue: e.refreshInterval, "onUpdate:modelValue": t[14] || (t[14] = G => e.refreshInterval = G), onRefresh: e.refresh }, null, 8, ["modelValue", "onRefresh"]), a(T, { collection: e.collection, filter: e.mergeFilters(e.filter, e.archiveFilter), search: e.search }, null, 8, ["collection", "filter", "search"])]), default: d(() => [e.bookmark && e.bookmarkExists === !1 ? (m(), C(k, { key: 0, type: "warning", title: e.t("bookmark_doesnt_exist"), icon: "bookmark", center: "" }, { append: d(() => [a(r, { to: e.currentCollectionLink }, { default: d(() => [D(b(e.t("bookmark_doesnt_exist_cta")), 1)]), _: 1 }, 8, ["to"])]), default: d(() => [D(b(e.t("bookmark_doesnt_exist_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : (m(), C(Ne(`layout-${e.layout || "tabular"}`), dt({ key: 1, class: "layout" }, W), { "no-results": d(() => [a(k, { title: e.t("no_results"), icon: "search", center: "" }, { append: d(() => [a(r, { onClick: e.clearFilters }, { default: d(() => [D(b(e.t("clear_filters")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("no_results_copy")) + " ", 1)]), _: 1 }, 8, ["title"])]), "no-items": d(() => [a(k, { title: e.t("item_count", 0), icon: e.currentCollection.icon, center: "" }, et({ default: d(() => [D(b(e.t("no_items_copy")) + " ", 1)]), _: 2 }, [e.createAllowed ? { name: "append", fn: d(() => [a(r, { to: `/content/${e.collection}/+` }, { default: d(() => [D(b(e.t("create_item")), 1)]), _: 1 }, 8, ["to"])]) } : void 0]), 1032, ["title", "icon"])]), _: 2 }, 1040)), a(F, { active: e.batchEditActive, "onUpdate:active": t[12] || (t[12] = G => e.batchEditActive = G), "primary-keys": e.selection, collection: e.collection, onRefresh: e.refresh }, null, 8, ["active", "primary-keys", "collection", "onRefresh"]), a(w, { "model-value": e.deleteError !== null }, { default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("something_went_wrong")), 1)]), _: 1 }), a(O, null, { default: d(() => [a(N, { error: e.deleteError }, null, 8, ["error"])]), _: 1 }), a(y, null, { default: d(() => [a(r, { onClick: t[15] || (t[15] = G => e.deleteError = null) }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"])]), _: 2 }, 1032, ["title", "small-header"]))] }), _: 1 }, 8, ["selection", "layout-options", "layout-query", "filter-user", "filter-system", "filter", "search", "collection", "reset-preset", "clear-filters"]) } var Jw = B(Kw, [["render", Gw], ["__scopeId", "data-v-c7abd8ac"]]); function Qw(e) { switch (e) { case "af": return j(() => import("./assets/index.20ac57d1.js").then(function (t) { return t.i }), ["assets/index.20ac57d1.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ar-DZ": return j(() => import("./assets/index.f82f535b.js").then(function (t) { return t.i }), ["assets/index.f82f535b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ar-MA": return j(() => import("./assets/index.711a5d70.js").then(function (t) { return t.i }), ["assets/index.711a5d70.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ar-SA": return j(() => import("./assets/index.b2f66056.js").then(function (t) { return t.i }), ["assets/index.b2f66056.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "az": return j(() => import("./assets/index.97d0cfe9.js").then(function (t) { return t.i }), ["assets/index.97d0cfe9.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "be": return j(() => import("./assets/index.52fb1436.js").then(function (t) { return t.i }), ["assets/index.52fb1436.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "bg": return j(() => import("./assets/index.a2312cea.js").then(function (t) { return t.i }), ["assets/index.a2312cea.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "bn": return j(() => import("./assets/index.f94e9d3c.js").then(function (t) { return t.i }), ["assets/index.f94e9d3c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ca": return j(() => import("./assets/index.93ea422c.js").then(function (t) { return t.i }), ["assets/index.93ea422c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "cs": return j(() => import("./assets/index.3adc3d2e.js").then(function (t) { return t.i }), ["assets/index.3adc3d2e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "cy": return j(() => import("./assets/index.01b31560.js").then(function (t) { return t.i }), ["assets/index.01b31560.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "da": return j(() => import("./assets/index.aef19a6c.js").then(function (t) { return t.i }), ["assets/index.aef19a6c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "de": return j(() => import("./assets/index.f55469a4.js").then(function (t) { return t.i }), ["assets/index.f55469a4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.eedadecd.js", "assets/index.ffc6c203.js"]); case "de-AT": return j(() => import("./assets/index.a8fcc603.js").then(function (t) { return t.i }), ["assets/index.a8fcc603.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.eedadecd.js", "assets/index.ffc6c203.js"]); case "el": return j(() => import("./assets/index.c1abc495.js").then(function (t) { return t.i }), ["assets/index.c1abc495.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "en-AU": return j(() => import("./assets/index.106dfb9d.js").then(function (t) { return t.i }), ["assets/index.106dfb9d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.ffc6c203.js", "assets/index.7b2f54b1.js"]); case "en-CA": return j(() => import("./assets/index.777adea0.js").then(function (t) { return t.i }), ["assets/index.777adea0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.7b2f54b1.js", "assets/index.ffc6c203.js"]); case "en-GB": return j(() => import("./assets/index.53c97358.js").then(function (t) { return t.i }), ["assets/index.53c97358.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.7b2f54b1.js", "assets/index.ffc6c203.js"]); case "en-IN": return j(() => import("./assets/index.8a6e3d50.js").then(function (t) { return t.i }), ["assets/index.8a6e3d50.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.7b2f54b1.js", "assets/index.ffc6c203.js"]); case "en-NZ": return j(() => import("./assets/index.41e7cd63.js").then(function (t) { return t.i }), ["assets/index.41e7cd63.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.7b2f54b1.js", "assets/index.ffc6c203.js"]); case "en-US": return j(() => import("./assets/index.386e7bb1.js").then(function (t) { return t.i }), ["assets/index.386e7bb1.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.ffc6c203.js", "assets/index.7b2f54b1.js"]); case "en-ZA": return j(() => import("./assets/index.bd0b9050.js").then(function (t) { return t.i }), ["assets/index.bd0b9050.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.55d799e2.js", "assets/index.7b2f54b1.js", "assets/index.ffc6c203.js"]); case "eo": return j(() => import("./assets/index.8081cdc6.js").then(function (t) { return t.i }), ["assets/index.8081cdc6.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "es": return j(() => import("./assets/index.52f56cb8.js").then(function (t) { return t.i }), ["assets/index.52f56cb8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "et": return j(() => import("./assets/index.b0ac188d.js").then(function (t) { return t.i }), ["assets/index.b0ac188d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "eu": return j(() => import("./assets/index.57ce03df.js").then(function (t) { return t.i }), ["assets/index.57ce03df.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "fa-IR": return j(() => import("./assets/index.5665651d.js").then(function (t) { return t.i }), ["assets/index.5665651d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "fi": return j(() => import("./assets/index.071b0921.js").then(function (t) { return t.i }), ["assets/index.071b0921.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "fr": return j(() => import("./assets/index.3aa19795.js").then(function (t) { return t.i }), ["assets/index.3aa19795.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.1b3cf886.js", "assets/index.ffc6c203.js"]); case "fr-CA": return j(() => import("./assets/index.6f0fc344.js").then(function (t) { return t.i }), ["assets/index.6f0fc344.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.1b3cf886.js", "assets/index.ffc6c203.js"]); case "fr-CH": return j(() => import("./assets/index.90726b0d.js").then(function (t) { return t.i }), ["assets/index.90726b0d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "gd": return j(() => import("./assets/index.f9e49c6f.js").then(function (t) { return t.i }), ["assets/index.f9e49c6f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "gl": return j(() => import("./assets/index.2699c99b.js").then(function (t) { return t.i }), ["assets/index.2699c99b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "gu": return j(() => import("./assets/index.37e8e5c7.js").then(function (t) { return t.i }), ["assets/index.37e8e5c7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "he": return j(() => import("./assets/index.032be8b7.js").then(function (t) { return t.i }), ["assets/index.032be8b7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "hi": return j(() => import("./assets/index.c8d8cea3.js").then(function (t) { return t.i }), ["assets/index.c8d8cea3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "hr": return j(() => import("./assets/index.0f959880.js").then(function (t) { return t.i }), ["assets/index.0f959880.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ht": return j(() => import("./assets/index.e2516fcf.js").then(function (t) { return t.i }), ["assets/index.e2516fcf.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "hu": return j(() => import("./assets/index.930b04bd.js").then(function (t) { return t.i }), ["assets/index.930b04bd.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "hy": return j(() => import("./assets/index.9443e0cb.js").then(function (t) { return t.i }), ["assets/index.9443e0cb.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "id": return j(() => import("./assets/index.74ffa87a.js").then(function (t) { return t.i }), ["assets/index.74ffa87a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "is": return j(() => import("./assets/index.a295ccab.js").then(function (t) { return t.i }), ["assets/index.a295ccab.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "it": return j(() => import("./assets/index.36c4f284.js").then(function (t) { return t.i }), ["assets/index.36c4f284.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "ja": return j(() => import("./assets/index.a4ab27a2.js").then(function (t) { return t.i }), ["assets/index.a4ab27a2.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ka": return j(() => import("./assets/index.8053cc44.js").then(function (t) { return t.i }), ["assets/index.8053cc44.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "kk": return j(() => import("./assets/index.2aad0cee.js").then(function (t) { return t.i }), ["assets/index.2aad0cee.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "kn": return j(() => import("./assets/index.9a540e55.js").then(function (t) { return t.i }), ["assets/index.9a540e55.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ko": return j(() => import("./assets/index.6c6cfd02.js").then(function (t) { return t.i }), ["assets/index.6c6cfd02.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "lb": return j(() => import("./assets/index.774b2ee3.js").then(function (t) { return t.i }), ["assets/index.774b2ee3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "lt": return j(() => import("./assets/index.98a5f70b.js").then(function (t) { return t.i }), ["assets/index.98a5f70b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "lv": return j(() => import("./assets/index.6bc4b03b.js").then(function (t) { return t.i }), ["assets/index.6bc4b03b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "mk": return j(() => import("./assets/index.1802aa67.js").then(function (t) { return t.i }), ["assets/index.1802aa67.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "mn": return j(() => import("./assets/index.5dd89f5a.js").then(function (t) { return t.i }), ["assets/index.5dd89f5a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ms": return j(() => import("./assets/index.c4217a03.js").then(function (t) { return t.i }), ["assets/index.c4217a03.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "mt": return j(() => import("./assets/index.f98c4963.js").then(function (t) { return t.i }), ["assets/index.f98c4963.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "nb": return j(() => import("./assets/index.b80f08e2.js").then(function (t) { return t.i }), ["assets/index.b80f08e2.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "nl": return j(() => import("./assets/index.b30355b8.js").then(function (t) { return t.i }), ["assets/index.b30355b8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "nl-BE": return j(() => import("./assets/index.ceccd7b0.js").then(function (t) { return t.i }), ["assets/index.ceccd7b0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "nn": return j(() => import("./assets/index.eceb7719.js").then(function (t) { return t.i }), ["assets/index.eceb7719.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "pl": return j(() => import("./assets/index.be355994.js").then(function (t) { return t.i }), ["assets/index.be355994.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "pt": return j(() => import("./assets/index.0f58cc2f.js").then(function (t) { return t.i }), ["assets/index.0f58cc2f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "pt-BR": return j(() => import("./assets/index.1f969a94.js").then(function (t) { return t.i }), ["assets/index.1f969a94.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ro": return j(() => import("./assets/index.65fe108b.js").then(function (t) { return t.i }), ["assets/index.65fe108b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ru": return j(() => import("./assets/index.21616bb4.js").then(function (t) { return t.i }), ["assets/index.21616bb4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "sk": return j(() => import("./assets/index.319b4222.js").then(function (t) { return t.i }), ["assets/index.319b4222.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "sl": return j(() => import("./assets/index.f6bdd3dc.js").then(function (t) { return t.i }), ["assets/index.f6bdd3dc.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "sq": return j(() => import("./assets/index.ba16542c.js").then(function (t) { return t.i }), ["assets/index.ba16542c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "sr": return j(() => import("./assets/index.632aa7a5.js").then(function (t) { return t.i }), ["assets/index.632aa7a5.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "sr-Latn": return j(() => import("./assets/index.c52d890d.js").then(function (t) { return t.i }), ["assets/index.c52d890d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "sv": return j(() => import("./assets/index.4de13843.js").then(function (t) { return t.i }), ["assets/index.4de13843.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ta": return j(() => import("./assets/index.d900df0d.js").then(function (t) { return t.i }), ["assets/index.d900df0d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "te": return j(() => import("./assets/index.380a8d1f.js").then(function (t) { return t.i }), ["assets/index.380a8d1f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "th": return j(() => import("./assets/index.6934844d.js").then(function (t) { return t.i }), ["assets/index.6934844d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "tr": return j(() => import("./assets/index.65d30ed8.js").then(function (t) { return t.i }), ["assets/index.65d30ed8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "ug": return j(() => import("./assets/index.35a34e2b.js").then(function (t) { return t.i }), ["assets/index.35a34e2b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "uk": return j(() => import("./assets/index.6edc7f7f.js").then(function (t) { return t.i }), ["assets/index.6edc7f7f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "uz": return j(() => import("./assets/index.d7c52831.js").then(function (t) { return t.i }), ["assets/index.d7c52831.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "vi": return j(() => import("./assets/index.5cee2017.js").then(function (t) { return t.i }), ["assets/index.5cee2017.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); case "zh-CN": return j(() => import("./assets/index.ba4fccfa.js").then(function (t) { return t.i }), ["assets/index.ba4fccfa.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js", "assets/index.dc71b91a.js"]); case "zh-TW": return j(() => import("./assets/index.25aff973.js").then(function (t) { return t.i }), ["assets/index.25aff973.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/index.ffc6c203.js"]); default: return Promise.resolve() } } async function Ca() { const e = ze.global.locale.value, t = [e, e.split("-")[0], "en-US"]; let n; for (const l of t) try { n = (await Qw(l)).default; break } catch { continue } return n } const jt = async (e, t, n) => an(e, t, Ce(re({}, n), { locale: await Ca() })); const Xw = z({ props: { revision: { type: Object, required: !0 }, last: { type: Boolean, default: !1 } }, emits: ["click"], setup(e) { const { t } = x(), n = V(() => Object.keys(e.revision.delta).length), l = V(() => { switch (e.revision.activity.action.toLowerCase()) { case "create": return t("revision_delta_created"); case "update": return t("revision_delta_updated", n.value); case "delete": return t("revision_delta_deleted"); case "revert": return t("revision_delta_reverted"); default: return t("revision_delta_other") } }), i = V(() => an(new Date(e.revision.activity.timestamp), String(t("date-fns_time")))), u = V(() => { var o, s; return ((s = (o = e.revision) == null ? void 0 : o.activity) == null ? void 0 : s.user) && typeof e.revision.activity.user == "object" ? yt(e.revision.activity.user) : t("private_user") }); return { t, headerMessage: l, time: i, user: u } } }), Zw = { class: "header" }, Yw = { class: "content" }, xw = { class: "time" }, ek = D(" \u2013 "), tk = { key: 1 }; function nk(e, t, n, l, i, u) { const o = c("user-popover"); return m(), I("div", { class: de(["revision-item", { last: e.last }]), onClick: t[0] || (t[0] = s => e.$emit("click")) }, [S("div", Zw, [S("span", { class: de(["dot", e.revision.activity.action]) }, null, 2), D(" " + b(e.headerMessage), 1)]), S("div", Yw, [S("span", xw, b(e.time), 1), ek, e.revision.activity.user ? (m(), C(o, { key: 0, class: "user", user: e.revision.activity.user.id }, { default: d(() => [S("span", null, b(e.user), 1)]), _: 1 }, 8, ["user"])) : (m(), I("span", tk, b(e.t("private_user")), 1))])], 2) } var lk = B(Xw, [["render", nk], ["__scopeId", "data-v-552a0966"]]); const ok = z({ components: { RevisionItem: lk }, props: { group: { type: Object, required: !0 } }, emits: ["click"], setup() { return { expand: E(!0) } } }), ak = { class: "scroll-container" }; function ik(e, t, n, l, i, u) { const o = c("revision-item"), s = c("v-detail"); return m(), C(s, { modelValue: e.expand, "onUpdate:modelValue": t[0] || (t[0] = r => e.expand = r), label: e.group.dateFormatted, class: "revisions-date-group" }, { default: d(() => [ee(S("div", ak, [(m(!0), I(se, null, he(e.group.revisions, (r, p) => (m(), C(o, { key: r.id, revision: r, last: p === e.group.revisions.length - 1, onClick: f => e.$emit("click", r.id) }, null, 8, ["revision", "last", "onClick"]))), 128))], 512), [[Et, e.expand]])]), _: 1 }, 8, ["modelValue", "label"]) } var sk = B(ok, [["render", ik], ["__scopeId", "data-v-dcd1ff74"]]); const rk = z({ props: { revisions: { type: Array, required: !0 }, current: { type: Number, required: !0 } }, emits: ["update:current"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "current", t), i = E(null); _e(() => e.revisions, async () => { const s = []; for (const r of e.revisions) { const p = await o(r); let f = n("private_user"); if (typeof r.activity.user == "object") { const y = r.activity.user; f = yt(y) } const v = String(n("revision_delta_by", { date: p, user: f })), _ = r.id; s.push({ text: v, value: _ }) } i.value = s }, { immediate: !0 }); const u = V(() => { var s; return (s = i.value) == null ? void 0 : s.find(r => r.value === l.value) }); return { internalCurrent: l, options: i, selectedOption: u }; async function o(s) { const r = await jt(new Date(s.activity.timestamp), String(n("date-fns_date_short"))), p = await jt(new Date(s.activity.timestamp), String(n("date-fns_time"))); return `${r} (${p})` } } }), dk = ["onClick"]; function uk(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-content"), r = c("v-list-item"), p = c("v-list"), f = c("v-menu"); return m(), C(f, { "show-arrow": "" }, { activator: d(({ toggle: v }) => [S("span", { class: "picker", onClick: v }, [D(b(e.selectedOption && e.selectedOption.text) + " ", 1), a(o, { name: "expand_more", small: "" })], 8, dk)]), default: d(() => [a(p, { class: "menu" }, { default: d(() => [(m(!0), I(se, null, he(e.options, v => (m(), C(r, { key: v.value, clickable: "", active: e.internalCurrent === v.value, onClick: _ => e.internalCurrent = v.value }, { default: d(() => [a(o, { name: "commit_node" }), a(s, null, { default: d(() => [D(b(v.text), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["active", "onClick"]))), 128))]), _: 1 })]), _: 1 }) } var ck = B(rk, [["render", uk], ["__scopeId", "data-v-2f4d8b82"]]); const pk = z({ props: { revision: { type: Object, required: !0 } }, setup() { const { t: e } = x(); return { t: e } } }), mk = e => (Qe("data-v-2d744eb6"), e = e(), Xe(), e), fk = mk(() => S("br", null, null, -1)); function vk(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-form"); return m(), I("div", null, [a(o, { type: "info" }, { default: d(() => [D(b(e.revision.activity.action === "create" ? e.t("revision_post_create") : e.t("revision_post_update")) + " ", 1), fk, D(" " + b(e.t("no_relational_data")), 1)]), _: 1 }), a(s, { disabled: "", collection: e.revision.collection, "primary-key": e.revision.item, "initial-values": e.revision.data }, null, 8, ["collection", "primary-key", "initial-values"])]) } var _k = B(pk, [["render", vk], ["__scopeId", "data-v-2d744eb6"]]); const yk = z({ props: { changes: { type: Array, required: !0 }, added: { type: Boolean, default: !1 }, deleted: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = V(() => e.changes.filter(i => e.added === !0 ? i.removed !== !0 : i.added !== !0)), l = V(() => e.changes.length === 2); return { t, changesFiltered: n, wholeThing: l } } }), gk = { class: "delta" }, hk = { key: 1, class: "no-value" }; function bk(e, t, n, l, i, u) { const o = c("v-icon"); return m(), I("div", { class: de(["change-line", { added: e.added, deleted: e.deleted, "no-highlight": e.wholeThing }]) }, [a(o, { name: e.added ? "add" : "remove" }, null, 8, ["name"]), S("div", gk, [(m(!0), I(se, null, he(e.changesFiltered, (s, r) => (m(), I("span", { key: r, class: de({ changed: s.added || s.removed }) }, [s.value ? (m(), I(se, { key: 0 }, [D(b(s.value), 1)], 64)) : (m(), I("span", hk, b(e.t("no_value")), 1))], 2))), 128))])], 2) } var $k = B(yk, [["render", bk], ["__scopeId", "data-v-481ea258"]]); const wk = z({ components: { RevisionsDrawerUpdatesChange: $k }, props: { revision: { type: Object, required: !0 }, revisions: { type: Array, required: !0 } }, setup(e) { const { t } = x(), n = Pe(), l = V(() => { const u = e.revisions.findIndex(o => o.id === e.revision.id); return e.revisions[u + 1] }), i = V(() => l.value ? Object.keys(e.revision.delta).map(o => { var v; const s = (v = n.getField(e.revision.collection, o)) == null ? void 0 : v.name; if (!s) return null; const r = e.revision.delta[o], p = l.value.data[o]; if (M.exports.isEqual(r, p)) return null; let f; return typeof p == "string" && typeof r == "string" && r.length > 25 ? f = Dr(p, r) : Array.isArray(p) && Array.isArray(r) ? f = Tr(p, r) : p && r && typeof r == "object" && typeof r == "object" ? f = Pr(p, r) : f = [{ removed: !0, value: p }, { added: !0, value: r }], { name: s, changes: f } }).filter(o => o) : null); return { t, changes: i, previousRevision: l } } }), kk = e => (Qe("data-v-09850b86"), e = e(), Xe(), e), Sk = { class: "updates" }, Ck = kk(() => S("br", null, null, -1)), Vk = { class: "type-label" }; function Fk(e, t, n, l, i, u) { const o = c("v-notice"), s = c("revisions-drawer-updates-change"); return m(), I("div", Sk, [a(o, { type: "info" }, { default: d(() => [D(b(e.t("changes_made")) + " ", 1), Ck, D(" " + b(e.t("no_relational_data")), 1)]), _: 1 }), (m(!0), I(se, null, he(e.changes, r => (m(), I("div", { key: r.name, class: "change" }, [S("div", Vk, b(r.name), 1), a(s, { deleted: "", changes: r.changes }, null, 8, ["changes"]), a(s, { added: "", changes: r.changes }, null, 8, ["changes"])]))), 128))]) } var Ak = B(wk, [["render", Fk], ["__scopeId", "data-v-09850b86"]]); const Ik = z({ components: { RevisionsDrawerPicker: ck, RevisionsDrawerPreview: _k, RevisionsDrawerUpdates: Ak }, props: { revisions: { type: Array, required: !0 }, current: { type: [Number, String], default: null }, active: { type: Boolean, default: !1 } }, emits: ["revert", "update:active", "update:current"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "active", t), i = Re(e, "current", t), u = E(["updates_made"]), o = V(() => { var _; return ((_ = s.value) == null ? void 0 : _.activity.action) === "create" ? n("item_creation") : n("item_revision") }), s = V(() => e.revisions.find(_ => _.id === e.current)), r = V(() => { const _ = e.revisions.findIndex(y => y.id === e.current); return e.revisions[_ + 1] }), p = V(() => { var _; return ((_ = s.value) == null ? void 0 : _.activity.action) === "create" ? [{ text: n("creation_preview"), value: "revision_preview" }] : [{ text: n("updates_made"), value: "updates_made" }, { text: n("revision_preview"), value: "revision_preview" }] }), f = V(() => { var _; return ((_ = s.value) == null ? void 0 : _.activity.action) !== "create" }); return Or(() => u.value = [p.value[0].value]), { t: n, internalActive: l, internalCurrent: i, title: o, currentRevision: s, currentTab: u, tabs: p, hasPastRevision: f, revert: v }; function v() { var y, g; if (!s.value) return; const _ = {}; for (const [w, h] of Object.entries(s.value.delta)) { const k = (g = (y = r.value) == null ? void 0 : y.data[w]) != null ? g : null; M.exports.isEqual(h, k) || (_[w] = k) } t("revert", _), l.value = !1 } } }), Ek = { class: "content" }; function Dk(e, t, n, l, i, u) { const o = c("revisions-drawer-picker"), s = c("v-tab"), r = c("v-tabs"), p = c("revisions-drawer-updates"), f = c("revisions-drawer-preview"), v = c("v-icon"), _ = c("v-button"), y = c("v-drawer"), g = we("tooltip"); return m(), I("div", null, [a(y, { modelValue: e.internalActive, "onUpdate:modelValue": t[3] || (t[3] = w => e.internalActive = w), title: e.title, icon: "change_history", "sidebar-label": e.t(e.currentTab[0]), onCancel: t[4] || (t[4] = w => e.internalActive = !1) }, { subtitle: d(() => [a(o, { current: e.internalCurrent, "onUpdate:current": t[0] || (t[0] = w => e.internalCurrent = w), revisions: e.revisions }, null, 8, ["current", "revisions"])]), sidebar: d(() => [a(r, { modelValue: e.currentTab, "onUpdate:modelValue": t[1] || (t[1] = w => e.currentTab = w), vertical: "" }, { default: d(() => [(m(!0), I(se, null, he(e.tabs, w => (m(), C(s, { key: w.value, value: w.value }, { default: d(() => [D(b(w.text), 1)]), _: 2 }, 1032, ["value"]))), 128))]), _: 1 }, 8, ["modelValue"])]), actions: d(() => [e.hasPastRevision ? ee((m(), C(_, { key: 0, class: "revert", icon: "", rounded: "", onClick: e.revert }, { default: d(() => [a(v, { name: "restore" })]), _: 1 }, 8, ["onClick"])), [[g, e.t("revert"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(_, { icon: "", rounded: "", onClick: t[2] || (t[2] = w => e.internalActive = !1) }, { default: d(() => [a(v, { name: "check" })]), _: 1 }, 512), [[g, e.t("done"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", Ek, [e.currentTab[0] === "updates_made" ? (m(), C(p, { key: 0, revision: e.currentRevision, revisions: e.revisions }, null, 8, ["revision", "revisions"])) : R("", !0), e.currentTab[0] === "revision_preview" ? (m(), C(f, { key: 1, revision: e.currentRevision }, null, 8, ["revision"])) : R("", !0)])]), _: 1 }, 8, ["modelValue", "title", "sidebar-label"])]) } var Tk = B(Ik, [["render", Dk], ["__scopeId", "data-v-ca277ace"]]); function lo(e, t = 0, n = ["K", "M", "B", "T"]) { const l = e < 0; e = Math.abs(e); let i = String(e); if (e >= 1e3) { const u = Math.pow(10, t); for (let o = n.length - 1; o >= 0; o--) { const s = Math.pow(10, (o + 1) * 3); if (s <= e) { e = Math.round(e * u / s) / u, e === 1e3 && o < n.length - 1 && (e = 1, o++), i = e.toFixed(t) + n[o]; break } } } return l && (i = `-${i}`), i } const Pk = z({ components: { RevisionsDrawer: Tk, RevisionsDateGroup: sk }, props: { collection: { type: String, required: !0 }, primaryKey: { type: [String, Number], required: !0 } }, emits: ["revert"], setup(e) { const { t } = x(), { revisions: n, revisionsByDate: l, loading: i, refresh: u, revisionsCount: o, pagesCount: s, created: r } = y(e.collection, e.primaryKey), p = E(!1), f = E(null), v = E(1); return _e(() => v.value, g => { u(g) }), { t, revisions: n, revisionsByDate: l, loading: i, refresh: u, modalActive: p, modalCurrentRevision: f, openModal: _, revisionsCount: o, created: r, page: v, pagesCount: s, abbreviateNumber: lo }; function _(g) { f.value = g, p.value = !0 } function y(g, w) { const h = E(null), k = E(null), F = E(!1), A = E(0), P = E(), L = E(0); return T(), { created: P, revisions: h, revisionsByDate: k, loading: F, refresh: N, revisionsCount: A, pagesCount: L }; async function T(O = 0) { var q; F.value = !0; const U = 100; try { const K = await ue.get("/revisions", { params: { filter: { collection: { _eq: g }, item: { _eq: w } }, sort: "-id", limit: U, page: O, fields: ["id", "data", "delta", "collection", "item", "activity.action", "activity.timestamp", "activity.user.id", "activity.user.email", "activity.user.first_name", "activity.user.last_name", "activity.ip", "activity.user_agent"], meta: ["filter_count"] } }), W = await ue.get("/revisions", { params: { filter: { collection: { _eq: g }, item: { _eq: w }, activity: { action: { _eq: "create" } } }, sort: "-id", limit: 1, fields: ["id", "data", "delta", "collection", "item", "activity.action", "activity.timestamp", "activity.user.id", "activity.user.email", "activity.user.first_name", "activity.user.last_name", "activity.ip", "activity.user_agent"], meta: ["filter_count"] } }); P.value = (q = W.data.data) == null ? void 0 : q[0]; const te = M.exports.groupBy(K.data.data.filter(X => !!X.activity), X => new Date(new Date(X.activity.timestamp).toDateString())), G = []; for (const [X, ve] of Object.entries(te)) { const ae = new Date(X), ne = Yo(ae), Y = xo(ae), ce = ea(ae); let pe; ne ? pe = t("today") : Y ? pe = t("yesterday") : ce ? pe = await jt(ae, String(t("date-fns_date_short_no_year"))) : pe = await jt(ae, String(t("date-fns_date_short"))), G.push({ date: ae, dateFormatted: String(pe), revisions: M.exports.orderBy(ve, ["activity.timestamp"], ["desc"]) }) } k.value = M.exports.orderBy(G, ["date"], ["desc"]), h.value = M.exports.orderBy(K.data.data, ["activity.timestamp"], ["desc"]), A.value = K.data.meta.filter_count, L.value = Math.ceil(A.value / U) } catch (K) { Ve(K) } finally { F.value = !1 } } async function N(O = 0) { await T(O) } } } }), Ok = { class: "external" }; function Lk(e, t, n, l, i, u) { const o = c("v-progress-linear"), s = c("RevisionsDateGroup"), r = c("v-divider"), p = c("v-pagination"), f = c("revisions-drawer"), v = c("sidebar-detail"); return m(), C(v, { title: e.t("revisions"), icon: "change_history", badge: !e.loading && e.revisions ? e.abbreviateNumber(e.revisionsCount) : null }, { default: d(() => [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : (m(), I(se, { key: 1 }, [(m(!0), I(se, null, he(e.revisionsByDate, _ => (m(), C(s, { key: _.date.toString(), group: _, onClick: e.openModal }, null, 8, ["group", "onClick"]))), 128)), e.page == e.pagesCount && !e.created ? (m(), I(se, { key: 0 }, [e.revisionsByDate.length > 0 ? (m(), C(r, { key: 0 })) : R("", !0), S("div", Ok, b(e.t("revision_delta_created_externally")), 1)], 64)) : R("", !0), e.pagesCount > 1 ? (m(), C(p, { key: 1, modelValue: e.page, "onUpdate:modelValue": t[0] || (t[0] = _ => e.page = _), length: e.pagesCount, "total-visible": 2 }, null, 8, ["modelValue", "length"])) : R("", !0)], 64)), e.revisions ? (m(), C(f, { key: 2, current: e.modalCurrentRevision, "onUpdate:current": t[1] || (t[1] = _ => e.modalCurrentRevision = _), active: e.modalActive, "onUpdate:active": t[2] || (t[2] = _ => e.modalActive = _), revisions: e.revisions, onRevert: t[3] || (t[3] = _ => e.$emit("revert", _)) }, null, 8, ["current", "active", "revisions"])) : R("", !0)]), _: 1 }, 8, ["title", "badge"]) } var Bn = B(Pk, [["render", Lk], ["__scopeId", "data-v-427239ad"]]); const hl = new Set([]), Ht = {}; document.body.addEventListener("keydown", e => { e.repeat || !e.key || (hl.add(jk(e)), Rk(e)) }); document.body.addEventListener("keyup", e => { e.repeat || !e.key || hl.clear() }); function nt(e, t, n = E(document.body)) { const l = (i, u) => { if (!n.value) return; const o = n.value instanceof HTMLElement ? n.value : n.value.$el; return document.activeElement === o || o.contains(document.activeElement) || document.activeElement === document.body ? (i.preventDefault(), t(i, u)) : !1 }; at(() => { [e].flat().forEach(i => { i in Ht ? Ht[i].unshift(l) : Ht[i] = [l] }) }), At(() => { [e].flat().forEach(i => { i in Ht && (Ht[i] = Ht[i].filter(u => u !== l), Ht[i].length === 0 && delete Ht[i]) }) }) } function jk(e) { const t = { Control: "meta", Command: "meta" }, n = /^[a-zA-Z0-9]*?$/g; let l = e.key.match(n) === null ? e.code.replace(/(Key|Digit)/g, "") : e.key; return l = l in t ? t[l] : l, l = l.toLowerCase(), l } function Rk(e) { Object.entries(Ht).forEach(([t, n]) => { const l = t.split("+"); for (t of hl) if (l.includes(t) === !1) return; for (t of l) if (hl.has(t) === !1) return; for (let i = 0; i < n.length; i++) { let u = !1; if (n[i](e, () => { u = !0 }), typeof u == "boolean" && u) break } }) } let oo; function It(e) { oo || (oo = el()), oo.add(e) } function Ye() { const t = window.location.pathname.split("/"), n = t.indexOf("admin"); return t.slice(0, n).join("/") + "/" } function Va() { const t = window.location.href.split("/"), n = t.indexOf("admin"); return t.slice(0, n).join("/") + "/" } const Mk = z({ props: { modelValue: { type: String, default: null }, captureGroup: { type: String, required: !0 }, multiline: { type: Boolean, default: !1 }, triggerCharacter: { type: String, required: !0 }, items: { type: Object, required: !0 } }, emits: ["update:modelValue", "trigger", "deactivate"], setup(e, { emit: t }) { const n = E(); let l = !1; return _e(() => e.modelValue, o => { !n.value || o !== n.value.innerText && u(o) }), at(() => { e.modelValue && e.modelValue !== n.value.innerText && u(e.modelValue) }), { processText: i, input: n }; function i(o) { var y; const s = o.target, r = rl(s).pos, p = (y = s.innerText) != null ? y : ""; let f = p.indexOf(" ", r); f == -1 && (f = p.length); const v = /\S+$/.exec(p.slice(0, f)); let _ = v ? v[0] : null; _ && (_ = _.replace(/[\s'";:,./?\\-]$/, "")), (_ == null ? void 0 : _.startsWith(e.triggerCharacter)) ? (t("trigger", { searchQuery: _.substring(e.triggerCharacter.length), caretPosition: r }), l = !0) : l && (t("deactivate"), l = !1), u(), t("update:modelValue", s.innerText) } function u(o) { var f, v; if (!n.value) return; let s = (f = o != null ? o : n.value.innerHTML) != null ? f : ""; const r = ((v = window.getSelection()) == null ? void 0 : v.rangeCount) ? rl(n.value).pos : 0, p = s.match(new RegExp(`${e.captureGroup}(?!</mark>)`, "gi")); if (p) for (const _ of p != null ? p : []) s = s.replace(new RegExp(`(${_})(?!</mark>)`), `&nbsp;<mark class="preview" data-preview="${e.items[_.substring(e.triggerCharacter.length)]}" contenteditable="false">${_}</mark>&nbsp;`); if (n.value.innerHTML !== s) { n.value.innerHTML = s; const _ = s.length - n.value.innerHTML.length, y = r + _; y >= s.length || y < 0 ? rl(n.value, s.length - 1) : rl(n.value, r + _) } } } }); function Uk(e, t, n, l, i, u) { return m(), I("div", { ref: "input", class: de(["v-template-input", { multiline: e.multiline }]), contenteditable: "true", tabindex: "1", onInput: t[0] || (t[0] = (...o) => e.processText && e.processText(...o)) }, null, 34) } var Fa = B(Mk, [["render", Uk], ["__scopeId", "data-v-0da9f292"]]); const Nk = z({ components: { vTemplateInput: Fa }, props: { refresh: { type: Function, required: !0 }, collection: { type: String, required: !0 }, primaryKey: { type: [Number, String], required: !0 }, existingComment: { type: Object, default: null }, previews: { type: Object, default: null } }, emits: ["cancel"], setup(e) { var w, h; const { t } = x(), n = E(); nt("meta+enter", g, n); const l = E((h = (w = e.existingComment) == null ? void 0 : w.comment) != null ? h : null); _e(() => e.existingComment, () => { var k; ((k = e.existingComment) == null ? void 0 : k.comment) && (l.value = e.existingComment.comment) }, { immediate: !0 }); const i = E(!1), u = E(!1), o = E([]), s = E({}); _e(() => e.previews, () => { e.previews && (s.value = re(re({}, s.value), e.previews)) }, { immediate: !0 }); let r = 0, p = null; const f = M.exports.throttle(async k => { p !== null && p.cancel(), p = Ml.CancelToken.source(); const F = /\s@[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}/gi; let A = { _or: [{ first_name: { _starts_with: k } }, { last_name: { _starts_with: k } }, { email: { _starts_with: k } }] }; k.match(F) && (A = { id: { _in: k } }); try { const P = await ue.get("/users", { params: { filter: k === "" || !k ? void 0 : A, fields: ["first_name", "last_name", "email", "id", "avatar"] }, cancelToken: p.token }), L = M.exports.cloneDeep(s.value); P.data.data.forEach(T => { L[T.id] = yt(T) }), s.value = L, o.value = P.data.data } catch (P) { return P } }, 200); return { t, newCommentContent: l, postComment: g, saving: i, textarea: n, showMentionDropDown: u, searchResult: o, avatarSource: y, userName: yt, triggerSearch: _, insertUser: v, userPreviews: s }; function v(k) { const F = l.value; if (!F) return; let A = r - 1, P = r; if (F.charAt(A) !== " ") for (; A >= 0 && F.charAt(A) !== " ";)A--; for (; P < F.length && F.charAt(P) !== " ";)P++; const L = F.substring(0, A), T = F.substring(P); l.value = L + " @" + k.id + T } function _({ searchQuery: k, caretPosition: F }) { r = F, u.value = !0, f(k) } function y(k) { return k === null ? "" : st(Ye() + `assets/${k}?key=system-small-cover`) } async function g() { if (!(l.value === null || l.value.length === 0)) { i.value = !0; try { e.existingComment ? await ue.patch(`/activity/comment/${e.existingComment.id}`, { comment: l.value }) : await ue.post("/activity/comment", { collection: e.collection, item: e.primaryKey, comment: l.value }), e.refresh(), l.value = "", It({ title: t("post_comment_success"), type: "success" }) } catch (k) { Ve(k) } finally { i.value = !1 } } } } }), Bk = { class: "input-container" }, qk = ["src"], zk = { class: "buttons" }; function Kk(e, t, n, l, i, u) { const o = c("v-template-input"), s = c("v-icon"), r = c("v-avatar"), p = c("v-list-item-icon"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-list"), y = c("v-menu"), g = c("v-button"); return m(), I("div", Bk, [a(y, { modelValue: e.showMentionDropDown, "onUpdate:modelValue": t[2] || (t[2] = w => e.showMentionDropDown = w), attached: "" }, { activator: d(() => [a(o, { modelValue: e.newCommentContent, "onUpdate:modelValue": t[0] || (t[0] = w => e.newCommentContent = w), "capture-group": "(@[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12})", multiline: "", "trigger-character": "@", items: e.userPreviews, onTrigger: e.triggerSearch, onDeactivate: t[1] || (t[1] = w => e.showMentionDropDown = !1) }, null, 8, ["modelValue", "items", "onTrigger"])]), default: d(() => [a(_, null, { default: d(() => [(m(!0), I(se, null, he(e.searchResult, w => (m(), C(v, { id: "suggestions", key: w.id, clickable: "", onClick: h => e.insertUser(w) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { "x-small": "" }, { default: d(() => [w.avatar ? (m(), I("img", { key: 0, src: e.avatarSource(w.avatar) }, null, 8, qk)) : (m(), C(s, { key: 1, name: "person_outline" }))]), _: 2 }, 1024)]), _: 2 }, 1024), a(f, null, { default: d(() => [D(b(e.userName(w)), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })]), _: 1 }, 8, ["modelValue"]), S("div", zk, [e.existingComment ? (m(), C(g, { key: 0, class: "cancel", "x-small": "", secondary: "", onClick: t[3] || (t[3] = w => e.$emit("cancel")) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 })) : R("", !0), a(g, { disabled: !e.newCommentContent || e.newCommentContent.length === 0, loading: e.saving, class: "post-comment", "x-small": "", onClick: e.postComment }, { default: d(() => [D(b(e.t("submit")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])])]) } var Aa = B(Nk, [["render", Kk], ["__scopeId", "data-v-6c9ef667"]]); const Hk = z({ props: { activity: { type: Object, required: !0 }, refresh: { type: Function, required: !0 } }, emits: ["edit"], setup(e) { const { t } = x(), n = V(() => e.activity.timestamp ? an(new Date(e.activity.timestamp), String(t("date-fns_time_no_seconds"))) : null), l = V(() => { var r; return ((r = e.activity.user) == null ? void 0 : r.avatar) ? st(Ye() + `assets/${e.activity.user.avatar.id}?key=system-small-cover`) : null }), { confirmDelete: i, deleting: u, remove: o } = s(); return { t, formattedTime: n, avatarSource: l, confirmDelete: i, deleting: u, remove: o, userName: yt }; function s() { const r = E(!1), p = E(!1); return { confirmDelete: r, deleting: p, remove: f }; async function f() { p.value = !0; try { await ue.delete(`/activity/comment/${e.activity.id}`), await e.refresh(), r.value = !1 } catch (v) { Ve(v) } finally { p.value = !1 } } } } }), Wk = { class: "comment-header" }, Gk = ["src", "alt"], Jk = { class: "name" }, Qk = { class: "header-right" }, Xk = { class: "time" }; function Zk(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-avatar"), r = c("user-popover"), p = c("v-list-item-icon"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-list"), y = c("v-menu"), g = c("v-card-title"), w = c("v-card-text"), h = c("v-button"), k = c("v-card-actions"), F = c("v-card"), A = c("v-dialog"); return m(), I("div", Wk, [a(s, { "x-small": "" }, { default: d(() => [e.avatarSource ? (m(), I("img", { key: 0, src: e.avatarSource, alt: e.userName(e.activity.user) }, null, 8, Gk)) : (m(), C(o, { key: 1, name: "person_outline" }))]), _: 1 }), S("div", Jk, [e.activity.user && e.activity.user.id ? (m(), C(r, { key: 0, user: e.activity.user.id }, { default: d(() => [S("span", null, [e.activity.user && e.activity.user ? (m(), I(se, { key: 0 }, [D(b(e.userName(e.activity.user)), 1)], 64)) : (m(), I(se, { key: 1 }, [D(b(e.t("private_user")), 1)], 64))])]), _: 1 }, 8, ["user"])) : R("", !0)]), S("div", Qk, [a(y, { "show-arrow": "", placement: "bottom-end" }, { activator: d(({ toggle: P, active: L }) => [a(o, { class: de(["more", { active: L }]), name: "more_horiz", clickable: "", onClick: P }, null, 8, ["class", "onClick"]), S("div", Xk, b(e.formattedTime), 1)]), default: d(() => [a(_, null, { default: d(() => [a(v, { clickable: "", onClick: t[0] || (t[0] = P => e.$emit("edit")) }, { default: d(() => [a(p, null, { default: d(() => [a(o, { name: "edit", outline: "" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("edit")), 1)]), _: 1 })]), _: 1 }), a(v, { clickable: "", onClick: t[1] || (t[1] = P => e.confirmDelete = !0) }, { default: d(() => [a(p, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 })]), a(A, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[3] || (t[3] = P => e.confirmDelete = P), onEsc: t[4] || (t[4] = P => e.confirmDelete = !1) }, { default: d(() => [a(F, null, { default: d(() => [a(g, null, { default: d(() => [D(b(e.t("delete_comment")), 1)]), _: 1 }), a(w, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(k, null, { default: d(() => [a(h, { secondary: "", onClick: t[2] || (t[2] = P => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(h, { kind: "danger", loading: e.deleting, onClick: e.remove }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]) } var Yk = B(Hk, [["render", Zk], ["__scopeId", "data-v-cb2ab15c"]]); const xk = z({ components: { CommentItemHeader: Yk, CommentInput: Aa }, props: { activity: { type: Object, required: !0 }, refresh: { type: Function, required: !0 }, userPreviews: { type: Object, require: !0, default: () => ({}) }, primaryKey: { type: [Number, String], required: !0 }, collection: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = E(), { edits: l, editing: i, savingEdits: u, saveEdits: o, cancelEditing: s } = r(); return nt("meta+enter", o, n), { t, edits: l, editing: i, savingEdits: u, saveEdits: o, cancelEditing: s, textarea: n }; function r() { const p = E(e.activity.comment), f = E(!1), v = E(!1); return _e(() => e.activity, () => p.value = e.activity.comment), { edits: p, editing: f, savingEdits: v, saveEdits: _, cancelEditing: y }; async function _() { v.value = !0; try { await ue.patch(`/activity/comment/${e.activity.id}`, { comment: p.value }), e.refresh() } catch (g) { Ve(g) } finally { v.value = !1, f.value = !1 } } function y() { p.value = e.activity.comment, f.value = !1 } } } }), e8 = { class: "comment-item" }, t8 = { key: 1, class: "content selectable" }; function n8(e, t, n, l, i, u) { const o = c("comment-item-header"), s = c("comment-input"), r = we("md"); return m(), I("div", e8, [a(o, { refresh: e.refresh, activity: e.activity, onEdit: t[0] || (t[0] = p => e.editing = !0) }, null, 8, ["refresh", "activity"]), e.editing ? (m(), C(s, { key: 0, "existing-comment": e.activity, "primary-key": e.primaryKey, collection: e.collection, refresh: e.refresh, previews: e.userPreviews, onCancel: e.cancelEditing }, null, 8, ["existing-comment", "primary-key", "collection", "refresh", "previews", "onCancel"])) : ee((m(), I("div", t8, null, 512)), [[r, e.activity.display]])]) } var l8 = B(xk, [["render", n8], ["__scopeId", "data-v-2c18c6a3"]]); const o8 = z({ components: { CommentInput: Aa, CommentItem: l8 }, props: { collection: { type: String, required: !0 }, primaryKey: { type: [String, Number], required: !0 } }, setup(e) { const { t } = x(), { activity: n, loading: l, error: i, refresh: u, count: o, userPreviews: s } = r(e.collection, e.primaryKey); return { t, activity: n, loading: l, error: i, refresh: u, count: o, userPreviews: s }; function r(f, v) { const _ = /(\s@[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12})/gm, y = E(null), g = E(0), w = E(null), h = E(!1), k = E({}); return F(), { activity: y, error: w, loading: h, refresh: A, count: g, userPreviews: k }; async function F() { w.value = null, h.value = !0; try { const P = await ue.get("/activity", { params: { "filter[collection][_eq]": f, "filter[item][_eq]": v, "filter[action][_eq]": "comment", sort: "-id", fields: ["id", "action", "timestamp", "user.id", "user.email", "user.first_name", "user.last_name", "user.avatar.id", "revisions.id", "comment"] } }); g.value = P.data.data.length, k.value = await p(P.data.data, _); const L = P.data.data.map(O => { const U = O.comment.match(_); let q = O.comment; for (const K of U != null ? U : []) q = q.replace(K, ` <mark>${k.value[K.substring(2)]}</mark>`); return Ce(re({}, O), { display: q }) }), T = M.exports.groupBy(L, O => new Date(new Date(O.timestamp).toDateString())), N = []; for (const [O, U] of Object.entries(T)) { const q = new Date(O), K = Yo(q), W = xo(q), te = ea(q); let G; K ? G = t("today") : W ? G = t("yesterday") : te ? G = await jt(q, String(t("date-fns_date_short_no_year"))) : G = await jt(q, String(t("date-fns_date_short"))), N.push({ date: q, dateFormatted: String(G), activity: U }) } y.value = M.exports.orderBy(N, ["date"], ["desc"]) } catch (P) { P.value = P } finally { h.value = !1 } } async function A() { await F() } } async function p(f, v) { let _ = []; f.forEach(g => { _.push(g.comment.match(v)) }); const y = [...new Set(M.exports.flatten(_))].filter(g => { if (g) return g }); if (y.length > 0) { const g = await ue.get("/users", { params: { filter: { id: { _in: y.map(h => h.substring(2)) } }, fields: ["first_name", "last_name", "email", "id"] } }), w = {}; return g.data.data.map(h => { w[h.id] = yt(h) }), w } return {} } } }), a8 = { key: 1, class: "empty" }, i8 = { class: "content" }; function s8(e, t, n, l, i, u) { const o = c("comment-input"), s = c("v-progress-linear"), r = c("v-divider"), p = c("comment-item"), f = c("sidebar-detail"); return m(), C(f, { title: e.t("comments"), icon: "chat_bubble_outline", badge: e.count || null }, { default: d(() => [a(o, { refresh: e.refresh, collection: e.collection, "primary-key": e.primaryKey }, null, 8, ["refresh", "collection", "primary-key"]), e.loading ? (m(), C(s, { key: 0, indeterminate: "" })) : !e.activity || e.activity.length === 0 ? (m(), I("div", a8, [S("div", i8, b(e.t("no_comments")), 1)])) : (m(!0), I(se, { key: 2 }, he(e.activity, v => (m(), I(se, { key: v.date.toString() }, [a(r, null, { default: d(() => [D(b(v.dateFormatted), 1)]), _: 2 }, 1024), (m(!0), I(se, null, he(v.activity, _ => (m(), C(p, { key: _.id, refresh: e.refresh, activity: _, "user-previews": e.userPreviews, "primary-key": e.primaryKey, collection: e.collection }, null, 8, ["refresh", "activity", "user-previews", "primary-key", "collection"]))), 128))], 64))), 128))]), _: 1 }, 8, ["title", "badge"]) } var ao = B(o8, [["render", s8], ["__scopeId", "data-v-0cc21164"]]); class r8 extends Error { constructor(t, n, l, i) { super(t); this.status = n, this.code = l, this.extensions = i || {} } } class d8 extends r8 { constructor(t) { var n, l, i, u, o, s, r, p, f, v, _, y, g, w; const h = { field: t.path[0] }, k = t.type; if (k.endsWith("only")) if (((n = t.context) === null || n === void 0 ? void 0 : n.valids.length) > 1) h.type = "in", h.valid = (l = t.context) === null || l === void 0 ? void 0 : l.valids; else { const F = (i = t.context) === null || i === void 0 ? void 0 : i.valids[0]; F === null ? h.type = "null" : F === "" ? h.type = "empty" : (h.type = "eq", h.valid = (u = t.context) === null || u === void 0 ? void 0 : u.valids[0]) } if (k.endsWith("invalid")) if (((o = t.context) === null || o === void 0 ? void 0 : o.invalids.length) > 1) h.type = "nin", h.invalid = (s = t.context) === null || s === void 0 ? void 0 : s.invalids; else { const F = (r = t.context) === null || r === void 0 ? void 0 : r.invalids[0]; F === null ? h.type = "nnull" : F === "" ? h.type = "nempty" : (h.type = "neq", h.invalid = F) } k.endsWith("greater") && (h.type = "gt", h.valid = (p = t.context) === null || p === void 0 ? void 0 : p.limit), k.endsWith("min") && (h.type = "gte", h.valid = (f = t.context) === null || f === void 0 ? void 0 : f.limit), k.endsWith("less") && (h.type = "lt", h.valid = (v = t.context) === null || v === void 0 ? void 0 : v.limit), k.endsWith("max") && (h.type = "lte", h.valid = (_ = t.context) === null || _ === void 0 ? void 0 : _.limit), k.endsWith("contains") && (h.type = "contains", h.substring = (y = t.context) === null || y === void 0 ? void 0 : y.substring), k.endsWith("ncontains") && (h.type = "ncontains", h.substring = (g = t.context) === null || g === void 0 ? void 0 : g.substring), k.endsWith("required") && (h.type = "required"), k.endsWith(".pattern.base") && (h.type = "regex", h.invalid = (w = t.context) === null || w === void 0 ? void 0 : w.value); super(t.message, 400, "FAILED_VALIDATION", h) } } function Wt(e) { return e.startsWith("directus_") ? `/${e.substring(9)}` : `/items/${e}` } function bl(e) { var l; const t = Ze(); if (!t.currentUser) return e != null ? e : {}; const n = { role: t.currentUser.role.id, user: t.currentUser.id }; return (l = Jl(e, n)) != null ? l : {} } function Ia(e, t) { var n; if (t.meta && Array.isArray((n = t.meta) == null ? void 0 : n.conditions)) { const i = [...t.meta.conditions].reverse().find(u => { if (!u.rule || Object.keys(u.rule).length !== 1) return; const o = bl(u.rule); return _l(o, e, { requireAll: !0 }).length === 0 }); return i ? Ce(re({}, t), { meta: M.exports.merge({}, t.meta || {}, { readonly: i.readonly, options: i.options, hidden: i.hidden, required: i.required }) }) : t } else return t } function kn(e, t) { const { info: n, primaryKeyField: l, fields: i } = ot(e), u = E(null), o = E(null), s = E([]), r = E(!1), p = E(!1), f = E(!1), v = E(!1), _ = E({}), y = V(() => t.value === "+"), g = V(() => typeof t.value == "string" && t.value.includes(",")), w = V(() => { var q, K; return !!((K = (q = n.value) == null ? void 0 : q.meta) == null ? void 0 : K.singleton) }), h = V(() => { var q, K, W, te; return ((K = (q = n.value) == null ? void 0 : q.meta) == null ? void 0 : K.archive_field) ? n.value.meta.archive_value === "true" ? ((W = u.value) == null ? void 0 : W[n.value.meta.archive_field]) === !0 : ((te = u.value) == null ? void 0 : te[n.value.meta.archive_field]) === n.value.meta.archive_value : null }), k = V(() => w.value ? Wt(e.value) : `${Wt(e.value)}/${encodeURIComponent(t.value)}`); return _e([e, t], N, { immediate: !0 }), { edits: _, item: u, error: o, loading: r, saving: p, refresh: N, save: A, isNew: y, remove: T, deleting: f, archive: L, isArchived: h, archiving: v, saveAsCopy: P, isBatch: g, getItem: F, validationErrors: s }; async function F() { r.value = !0, o.value = null; try { const q = await ue.get(k.value); O(q) } catch (q) { o.value = q } finally { r.value = !1 } } async function A() { var K, W; p.value = !0, s.value = []; const q = U(_.value); if (q.length > 0) throw s.value = q, p.value = !1, q; try { let te; return y.value === !0 ? (te = await ue.post(Wt(e.value), _.value), It({ title: ze.global.t("item_create_success", g.value ? 2 : 1), type: "success" })) : (te = await ue.patch(k.value, _.value), It({ title: ze.global.t("item_update_success", g.value ? 2 : 1), type: "success" })), O(te), _.value = {}, te.data.data } catch (te) { if ((W = (K = te == null ? void 0 : te.response) == null ? void 0 : K.data) == null ? void 0 : W.errors) { s.value = te.response.data.errors.filter(X => { var ve; return gl.includes((ve = X == null ? void 0 : X.extensions) == null ? void 0 : ve.code) }).map(X => X.extensions); const G = te.response.data.errors.filter(X => { var ve; return gl.includes((ve = X == null ? void 0 : X.extensions) == null ? void 0 : ve.code) === !1 }); G.length > 0 && G.forEach(Ve) } else Ve(te); throw te } finally { p.value = !1 } } async function P() { var G, X, ve, ae; p.value = !0, s.value = []; const q = ((X = (G = n.value) == null ? void 0 : G.meta) == null ? void 0 : X.item_duplication_fields) || ["*"], K = await ue.get(k.value, { params: { fields: q } }), W = re(re({}, K.data.data || {}), _.value); l.value && l.value.field in W && delete W[l.value.field]; const te = U(W); if (te.length > 0) throw s.value = te, p.value = !1, te; try { const ne = await ue.post(Wt(e.value), W); return It({ title: ze.global.t("item_create_success", 1), type: "success" }), _.value = {}, l.value ? ne.data.data[l.value.field] : null } catch (ne) { if ((ae = (ve = ne == null ? void 0 : ne.response) == null ? void 0 : ve.data) == null ? void 0 : ae.errors) s.value = ne.response.data.errors.filter(Y => { var ce; return ((ce = Y == null ? void 0 : Y.extensions) == null ? void 0 : ce.code) === "FAILED_VALIDATION" }).map(Y => Y.extensions); else throw Ve(ne), ne } finally { p.value = !1 } } async function L() { var te, G; if (!((G = (te = n.value) == null ? void 0 : te.meta) == null ? void 0 : G.archive_field)) return; v.value = !0; const q = n.value.meta.archive_field; let K = n.value.meta.archive_value; K === "true" && (K = !0), K === "false" && (K = !1); let W = n.value.meta.unarchive_value; W === "true" && (W = !0), W === "false" && (W = !1); try { let X = u.value && u.value[q] === K ? W : K; X === "true" && (X = !0), X === "false" && (X = !1), u.value = Ce(re({}, u.value), { [q]: X }), await ue.patch(k.value, { [q]: X }), It({ title: ze.global.t("item_delete_success", g.value ? 2 : 1), type: "success" }) } catch (X) { throw Ve(X), X } finally { v.value = !1 } } async function T() { f.value = !0; try { await ue.delete(k.value), u.value = null, It({ title: ze.global.t("item_delete_success", g.value ? 2 : 1), type: "success" }) } catch (q) { throw Ve(q), q } finally { f.value = !1 } } function N() { o.value = null, r.value = !1, p.value = !1, f.value = !1, y.value === !0 ? u.value = null : F() } function O(q) { var K; if (e.value === "directus_collections" && ((K = q.data.data.collection) == null ? void 0 : K.startsWith("directus_")) && (q.data.data = Ct(q.data.data)), g.value === !1) u.value = q.data.data; else { const W = re({}, q.data.data[0]); q.data.data.forEach(te => { for (const [G, X] of Object.entries(te)) W[G] !== X && delete W[G] }), u.value = W } } function U(q) { var G; const K = { _and: [] }, te = i.value.map(X => Ia(q, X)).filter(X => { var ve; return ((ve = X.meta) == null ? void 0 : ve.required) === !0 }); for (const X of te) y.value === !0 && M.exports.isNil((G = X.schema) == null ? void 0 : G.default_value) && K._and.push({ [X.field]: { _submitted: !0 } }), K._and.push({ [X.field]: { _nnull: !0 } }); return M.exports.flatten(_l(K, q).map(X => X.details.map(ve => new d8(ve).extensions))) } } function io(e) { return e.charAt(0).toUpperCase() + e.slice(1) } function Ea(e) { return navigator.platform.toLowerCase().startsWith("mac") || navigator.platform.startsWith("iP") ? e.map(n => n === "meta" ? "\u2318" : n === "option" ? "\u2325" : n === "shift" ? "\u21E7" : n === "alt" ? "\u2325" : io(n)).join("") : e.map(n => n === "meta" ? "Ctrl" : io(n)).join("+") } const u8 = z({ props: { disabledOptions: { type: Array, default: () => [] } }, emits: ["save-and-stay", "save-and-add-new", "save-as-copy", "discard-and-stay"], setup() { const { t: e } = x(); return { t: e, translateShortcut: Ea } } }); function c8(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item-hint"), f = c("v-list-item"), v = c("v-list"), _ = c("v-menu"); return m(), C(_, { "show-arrow": "" }, { activator: d(({ toggle: y }) => [a(o, { name: "more_vert", clickable: "", onClick: y }, null, 8, ["onClick"])]), default: d(() => [a(v, null, { default: d(() => [e.disabledOptions.includes("save-and-stay") ? R("", !0) : (m(), C(f, { key: 0, clickable: "", onClick: t[0] || (t[0] = y => e.$emit("save-and-stay")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "check" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("save_and_stay")), 1)]), _: 1 }), a(p, null, { default: d(() => [D(b(e.translateShortcut(["meta", "s"])), 1)]), _: 1 })]), _: 1 })), e.disabledOptions.includes("save-and-add-new") ? R("", !0) : (m(), C(f, { key: 1, clickable: "", onClick: t[1] || (t[1] = y => e.$emit("save-and-add-new")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "add" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("save_and_create_new")), 1)]), _: 1 }), a(p, null, { default: d(() => [D(b(e.translateShortcut(["meta", "shift", "s"])), 1)]), _: 1 })]), _: 1 })), e.disabledOptions.includes("save-as-copy") ? R("", !0) : (m(), C(f, { key: 2, clickable: "", onClick: t[2] || (t[2] = y => e.$emit("save-as-copy")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "done_all" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("save_as_copy")), 1)]), _: 1 })]), _: 1 })), e.disabledOptions.includes("discard-and-stay") ? R("", !0) : (m(), C(f, { key: 3, clickable: "", onClick: t[3] || (t[3] = y => e.$emit("discard-and-stay")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "undo" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("discard_all_changes")), 1)]), _: 1 })]), _: 1 }))]), _: 1 })]), _: 1 }) } var $l = B(u8, [["render", c8], ["__scopeId", "data-v-d6332d10"]]); const rt = ta.extend({ type: "string", base: ta.string(), messages: { "string.contains": "{{#label}} must contain [{{#substring}}]", "string.ncontains": "{{#label}} can't contain [{{#substring}}]" }, rules: { contains: { args: [{ name: "substring", ref: !0, assert: e => typeof e == "string", message: "must be a string" }], method(e) { return this.$_addRule({ name: "contains", args: { substring: e } }) }, validate(e, t, { substring: n }) { return e.includes(n) === !1 ? t.error("string.contains", { substring: n }) : e } }, ncontains: { args: [{ name: "substring", ref: !0, assert: e => typeof e == "string", message: "must be a string" }], method(e) { return this.$_addRule({ name: "ncontains", args: { substring: e } }) }, validate(e, t, { substring: n }) { return e.includes(n) === !0 ? t.error("string.ncontains", { substring: n }) : e } } } }), p8 = { allowUnknown: !0, requireAll: !1 }; function m8(e, t) { e = e || {}, t = M.exports.merge({}, p8, t); const n = {}; for (const [l, i] of Object.entries(e)) if (l.startsWith("_") === !1) { const o = Object.keys(i)[0]; if (o === "_eq" && (n[l] = rt.any().equal(Object.values(i)[0])), o === "_neq" && (n[l] = rt.any().not(Object.values(i)[0])), o === "_contains" && (n[l] = rt.string().contains(Object.values(i)[0])), o === "_ncontains" && (n[l] = rt.string().ncontains(Object.values(i)[0])), o === "_starts_with" && (n[l] = rt.string().pattern(new RegExp(`^${M.exports.escapeRegExp(Object.values(i)[0])}.*`), { name: "starts_with" })), o === "_nstarts_with" && (n[l] = rt.string().pattern(new RegExp(`^${M.exports.escapeRegExp(Object.values(i)[0])}.*`), { name: "starts_with", invert: !0 })), o === "_ends_with" && (n[l] = rt.string().pattern(new RegExp(`.*${M.exports.escapeRegExp(Object.values(i)[0])}$`), { name: "ends_with" })), o === "_nends_with" && (n[l] = rt.string().pattern(new RegExp(`.*${M.exports.escapeRegExp(Object.values(i)[0])}$`), { name: "ends_with", invert: !0 })), o === "_in" && (n[l] = rt.any().equal(...Object.values(i)[0])), o === "_nin" && (n[l] = rt.any().not(...Object.values(i)[0])), o === "_gt" && (n[l] = rt.number().greater(Number(Object.values(i)[0]))), o === "_gte" && (n[l] = rt.number().min(Number(Object.values(i)[0]))), o === "_lt" && (n[l] = rt.number().less(Number(Object.values(i)[0]))), o === "_lte" && (n[l] = rt.number().max(Number(Object.values(i)[0]))), o === "_null" && (n[l] = rt.any().valid(null)), o === "_nnull" && (n[l] = rt.any().invalid(null)), o === "_empty" && (n[l] = rt.any().valid("")), o === "_nempty" && (n[l] = rt.any().invalid("")), o === "_between") { const s = Object.values(i)[0]; n[l] = rt.number().greater(s[0]).less(s[1]) } if (o === "_nbetween") { const s = Object.values(i)[0]; n[l] = rt.number().less(s[0]).greater(s[1]) } t.requireAll && (n[l] = n[l].required()) } return t.allowUnknown ? rt.object(n).unknown() : rt.object(n) } function wl(e, t, n, l = !1) { const i = Dt(); if (Ze().isAdmin === !0) return !0; const s = i.permissions.find(f => f.action === t && f.collection === e); if (!s || !s.fields) return !1; if (l && s.fields.includes("*") === !1 && n) { const f = s.fields; if (Object.keys(n).every(_ => f.includes(_)) === !1) return !1 } const r = m8(s.permissions, { allowUnknown: !0 }), { error: p } = r.validate(n); return !p } function qn(e, t, n) { const l = Ze(), i = Dt(), { info: u, fields: o } = ot(e), s = V(() => wl(e.value, "delete", t.value)), r = V(() => n.value ? !0 : wl(e.value, "update", t.value)), p = V(() => wl(e.value, "update", t.value)), f = V(() => { var y, g; return ((g = (y = u.value) == null ? void 0 : y.meta) == null ? void 0 : g.archive_field) ? wl(e.value, "update", { [u.value.meta.archive_field]: u.value.meta.archive_value }, !0) : !1 }), v = V(() => { var w, h, k; let y = M.exports.cloneDeep(o.value); if (((h = (w = l.currentUser) == null ? void 0 : w.role) == null ? void 0 : h.admin_access) === !0) return y; const g = i.getPermissionsForUser(e.value, n.value ? "create" : "update"); return g && (((k = g == null ? void 0 : g.fields) == null ? void 0 : k.includes("*")) === !1 && (y = y.map(F => (g.fields.includes(F.field) === !1 && (F.meta = Ce(re({}, F.meta || {}), { readonly: !0 })), F))), (g == null ? void 0 : g.presets) && (y = y.map(F => (F.field in g.presets && (F.schema = Ce(re({}, F.schema || {}), { default_value: g.presets[F.field] })), F)))), y }), _ = V(() => { var y, g; return ((g = (y = l.currentUser) == null ? void 0 : y.role) == null ? void 0 : g.admin_access) === !0 ? !0 : !!i.permissions.find(w => w.collection === "directus_revisions" && w.action === "read") }); return { deleteAllowed: s, saveAllowed: r, archiveAllowed: f, updateAllowed: p, fields: v, revisionsAllowed: _ } } function en(e) { na(() => { window.addEventListener("beforeunload", t) }), Ul(() => { window.removeEventListener("beforeunload", t) }); function t(n) { if (e.value) return n.preventDefault(), n.returnValue = "", "" } } function f8(e) { if (e == null) return; const t = typeof e == "string" ? E(e) : e; return _e(t, (n, l) => { typeof n == "string" && l !== n && (document.title = n) }, { immediate: !0 }), t } function v8(e, t) { const n = jr(t, e); return typeof n == "object" ? JSON.stringify(n) : n } function Da(e, t) { const n = Rn(t), l = Rn(e), i = V(() => vt(l)), u = V(() => { if (!n || !l || !i.value) return !1; try { return Lr(l, v8, n, { propsExist: !0 }) } catch { return !1 } }); return { fieldsInTemplate: i, displayValue: u } } function _8(e, t) { const n = vt(e); if (!t || !e || !n) return null; try { return Mn(e, t, { propsExist: !0 }) } catch { return null } } function Ta(e, t) { const n = E(), l = E(!1), i = E(null), u = V(() => { var s, r; return ((r = (s = e.value) == null ? void 0 : s.meta) == null ? void 0 : r.display_template) ? vt(e.value.meta.display_template) : null }); return _e([e, t], o, { immediate: !0 }), { templateData: n, loading: l, error: i }; async function o() { if (!t.value || t.value === "+" || u.value === null || !e.value) return; l.value = !0; const s = e.value.collection.startsWith("directus_") ? `/${e.value.collection.substring(9)}/${t.value}` : `/items/${e.value.collection}/${encodeURIComponent(t.value)}`; try { const r = await ue.get(s, { params: { fields: u.value } }); n.value = r.data.data } catch (r) { i.value = r } finally { l.value = !1 } } } const y8 = z({ name: "ContentsItem", components: { ContentNavigation: yl, ContentNotFound: eo, RevisionsDrawerDetail: Bn, CommentsSidebarDetail: ao, SaveOptions: $l }, props: { collection: { type: String, required: !0 }, primaryKey: { type: String, default: null }, singleton: { type: Boolean, default: !1 } }, setup(e) { const { t, te: n } = x(), l = tt(), i = E(), { collection: u, primaryKey: o } = je(e), { breadcrumb: s } = be(), r = E(null), { info: p, defaults: f, primaryKeyField: v, isSingleton: _, accountabilityScope: y } = ot(u), { isNew: g, edits: w, item: h, saving: k, loading: F, error: A, save: P, remove: L, deleting: T, archive: N, archiving: O, isArchived: U, saveAsCopy: q, refresh: K, validationErrors: W } = kn(u, o), { templateData: te, loading: G } = Ta(p, o), X = V(() => Object.keys(w.value).length > 0), ve = V(() => { var Fe, Se, We, $e, Ue, Ge; return J.value === !1 ? !1 : X.value === !0 ? !0 : !((Se = (Fe = v.value) == null ? void 0 : Fe.schema) == null ? void 0 : Se.has_auto_increment) && !((Ue = ($e = (We = v.value) == null ? void 0 : We.meta) == null ? void 0 : $e.special) == null ? void 0 : Ue.includes("uuid")) ? !!((Ge = w.value) == null ? void 0 : Ge[v.value.field]) : g.value === !0 && Object.keys(f.value).length > 0 || X.value }); en(ve); const ae = E(!1), ne = E(!1), Y = E(!1), ce = E(null), pe = V(() => { var Fe, Se; return n(`collection_names_singular.${e.collection}`) ? g.value ? t("creating_unit", { unit: t(`collection_names_singular.${e.collection}`) }) : t("editing_unit", { unit: t(`collection_names_singular.${e.collection}`) }) : g.value ? t("creating_in", { collection: (Fe = p.value) == null ? void 0 : Fe.name }) : t("editing_in", { collection: (Se = p.value) == null ? void 0 : Se.name }) }), H = V(() => { var Se; let Fe = (((Se = p.value) == null ? void 0 : Se.name) || "") + " | "; if (p.value && p.value.meta) { if (p.value.meta.singleton === !0) return Fe + p.value.name; if (g.value === !1 && p.value.meta.display_template) { const { displayValue: We } = Da(p.value.meta.display_template, te); if (We.value !== void 0) return Fe + We.value } } return Fe + pe.value }); f8(H); const Q = V(() => fe.value === !1 ? t("not_allowed") : U.value === !0 ? t("unarchive") : t("archive")); nt("meta+s", Ie, i), nt("meta+shift+s", De, i); const Z = Fe => { if (X.value) return Y.value = !0, ce.value = Fe.fullPath, !1 }; Ot(Z), Tt(Z); const { deleteAllowed: le, archiveAllowed: fe, saveAllowed: J, updateAllowed: ie, fields: oe, revisionsAllowed: me } = qn(u, h, g), ge = V(() => { var Fe, Se; return g.value ? "+" : _.value ? (Se = h.value) == null ? void 0 : Se[(Fe = v.value) == null ? void 0 : Fe.field] : e.primaryKey }); return { t, router: l, item: h, loading: F, error: A, isNew: g, edits: w, isSavable: ve, hasEdits: X, saving: k, collectionInfo: p, saveAndQuit: ke, deleteAndQuit: lt, confirmDelete: ae, confirmArchive: ne, deleting: T, archiving: O, saveAndStay: Ie, saveAndAddNew: De, saveAsCopyAndNavigate: Be, discardAndStay: qe, templateData: te, templateDataLoading: G, archiveTooltip: Q, breadcrumb: s, title: pe, revisionsDrawerDetail: r, refresh: K, confirmLeave: Y, leaveTo: ce, discardAndLeave: Oe, deleteAllowed: le, saveAllowed: J, archiveAllowed: fe, isArchived: U, updateAllowed: ie, toggleArchive: Te, validationErrors: W, form: i, fields: oe, isSingleton: _, internalPrimaryKey: ge, revisionsAllowed: me, revert: Le, accountabilityScope: y }; function be() { return { breadcrumb: V(() => { var Se; return [{ name: (Se = p.value) == null ? void 0 : Se.name, to: `/content/${e.collection}` }] }) } } async function ke() { if (ve.value !== !1) try { await P(), e.singleton === !1 && l.push(`/content/${e.collection}`) } catch { } } async function Ie() { var Fe, Se; if (ve.value !== !1) try { const We = await P(); if ((Se = (Fe = r.value) == null ? void 0 : Fe.refresh) == null || Se.call(Fe), e.primaryKey === "+") { const $e = We[v.value.field]; l.replace(`/content/${e.collection}/${encodeURIComponent($e)}`) } } catch { } } async function De() { if (ve.value !== !1) try { await P(), g.value === !0 ? K() : l.push(`/content/${e.collection}/+`) } catch { } } async function Be() { try { const Fe = await q(); Fe && l.push(`/content/${e.collection}/${encodeURIComponent(Fe)}`) } catch { } } async function lt() { try { await L(), w.value = {}, l.replace(`/content/${e.collection}`) } catch { } } async function Te() { try { await N(), U.value === !0 ? l.push(`/content/${e.collection}`) : ne.value = !1 } catch { } } function Oe() { !ce.value || (w.value = {}, Y.value = !1, l.push(ce.value)) } function qe() { w.value = {}, Y.value = !1 } function Le(Fe) { w.value = re(re({}, w.value), Fe) } } }), g8 = { class: "type-title" }, h8 = { class: "page-description" }; function b8(e, t, n, l, i, u) { const o = c("content-not-found"), s = c("v-skeleton-loader"), r = c("render-template"), p = c("v-icon"), f = c("v-button"), v = c("v-breadcrumb"), _ = c("v-card-title"), y = c("v-card-actions"), g = c("v-card"), w = c("v-dialog"), h = c("save-options"), k = c("content-navigation"), F = c("v-form"), A = c("v-card-text"), P = c("sidebar-detail"), L = c("revisions-drawer-detail"), T = c("comments-sidebar-detail"), N = c("private-view"), O = we("tooltip"), U = we("md"); return e.error || e.collectionInfo.meta && e.collectionInfo.meta.singleton === !0 && e.primaryKey !== null ? (m(), C(o, { key: 0 })) : (m(), C(N, { key: 1, title: e.title }, et({ "title-outer:prepend": d(() => [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !0 ? (m(), C(f, { key: 0, class: "header-icon", rounded: "", icon: "", secondary: "", disabled: "" }, { default: d(() => [a(p, { name: e.collectionInfo.icon }, null, 8, ["name"])]), _: 1 })) : ee((m(), C(f, { key: 1, class: "header-icon", rounded: "", icon: "", secondary: "", exact: "", onClick: t[0] || (t[0] = q => e.router.back()) }, { default: d(() => [a(p, { name: "arrow_back" })]), _: 1 }, 512)), [[O, e.t("back"), void 0, { bottom: !0 }]])]), headline: d(() => [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !0 ? (m(), C(v, { key: 0, items: [{ name: e.t("content"), to: "/content" }] }, null, 8, ["items"])) : (m(), C(v, { key: 1, items: e.breadcrumb }, null, 8, ["items"]))]), actions: d(() => [e.isNew ? R("", !0) : (m(), C(w, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[2] || (t[2] = q => e.confirmDelete = q), disabled: e.deleteAllowed === !1, onEsc: t[3] || (t[3] = q => e.confirmDelete = !1) }, { activator: d(({ on: q }) => [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !1 ? ee((m(), C(f, { key: 0, rounded: "", icon: "", class: "action-delete", disabled: e.item === null || e.deleteAllowed !== !0, onClick: q }, { default: d(() => [a(p, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"])), [[O, e.deleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]]) : R("", !0)]), default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(y, null, { default: d(() => [a(f, { secondary: "", onClick: t[1] || (t[1] = q => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(f, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue", "disabled"])), e.collectionInfo.meta && e.collectionInfo.meta.archive_field && !e.isNew ? (m(), C(w, { key: 1, modelValue: e.confirmArchive, "onUpdate:modelValue": t[5] || (t[5] = q => e.confirmArchive = q), disabled: e.archiveAllowed === !1, onEsc: t[6] || (t[6] = q => e.confirmArchive = !1) }, { activator: d(({ on: q }) => [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !1 ? ee((m(), C(f, { key: 0, rounded: "", icon: "", class: "action-archive", disabled: e.item === null || e.archiveAllowed !== !0, onClick: q }, { default: d(() => [a(p, { name: e.isArchived ? "unarchive" : "archive", outline: "" }, null, 8, ["name"])]), _: 2 }, 1032, ["disabled", "onClick"])), [[O, e.archiveTooltip, void 0, { bottom: !0 }]]) : R("", !0)]), default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.isArchived ? e.t("unarchive_confirm") : e.t("archive_confirm")), 1)]), _: 1 }), a(y, null, { default: d(() => [a(f, { secondary: "", onClick: t[4] || (t[4] = q => e.confirmArchive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(f, { kind: "warning", loading: e.archiving, onClick: e.toggleArchive }, { default: d(() => [D(b(e.isArchived ? e.t("unarchive") : e.t("archive")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue", "disabled"])) : R("", !0), ee(a(f, { rounded: "", icon: "", loading: e.saving, disabled: e.isSavable === !1 || e.saveAllowed === !1, onClick: e.saveAndQuit }, { "append-outer": d(() => [e.collectionInfo.meta && e.collectionInfo.meta.singleton !== !0 && e.isSavable === !0 ? (m(), C(h, { key: 0, onSaveAndStay: e.saveAndStay, onSaveAndAddNew: e.saveAndAddNew, onSaveAsCopy: e.saveAsCopyAndNavigate, onDiscardAndStay: e.discardAndStay }, null, 8, ["onSaveAndStay", "onSaveAndAddNew", "onSaveAsCopy", "onDiscardAndStay"])) : R("", !0)]), default: d(() => [a(p, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"]), [[O, e.saveAllowed ? e.t("save") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(k, { "current-collection": e.collection }, null, 8, ["current-collection"])]), sidebar: d(() => [a(P, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", h8, null, 512), [[U, e.t("page_help_collections_item")]])]), _: 1 }, 8, ["title"]), e.isNew === !1 && e.internalPrimaryKey && e.revisionsAllowed && e.accountabilityScope === "all" ? (m(), C(L, { key: 0, ref: "revisionsDrawerDetail", collection: e.collection, "primary-key": e.internalPrimaryKey, scope: e.accountabilityScope, onRevert: e.revert }, null, 8, ["collection", "primary-key", "scope", "onRevert"])) : R("", !0), e.isNew === !1 && e.internalPrimaryKey ? (m(), C(T, { key: 1, collection: e.collection, "primary-key": e.internalPrimaryKey }, null, 8, ["collection", "primary-key"])) : R("", !0)]), default: d(() => [a(F, { ref: "form", key: e.collection, modelValue: e.edits, "onUpdate:modelValue": t[7] || (t[7] = q => e.edits = q), disabled: e.isNew ? !1 : e.updateAllowed === !1, loading: e.loading, "initial-values": e.item, fields: e.fields, "primary-key": e.internalPrimaryKey, "validation-errors": e.validationErrors }, null, 8, ["modelValue", "disabled", "loading", "initial-values", "fields", "primary-key", "validation-errors"]), a(w, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[9] || (t[9] = q => e.confirmLeave = q), onEsc: t[10] || (t[10] = q => e.confirmLeave = !1) }, { default: d(() => [a(g, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(A, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(y, null, { default: d(() => [a(f, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(f, { onClick: t[8] || (t[8] = q => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 2 }, [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !0 ? { name: "title", fn: d(() => [S("h1", g8, b(e.collectionInfo.name), 1)]) } : e.isNew === !1 && e.collectionInfo.meta && e.collectionInfo.meta.display_template ? { name: "title", fn: d(() => [e.loading || e.templateDataLoading ? (m(), C(s, { key: 0, class: "title-loader", type: "text" })) : (m(), I("h1", { key: 1, class: "type-title" }, [a(r, { collection: e.collectionInfo.collection, item: e.templateData, template: e.collectionInfo.meta.display_template }, null, 8, ["collection", "item", "template"])]))]) } : void 0]), 1032, ["title"])) } var Pa = B(y8, [["render", b8], ["__scopeId", "data-v-54b86ebc"]]); const $8 = z({ components: { CollectionRoute: Jw, ItemRoute: Pa }, props: { collection: { type: String, required: !0 }, bookmark: { type: String, default: null }, archive: { type: Boolean, default: !1 } }, setup(e) { const t = He(); return { isSingleton: V(() => { var i; const l = t.getCollection(e.collection); return !!((i = l == null ? void 0 : l.meta) == null ? void 0 : i.singleton) }) } } }); function w8(e, t, n, l, i, u) { return m(), C(Ne(e.isSingleton ? "item-route" : "collection-route"), { collection: e.collection, bookmark: e.bookmark, singleton: e.isSingleton ? !0 : void 0, archive: e.archive }, null, 8, ["collection", "bookmark", "singleton", "archive"]) } var k8 = B($8, [["render", w8]]); const S8 = z({ name: "ContentOverview", components: { ContentNavigation: yl }, props: {}, setup() { const { t: e } = x(), t = Ze(), n = V(() => { var l; return ((l = t.currentUser) == null ? void 0 : l.role.admin_access) === !0 }); return { t: e, isAdmin: n } } }), C8 = { class: "page-description" }; function V8(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("content-navigation"), p = c("v-info"), f = c("sidebar-detail"), v = c("private-view"), _ = we("md"); return m(), C(v, { class: "content-overview", title: e.t("content") }, { "title-outer:prepend": d(() => [a(s, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(o, { name: "box" })]), _: 1 })]), navigation: d(() => [a(r)]), sidebar: d(() => [a(f, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", C8, null, 512), [[_, e.t("page_help_collections_overview")]])]), _: 1 }, 8, ["title"])]), default: d(() => [a(p, { icon: "box", title: e.t("no_collections"), center: "" }, et({ default: d(() => [e.isAdmin ? (m(), I(se, { key: 0 }, [D(b(e.t("no_collections_copy_admin")), 1)], 64)) : (m(), I(se, { key: 1 }, [D(b(e.t("no_collections_copy")), 1)], 64))]), _: 2 }, [e.isAdmin ? { name: "append", fn: d(() => [a(s, { to: "/settings/data-model/+" }, { default: d(() => [D(b(e.t("create_collection")), 1)]), _: 1 })]) } : void 0]), 1032, ["title"])]), _: 1 }, 8, ["title"]) } var F8 = B(S8, [["render", V8], ["__scopeId", "data-v-0dd849a0"]]); const so = (e, t) => { var n; if (!!((n = e.params) == null ? void 0 : n.collection)) { if (e.params.collection === "directus_users") return e.params.primaryKey ? `/users/${e.params.primaryKey}` : "/users"; if (e.params.collection === "directus_files") return e.params.primaryKey ? `/files/${e.params.primaryKey}` : "/files"; if (e.params.collection === "directus_activity") return e.params.primaryKey ? `/activity/${e.params.primaryKey}` : "/activity"; if (e.params.collection === "directus_webhooks") return e.params.primaryKey ? `/settings/webhooks/${e.params.primaryKey}` : "/settings/webhooks"; if ("bookmark" in t.query && typeof t.query.bookmark == "string" && !("bookmark" in e.query) && e.params.collection === t.params.collection) return Zl(e.fullPath, { bookmark: t.query.bookmark }) } }; var A8 = rn({ id: "content", name: "$t:content", icon: "box", routes: [{ name: "no-collections", path: "", component: F8, beforeEnter() { const e = He(), { activeGroups: t } = ka(E(null)); if (e.visibleCollections.length === 0) return; const n = M.exports.orderBy(e.visibleCollections.filter(u => { var o; return M.exports.isNil((o = u == null ? void 0 : u.meta) == null ? void 0 : o.group) }), ["meta.sort", "collection"]); let l = i(n); if (l = i(n, { skipClosed: !1 }), !l) return; return `/content/${l.collection}`; function i(u, { skipClosed: o } = { skipClosed: !0 }) { for (const s of u) { if (s.schema) return s; if (o && t.value.includes(s.collection) === !1) continue; const r = M.exports.orderBy(e.visibleCollections.filter(f => { var v; return s.collection === ((v = f.meta) == null ? void 0 : v.group) }), ["meta.sort", "collection"]), p = i(r); if (p) return p } } } }, { path: ":collection", component: pn, children: [{ name: "content-collection", path: "", component: k8, props: e => ({ collection: e.params.collection, bookmark: e.query.bookmark, archive: "archive" in e.query }), beforeEnter: so }, { name: "content-item", path: ":primaryKey", component: Pa, props: !0, beforeEnter: so }] }, { name: "content-item-not-found", path: ":_(.+)+", component: eo, beforeEnter: so }] }), I8 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: A8 }), E8 = [{ name: "app", path: "app", children: [{ name: "content-collections", path: "app/content-collections", import: () => j(() => import("./assets/content-collections.359b5daf.js"), ["assets/content-collections.359b5daf.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "content-items", path: "app/content-items", import: () => j(() => import("./assets/content-items.f10c4240.js"), ["assets/content-items.f10c4240.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "content", path: "app/content", import: () => j(() => import("./assets/content.6c00b4f7.js"), ["assets/content.6c00b4f7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "documentation", path: "app/documentation", import: () => j(() => import("./assets/documentation.cda0921f.js"), ["assets/documentation.cda0921f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "file-library", path: "app/file-library", import: () => j(() => import("./assets/file-library.25e1c929.js"), ["assets/file-library.25e1c929.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "insights", path: "app/insights", import: () => j(() => import("./assets/insights.bdfe4fdb.js"), ["assets/insights.bdfe4fdb.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "overview", path: "app/overview", import: () => j(() => import("./assets/overview.a7294570.js"), ["assets/overview.a7294570.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "settings", path: "app/settings", import: () => j(() => import("./assets/settings.bf65ae28.js"), ["assets/settings.bf65ae28.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "user-directory", path: "app/user-directory", import: () => j(() => import("./assets/user-directory.5e0f8a9e.js"), ["assets/user-directory.5e0f8a9e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "configuration", path: "configuration", children: [{ name: "activity-log", path: "configuration/activity-log", import: () => j(() => import("./assets/activity-log.149b4235.js"), ["assets/activity-log.149b4235.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "config-options", path: "configuration/config-options", import: () => j(() => import("./assets/config-options.0020f748.js"), ["assets/config-options.0020f748.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "data-model", path: "configuration/data-model", import: () => j(() => import("./assets/data-model.709f41ad.js"), ["assets/data-model.709f41ad.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "faq", path: "configuration/faq", import: () => j(() => import("./assets/faq.c6cbe773.js"), ["assets/faq.c6cbe773.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "filter-rules", path: "configuration/filter-rules", import: () => j(() => import("./assets/filter-rules.23b50c24.js"), ["assets/filter-rules.23b50c24.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "localization", path: "configuration/localization", import: () => j(() => import("./assets/localization.b87f6d61.js"), ["assets/localization.b87f6d61.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "overview", path: "configuration/overview", import: () => j(() => import("./assets/overview.3735ce4e.js"), ["assets/overview.3735ce4e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "presets-bookmarks", path: "configuration/presets-bookmarks", import: () => j(() => import("./assets/presets-bookmarks.7ca67e49.js"), ["assets/presets-bookmarks.7ca67e49.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "project-settings", path: "configuration/project-settings", import: () => j(() => import("./assets/project-settings.af73527a.js"), ["assets/project-settings.af73527a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "relationships", path: "configuration/relationships", import: () => j(() => import("./assets/relationships.417dbb85.js"), ["assets/relationships.417dbb85.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "security", path: "configuration/security", import: () => j(() => import("./assets/security.ed62274d.js"), ["assets/security.ed62274d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "upgrades-migrations", path: "configuration/upgrades-migrations", import: () => j(() => import("./assets/upgrades-migrations.6b876472.js"), ["assets/upgrades-migrations.6b876472.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "users-roles-permissions", path: "configuration/users-roles-permissions", import: () => j(() => import("./assets/users-roles-permissions.aa6e645d.js"), ["assets/users-roles-permissions.aa6e645d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "webhooks", path: "configuration/webhooks", import: () => j(() => import("./assets/webhooks.5bdc49f0.js"), ["assets/webhooks.5bdc49f0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "contributing", path: "contributing", children: [{ name: "codebase-overview", path: "contributing/codebase-overview", import: () => j(() => import("./assets/codebase-overview.4ba1c217.js"), ["assets/codebase-overview.4ba1c217.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "github-ci", path: "contributing/github-ci", import: () => j(() => import("./assets/github-ci.9c11a482.js"), ["assets/github-ci.9c11a482.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "introduction", path: "contributing/introduction", import: () => j(() => import("./assets/introduction.295c3b30.js"), ["assets/introduction.295c3b30.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "running-locally", path: "contributing/running-locally", import: () => j(() => import("./assets/running-locally.b9c6ac7c.js"), ["assets/running-locally.b9c6ac7c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "translations", path: "contributing/translations", import: () => j(() => import("./assets/translations.02aa44ee.js"), ["assets/translations.02aa44ee.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "extensions", path: "extensions", children: [{ name: "api-endpoints", path: "extensions/api-endpoints", import: () => j(() => import("./assets/api-endpoints.edac31b3.js"), ["assets/api-endpoints.edac31b3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "displays", path: "extensions/displays", import: () => j(() => import("./assets/displays.d13ea013.js"), ["assets/displays.d13ea013.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "email-templates", path: "extensions/email-templates", import: () => j(() => import("./assets/email-templates.153388ae.js"), ["assets/email-templates.153388ae.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "hooks", path: "extensions/hooks", import: () => j(() => import("./assets/hooks.bff79daf.js"), ["assets/hooks.bff79daf.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "interfaces", path: "extensions/interfaces", import: () => j(() => import("./assets/interfaces.e6c8f277.js"), ["assets/interfaces.e6c8f277.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "introduction", path: "extensions/introduction", import: () => j(() => import("./assets/introduction.1fa26f9f.js"), ["assets/introduction.1fa26f9f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "layouts", path: "extensions/layouts", import: () => j(() => import("./assets/layouts.54bf3f4f.js"), ["assets/layouts.54bf3f4f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "migrations", path: "extensions/migrations", import: () => j(() => import("./assets/migrations.d7d0c3b8.js"), ["assets/migrations.d7d0c3b8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "modules", path: "extensions/modules", import: () => j(() => import("./assets/modules.51a52010.js"), ["assets/modules.51a52010.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "panels", path: "extensions/panels", import: () => j(() => import("./assets/panels.2dc33a61.js"), ["assets/panels.2dc33a61.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "themes", path: "extensions/themes", import: () => j(() => import("./assets/themes.cd13042d.js"), ["assets/themes.cd13042d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "getting-started", path: "getting-started", children: [{ name: "backing-directus", path: "getting-started/backing-directus", import: () => j(() => import("./assets/backing-directus.6c539fa4.js"), ["assets/backing-directus.6c539fa4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "glossary", path: "getting-started/glossary", import: () => j(() => import("./assets/glossary.eb10f432.js"), ["assets/glossary.eb10f432.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "installation", path: "getting-started/installation", children: [{ name: "aws", path: "getting-started/installation/aws", import: () => j(() => import("./assets/aws.f5840be0.js"), ["assets/aws.f5840be0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "cli", path: "getting-started/installation/cli", import: () => j(() => import("./assets/cli.709f9e2a.js"), ["assets/cli.709f9e2a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "cloudron", path: "getting-started/installation/cloudron", import: () => j(() => import("./assets/cloudron.51d0b74d.js"), ["assets/cloudron.51d0b74d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "digitalocean-app-platform", path: "getting-started/installation/digitalocean-app-platform", import: () => j(() => import("./assets/digitalocean-app-platform.fd58d363.js"), ["assets/digitalocean-app-platform.fd58d363.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "docker", path: "getting-started/installation/docker", import: () => j(() => import("./assets/docker.d440849a.js"), ["assets/docker.d440849a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "iis", path: "getting-started/installation/iis", import: () => j(() => import("./assets/iis.8f48b46a.js"), ["assets/iis.8f48b46a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "manual", path: "getting-started/installation/manual", import: () => j(() => import("./assets/manual.ca166066.js"), ["assets/manual.ca166066.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "plesk", path: "getting-started/installation/plesk", import: () => j(() => import("./assets/plesk.7e5e9105.js"), ["assets/plesk.7e5e9105.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "ubuntu", path: "getting-started/installation/ubuntu", import: () => j(() => import("./assets/ubuntu.adc7719b.js"), ["assets/ubuntu.adc7719b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "installation", path: "getting-started/installation", import: () => j(() => import("./assets/installation.b72899ef.js"), ["assets/installation.b72899ef.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "introduction", path: "getting-started/introduction", import: () => j(() => import("./assets/introduction.3da87e38.js"), ["assets/introduction.3da87e38.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "quickstart", path: "getting-started/quickstart", import: () => j(() => import("./assets/quickstart.03ac6f6c.js"), ["assets/quickstart.03ac6f6c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "support", path: "getting-started/support", import: () => j(() => import("./assets/support.d818a3ba.js"), ["assets/support.d818a3ba.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }, { name: "reference", path: "reference", children: [{ name: "authentication", path: "reference/authentication", import: () => j(() => import("./assets/authentication.979423af.js"), ["assets/authentication.979423af.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "cli", path: "reference/cli", import: () => j(() => import("./assets/cli.1923b2eb.js"), ["assets/cli.1923b2eb.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "files", path: "reference/files", import: () => j(() => import("./assets/files.2b5db709.js"), ["assets/files.2b5db709.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "introduction", path: "reference/introduction", import: () => j(() => import("./assets/introduction.85ed1394.js"), ["assets/introduction.85ed1394.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "items", path: "reference/items", import: () => j(() => import("./assets/items.4a58552c.js"), ["assets/items.4a58552c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "query", path: "reference/query", import: () => j(() => import("./assets/query.3662a09a.js"), ["assets/query.3662a09a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "sdk", path: "reference/sdk", import: () => j(() => import("./assets/sdk.f79ec05d.js"), ["assets/sdk.f79ec05d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "system", path: "reference/system", children: [{ name: "activity", path: "reference/system/activity", import: () => j(() => import("./assets/activity.2e626708.js"), ["assets/activity.2e626708.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "collections", path: "reference/system/collections", import: () => j(() => import("./assets/collections.8d4ed63f.js"), ["assets/collections.8d4ed63f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "extensions", path: "reference/system/extensions", import: () => j(() => import("./assets/extensions.eb270497.js"), ["assets/extensions.eb270497.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "fields", path: "reference/system/fields", import: () => j(() => import("./assets/fields.66b4a80a.js"), ["assets/fields.66b4a80a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "folders", path: "reference/system/folders", import: () => j(() => import("./assets/folders.cf080e7c.js"), ["assets/folders.cf080e7c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "notifications", path: "reference/system/notifications", import: () => j(() => import("./assets/notifications.95ecd845.js"), ["assets/notifications.95ecd845.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "permissions", path: "reference/system/permissions", import: () => j(() => import("./assets/permissions.35d2c816.js"), ["assets/permissions.35d2c816.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "presets", path: "reference/system/presets", import: () => j(() => import("./assets/presets.ff69bed6.js"), ["assets/presets.ff69bed6.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "relations", path: "reference/system/relations", import: () => j(() => import("./assets/relations.46c5aaca.js"), ["assets/relations.46c5aaca.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "revisions", path: "reference/system/revisions", import: () => j(() => import("./assets/revisions.2fc449af.js"), ["assets/revisions.2fc449af.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "roles", path: "reference/system/roles", import: () => j(() => import("./assets/roles.46105c9e.js"), ["assets/roles.46105c9e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "server", path: "reference/system/server", import: () => j(() => import("./assets/server.9bf46def.js"), ["assets/server.9bf46def.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "settings", path: "reference/system/settings", import: () => j(() => import("./assets/settings.cde8ffd7.js"), ["assets/settings.cde8ffd7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "users", path: "reference/system/users", import: () => j(() => import("./assets/users.c126e79c.js"), ["assets/users.c126e79c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "utilities", path: "reference/system/utilities", import: () => j(() => import("./assets/utilities.0bddc943.js"), ["assets/utilities.0bddc943.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }, { name: "webhooks", path: "reference/system/webhooks", import: () => j(() => import("./assets/webhooks.db4c9b9c.js"), ["assets/webhooks.db4c9b9c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]) }] }] }]; const D8 = z({ name: "NavigationListItem", props: { section: { type: Object, default: null }, dense: { type: Boolean, default: !1 } } }); function T8(e, t, n, l, i, u) { const o = c("v-divider"), s = c("v-icon"), r = c("v-list-item-icon"), p = c("v-text-overflow"), f = c("v-list-item-content"), v = c("navigation-list-item"), _ = c("v-list-group"), y = c("v-list-item"); return e.section.divider ? (m(), C(o, { key: 0 })) : e.section.children ? (m(), C(_, { key: 1, scope: "docs-navigation", dense: e.dense, multiple: !1, value: e.section.to }, { activator: d(() => [e.section.icon !== void 0 ? (m(), C(r, { key: 0 }, { default: d(() => [a(s, { name: e.section.icon }, null, 8, ["name"])]), _: 1 })) : R("", !0), a(f, null, { default: d(() => [a(p, { text: e.section.name }, null, 8, ["text"])]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.section.children, (g, w) => (m(), C(v, { key: w, section: g, dense: "" }, null, 8, ["section"]))), 128))]), _: 1 }, 8, ["dense", "value"])) : (m(), C(y, { key: 2, scope: "docs-navigation", to: `/docs${e.section.to}`, dense: e.dense, value: e.section.to }, { default: d(() => [e.section.icon !== void 0 ? (m(), C(r, { key: 0 }, { default: d(() => [a(s, { name: e.section.icon }, null, 8, ["name"])]), _: 1 })) : R("", !0), a(f, null, { default: d(() => [a(p, { text: e.section.name }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["to", "dense", "value"])) } var P8 = B(D8, [["render", T8]]), O8 = [{ name: "App Overview", to: "/app/overview", icon: "school" }, { name: "Content Collections", to: "/app/content-collections", icon: "list_alt" }, { name: "Content Items", to: "/app/content-items", icon: "edit_note" }, { name: "User Directory", to: "/app/user-directory", icon: "people_alt" }, { name: "File Library", to: "/app/file-library", icon: "folder" }, { name: "Insights", to: "/app/insights", icon: "insights" }, { name: "Documentation", to: "/app/documentation", icon: "help_outline" }, { name: "Settings", to: "/app/settings", icon: "settings" }, { name: "Backing Directus", to: "/getting-started/backing-directus", icon: "card_giftcard" }, { name: "Glossary", to: "/getting-started/glossary", icon: "menu_book" }]; function L8(e) { const t = e.substr(1).split("/"); if (t.length === 0) return []; const n = ["/" + t[0]]; for (let l = 1; l < t.length; l++)n.push(n[l - 1] + "/" + t[l]); return n[0] === "/reference" && n[1] === "/reference/api" && n.shift(), n } const j8 = z({ components: { NavigationItem: P8 }, props: { path: { type: String, default: "/docs" } }, setup(e) { const t = E(null); return _e(() => e.path, n => { n !== null && (t.value = [...t.value || [], ...L8(n.replace("/docs", ""))]) }, { immediate: !0 }), { navSections: O8, selection: t } } }); function R8(e, t, n, l, i, u) { const o = c("navigation-item"), s = c("v-list"); return m(), C(s, { modelValue: e.selection, "onUpdate:modelValue": t[0] || (t[0] = r => e.selection = r), nav: "", mandatory: !1, scope: "docs-navigation" }, { default: d(() => [(m(!0), I(se, null, he(e.navSections, r => (m(), C(o, { key: r.name, section: r }, null, 8, ["section"]))), 128))]), _: 1 }, 8, ["modelValue"]) } var Oa = B(j8, [["render", R8]]); const M8 = z({ name: "NotFound", components: { DocsNavigation: Oa }, setup() { const { t: e } = x(), t = Yt(); return { t: e, route: t } } }), U8 = { class: "not-found" }; function N8(e, t, n, l, i, u) { const o = c("docs-navigation"), s = c("v-info"), r = c("private-view"); return m(), C(r, { title: e.t("page_not_found") }, { navigation: d(() => [a(o, { path: e.route.path }, null, 8, ["path"])]), default: d(() => [S("div", U8, [a(s, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])])]), _: 1 }, 8, ["title"]) } var B8 = B(M8, [["render", N8], ["__scopeId", "data-v-736afbfa"]]); const q8 = z({ name: "StaticDocs", components: { DocsNavigation: Oa }, setup() { const { t: e } = x(), t = Yt(), n = E("Test"), l = E(!1); return { t: e, route: t, title: n, modularExtension: l } } }), z8 = { class: "type-title" }, K8 = D("Modular Extension"), H8 = { class: "docs-content selectable" }, W8 = { class: "page-description" }; function G8(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-chip"), p = c("docs-navigation"), f = c("router-view"), v = c("sidebar-detail"), _ = c("private-view"), y = we("md"); return m(), C(_, { title: e.title }, { "title-outer:prepend": d(() => [a(s, { rounded: "", disabled: "", icon: "" }, { default: d(() => [a(o, { name: "info" })]), _: 1 })]), title: d(() => [S("h1", z8, b(e.title), 1), e.modularExtension ? (m(), C(r, { key: 0, disabled: "", small: "" }, { default: d(() => [K8]), _: 1 })) : R("", !0)]), navigation: d(() => [a(p, { path: e.route.path }, null, 8, ["path"])]), sidebar: d(() => [a(v, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", W8, null, 512), [[y, e.t("page_help_docs_global")]])]), _: 1 }, 8, ["title"])]), default: d(() => [S("div", H8, [a(f, { "onUpdate:title": t[0] || (t[0] = g => e.title = g), "onUpdate:modularExtension": t[1] || (t[1] = g => e.modularExtension = g) })])]), _: 1 }, 8, ["title"]) } var J8 = B(q8, [["render", G8], ["__scopeId", "data-v-3383fb1a"]]), Q8 = rn({ id: "docs", name: "$t:documentation", icon: "help_outline", routes: [{ path: "", component: J8, children: [{ path: "", redirect: "/docs/app/overview" }, ...La(E8)] }, { path: ":_(.+)+", component: B8 }] }); function La(e) { const t = []; for (const n of e) "children" in n ? (t.push({ path: n.path, redirect: `/docs/${n.children[0].path}` }), t.push(...La(n.children))) : t.push({ name: `docs-${n.path.replace("/", "-")}`, path: n.path, component: n.import }); return t } var X8 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Q8 }); const Z8 = z({ props: { folder: { type: String, default: null } }, setup(e) { const { t } = x(), n = tt(), l = cn(); return { t, isOpen: l, close: i }; function i() { n.push(e.folder ? { path: `/files/folders/${e.folder}` } : { path: "/files" }) } } }); function Y8(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-upload"), r = c("v-card-text"), p = c("v-button"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"); return m(), C(_, { "model-value": e.isOpen, "onUpdate:modelValue": e.close, onEsc: e.close }, { default: d(() => [a(v, null, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("add_file")), 1)]), _: 1 }), a(r, null, { default: d(() => [a(s, { preset: { folder: e.folder }, multiple: "", "from-url": "", onInput: e.close }, null, 8, ["preset", "onInput"])]), _: 1 }), a(f, null, { default: d(() => [a(p, { secondary: "", onClick: e.close }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 }, 8, ["onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value", "onUpdate:modelValue", "onEsc"]) } var ja = B(Z8, [["render", Y8]]); let fn = null, Sn = null, zn = null, ro = null, Kn = null; function Hn() { return fn === null && (fn = E(!1)), Sn === null && (Sn = E(null)), zn === null && (zn = E(null)), Kn === null && (Kn = E(null)), ro === null && (ro = E(["root"])), Sn.value === null && fn.value === !1 && e(), { loading: fn, folders: Sn, nestedFolders: zn, error: Kn, fetchFolders: e, openFolders: ro }; async function e() { if (fn !== null && Sn !== null && zn !== null && Kn !== null) { fn.value = !0; try { const t = await ue.get("/folders", { params: { limit: -1, sort: "name" } }); Sn.value = t.data.data, zn.value = x8(t.data.data) } catch (t) { Kn.value = t } finally { fn.value = !1 } } } } function x8(e) { return e.map(t => Ra(t, e)).filter(t => t.parent === null) } function Ra(e, t) { const n = re({}, e), l = t.filter(i => i.parent === e.id && i.id !== e.id).map(i => Ra(i, t)); return l.length > 0 && (n.children = l), n } const eS = z({ name: "FolderPickerListItem", props: { folder: { type: Object, required: !0 }, currentFolder: { type: String, default: null }, clickHandler: { type: Function, default: () => { } }, disabled: { type: Boolean, default: !1 }, disabledFolders: { type: Array, default: () => [] } } }), tS = { class: "folder-picker-list-item" }; function nS(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("folder-picker-list-item", !0), v = c("v-list-group"); return m(), I("div", tS, [e.folder.children.length === 0 ? (m(), C(p, { key: 0, clickable: "", active: e.currentFolder === e.folder.id, disabled: e.disabled, onClick: t[0] || (t[0] = _ => e.clickHandler(e.folder.id)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: e.currentFolder === e.folder.id ? "folder_open" : "folder" }, null, 8, ["name"])]), _: 1 }), a(r, null, { default: d(() => [D(b(e.folder.name), 1)]), _: 1 })]), _: 1 }, 8, ["active", "disabled"])) : (m(), C(v, { key: 1, clickable: "", active: e.currentFolder === e.folder.id, disabled: e.disabled, onClick: t[1] || (t[1] = _ => e.clickHandler(e.folder.id)) }, { activator: d(() => [a(s, null, { default: d(() => [a(o, { name: e.currentFolder === e.folder.id ? "folder_open" : "folder" }, null, 8, ["name"])]), _: 1 }), a(r, null, { default: d(() => [D(b(e.folder.name), 1)]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.folder.children, _ => (m(), C(f, { key: _.id, folder: _, "current-folder": e.currentFolder, "click-handler": e.clickHandler, disabled: e.disabledFolders.includes(_.id), "disabled-folders": e.disabledFolders }, null, 8, ["folder", "current-folder", "click-handler", "disabled", "disabled-folders"]))), 128))]), _: 1 }, 8, ["active", "disabled"]))]) } var lS = B(eS, [["render", nS]]); const oS = z({ components: { FolderPickerListItem: lS }, props: { disabledFolders: { type: Array, default: () => [] }, modelValue: { type: String, default: null } }, emits: ["update:modelValue"], setup(e) { const { t } = x(), n = E(!1), l = E([]), i = V(() => { return l.value.filter(y => y.parent === null).map(y => Ce(re({}, y), { children: _(y) })); function _(y) { return l.value.filter(g => g.parent === y.id).map(g => Ce(re({}, g), { children: _(g) })) } }), u = [], o = l.value.find(_ => _.id === e.modelValue); o && o.parent && v(o.parent); const s = ["root"]; for (const _ of u) s.includes(_) === !1 && s.push(_); const r = V(() => l.value.find(_ => _.id === e.modelValue) || {}), p = E(s); return f(), { t, loading: n, folders: l, tree: i, selectedFolder: r, openFolders: p }; async function f() { if (!(l.value.length > 0)) { n.value = !0; try { const _ = await ue.get("/folders", { params: { limit: -1, sort: "name" } }); l.value = _.data.data } catch (_) { Ve(_) } finally { n.value = !1 } } } function v(_) { if (!l.value) return; u.push(_); const y = l.value.find(g => g.id === _); y && y.parent && v(y.parent) } } }), aS = { key: 1, class: "folder-picker" }; function iS(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-icon"), r = c("v-list-item-icon"), p = c("v-list-item-content"), f = c("folder-picker-list-item"), v = c("v-list-group"), _ = c("v-item-group"), y = c("v-list"); return e.loading ? (m(), C(o, { key: 0 })) : (m(), I("div", aS, [a(y, null, { default: d(() => [a(_, { modelValue: e.openFolders, "onUpdate:modelValue": t[1] || (t[1] = g => e.openFolders = g), scope: "folder-picker", multiple: "" }, { default: d(() => [a(v, { "disable-groupable-parent": "", clickable: "", active: e.modelValue === null, scope: "folder-picker", value: "root", onClick: t[0] || (t[0] = g => e.$emit("update:modelValue", null)) }, { activator: d(() => [a(r, null, { default: d(() => [a(s, { name: "folder_special", outline: "" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("file_library")), 1)]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.tree, g => (m(), C(f, { key: g.id, folder: g, "current-folder": e.modelValue, "click-handler": w => e.$emit("update:modelValue", w), disabled: e.disabledFolders.includes(g.id), "disabled-folders": e.disabledFolders }, null, 8, ["folder", "current-folder", "click-handler", "disabled", "disabled-folders"]))), 128))]), _: 1 }, 8, ["active"])]), _: 1 }, 8, ["modelValue"])]), _: 1 })])) } var uo = B(oS, [["render", iS], ["__scopeId", "data-v-2293d565"]]); const sS = z({ name: "NavigationFolder", components: { FolderPicker: uo }, props: { folder: { type: Object, required: !0 }, currentFolder: { type: String, default: null }, clickHandler: { type: Function, default: () => { } } }, setup(e) { const { t } = x(), n = tt(), { renameActive: l, renameValue: i, renameSave: u, renameSaving: o } = w(), { moveActive: s, moveValue: r, moveSave: p, moveSaving: f } = h(), { deleteActive: v, deleteSave: _, deleteSaving: y } = k(), { fetchFolders: g } = Hn(); return { t, renameActive: l, renameValue: i, renameSave: u, renameSaving: o, moveActive: s, moveValue: r, moveSave: p, moveSaving: f, deleteActive: v, deleteSave: _, deleteSaving: y }; function w() { const F = E(!1), A = E(e.folder.name), P = E(!1); return { renameActive: F, renameValue: A, renameSave: L, renameSaving: P }; async function L() { P.value = !0; try { await ue.patch(`/folders/${e.folder.id}`, { name: A.value }) } catch (T) { Ve(T) } finally { P.value = !1, await g(), F.value = !1 } } } function h() { const F = E(!1), A = E(e.folder.parent), P = E(!1); return { moveActive: F, moveValue: A, moveSave: L, moveSaving: P }; async function L() { P.value = !0; try { await ue.patch(`/folders/${e.folder.id}`, { parent: A.value }) } catch (T) { Ve(T) } finally { P.value = !1, await g(), F.value = !1 } } } function k() { const F = E(!1), A = E(!1); return { deleteActive: F, deleteSave: P, deleteSaving: A }; async function P() { A.value = !0; try { const L = await ue.get("/folders", { params: { filter: { parent: { _eq: e.folder.id } } } }), T = await ue.get("/files", { params: { filter: { folder: { _eq: e.folder.id } } } }), N = e.folder.parent || null, O = L.data.data.map(q => q.id), U = T.data.data.map(q => q.id); O.length > 0 && await ue.patch("/folders", { keys: O, data: { parent: N } }), U.length > 0 && await ue.patch("/files", { keys: U, data: { folder: N } }), await ue.delete(`/folders/${e.folder.id}`), N ? n.replace(`/files/folders/${N}`) : n.replace("/files"), F.value = !1 } catch (L) { Ve(L) } finally { await g(), A.value = !1 } } } } }); function rS(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-text-overflow"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("navigation-folder", !0), _ = c("v-list-group"), y = c("v-list"), g = c("v-menu"), w = c("v-card-title"), h = c("v-input"), k = c("v-card-text"), F = c("v-button"), A = c("v-card-actions"), P = c("v-card"), L = c("v-dialog"), T = c("folder-picker"), N = c("v-notice"), O = we("context-menu"); return m(), I("div", null, [e.folder.children === void 0 ? ee((m(), C(f, { key: 0, to: `/files/folders/${e.folder.id}`, active: e.currentFolder === e.folder.id }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "folder" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.folder.name }, null, 8, ["text"])]), _: 1 })]), _: 1 }, 8, ["to", "active"])), [[O, "contextMenu"]]) : ee((m(), C(_, { key: 1, to: `/files/folders/${e.folder.id}`, active: e.currentFolder === e.folder.id, value: e.folder.id, scope: "files-navigation", "disable-groupable-parent": "" }, { activator: d(() => [a(s, null, { default: d(() => [a(o, { name: "folder" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.folder.name }, null, 8, ["text"])]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.folder.children, U => (m(), C(v, { key: U.id, folder: U, "current-folder": e.currentFolder, "click-handler": e.clickHandler }, null, 8, ["folder", "current-folder", "click-handler"]))), 128))]), _: 1 }, 8, ["to", "active", "value"])), [[O, "contextMenu"]]), a(g, { ref: "contextMenu", "show-arrow": "", placement: "bottom-start" }, { default: d(() => [a(y, null, { default: d(() => [a(f, { clickable: "", onClick: t[0] || (t[0] = U => e.renameActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "edit", outline: "" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("rename_folder") }, null, 8, ["text"])]), _: 1 })]), _: 1 }), a(f, { clickable: "", onClick: t[1] || (t[1] = U => e.moveActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "folder_move" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("move_to_folder") }, null, 8, ["text"])]), _: 1 })]), _: 1 }), a(f, { clickable: "", onClick: t[2] || (t[2] = U => e.deleteActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { text: e.t("delete_folder") }, null, 8, ["text"])]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 512), a(L, { modelValue: e.renameActive, "onUpdate:modelValue": t[5] || (t[5] = U => e.renameActive = U), persistent: "", onEsc: t[6] || (t[6] = U => e.renameActive = !1) }, { default: d(() => [a(P, null, { default: d(() => [a(w, null, { default: d(() => [D(b(e.t("rename_folder")), 1)]), _: 1 }), a(k, null, { default: d(() => [a(h, { modelValue: e.renameValue, "onUpdate:modelValue": t[3] || (t[3] = U => e.renameValue = U), autofocus: "", onKeyup: gn(e.renameSave, ["enter"]) }, null, 8, ["modelValue", "onKeyup"])]), _: 1 }), a(A, null, { default: d(() => [a(F, { secondary: "", onClick: t[4] || (t[4] = U => e.renameActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(F, { disabled: e.renameValue === null, loading: e.renameSaving, onClick: e.renameSave }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(L, { modelValue: e.moveActive, "onUpdate:modelValue": t[9] || (t[9] = U => e.moveActive = U), persistent: "", onEsc: t[10] || (t[10] = U => e.moveActive = !1) }, { default: d(() => [a(P, null, { default: d(() => [a(w, null, { default: d(() => [D(b(e.t("move_to_folder")), 1)]), _: 1 }), a(k, null, { default: d(() => [a(T, { modelValue: e.moveValue, "onUpdate:modelValue": t[7] || (t[7] = U => e.moveValue = U), "disabled-folders": [e.folder.id] }, null, 8, ["modelValue", "disabled-folders"])]), _: 1 }), a(A, null, { default: d(() => [a(F, { secondary: "", onClick: t[8] || (t[8] = U => e.moveActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(F, { loading: e.moveSaving, onClick: e.moveSave }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(L, { modelValue: e.deleteActive, "onUpdate:modelValue": t[12] || (t[12] = U => e.deleteActive = U), persistent: "", onEsc: t[13] || (t[13] = U => e.deleteActive = !1) }, { default: d(() => [a(P, null, { default: d(() => [a(w, null, { default: d(() => [D(b(e.t("delete_folder")), 1)]), _: 1 }), a(k, null, { default: d(() => [a(N, null, { default: d(() => [D(b(e.t("nested_files_folders_will_be_moved")), 1)]), _: 1 })]), _: 1 }), a(A, null, { default: d(() => [a(F, { secondary: "", onClick: t[11] || (t[11] = U => e.deleteActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(F, { kind: "danger", loading: e.deleteSaving, onClick: e.deleteSave }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]) } var dS = B(sS, [["render", rS]]); function uS(e, t) { const n = {}; for (let l = 0; l < e.length; l++) { const i = e[l] + typeof e[l]; n[i] = 1 } for (let l = 0; l < t.length; l++) { const i = t[l] + typeof t[l]; if (!n[i]) return !1; n[i] = 2 } for (const l in n) if (n[l] === 1) return !1; return !0 } const cS = z({ components: { NavigationFolder: dS }, props: { currentFolder: { type: String, default: null } }, setup(e) { const { t } = x(), { nestedFolders: n, folders: l, error: i, loading: u, openFolders: o } = Hn(); return s(), _e(() => e.currentFolder, s), { t, folders: l, nestedFolders: n, error: i, loading: u, openFolders: o }; function s() { if (!l.value) return []; if (!(o == null ? void 0 : o.value)) return []; const r = [], p = l.value.find(_ => _.id === e.currentFolder); p && p.parent && v(p.parent); const f = [...o.value]; for (const _ of r) f.includes(_) === !1 && f.push(_); f.length !== 1 && uS(f, o.value) === !1 && (o.value = f); function v(_) { if (!l.value) return; r.push(_); const y = l.value.find(g => g.id === _); y && y.parent && v(y.parent) } } } }), pS = { class: "folders" }; function mS(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-list-item"), r = c("v-icon"), p = c("v-list-item-icon"), f = c("v-text-overflow"), v = c("v-list-item-content"), _ = c("navigation-folder"), y = c("v-list-group"), g = c("v-item-group"), w = c("v-divider"), h = c("v-list"); return m(), C(h, { nav: "" }, { default: d(() => [e.loading && (e.nestedFolders === null || e.nestedFolders.length === 0) ? (m(), I(se, { key: 0 }, he(4, k => a(s, { key: k }, { default: d(() => [a(o, { type: "list-item-icon" })]), _: 2 }, 1024)), 64)) : R("", !0), S("div", pS, [a(g, { modelValue: e.openFolders, "onUpdate:modelValue": t[0] || (t[0] = k => e.openFolders = k), scope: "files-navigation", multiple: "" }, { default: d(() => [a(y, { to: "/files", active: e.currentFolder === null, value: "root", scope: "files-navigation", exact: "", "disable-groupable-parent": "" }, { activator: d(() => [a(p, null, { default: d(() => [a(r, { name: "folder_special", outline: "" })]), _: 1 }), a(v, null, { default: d(() => [a(f, { text: e.t("file_library") }, null, 8, ["text"])]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.nestedFolders, k => (m(), C(_, { key: k.id, folder: k, "current-folder": e.currentFolder }, null, 8, ["folder", "current-folder"]))), 128))]), _: 1 }, 8, ["active"])]), _: 1 }, 8, ["modelValue"])]), a(w), a(s, { to: "/files/all" }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "file_copy", outline: "" })]), _: 1 }), a(v, null, { default: d(() => [a(f, { text: e.t("all_files") }, null, 8, ["text"])]), _: 1 })]), _: 1 }), a(s, { to: "/files/mine" }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "folder_shared" })]), _: 1 }), a(v, null, { default: d(() => [a(f, { text: e.t("my_files") }, null, 8, ["text"])]), _: 1 })]), _: 1 }), a(s, { to: "/files/recent" }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "history" })]), _: 1 }), a(v, null, { default: d(() => [a(f, { text: e.t("recent_files") }, null, 8, ["text"])]), _: 1 })]), _: 1 })]), _: 1 }) } var co = B(cS, [["render", mS], ["__scopeId", "data-v-1c8d05c4"]]); const fS = z({ props: { parent: { type: String, default: null }, disabled: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = tt(), l = E(!1), i = E(!1), u = E(null), { fetchFolders: o } = Hn(); return { t, addFolder: s, dialogActive: l, newFolderName: u, saving: i }; async function s() { i.value = !0; try { const r = await ue.post("/folders", { name: u.value, parent: e.parent === "root" ? null : e.parent }); await o(), l.value = !1, u.value = null, n.push({ path: `/files/folders/${r.data.data.id}` }) } catch (r) { Ve(r) } finally { i.value = !1 } } } }); function vS(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-card-title"), p = c("v-input"), f = c("v-card-text"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"), g = we("tooltip"); return m(), C(y, { modelValue: e.dialogActive, "onUpdate:modelValue": t[2] || (t[2] = w => e.dialogActive = w), onEsc: t[3] || (t[3] = w => e.dialogActive = !1) }, { activator: d(({ on: w }) => [ee(a(s, { rounded: "", icon: "", class: "add-new", disabled: e.disabled, onClick: w }, { default: d(() => [a(o, { name: "create_new_folder", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[g, e.disabled ? e.t("not_allowed") : e.t("create_folder"), void 0, { bottom: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(r, null, { default: d(() => [D(b(e.t("create_folder")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(p, { modelValue: e.newFolderName, "onUpdate:modelValue": t[0] || (t[0] = w => e.newFolderName = w), autofocus: "", placeholder: e.t("folder_name"), onKeyup: gn(e.addFolder, ["enter"]) }, null, 8, ["modelValue", "placeholder", "onKeyup"])]), _: 1 }), a(v, null, { default: d(() => [a(s, { secondary: "", onClick: t[1] || (t[1] = w => e.dialogActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(s, { disabled: e.newFolderName === null, loading: e.saving, onClick: e.addFolder }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]) } var _S = B(fS, [["render", vS], ["__scopeId", "data-v-51ae7fc6"]]); const Wn = la(); var vn; (function (e) { e.upload = "upload" })(vn || (vn = {})); function Cn(e, t, n, l) { at(() => { (Nl(e) ? e.value : e).addEventListener(t, n, l) }), Ul(() => { (Nl(e) ? e.value : e).removeEventListener(t, n, l) }) } async function Ma(e, t) { const n = (t == null ? void 0 : t.onProgressChange) || (() => { }), l = new FormData; if (t == null ? void 0 : t.preset) for (const [u, o] of Object.entries(t.preset)) l.append(u, o); l.append("file", e); try { let u = null; return (t == null ? void 0 : t.fileId) ? u = await ue.patch(`/files/${t.fileId}`, l, { onUploadProgress: i }) : u = await ue.post("/files", l, { onUploadProgress: i }), (t == null ? void 0 : t.notifications) && It({ title: ze.global.t("upload_file_success"), type: "success" }), Wn.emit(vn.upload), u.data.data } catch (u) { Ve(u) } function i(u) { const o = Math.floor(u.loaded * 100 / u.total); n(o) } } async function Ua(e, t) { const n = (t == null ? void 0 : t.onProgressChange) || (() => { }), l = e.map(() => 0); try { const i = await Promise.all(e.map((u, o) => Ma(u, Ce(re({}, t), { onProgressChange: s => { l[o] = s, n(l) } })))); return (t == null ? void 0 : t.notifications) && It({ title: ze.global.t("upload_files_success", { count: e.length }), type: "success" }), i } catch (i) { Ve(i) } } const yS = z({ name: "FilesCollection", components: { FilesNavigation: co, LayoutSidebarDetail: Nn, AddFolder: _S, SearchInput: $n, FolderPicker: uo, DrawerBatch: no }, props: { folder: { type: String, default: null }, special: { type: String, default: null } }, setup(e) { const { t } = x(), n = tt(), l = el(), i = Dt(), { folders: u } = Hn(), o = E(), s = E([]), r = Ze(), { layout: p, layoutOptions: f, layoutQuery: v, filter: _, search: y, resetPreset: g } = bn(E("directus_files")), { confirmDelete: w, deleting: h, batchDelete: k, error: F, batchEditActive: A } = H(), { breadcrumb: P, title: L } = Q(), T = V(() => { const oe = { _and: [{ type: { _nnull: !0 } }] }; return e.special === null && (e.folder !== null ? oe._and.push({ folder: { _eq: e.folder } }) : oe._and.push({ folder: { _null: !0 } })), e.special === "mine" && r.currentUser && oe._and.push({ uploaded_by: { _eq: r.currentUser.id } }), e.special === "recent" && oe._and.push({ uploaded_on: { _gt: oa(new Date, 5).toISOString() } }), oe }), { layoutWrapper: N } = un(p), { moveToDialogActive: O, moveToFolder: U, moving: q, selectedFolder: K } = Z(); at(() => Wn.on(vn.upload, le)), At(() => Wn.off(vn.upload, le)), Tt(() => { s.value = [] }), Ot(() => { s.value = [] }); const { onDragEnter: W, onDragLeave: te, onDrop: G, onDragOver: X, showDropEffect: ve, dragging: ae } = ie(); Cn(window, "dragenter", W), Cn(window, "dragover", X), Cn(window, "dragleave", te), Cn(window, "drop", G); const { batchEditAllowed: ne, batchDeleteAllowed: Y, createAllowed: ce, createFolderAllowed: pe } = J(); return { t, breadcrumb: P, title: L, layoutRef: o, layoutWrapper: N, selection: s, layoutOptions: f, layoutQuery: v, layout: p, folderTypeFilter: T, search: y, moveToDialogActive: O, moveToFolder: U, moving: q, selectedFolder: K, refresh: le, clearFilters: fe, onDragEnter: W, onDragLeave: te, showDropEffect: ve, onDrop: G, dragging: ae, batchEditAllowed: ne, batchDeleteAllowed: Y, createAllowed: ce, createFolderAllowed: pe, resetPreset: g, confirmDelete: w, deleting: h, batchDelete: k, deleteError: F, batchEditActive: A, filter: _, mergeFilters: fl }; function H() { const oe = E(!1), me = E(!1), ge = E(!1), be = E(); return { batchEditActive: ge, confirmDelete: oe, deleting: me, batchDelete: ke, error: be }; async function ke() { me.value = !0; const Ie = s.value; try { await ue.delete("/files", { data: Ie }), await le(), s.value = [] } catch (De) { Ve(De), be.value = De } finally { oe.value = !1, me.value = !1 } } } function Q() { const oe = V(() => { var ge; if (e.special === "all") return t("all_files"); if (e.special === "mine") return t("my_files"); if (e.special === "recent") return t("recent_files"); if (e.folder) { const be = (ge = u.value) == null ? void 0 : ge.find(ke => ke.id === e.folder); if (be) return be.name } return t("file_library") }); return { breadcrumb: V(() => oe.value !== t("file_library") ? [{ name: t("file_library"), to: "/files" }] : null), title: oe } } function Z() { const oe = E(!1), me = E(!1), ge = E(); return { moveToDialogActive: oe, moving: me, moveToFolder: be, selectedFolder: ge }; async function be() { me.value = !0; try { await ue.patch("/files", { keys: s.value, data: { folder: ge.value } }), s.value = [], ge.value && n.push(`/files/folders/${ge.value}`), await dl(), await le() } catch (ke) { Ve(ke) } finally { oe.value = !1, me.value = !1 } } } async function le() { var oe, me, ge; await ((ge = (me = (oe = o.value) == null ? void 0 : oe.state) == null ? void 0 : me.refresh) == null ? void 0 : ge.call(me)) } function fe() { _.value = null, y.value = null } function J() { const oe = V(() => { var De; return ((De = r == null ? void 0 : r.currentUser) == null ? void 0 : De.role.admin_access) === !0 ? !0 : !!i.permissions.find(Be => Be.action === "update" && Be.collection === "directus_files") }), me = V(() => { var De; return ((De = r == null ? void 0 : r.currentUser) == null ? void 0 : De.role.admin_access) === !0 ? !0 : !!i.permissions.find(Be => Be.action === "delete" && Be.collection === "directus_files") }), ge = V(() => { var De; return ((De = r == null ? void 0 : r.currentUser) == null ? void 0 : De.role.admin_access) === !0 ? !0 : !!i.permissions.find(Be => Be.action === "create" && Be.collection === "directus_files") }), be = V(() => { var De; return ((De = r == null ? void 0 : r.currentUser) == null ? void 0 : De.role.admin_access) === !0 ? !0 : !!i.permissions.find(Be => Be.action === "create" && Be.collection === "directus_folders") }); return { batchEditAllowed: oe, batchDeleteAllowed: me, createAllowed: ge, createFolderAllowed: be } } function ie() { const oe = E(!1); let me, ge; const be = E(0), ke = V(() => be.value > 0); return { onDragEnter: Be, onDragLeave: Te, onDrop: Oe, onDragOver: lt, showDropEffect: oe, dragging: ke }; function Ie() { oe.value = !0, me = l.add({ title: t("drop_to_upload"), icon: "cloud_upload", type: "info", persist: !0, closeable: !1 }) } function De() { oe.value = !1, me && l.remove(me) } function Be(qe) { var Fe, Se, We; if (!qe.dataTransfer || ((Fe = qe.dataTransfer) == null ? void 0 : Fe.types.indexOf("Files")) === -1) return; qe.preventDefault(), be.value++; const Le = qe.target && ((We = (Se = qe.target).getAttribute) == null ? void 0 : We.call(Se, "data-dropzone")) === ""; be.value === 1 && oe.value === !1 && Le === !1 && Ie(), Le && (De(), be.value = 0) } function lt(qe) { var Le; !qe.dataTransfer || ((Le = qe.dataTransfer) == null ? void 0 : Le.types.indexOf("Files")) !== -1 && qe.preventDefault() } function Te(qe) { var Le, Fe, Se; !qe.dataTransfer || ((Le = qe.dataTransfer) == null ? void 0 : Le.types.indexOf("Files")) !== -1 && (qe.preventDefault(), be.value--, be.value === 0 && De(), qe.target && ((Se = (Fe = qe.target).getAttribute) == null ? void 0 : Se.call(Fe, "data-dropzone")) === "" && (Ie(), be.value = 1)) } async function Oe(qe) { var Fe; if (!qe.dataTransfer || ((Fe = qe.dataTransfer) == null ? void 0 : Fe.types.indexOf("Files")) === -1) return; qe.preventDefault(), oe.value = !1, be.value = 0, me && l.remove(me); const Le = [...qe.dataTransfer.files]; ge = l.add({ title: t("upload_files_indeterminate", { done: 0, total: Le.length }, Le.length), type: "info", persist: !0, closeable: !1, loading: !0 }), await Ua(Le, { preset: { folder: e.folder }, onProgressChange: Se => { const We = Se.reduce((Ge, it) => Ge += it) / Se.length, $e = Le.length, Ue = Se.filter(Ge => Ge === 100).length; l.update(ge, { title: t("upload_files_indeterminate", { done: Ue, total: $e }, Le.length), loading: !1, progress: We }) } }), l.remove(ge), Wn.emit(vn.upload) } } } }), kl = e => (Qe("data-v-f242a114"), e = e(), Xe(), e), gS = { class: "page-description" }, hS = kl(() => S("div", { class: "drop-border top" }, null, -1)), bS = kl(() => S("div", { class: "drop-border right" }, null, -1)), $S = kl(() => S("div", { class: "drop-border bottom" }, null, -1)), wS = kl(() => S("div", { class: "drop-border left" }, null, -1)); function kS(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("search-input"), f = c("add-folder"), v = c("v-card-title"), _ = c("folder-picker"), y = c("v-card-text"), g = c("v-card-actions"), w = c("v-card"), h = c("v-dialog"), k = c("files-navigation"), F = c("v-info"), A = c("router-view"), P = c("drawer-batch"), L = c("sidebar-detail"), T = c("layout-sidebar-detail"), N = c("export-sidebar-detail"), O = c("private-view"), U = we("tooltip"), q = we("md"); return m(), C(Ne(e.layoutWrapper), { ref: "layoutRef", selection: e.selection, "onUpdate:selection": t[12] || (t[12] = K => e.selection = K), "layout-options": e.layoutOptions, "onUpdate:layout-options": t[13] || (t[13] = K => e.layoutOptions = K), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[14] || (t[14] = K => e.layoutQuery = K), filter: e.mergeFilters(e.filter, e.folderTypeFilter), "filter-user": e.filter, "filter-system": e.folderTypeFilter, search: e.search, collection: "directus_files", "reset-preset": e.resetPreset }, { default: d(({ layoutState: K }) => [a(O, { title: e.title, class: de({ dragging: e.dragging }) }, et({ "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "folder", outline: "" })]), _: 1 })]), "actions:prepend": d(() => [(m(), C(Ne(`layout-actions-${e.layout}`), Je(xe(K)), null, 16))]), actions: d(() => [a(p, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = W => e.search = W), filter: e.filter, "onUpdate:filter": t[1] || (t[1] = W => e.filter = W), collection: "directus_files" }, null, 8, ["modelValue", "filter"]), a(f, { parent: e.folder, disabled: e.createFolderAllowed !== !0 }, null, 8, ["parent", "disabled"]), e.selection.length > 0 ? (m(), C(h, { key: 0, modelValue: e.moveToDialogActive, "onUpdate:modelValue": t[4] || (t[4] = W => e.moveToDialogActive = W), onEsc: t[5] || (t[5] = W => e.moveToDialogActive = !1) }, { activator: d(({ on: W }) => [ee(a(r, { rounded: "", icon: "", class: "folder", onClick: W }, { default: d(() => [a(s, { name: "folder_move" })]), _: 2 }, 1032, ["onClick"]), [[U, e.t("move_to_folder"), void 0, { bottom: !0 }]])]), default: d(() => [a(w, null, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("move_to_folder")), 1)]), _: 1 }), a(y, null, { default: d(() => [a(_, { modelValue: e.selectedFolder, "onUpdate:modelValue": t[2] || (t[2] = W => e.selectedFolder = W) }, null, 8, ["modelValue"])]), _: 1 }), a(g, null, { default: d(() => [a(r, { secondary: "", onClick: t[3] || (t[3] = W => e.moveToDialogActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { loading: e.moving, onClick: e.moveToFolder }, { default: d(() => [D(b(e.t("move")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 0 ? (m(), C(h, { key: 1, modelValue: e.confirmDelete, "onUpdate:modelValue": t[7] || (t[7] = W => e.confirmDelete = W), onEsc: t[8] || (t[8] = W => e.confirmDelete = !1) }, { activator: d(({ on: W }) => [ee(a(r, { disabled: e.batchDeleteAllowed !== !0, rounded: "", icon: "", class: "action-delete", onClick: W }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[U, e.batchDeleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(w, null, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("batch_delete_confirm", e.selection.length)), 1)]), _: 1 }), a(g, null, { default: d(() => [a(r, { secondary: "", onClick: t[6] || (t[6] = W => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.batchDelete }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 1 ? ee((m(), C(r, { key: 2, rounded: "", icon: "", class: "action-batch", disabled: e.batchEditAllowed === !1, onClick: t[9] || (t[9] = W => e.batchEditActive = !0) }, { default: d(() => [a(s, { name: "edit", outline: "" })]), _: 1 }, 8, ["disabled"])), [[U, e.batchEditAllowed ? e.t("edit") : e.t("not_allowed"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(r, { rounded: "", icon: "", class: "add-new", to: e.folder ? { path: `/files/folders/${e.folder}/+` } : { path: "/files/+" }, disabled: e.createAllowed === !1 }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to", "disabled"]), [[U, e.createAllowed ? e.t("create_item") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(k, { "current-folder": e.folder }, null, 8, ["current-folder"])]), sidebar: d(() => [a(L, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", gS, null, 512), [[q, e.t("page_help_files_collection")]])]), _: 1 }, 8, ["title"]), a(T, { modelValue: e.layout, "onUpdate:modelValue": t[11] || (t[11] = W => e.layout = W) }, { default: d(() => [(m(), C(Ne(`layout-options-${e.layout}`), Je(xe(K)), null, 16))]), _: 2 }, 1032, ["modelValue"]), (m(), C(Ne(`layout-sidebar-${e.layout}`), Je(xe(K)), null, 16)), a(N, { collection: "directus_files", filter: e.mergeFilters(e.filter, e.folderTypeFilter), search: e.search }, null, 8, ["filter", "search"])]), default: d(() => [(m(), C(Ne(`layout-${e.layout}`), dt({ class: "layout" }, K), { "no-results": d(() => [!e.filter && !e.search ? (m(), C(F, { key: 0, title: e.t("file_count", 0), icon: "folder", center: "" }, { append: d(() => [a(r, { to: e.folder ? { path: `/files/folders/${e.folder}/+` } : { path: "/files/+" } }, { default: d(() => [D(b(e.t("add_file")), 1)]), _: 1 }, 8, ["to"])]), default: d(() => [D(b(e.t("no_files_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : (m(), C(F, { key: 1, title: e.t("no_results"), icon: "search", center: "" }, { append: d(() => [a(r, { onClick: e.clearFilters }, { default: d(() => [D(b(e.t("clear_filters")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("no_results_copy")) + " ", 1)]), _: 1 }, 8, ["title"]))]), "no-items": d(() => [a(F, { title: e.t("file_count", 0), icon: "folder", center: "" }, { append: d(() => [a(r, { to: e.folder ? { path: `/files/folders/${e.folder}/+` } : { path: "/files/+" } }, { default: d(() => [D(b(e.t("add_file")), 1)]), _: 1 }, 8, ["to"])]), default: d(() => [D(b(e.t("no_files_copy")) + " ", 1)]), _: 1 }, 8, ["title"])]), _: 2 }, 1040)), a(A, { name: "addNew", folder: e.folder, onUpload: e.refresh }, null, 8, ["folder", "onUpload"]), a(P, { active: e.batchEditActive, "onUpdate:active": t[10] || (t[10] = W => e.batchEditActive = W), "primary-keys": e.selection, collection: "directus_files", onRefresh: e.refresh }, null, 8, ["active", "primary-keys", "onRefresh"]), e.showDropEffect ? (m(), I(se, { key: 0 }, [hS, bS, $S, wS], 64)) : R("", !0)]), _: 2 }, [e.breadcrumb ? { name: "headline", fn: d(() => [a(o, { items: e.breadcrumb }, null, 8, ["items"])]) } : void 0]), 1032, ["title", "class"])]), _: 1 }, 8, ["selection", "layout-options", "layout-query", "filter", "filter-user", "filter-system", "search", "reset-preset"]) } var Gn = B(yS, [["render", kS], ["__scopeId", "data-v-f242a114"]]); const SS = z({ props: { mime: { type: String, required: !0 }, width: { type: Number, default: null }, height: { type: Number, default: null }, src: { type: String, required: !0 }, title: { type: String, required: !0 }, inModal: { type: Boolean, default: !1 } }, emits: ["click"], setup(e) { const t = E(!1), n = V(() => e.mime === null ? null : e.mime.startsWith("image") ? "image" : e.mime.startsWith("video") ? "video" : e.mime.startsWith("audio") ? "audio" : null), l = V(() => e.mime.includes("svg")); return { type: n, isSVG: l, imgError: t } } }), CS = { key: 0, class: "file-preview" }, VS = ["src", "width", "height", "alt"], FS = ["src"], AS = ["src"]; function IS(e, t, n, l, i, u) { const o = c("v-icon"); return e.type && !e.imgError ? (m(), I("div", CS, [e.type === "image" ? (m(), I("div", { key: 0, class: de(["image", { svg: e.isSVG, "max-size": e.inModal === !1 }]), onClick: t[1] || (t[1] = s => e.$emit("click")) }, [S("img", { src: e.src, width: e.width, height: e.height, alt: e.title, onError: t[0] || (t[0] = s => e.imgError = !0) }, null, 40, VS), e.inModal === !1 ? (m(), C(o, { key: 0, name: "upload" })) : R("", !0)], 2)) : e.type === "video" ? (m(), I("video", { key: 1, controls: "", src: e.src }, null, 8, FS)) : e.type === "audio" ? (m(), I("audio", { key: 2, controls: "", src: e.src }, null, 8, AS)) : R("", !0)])) : R("", !0) } var po = B(SS, [["render", IS], ["__scopeId", "data-v-7957d1ad"]]); const ES = z({ props: { id: { type: String, required: !0 }, modelValue: { type: Boolean, default: void 0 } }, emits: ["update:modelValue", "refresh"], setup(e, { emit: t }) { const { t: n, n: l } = x(), i = E(!1), u = V({ get() { return e.modelValue === void 0 ? i.value : e.modelValue }, set(q) { i.value = q, t("update:modelValue", q) } }), { loading: o, error: s, imageData: r, imageElement: p, save: f, saving: v, fetchImage: _, onImageLoad: y } = O(), { cropperInstance: g, initCropper: w, flip: h, rotate: k, aspectRatio: F, aspectRatioIcon: A, newDimensions: P, dragMode: L, cropping: T } = U(); _e(u, q => { q === !0 ? _() : (g.value && g.value.destroy(), o.value = !1, s.value = null, r.value = null) }); const N = V(() => st(`${Ye()}assets/${e.id}?${bt()}`)); return { t: n, n: l, internalActive: u, loading: o, error: s, imageData: r, imageElement: p, save: f, onImageLoad: y, flip: h, rotate: k, aspectRatio: F, aspectRatioIcon: A, saving: v, imageURL: N, newDimensions: P, dragMode: L, cropping: T }; function O() { const q = E(!1), K = E(null), W = E(null), te = E(!1), G = E(null); return { loading: q, error: K, imageData: W, saving: te, fetchImage: X, imageElement: G, save: ve, onImageLoad: ae }; async function X() { try { q.value = !0; const ne = await ue.get(`/files/${e.id}`, { params: { fields: ["type", "filesize", "filename_download", "width", "height"] } }); W.value = ne.data.data } catch (ne) { K.value = ne } finally { q.value = !1 } } function ve() { var ne, Y; te.value = !0, (Y = g.value) == null || Y.getCroppedCanvas({ imageSmoothingQuality: "high" }).toBlob(async ce => { var H; if (ce === null) { te.value = !1; return } const pe = new FormData; pe.append("file", ce, (H = W.value) == null ? void 0 : H.filename_download); try { await ue.patch(`/files/${e.id}`, pe), t("refresh"), u.value = !1 } catch (Q) { Ve(Q) } finally { te.value = !1 } }, (ne = W.value) == null ? void 0 : ne.type) } async function ae() { await dl(), w() } } function U() { const q = E(null), K = E(NaN), W = Xt({ width: null, height: null }); _e(r, () => { !r.value || (K.value = r.value.width / r.value.height, W.width = r.value.width, W.height = r.value.height) }); const te = V({ get() { return K.value }, set(H) { var Q; K.value = H, (Q = q.value) == null || Q.setAspectRatio(H) } }), G = V(() => { if (!r.value) return "crop_original"; switch (te.value) { case 16 / 9: return "crop_16_9"; case 3 / 2: return "crop_3_2"; case 5 / 4: return "crop_5_4"; case 7 / 5: return "crop_7_5"; case 1 / 1: return "crop_square"; case r.value.width / r.value.height: return "crop_original"; default: return "crop_free" } }), X = E("move"), ve = V({ get() { return X.value }, set(H) { var Q; (Q = q.value) == null || Q.setDragMode(H), X.value = H } }), ae = E(!1), ne = V({ get() { return ae.value }, set(H) { var Q; H === !1 && ((Q = q.value) == null || Q.clear()), ae.value = H } }); return { cropperInstance: q, initCropper: Y, flip: ce, rotate: pe, aspectRatio: te, aspectRatioIcon: G, newDimensions: W, dragMode: ve, cropping: ne }; function Y() { p.value !== null && (q.value && q.value.destroy(), q.value = new Rr(p.value, { autoCrop: !1, toggleDragModeOnDblclick: !1, dragMode: "move", crop: Mr(H => { if (!r.value) return; ne.value === !1 && (H.detail.width || H.detail.height) && (ne.value = !0); const Q = H.detail.width || r.value.width, Z = H.detail.height || r.value.height; H.detail.rotate === 0 || H.detail.rotate === -180 ? (W.width = Math.round(Q), W.height = Math.round(Z)) : (W.height = Math.round(Q), W.width = Math.round(Z)) }, 50) })) } function ce(H) { var Q, Z, le, fe, J, ie; H === "vertical" && (((Q = q.value) == null ? void 0 : Q.getData().scaleX) === -1 ? (Z = q.value) == null || Z.scaleX(1) : (le = q.value) == null || le.scaleX(-1)), H === "horizontal" && (((fe = q.value) == null ? void 0 : fe.getData().scaleY) === -1 ? (J = q.value) == null || J.scaleY(1) : (ie = q.value) == null || ie.scaleY(-1)) } function pe() { var H; (H = q.value) == null || H.rotate(-90) } } } }), DS = e => (Qe("data-v-106d65e4"), e = e(), Xe(), e), TS = { class: "warning" }, PS = { key: 0, class: "loader" }, OS = D("error"), LS = { class: "editor-container" }, jS = { class: "editor" }, RS = ["src"], MS = { class: "toolbar" }, US = D("16:9"), NS = D("3:2"), BS = D("5:4"), qS = D("7:5"), zS = DS(() => S("div", { class: "spacer" }, null, -1)), KS = { key: 0, class: "dimensions" }; function HS(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = c("v-notice"), r = c("v-icon"), p = c("v-list-item-icon"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-list"), y = c("v-menu"), g = c("v-button"), w = c("v-drawer"), h = we("tooltip"); return m(), C(w, { modelValue: e.internalActive, "onUpdate:modelValue": t[12] || (t[12] = k => e.internalActive = k), class: "modal", title: e.t("editing_image"), persistent: "", onCancel: t[13] || (t[13] = k => e.internalActive = !1) }, { activator: d(k => [ye(e.$slots, "activator", Je(xe(k)), void 0, !0)]), subtitle: d(() => [S("span", TS, b(e.t("changes_are_permanent")), 1)]), actions: d(() => [ee(a(g, { loading: e.saving, icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(r, { name: "check" })]), _: 1 }, 8, ["loading", "onClick"]), [[h, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [e.loading ? (m(), I("div", PS, [a(o, { indeterminate: "" })])) : e.error ? (m(), C(s, { key: 1, type: "error" }, { default: d(() => [OS]), _: 1 })) : R("", !0), ee(S("div", LS, [S("div", jS, [S("img", { ref: "imageElement", src: e.imageURL, role: "presentation", alt: "", onLoad: t[0] || (t[0] = (...k) => e.onImageLoad && e.onImageLoad(...k)) }, null, 40, RS)]), S("div", MS, [ee(S("div", { class: "drag-mode toolbar-button", onClick: t[1] || (t[1] = k => e.dragMode = e.dragMode === "crop" ? "move" : "crop") }, [a(r, { name: "pan_tool", class: de({ active: e.dragMode === "move" }) }, null, 8, ["class"]), a(r, { name: "crop", class: de({ active: e.dragMode === "crop" }) }, null, 8, ["class"])], 512), [[h, e.t("drag_mode"), void 0, { top: !0, inverted: !0 }]]), ee(a(r, { name: "rotate_90_degrees_ccw", clickable: "", onClick: e.rotate }, null, 8, ["onClick"]), [[h, e.t("rotate"), void 0, { top: !0, inverted: !0 }]]), ee(a(r, { name: "flip_horizontal", clickable: "", onClick: t[2] || (t[2] = k => e.flip("horizontal")) }, null, 512), [[h, e.t("flip_horizontal"), void 0, { top: !0, inverted: !0 }]]), ee(a(r, { name: "flip_vertical", clickable: "", onClick: t[3] || (t[3] = k => e.flip("vertical")) }, null, 512), [[h, e.t("flip_vertical"), void 0, { top: !0, inverted: !0 }]]), a(y, { placement: "top", "show-arrow": "" }, { activator: d(({ toggle: k }) => [ee(a(r, { name: e.aspectRatioIcon, clickable: "", onClick: k }, null, 8, ["name", "onClick"]), [[h, e.t("aspect_ratio"), void 0, { top: !0, inverted: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(v, { clickable: "", active: e.aspectRatio === 16 / 9, onClick: t[4] || (t[4] = k => e.aspectRatio = 16 / 9) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_16_9" })]), _: 1 }), a(f, null, { default: d(() => [US]), _: 1 })]), _: 1 }, 8, ["active"]), a(v, { clickable: "", active: e.aspectRatio === 3 / 2, onClick: t[5] || (t[5] = k => e.aspectRatio = 3 / 2) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_3_2" })]), _: 1 }), a(f, null, { default: d(() => [NS]), _: 1 })]), _: 1 }, 8, ["active"]), a(v, { clickable: "", active: e.aspectRatio === 5 / 4, onClick: t[6] || (t[6] = k => e.aspectRatio = 5 / 4) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_5_4" })]), _: 1 }), a(f, null, { default: d(() => [BS]), _: 1 })]), _: 1 }, 8, ["active"]), a(v, { clickable: "", active: e.aspectRatio === 7 / 5, onClick: t[7] || (t[7] = k => e.aspectRatio = 7 / 5) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_7_5" })]), _: 1 }), a(f, null, { default: d(() => [qS]), _: 1 })]), _: 1 }, 8, ["active"]), a(v, { clickable: "", active: e.aspectRatio === 1 / 1, onClick: t[8] || (t[8] = k => e.aspectRatio = 1 / 1) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_square" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("square")), 1)]), _: 1 })]), _: 1 }, 8, ["active"]), a(v, { clickable: "", active: e.aspectRatio === NaN, onClick: t[9] || (t[9] = k => e.aspectRatio = NaN) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_free" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("free")), 1)]), _: 1 })]), _: 1 }, 8, ["active"]), e.imageData ? (m(), C(v, { key: 0, clickable: "", active: e.aspectRatio === e.imageData.width / e.imageData.height, onClick: t[10] || (t[10] = k => e.aspectRatio = e.imageData.width / e.imageData.height) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { name: "crop_original" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("original")), 1)]), _: 1 })]), _: 1 }, 8, ["active"])) : R("", !0)]), _: 1 })]), _: 1 }), zS, e.imageData ? (m(), I("div", KS, [D(b(e.n(e.imageData.width)) + "x" + b(e.n(e.imageData.height)) + " ", 1), e.imageData.width !== e.newDimensions.width || e.imageData.height !== e.newDimensions.height ? (m(), I(se, { key: 0 }, [D(" -> " + b(e.n(e.newDimensions.width)) + "x" + b(e.n(e.newDimensions.height)), 1)], 64)) : R("", !0)])) : R("", !0), ee(S("button", { class: "toolbar-button cancel", onClick: t[11] || (t[11] = k => e.cropping = !1) }, b(e.t("cancel_crop")), 513), [[Et, e.cropping]])])], 512), [[Et, e.imageData && !e.loading && !e.error]])]), _: 3 }, 8, ["modelValue", "title"]) } var WS = B(ES, [["render", HS], ["__scopeId", "data-v-106d65e4"]]), GS = { "audio/aac": "aac", "application/x-abiword": "abw", "application/x-freearc": "arc", "video/x-msvideo": "avi", "application/vnd.amazon.ebook": "azw", "application/octet-stream": "file", "image/bmp": "bmp", "application/x-bzip": "bz", "application/x-bzip2": "bz2", "application/x-csh": "csh", "text/css": "css", "text/csv": "csv", "application/msword": "doc", "application/sql": "sql", "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "docx", "application/vnd.ms-fontobject": "eot", "application/epub+zip": "epub", "application/gzip": "gz", "image/gif": "gif", "text/html": "html", "image/vnd.microsoft.icon": "ico", "text/calendar": "ics", "application/java-archive": "jar", "image/jpeg": "jpg", "text/javascript": "js", "application/json": "json", "application/ld+json": "jsonld", "audio/midi audio/x-midi": "midi", "audio/mpeg": "mp3", "video/mpeg": "mpeg", "application/vnd.apple.installer+xml": "mpkg", "application/vnd.oasis.opendocument.presentation": "odp", "application/vnd.oasis.opendocument.spreadsheet": "ods", "application/vnd.oasis.opendocument.text": "odt", "audio/ogg": "oga", "video/ogg": "ogv", "application/ogg": "ogx", "audio/opus": "opus", "font/otf": "otf", "image/png": "png", "application/pdf": "pdf", "application/x-httpd-php": "php", "application/vnd.ms-powerpoint": "ppt", "application/vnd.openxmlformats-officedocument.presentationml.presentation": "pptx", "application/vnd.rar": "rar", "application/rtf": "rtf", "application/x-sh": "sh", "image/svg+xml": "svg", "application/x-shockwave-flash": "swf", "application/x-tar": "tar", "image/tiff": "tiff", "video/mp2t": "ts", "font/ttf": "ttf", "text/plain": "txt", "application/vnd.visio": "vsd", "audio/wav": "wav", "audio/webm": "weba", "video/webm": "webm", "image/webp": "webp", "font/woff": "woff", "font/woff2": "woff2", "application/xhtml+xml": "xhtml", "application/vnd.ms-excel": "xls", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": "xlsx", "application/xml": "xml", "application/vnd.mozilla.xul+xml": "xul", "application/zip": "zip", "video/3gpp": "3gp", "video/3gpp2": "3g2", "audio/3gpp": "3gp", "audio/3gpp2": "3g2", "application/x-7z-compressed": "7z" }, JS = { "application/vnd.hzn-3d-crossword": "3D Crossword Plugin", "video/3gpp": "3GP", "video/3gpp2": "3GP2", "application/vnd.mseq": "3GPP MSEQ File", "application/vnd.3m.post-it-notes": "3M Post It Notes", "application/vnd.3gpp.pic-bw-large": "3rd Generation Partnership Project - Pic Large", "application/vnd.3gpp.pic-bw-small": "3rd Generation Partnership Project - Pic Small", "application/vnd.3gpp.pic-bw-var": "3rd Generation Partnership Project - Pic Var", "application/vnd.3gpp2.tcap": "3rd Generation Partnership Project - Transaction Capabilities Application Part", "application/x-7z-compressed": "7-Zip", "application/x-abiword": "AbiWord", "application/x-ace-compressed": "Ace Archive", "application/vnd.americandynamics.acc": "Active Content Compression", "application/vnd.acucobol": "ACU Cobol", "application/vnd.acucorp": "ACU Cobol", "audio/adpcm": "Adaptive differential pulse-code modulation", "application/x-authorware-bin": "Adobe (Macropedia) Authorware - Binary File", "application/x-authorware-map": "Adobe (Macropedia) Authorware - Map", "application/x-authorware-seg": "Adobe (Macropedia) Authorware - Segment File", "application/vnd.adobe.air-application-installer-package+zip": "Adobe AIR Application", "application/x-shockwave-flash": "Adobe Flash", "application/vnd.adobe.fxp": "Adobe Flex Project", "application/pdf": "PDF", "application/sql": "SQL", "application/vnd.cups-ppd": "Adobe PostScript Printer Description File Format", "application/x-director": "Adobe Shockwave Player", "application/vnd.adobe.xdp+xml": "Adobe XML Data Package", "application/vnd.adobe.xfdf": "Adobe XML Forms Data Format", "audio/x-aac": "Advanced Audio Coding (AAC)", "application/vnd.ahead.space": "Ahead AIR Application", "application/vnd.airzip.filesecure.azf": "AirZip FileSECURE", "application/vnd.airzip.filesecure.azs": "AirZip FileSECURE", "application/vnd.amazon.ebook": "Amazon Kindle eBook format", "application/vnd.amiga.ami": "AmigaDE", "application/andrew-inset": "Andrew Toolkit", "application/vnd.android.package-archive": "Android Package Archive", "application/vnd.anser-web-certificate-issue-initiation": "ANSER-WEB Terminal Client - Certificate Issue", "application/vnd.anser-web-funds-transfer-initiation": "ANSER-WEB Terminal Client - Web Funds Transfer", "application/vnd.antix.game-component": "Antix Game Player", "application/x-apple-diskimage": "Apple Disk Image", "application/vnd.apple.installer+xml": "Apple Installer Package", "application/applixware": "Applixware", "application/vnd.hhe.lesson-player": "Archipelago Lesson Player", "application/vnd.aristanetworks.swi": "Arista Networks Software Image", "text/x-asm": "Assembler Source File", "application/atomcat+xml": "Atom Publishing Protocol", "application/atomsvc+xml": "Atom Publishing Protocol Service Document", "application/atom+xml": "Atom Syndication Format", "application/pkix-attr-cert": "Attribute Certificate", "audio/x-aiff": "AIFF", "video/x-msvideo": "AVI", "application/vnd.audiograph": "Audiograph", "image/vnd.dxf": "AutoCAD DXF", "model/vnd.dwf": "Autodesk Design Web Format (DWF)", "text/plain-bas": "BAS Partitur Format", "application/x-bcpio": "Binary CPIO Archive", "application/octet-stream": "Binary Data", "image/bmp": "Bitmap Image", "application/x-bittorrent": "BitTorrent", "application/vnd.rim.cod": "Blackberry COD File", "application/vnd.blueice.multipass": "Blueice Research Multipass", "application/vnd.bmi": "BMI Drawing Data Interchange", "application/x-sh": "Bourne Shell Script", "image/prs.btif": "BTIF", "application/vnd.businessobjects": "BusinessObjects", "application/x-bzip": "Bzip Archive", "application/x-bzip2": "Bzip2 Archive", "application/x-csh": "C Shell Script", "text/x-c": "C Source File", "application/vnd.chemdraw+xml": "CambridgeSoft Chem Draw", "text/css": "Cascading Style Sheets (CSS)", "chemical/x-cdx": "ChemDraw eXchange file", "chemical/x-cml": "Chemical Markup Language", "chemical/x-csml": "Chemical Style Markup Language", "application/vnd.contact.cmsg": "CIM Database", "application/vnd.claymore": "Claymore Data Files", "application/vnd.clonk.c4group": "Clonk Game", "image/vnd.dvb.subtitle": "Close Captioning - Subtitle", "application/cdmi-capability": "Cloud Data Management Interface (CDMI) - Capability", "application/cdmi-container": "Cloud Data Management Interface (CDMI) - Contaimer", "application/cdmi-domain": "Cloud Data Management Interface (CDMI) - Domain", "application/cdmi-object": "Cloud Data Management Interface (CDMI) - Object", "application/cdmi-queue": "Cloud Data Management Interface (CDMI) - Queue", "application/vnd.cluetrust.cartomobile-config": "ClueTrust CartoMobile - Config", "application/vnd.cluetrust.cartomobile-config-pkg": "ClueTrust CartoMobile - Config Package", "image/x-cmu-raster": "CMU Image", "model/vnd.collada+xml": "COLLADA", "text/csv": "CSV", "application/mac-compactpro": "Compact Pro", "application/vnd.wap.wmlc": "Compiled Wireless Markup Language (WMLC)", "image/cgm": "Computer Graphics Metafile", "x-conference/x-cooltalk": "CoolTalk", "image/x-cmx": "Corel Metafile Exchange (CMX)", "application/vnd.xara": "CorelXARA", "application/vnd.cosmocaller": "CosmoCaller", "application/x-cpio": "CPIO Archive", "application/vnd.crick.clicker": "CrickSoftware - Clicker", "application/vnd.crick.clicker.keyboard": "CrickSoftware - Clicker - Keyboard", "application/vnd.crick.clicker.palette": "CrickSoftware - Clicker - Palette", "application/vnd.crick.clicker.template": "CrickSoftware - Clicker - Template", "application/vnd.crick.clicker.wordbank": "CrickSoftware - Clicker - Wordbank", "application/vnd.criticaltools.wbs+xml": "Critical Tools - PERT Chart EXPERT", "application/vnd.rig.cryptonote": "CryptoNote", "chemical/x-cif": "Crystallographic Interchange Format", "chemical/x-cmdf": "CrystalMaker Data Format", "application/cu-seeme": "CU-SeeMe", "application/prs.cww": "CU-Writer", "text/vnd.curl": "Curl - Applet", "text/vnd.curl.dcurl": "Curl - Detached Applet", "text/vnd.curl.mcurl": "Curl - Manifest File", "text/vnd.curl.scurl": "Curl - Source Code", "application/vnd.curl.car": "CURL Applet", "application/vnd.curl.pcurl": "CURL Applet", "application/vnd.yellowriver-custom-menu": "CustomMenu", "application/dssc+der": "Data Structure for the Security Suitability of Cryptographic Algorithms", "application/dssc+xml": "Data Structure for the Security Suitability of Cryptographic Algorithms", "application/x-debian-package": "Debian Package", "audio/vnd.dece.audio": "DECE Audio", "image/vnd.dece.graphic": "DECE Graphic", "video/vnd.dece.hd": "DECE High Definition Video", "video/vnd.dece.mobile": "DECE Mobile Video", "video/vnd.uvvu.mp4": "DECE MP4", "video/vnd.dece.pd": "DECE PD Video", "video/vnd.dece.sd": "DECE SD Video", "video/vnd.dece.video": "DECE Video", "application/x-dvi": "DVI", "application/vnd.fdsn.seed": "Digital Siesmograph Networks - SEED Datafiles", "application/x-dtbook+xml": "Digital Talking Book", "application/x-dtbresource+xml": "Digital Talking Book - Resource File", "application/vnd.dvb.ait": "Digital Video Broadcasting", "application/vnd.dvb.service": "Digital Video Broadcasting", "audio/vnd.digital-winds": "Digital Winds Music", "image/vnd.djvu": "DjVu", "application/xml-dtd": "Document Type Definition", "application/vnd.dolby.mlp": "Dolby Meridian Lossless Packing", "application/x-doom": "Doom Video Game", "application/vnd.dpgraph": "DPGraph", "audio/vnd.dra": "DRA Audio", "application/vnd.dreamfactory": "DreamFactory", "audio/vnd.dts": "DTS Audio", "audio/vnd.dts.hd": "DTS High Definition Audio", "image/vnd.dwg": "DWG Drawing", "application/vnd.dynageo": "DynaGeo", "application/ecmascript": "ECMAScript", "application/vnd.ecowin.chart": "EcoWin Chart", "image/vnd.fujixerox.edmics-mmr": "EDMICS 2000", "image/vnd.fujixerox.edmics-rlc": "EDMICS 2000", "application/exi": "Efficient XML Interchange", "application/vnd.proteus.magazine": "EFI Proteus", "application/epub+zip": "Electronic Publication", "message/rfc822": "Email Message", "application/vnd.enliven": "Enliven Viewer", "application/vnd.is-xpr": "Express by Infoseek", "image/vnd.xiff": "eXtended Image File Format (XIFF)", "application/vnd.xfdl": "Extensible Forms Description Language", "application/emma+xml": "Extensible MultiModal Annotation", "application/vnd.ezpix-album": "EZPix Secure Photo Album", "application/vnd.ezpix-package": "EZPix Secure Photo Album", "image/vnd.fst": "FAST Search & Transfer ASA", "video/vnd.fvt": "FAST Search & Transfer ASA", "image/vnd.fastbidsheet": "FastBid Sheet", "application/vnd.denovo.fcselayout-link": "FCS Express Layout Link", "video/x-f4v": "Flash Video", "video/x-flv": "Flash Video", "image/vnd.fpx": "FlashPix", "image/vnd.net-fpx": "FlashPix", "text/vnd.fmi.flexstor": "FLEXSTOR", "video/x-fli": "FLI/FLC Animation Format", "application/vnd.fluxtime.clip": "FluxTime Clip", "application/vnd.fdf": "Forms Data Format", "text/x-fortran": "Fortran Source File", "application/vnd.mif": "FrameMaker Interchange Format", "application/vnd.framemaker": "FrameMaker Normal Format", "image/x-freehand": "FreeHand MX", "application/vnd.fsc.weblaunch": "Friendly Software Corporation", "application/vnd.frogans.fnc": "Frogans Player", "application/vnd.frogans.ltf": "Frogans Player", "application/vnd.fujixerox.ddd": "Fujitsu - Xerox 2D CAD Data", "application/vnd.fujixerox.docuworks": "Fujitsu - Xerox DocuWorks", "application/vnd.fujixerox.docuworks.binder": "Fujitsu - Xerox DocuWorks Binder", "application/vnd.fujitsu.oasys": "Fujitsu Oasys", "application/vnd.fujitsu.oasys2": "Fujitsu Oasys", "application/vnd.fujitsu.oasys3": "Fujitsu Oasys", "application/vnd.fujitsu.oasysgp": "Fujitsu Oasys", "application/vnd.fujitsu.oasysprs": "Fujitsu Oasys", "application/x-futuresplash": "FutureSplash Animator", "application/vnd.fuzzysheet": "FuzzySheet", "image/g3fax": "G3 Fax Image", "application/vnd.gmx": "GameMaker ActiveX", "model/vnd.gtw": "Gen-Trix Studio", "application/vnd.genomatix.tuxedo": "Genomatix Tuxedo Framework", "application/vnd.geogebra.file": "GeoGebra", "application/vnd.geogebra.tool": "GeoGebra", "model/vnd.gdl": "Geometric Description Language (GDL)", "application/vnd.geometry-explorer": "GeoMetry Explorer", "application/vnd.geonext": "GEONExT and JSXGraph", "application/vnd.geoplan": "GeoplanW", "application/vnd.geospace": "GeospacW", "application/x-font-ghostscript": "Ghostscript Font", "application/x-font-bdf": "Glyph Bitmap Distribution Format", "application/x-gtar": "GNU Tar Files", "application/x-texinfo": "GNU Texinfo Document", "application/x-gnumeric": "Gnumeric", "application/vnd.google-earth.kml+xml": "Google Earth - KML", "application/vnd.google-earth.kmz": "Google Earth - Zipped KML", "application/vnd.grafeq": "GrafEq", "image/gif": "GIF", "text/vnd.graphviz": "Graphviz", "application/vnd.groove-account": "Groove - Account", "application/vnd.groove-help": "Groove - Help", "application/vnd.groove-identity-message": "Groove - Identity Message", "application/vnd.groove-injector": "Groove - Injector", "application/vnd.groove-tool-message": "Groove - Tool Message", "application/vnd.groove-tool-template": "Groove - Tool Template", "application/vnd.groove-vcard": "Groove - Vcard", "video/h261": "H.261", "video/h263": "H.263", "video/h264": "H.264", "application/vnd.hp-hpid": "Hewlett Packard Instant Delivery", "application/vnd.hp-hps": "Hewlett-Packard's WebPrintSmart", "application/x-hdf": "Hierarchical Data Format", "audio/vnd.rip": "Hit'n'Mix", "application/vnd.hbci": "Homebanking Computer Interface (HBCI)", "application/vnd.hp-jlyt": "HP Indigo Digital Press - Job Layout Languate", "application/vnd.hp-pcl": "HP Printer Command Language", "application/vnd.hp-hpgl": "HP-GL/2 and HP RTL", "application/vnd.yamaha.hv-script": "HV Script", "application/vnd.yamaha.hv-dic": "HV Voice Dictionary", "application/vnd.yamaha.hv-voice": "HV Voice Parameter", "application/vnd.hydrostatix.sof-data": "Hydrostatix Master Suite", "application/hyperstudio": "Hyperstudio", "application/vnd.hal+xml": "Hypertext Application Language", "text/html": "HTML", "application/vnd.ibm.rights-management": "IBM DB2 Rights Manager", "application/vnd.ibm.secure-container": "IBM Electronic Media Management System - Secure Container", "text/calendar": "iCalendar", "application/vnd.iccprofile": "ICC profile", "image/x-icon": "Icon Image", "application/vnd.igloader": "igLoader", "image/ief": "Image Exchange Format", "application/vnd.immervision-ivp": "ImmerVision PURE Players", "application/vnd.immervision-ivu": "ImmerVision PURE Players", "application/reginfo+xml": "IMS Networks", "text/vnd.in3d.3dml": "In3D - 3DML", "text/vnd.in3d.spot": "In3D - 3DML", "model/iges": "Initial Graphics Exchange Specification (IGES)", "application/vnd.intergeo": "Interactive Geometry Software", "application/vnd.cinderella": "Interactive Geometry Software Cinderella", "application/vnd.intercon.formnet": "Intercon FormNet", "application/vnd.isac.fcs": "International Society for Advancement of Cytometry", "application/ipfix": "Internet Protocol Flow Information Export", "application/pkix-cert": "Internet Public Key Infrastructure - Certificate", "application/pkixcmp": "Internet Public Key Infrastructure - Certificate Management Protocole", "application/pkix-crl": "Internet Public Key Infrastructure - Certificate Revocation Lists", "application/pkix-pkipath": "Internet Public Key Infrastructure - Certification Path", "application/vnd.insors.igm": "IOCOM Visimeet", "application/vnd.ipunplugged.rcprofile": "IP Unplugged Roaming Client", "application/vnd.irepository.package+xml": "iRepository / Lucidoc Editor", "text/vnd.sun.j2me.app-descriptor": "J2ME App Descriptor", "application/java-archive": "Java Archive", "application/java-vm": "Java Bytecode File", "application/x-java-jnlp-file": "Java Network Launching Protocol", "application/java-serialized-object": "Java Serialized Object", "text/x-java-source,java": "Java Source File", "application/javascript": "JavaScript", "application/json": "JSON", "application/vnd.joost.joda-archive": "Joda Archive", "video/jpm": "JPG", "image/jpeg": "JPG", "image/x-citrix-jpeg": "JPG", "image/pjpeg": "JPG", "video/jpeg": "JPGVideo", "application/vnd.kahootz": "Kahootz", "application/vnd.chipnuts.karaoke-mmd": "Karaoke on Chipnuts Chipsets", "application/vnd.kde.karbon": "KDE KOffice Office Suite - Karbon", "application/vnd.kde.kchart": "KDE KOffice Office Suite - KChart", "application/vnd.kde.kformula": "KDE KOffice Office Suite - Kformula", "application/vnd.kde.kivio": "KDE KOffice Office Suite - Kivio", "application/vnd.kde.kontour": "KDE KOffice Office Suite - Kontour", "application/vnd.kde.kpresenter": "KDE KOffice Office Suite - Kpresenter", "application/vnd.kde.kspread": "KDE KOffice Office Suite - Kspread", "application/vnd.kde.kword": "KDE KOffice Office Suite - Kword", "application/vnd.kenameaapp": "Kenamea App", "application/vnd.kidspiration": "Kidspiration", "application/vnd.kinar": "Kinar Applications", "application/vnd.kodak-descriptor": "Kodak Storyshare", "application/vnd.las.las+xml": "Laser App Enterprise", "application/x-latex": "LaTeX", "application/vnd.llamagraphics.life-balance.desktop": "Life Balance - Desktop Edition", "application/vnd.llamagraphics.life-balance.exchange+xml": "Life Balance - Exchange Format", "application/vnd.jam": "Lightspeed Audio Lab", "application/vnd.lotus-1-2-3": "Lotus 1-2-3", "application/vnd.lotus-approach": "Lotus Approach", "application/vnd.lotus-freelance": "Lotus Freelance", "application/vnd.lotus-notes": "Lotus Notes", "application/vnd.lotus-organizer": "Lotus Organizer", "application/vnd.lotus-screencam": "Lotus Screencam", "application/vnd.lotus-wordpro": "Lotus Wordpro", "audio/vnd.lucent.voice": "Lucent Voice", "audio/x-mpegurl": "M3U (Multimedia Playlist)", "video/x-m4v": "M4v", "application/mac-binhex40": "Macintosh BinHex 4.0", "application/vnd.macports.portpkg": "MacPorts Port System", "application/vnd.osgeo.mapguide.package": "MapGuide DBXML", "application/marc": "MARC Formats", "application/marcxml+xml": "MARC21 XML Schema", "application/mxf": "Material Exchange Format", "application/vnd.wolfram.player": "Mathematica Notebook Player", "application/mathematica": "Mathematica Notebooks", "application/mathml+xml": "Mathematical Markup Language", "application/mbox": "Mbox database files", "application/vnd.medcalcdata": "MedCalc", "application/mediaservercontrol+xml": "Media Server Control Markup Language", "application/vnd.mediastation.cdkey": "MediaRemote", "application/vnd.mfer": "Medical Waveform Encoding Format", "application/vnd.mfmp": "Melody Format for Mobile Platform", "model/mesh": "Mesh Data Type", "application/mads+xml": "Metadata Authority  Description Schema", "application/mets+xml": "Metadata Encoding and Transmission Standard", "application/mods+xml": "Metadata Object Description Schema", "application/metalink4+xml": "Metalink", "application/vnd.mcd": "Micro CADAM Helix D&D", "application/vnd.micrografx.flo": "Micrografx", "application/vnd.micrografx.igx": "Micrografx iGrafx Professional", "application/vnd.eszigno3+xml": "MICROSEC e-Szign\xA2", "application/x-msaccess": "Access", "video/x-ms-asf": "MS ASF", "application/x-msdownload": "MS App", "application/vnd.ms-artgalry": "MS Artgalry", "application/vnd.ms-cab-compressed": "MS Cabinet File", "application/vnd.ms-ims": "MS Class Server", "application/x-ms-application": "MS ClickOnce", "application/x-msclip": "MS Clipboard Clip", "image/vnd.ms-modi": "MS Document Imaging Format", "application/vnd.ms-fontobject": "MS Embedded OpenType", "application/vnd.ms-excel": "Excel", "application/vnd.ms-excel.addin.macroenabled.12": "MS Excel - Add-In File", "application/vnd.ms-excel.sheet.binary.macroenabled.12": "MS Excel - Binary Workbook", "application/vnd.ms-excel.template.macroenabled.12": "MS Excel - Macro-Enabled Template File", "application/vnd.ms-excel.sheet.macroenabled.12": "MS Excel - Macro-Enabled Workbook", "application/vnd.ms-htmlhelp": "MS Html Help File", "application/x-mscardfile": "MS Information Card", "application/vnd.ms-lrm": "MS Learning Resource Module", "application/x-msmediaview": "MS MediaView", "application/x-msmoney": "MS Money", "application/vnd.openxmlformats-officedocument.presentationml.presentation": "MS Office - OOXML - Presentation", "application/vnd.openxmlformats-officedocument.presentationml.slide": "MS Office - OOXML - Presentation (Slide)", "application/vnd.openxmlformats-officedocument.presentationml.slideshow": "MS Office - OOXML - Presentation (Slideshow)", "application/vnd.openxmlformats-officedocument.presentationml.template": "MS Office - OOXML - Presentation Template", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": "MS Office - OOXML - Spreadsheet", "application/vnd.openxmlformats-officedocument.spreadsheetml.template": "MS Office - OOXML - Spreadsheet Template", "application/vnd.openxmlformats-officedocument.wordprocessingml.document": "MS Office - OOXML - Word Document", "application/vnd.openxmlformats-officedocument.wordprocessingml.template": "MS Office - OOXML - Word Document Template", "application/x-msbinder": "MS Office Binder", "application/vnd.ms-officetheme": "MS Office System Release Theme", "application/onenote": "OneNote", "audio/vnd.ms-playready.media.pya": "MS PlayReady Ecosystem", "video/vnd.ms-playready.media.pyv": "MS PlayReady Ecosystem Video", "application/vnd.ms-powerpoint": "PowerPoint", "application/vnd.ms-powerpoint.addin.macroenabled.12": "PowerPoint - Add-in file", "application/vnd.ms-powerpoint.slide.macroenabled.12": "PowerPoint - Macro-Enabled Open XML Slide", "application/vnd.ms-powerpoint.presentation.macroenabled.12": "PowerPoint - Macro-Enabled Presentation File", "application/vnd.ms-powerpoint.slideshow.macroenabled.12": "PowerPoint - Macro-Enabled Slide Show File", "application/vnd.ms-powerpoint.template.macroenabled.12": "PowerPoint - Macro-Enabled Template File", "application/vnd.ms-project": "MS Project", "application/x-mspublisher": "MS Publisher", "application/x-msschedule": "MS Schedule+", "application/x-silverlight-app": "MS Silverlight", "application/vnd.ms-pki.stl": "MS Trust UI Provider - Certificate Trust Link", "application/vnd.ms-pki.seccat": "MS Trust UI Provider - Security Catalog", "application/vnd.visio": "Visio", "application/vnd.visio2013": "Visio 2013", "video/x-ms-wm": "MS Windows Media", "audio/x-ms-wma": "WMA", "audio/x-ms-wax": "MS Windows Media Audio Redirector", "video/x-ms-wmx": "MS Windows Media Audio/Video Playlist", "application/x-ms-wmd": "MS Windows Media Player Download Package", "application/vnd.ms-wpl": "MS Windows Media Player Playlist", "application/x-ms-wmz": "MS Windows Media Player Skin Package", "video/x-ms-wmv": "WMV", "video/x-ms-wvx": "MS Windows Media Video Playlist", "application/x-msmetafile": "MS Windows Metafile", "application/x-msterminal": "MS Windows Terminal Services", "application/msword": "Word", "application/vnd.ms-word.document.macroenabled.12": "MS Word - Macro-Enabled Document", "application/vnd.ms-word.template.macroenabled.12": "MS Word - Macro-Enabled Template", "application/x-mswrite": "MS Wordpad", "application/vnd.ms-works": "MS Works", "application/x-ms-xbap": "MS XAML Browser Application", "application/vnd.ms-xpsdocument": "MS XML Paper Specification", "audio/midi": "MIDI", "application/vnd.ibm.minipay": "MiniPay", "application/vnd.ibm.modcap": "MO:DCA-P", "application/vnd.jcp.javame.midlet-rms": "Mobile Information Device Profile", "application/vnd.tmobile-livetv": "MobileTV", "application/x-mobipocket-ebook": "Mobipocket", "application/vnd.mobius.mbk": "Mobius Management Systems - Basket file", "application/vnd.mobius.dis": "Mobius Management Systems - Distribution Database", "application/vnd.mobius.plc": "Mobius Management Systems - Policy Definition Language File", "application/vnd.mobius.mqy": "Mobius Management Systems - Query File", "application/vnd.mobius.msl": "Mobius Management Systems - Script Language", "application/vnd.mobius.txf": "Mobius Management Systems - Topic Index File", "application/vnd.mobius.daf": "Mobius Management Systems - UniversalArchive", "text/vnd.fly": "mod_fly / fly.cgi", "application/vnd.mophun.certificate": "Mophun Certificate", "application/vnd.mophun.application": "Mophun VM", "video/mj2": "Motion JPEG 2000", "audio/mpeg": "MPEG Audio", "video/vnd.mpegurl": "MPEG Url", "video/mpeg": "MPEG", "application/mp21": "MPEG-21", "audio/mp4": "MP4 Audio", "video/mp4": "MP4 Video", "application/mp4": "MP4", "application/vnd.apple.mpegurl": "Multimedia Playlist Unicode", "application/vnd.musician": "MUsical Score Interpreted Code Invented for the ASCII designation of Notation", "application/vnd.muvee.style": "Muvee Automatic Video Editing", "application/xv+xml": "MXML", "application/vnd.nokia.n-gage.data": "N-Gage Game Data", "application/vnd.nokia.n-gage.symbian.install": "N-Gage Game Installer", "application/x-dtbncx+xml": "Navigation Control file for XML (for ePub)", "application/x-netcdf": "Network Common Data Form (NetCDF)", "application/vnd.neurolanguage.nlu": "neuroLanguage", "application/vnd.dna": "New Moon Liftoff/DNA", "application/vnd.noblenet-directory": "NobleNet Directory", "application/vnd.noblenet-sealer": "NobleNet Sealer", "application/vnd.noblenet-web": "NobleNet Web", "application/vnd.nokia.radio-preset": "Nokia Radio Application - Preset", "application/vnd.nokia.radio-presets": "Nokia Radio Application - Preset", "text/n3": "Notation3", "application/vnd.novadigm.edm": "Novadigm's RADIA and EDM products", "application/vnd.novadigm.edx": "Novadigm's RADIA and EDM products", "application/vnd.novadigm.ext": "Novadigm's RADIA and EDM products", "application/vnd.flographit": "NpGraphIt", "audio/vnd.nuera.ecelp4800": "Nuera ECELP 4800", "audio/vnd.nuera.ecelp7470": "Nuera ECELP 7470", "audio/vnd.nuera.ecelp9600": "Nuera ECELP 9600", "application/oda": "Office Document Architecture", "application/ogg": "Ogg", "audio/ogg": "Ogg Audio", "video/ogg": "Ogg Video", "application/vnd.oma.dd2+xml": "OMA Download Agents", "application/vnd.oasis.opendocument.text-web": "Open Document Text Web", "application/oebps-package+xml": "Open eBook Publication Structure", "application/vnd.intu.qbo": "Open Financial Exchange", "application/vnd.openofficeorg.extension": "Open Office Extension", "application/vnd.yamaha.openscoreformat": "Open Score Format", "audio/webm": "WebM Audio", "video/webm": "WebM Video", "application/vnd.oasis.opendocument.chart": "OpenDocument Chart", "application/vnd.oasis.opendocument.chart-template": "OpenDocument Chart Template", "application/vnd.oasis.opendocument.database": "OpenDocument Database", "application/vnd.oasis.opendocument.formula": "OpenDocument Formula", "application/vnd.oasis.opendocument.formula-template": "OpenDocument Formula Template", "application/vnd.oasis.opendocument.graphics": "OpenDocument Graphics", "application/vnd.oasis.opendocument.graphics-template": "OpenDocument Graphics Template", "application/vnd.oasis.opendocument.image": "OpenDocument Image", "application/vnd.oasis.opendocument.image-template": "OpenDocument Image Template", "application/vnd.oasis.opendocument.presentation": "OpenDocument Presentation", "application/vnd.oasis.opendocument.presentation-template": "OpenDocument Presentation Template", "application/vnd.oasis.opendocument.spreadsheet": "OpenDocument Spreadsheet", "application/vnd.oasis.opendocument.spreadsheet-template": "OpenDocument Spreadsheet Template", "application/vnd.oasis.opendocument.text": "OpenDocument Text", "application/vnd.oasis.opendocument.text-master": "OpenDocument Text Master", "application/vnd.oasis.opendocument.text-template": "OpenDocument Text Template", "image/ktx": "OpenGL Textures (KTX)", "application/vnd.sun.xml.calc": "OpenOffice - Calc (Spreadsheet)", "application/vnd.sun.xml.calc.template": "OpenOffice - Calc Template (Spreadsheet)", "application/vnd.sun.xml.draw": "OpenOffice - Draw (Graphics)", "application/vnd.sun.xml.draw.template": "OpenOffice - Draw Template (Graphics)", "application/vnd.sun.xml.impress": "OpenOffice - Impress (Presentation)", "application/vnd.sun.xml.impress.template": "OpenOffice - Impress Template (Presentation)", "application/vnd.sun.xml.math": "OpenOffice - Math (Formula)", "application/vnd.sun.xml.writer": "OpenOffice - Writer (Text - HTML)", "application/vnd.sun.xml.writer.global": "OpenOffice - Writer (Text - HTML)", "application/vnd.sun.xml.writer.template": "OpenOffice - Writer Template (Text - HTML)", "application/x-font-otf": "OpenType Font File", "application/vnd.yamaha.openscoreformat.osfpvg+xml": "OSFPVG", "application/vnd.osgi.dp": "OSGi Deployment Package", "application/vnd.palm": "PalmOS Data", "text/x-pascal": "Pascal Source File", "application/vnd.pawaafile": "PawaaFILE", "application/vnd.hp-pclxl": "PCL 6 Enhanced (Formely PCL XL)", "application/vnd.picsel": "Pcsel eFIF File", "image/x-pcx": "PCX Image", "image/vnd.adobe.photoshop": "Photoshop Document", "application/pics-rules": "PICSRules", "image/x-pict": "PICT Image", "application/x-chat": "pIRCh", "application/pkcs10": "PKCS #10 - Certification Request Standard", "application/x-pkcs12": "PKCS #12 - Personal Information Exchange Syntax Standard", "application/pkcs7-mime": "PKCS #7 - Cryptographic Message Syntax Standard", "application/pkcs7-signature": "PKCS #7 - Cryptographic Message Syntax Standard", "application/x-pkcs7-certreqresp": "PKCS #7 - Cryptographic Message Syntax Standard (Certificate Request Response)", "application/x-pkcs7-certificates": "PKCS #7 - Cryptographic Message Syntax Standard (Certificates)", "application/pkcs8": "PKCS #8 - Private-Key Information Syntax Standard", "application/vnd.pocketlearn": "PocketLearn Viewers", "image/x-portable-anymap": "Portable Anymap Image", "image/x-portable-bitmap": "Portable Bitmap Format", "application/x-font-pcf": "Portable Compiled Format", "application/font-tdpfr": "Portable Font Resource", "application/x-chess-pgn": "Portable Game Notation (Chess Games)", "image/x-portable-graymap": "Portable Graymap Format", "image/png": "PNG", "image/x-citrix-png": "PNG", "image/x-png": "PNG", "image/x-portable-pixmap": "Portable Pixmap Format", "application/pskc+xml": "Portable Symmetric Key Container", "application/vnd.ctc-posml": "PosML", "application/postscript": "PostScript", "application/x-font-type1": "PostScript Fonts", "application/vnd.powerbuilder6": "PowerBuilder", "application/pgp-encrypted": "Pretty Good Privacy", "application/pgp-signature": "Pretty Good Privacy - Signature", "application/vnd.previewsystems.box": "Preview Systems ZipLock/VBox", "application/vnd.pvi.ptid1": "Princeton Video Image", "application/pls+xml": "Pronunciation Lexicon Specification", "application/vnd.pg.format": "Proprietary P&G Standard Reporting System", "application/vnd.pg.osasli": "Proprietary P&G Standard Reporting System", "text/prs.lines.tag": "PRS Lines Tag", "application/x-font-linux-psf": "PSF Fonts", "application/vnd.publishare-delta-tree": "PubliShare Objects", "application/vnd.pmi.widget": "Qualcomm's Plaza Mobile Internet", "application/vnd.quark.quarkxpress": "QuarkXpress", "application/vnd.epson.esf": "QUASS Stream Player", "application/vnd.epson.msf": "QUASS Stream Player", "application/vnd.epson.ssf": "QUASS Stream Player", "application/vnd.epson.quickanime": "QuickAnime Player", "application/vnd.intu.qfx": "Quicken", "video/quicktime": "Quicktime Video", "application/x-rar-compressed": "RAR Archive", "audio/x-pn-realaudio": "Real Audio Sound", "audio/x-pn-realaudio-plugin": "Real Audio Sound", "application/rsd+xml": "Really Simple Discovery", "application/vnd.rn-realmedia": "RealMedia", "application/vnd.realvnc.bed": "RealVNC", "application/vnd.recordare.musicxml": "Recordare Applications", "application/vnd.recordare.musicxml+xml": "Recordare Applications", "application/relax-ng-compact-syntax": "Relax NG Compact Syntax", "application/vnd.data-vision.rdz": "RemoteDocs R-Viewer", "application/rdf+xml": "Resource Description Framework", "application/vnd.cloanto.rp9": "RetroPlatform Player", "application/vnd.jisp": "RhymBox", "application/rtf": "Rich Text", "text/richtext": "Rich Text", "application/vnd.route66.link66+xml": "ROUTE 66 Location Based Services", "application/rss+xml": "RSS", "application/shf+xml": "S Hexdump Format", "application/vnd.sailingtracker.track": "SailingTracker", "image/svg+xml": "SVG", "application/vnd.sus-calendar": "ScheduleUs", "application/sru+xml": "Search/Retrieve via URL Response Format", "application/set-payment-initiation": "Secure Electronic Transaction - Payment", "application/set-registration-initiation": "Secure Electronic Transaction - Registration", "application/vnd.sema": "Secured eMail", "application/vnd.semd": "Secured eMail", "application/vnd.semf": "Secured eMail", "application/vnd.seemail": "SeeMail", "application/x-font-snf": "Server Normal Format", "application/scvp-vp-request": "Server-Based Certificate Validation Protocol - Validation Policies - Request", "application/scvp-vp-response": "Server-Based Certificate Validation Protocol - Validation Policies - Response", "application/scvp-cv-request": "Server-Based Certificate Validation Protocol - Validation Request", "application/scvp-cv-response": "Server-Based Certificate Validation Protocol - Validation Response", "application/sdp": "Session Description Protocol", "text/x-setext": "Setext", "video/x-sgi-movie": "SGI Movie", "application/vnd.shana.informed.formdata": "Shana Informed Filler", "application/vnd.shana.informed.formtemplate": "Shana Informed Filler", "application/vnd.shana.informed.interchange": "Shana Informed Filler", "application/vnd.shana.informed.package": "Shana Informed Filler", "application/thraud+xml": "Sharing Transaction Fraud Data", "application/x-shar": "Shell Archive", "image/x-rgb": "Silicon Graphics RGB Bitmap", "application/vnd.epson.salt": "SimpleAnimeLite Player", "application/vnd.accpac.simply.aso": "Simply Accounting", "application/vnd.accpac.simply.imp": "Simply Accounting - Data Import", "application/vnd.simtech-mindmapper": "SimTech MindMapper", "application/vnd.commonspace": "Sixth Floor Media - CommonSpace", "application/vnd.yamaha.smaf-audio": "SMAF Audio", "application/vnd.smaf": "SMAF File", "application/vnd.yamaha.smaf-phrase": "SMAF Phrase", "application/vnd.smart.teacher": "SMART Technologies Apps", "application/vnd.svd": "SourceView Document", "application/sparql-query": "SPARQL - Query", "application/sparql-results+xml": "SPARQL - Results", "application/srgs": "Speech Recognition Grammar Specification", "application/srgs+xml": "Speech Recognition Grammar Specification - XML", "application/ssml+xml": "Speech Synthesis Markup Language", "application/vnd.koan": "SSEYO Koan Play File", "text/sgml": "SGML", "application/vnd.stardivision.calc": "StarOffice - Calc", "application/vnd.stardivision.draw": "StarOffice - Draw", "application/vnd.stardivision.impress": "StarOffice - Impress", "application/vnd.stardivision.math": "StarOffice - Math", "application/vnd.stardivision.writer": "StarOffice - Writer", "application/vnd.stardivision.writer-global": "StarOffice - Writer  (Global)", "application/vnd.stepmania.stepchart": "StepMania", "application/x-stuffit": "Stuffit Archive", "application/x-stuffitx": "Stuffit Archive", "application/vnd.solent.sdkm+xml": "SudokuMagic", "application/vnd.olpc-sugar": "Sugar Linux Application Bundle", "audio/basic": "Sun Audio - Au file format", "application/vnd.wqd": "SundaHus WQ", "application/vnd.symbian.install": "Symbian Install Package", "application/smil+xml": "Synchronized Multimedia Integration Language", "application/vnd.syncml+xml": "SyncML", "application/vnd.syncml.dm+wbxml": "SyncML - Device Management", "application/vnd.syncml.dm+xml": "SyncML - Device Management", "application/x-sv4cpio": "System V Release 4 CPIO Archive", "application/x-sv4crc": "System V Release 4 CPIO Checksum Data", "application/sbml+xml": "Systems Biology Markup Language", "text/tab-separated-values": "Tab Seperated Values", "image/tiff": "TIFF", "application/vnd.tao.intent-module-archive": "Tao Intent", "application/x-tar": "Tar File", "application/x-tcl": "Tcl Script", "application/x-tex": "TeX", "application/x-tex-tfm": "TeX Font Metric", "application/tei+xml": "Text Encoding and Interchange", "text/plain": "Text", "application/vnd.spotfire.dxp": "TIBCO Spotfire", "application/vnd.spotfire.sfs": "TIBCO Spotfire", "application/timestamped-data": "Time Stamped Data Envelope", "application/vnd.trid.tpt": "TRI Systems Config", "application/vnd.triscape.mxs": "Triscape Map Explorer", "text/troff": "troff", "application/vnd.trueapp": "True BASIC", "application/x-font-ttf": "TrueType Font", "text/turtle": "Turtle (Terse RDF Triple Language)", "application/vnd.umajin": "UMAJIN", "application/vnd.uoml+xml": "Unique Object Markup Language", "application/vnd.unity": "Unity 3d", "application/vnd.ufdl": "Universal Forms Description Language", "text/uri-list": "URI Resolution Services", "application/vnd.uiq.theme": "User Interface Quartz - Theme (Symbian)", "application/x-ustar": "Ustar (Uniform Standard Tape Archive)", "text/x-uuencode": "UUEncode", "text/x-vcalendar": "vCalendar", "text/x-vcard": "vCard", "application/x-cdlink": "Video CD", "application/vnd.vsf": "Viewport+", "model/vrml": "Virtual Reality Modeling Language", "application/vnd.vcx": "VirtualCatalog", "model/vnd.mts": "Virtue MTS", "model/vnd.vtu": "Virtue VTU", "application/vnd.visionary": "Visionary", "video/vnd.vivo": "Vivo", "application/ccxml+xml,": "Voice Browser Call Control", "application/voicexml+xml": "VoiceXML", "application/x-wais-source": "WAIS Source", "application/vnd.wap.wbxml": "WAP Binary XML (WBXML)", "image/vnd.wap.wbmp": "WBMP", "audio/x-wav": "WAV", "application/davmount+xml": "Web Distributed Authoring and Versioning", "application/x-font-woff": "WOFF", "application/wspolicy+xml": "Web Services Policy", "image/webp": "WebP", "application/vnd.webturbo": "WebTurbo", "application/widget": "Widget Packaging and XML Configuration", "application/winhlp": "WinHelp", "text/vnd.wap.wml": "WML", "text/vnd.wap.wmlscript": "WMLScript", "application/vnd.wap.wmlscriptc": "WMLScript", "application/vnd.wordperfect": "Wordperfect", "application/vnd.wt.stf": "Worldtalk", "application/wsdl+xml": "WSDL", "image/x-xbitmap": "X BitMap", "image/x-xpixmap": "X PixMap", "image/x-xwindowdump": "X Window Dump", "application/x-x509-ca-cert": "X.509 Certificate", "application/x-xfig": "Xfig", "application/xhtml+xml": "XHTML", "application/xml": "XML", "application/xcap-diff+xml": "XML Configuration Access Protocol - XCAP Diff", "application/xenc+xml": "XML Encryption Syntax and Processing", "application/patch-ops-error+xml": "XML Patch Framework", "application/resource-lists+xml": "XML Resource Lists", "application/rls-services+xml": "XML Resource Lists", "application/resource-lists-diff+xml": "XML Resource Lists Diff", "application/xslt+xml": "XML Transformations", "application/xop+xml": "XML-Binary Optimized Packaging", "application/x-xpinstall": "XPInstall - Mozilla", "application/xspf+xml": "XSPF - XML Shareable Playlist Format", "application/vnd.mozilla.xul+xml": "XUL - XML User Interface Language", "chemical/x-xyz": "XYZ File Format", "text/yaml": "YAML", "application/yang": "YANG Data Modeling Language", "application/yin+xml": "YIN (YANG - XML)", "application/vnd.zul": "Z.U.L. Geometry", "application/zip": "Zip Archive", "application/vnd.handheld-entertainment+xml": "ZVUE Media Manager", "application/vnd.zzazz.deck+xml": "Zzazz Deck" }; function Jn(e, t = !1) { return t ? GS[e] || null : JS[e] || null } function Sl(e = 0, t = !0) { const n = t ? 1e3 : 1024; if (Boolean(e) === !1) return "--"; if (Math.abs(e) < n) return `${e} B`; const l = t ? ["kB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"] : ["KiB", "MiB", "GiB", "TiB", "PiB", "EiB", "ZiB", "YiB"]; let i = -1, u = e; do u /= n, i += 1; while (Math.abs(u) >= n && i < l.length - 1); return `${u.toFixed(1)} ${l[i]}` } const QS = z({ props: { file: { type: Object, default: () => ({}) }, isNew: { type: Boolean, default: !1 } }, setup(e) { const { t, n } = x(), l = V(() => e.isNew || !e.file || !e.file.filesize ? null : Sl(e.file.filesize)), { creationDate: i, modificationDate: u } = v(), { userCreated: o, userModified: s } = _(), { folder: r, folderLink: p } = y(), f = V(() => st(`${Ye()}assets/${e.file.id}`)); return { t, n, readableMimeType: Jn, size: l, creationDate: i, modificationDate: u, userCreated: o, userModified: s, folder: r, folderLink: p, getRootPath: Ye, fileLink: f }; function v() { const g = E(null), w = E(null); return _e(() => e.file, async () => { if (!e.file) return null; g.value = await jt(new Date(e.file.uploaded_on), String(t("date-fns_date_short"))), e.file.modified_on && (w.value = await jt(new Date(e.file.modified_on), String(t("date-fns_date_short")))) }, { immediate: !0 }), { creationDate: g, modificationDate: w } } function _() { const g = E(!1), w = E(null), h = E(null); return _e(() => e.file, k, { immediate: !0 }), { userCreated: w, userModified: h }; async function k() { if (!e.file || !e.file.uploaded_by) return null; g.value = !0; try { const A = (await ue.get(`/users/${e.file.uploaded_by}`, { params: { fields: ["id", "email", "first_name", "last_name", "role"] } })).data.data; if (w.value = { id: e.file.uploaded_by, name: yt(A), link: `/users/${A.id}` }, e.file.modified_by) { const L = (await ue.get(`/users/${e.file.modified_by}`, { params: { fields: ["id", "email", "first_name", "last_name", "role"] } })).data.data; h.value = { id: e.file.modified_by, name: yt(L), link: `/users/${L.id}` } } } finally { g.value = !1 } } } function y() { const g = E(!1), w = E(null), h = V(() => w.value === null ? "/files" : `/files/folders/${w.value.id}`); return _e(() => e.file, k, { immediate: !0 }), { folder: w, folderLink: h }; async function k() { if (!e.file) return null; if (!!e.file.folder) { g.value = !0; try { const F = await ue.get(`/folders/${e.file.folder}`, { params: { fields: ["id", "name"] } }), { name: A } = F.data.data; w.value = { id: e.file.folder, name: A } } finally { g.value = !1 } } } } } }), XS = { key: 0 }, ZS = { key: 0 }, YS = { key: 1 }, xS = { key: 2 }, eC = { key: 3 }, tC = { key: 4 }, nC = { key: 5 }, lC = { key: 6 }, oC = { key: 7, class: "checksum" }, aC = { key: 8 }, iC = { key: 9 }, sC = { key: 10 }, rC = ["href"], dC = { key: 0 }, uC = { key: 1 }, cC = { key: 2 }, pC = { key: 3 }, mC = { key: 4 }, fC = { class: "page-description" }; function vC(e, t, n, l, i, u) { const o = c("router-link"), s = c("user-popover"), r = c("v-divider"), p = c("sidebar-detail"), f = we("md"); return m(), C(p, { icon: "info_outline", title: e.t("file_details"), close: "" }, { default: d(() => { var v, _, y, g, w, h, k, F, A, P, L, T, N, O, U, q, K, W; return [e.file ? (m(), I("dl", XS, [e.file.type ? (m(), I("div", ZS, [S("dt", null, b(e.t("type")), 1), S("dd", null, b(e.readableMimeType(e.file.type) || e.file.type), 1)])) : R("", !0), e.file.width && e.file.height ? (m(), I("div", YS, [S("dt", null, b(e.t("dimensions")), 1), S("dd", null, b(e.n(e.file.width)) + " \xD7 " + b(e.n(e.file.height)), 1)])) : R("", !0), e.file.duration ? (m(), I("div", xS, [S("dt", null, b(e.t("duration")), 1), S("dd", null, b(e.n(e.file.duration)), 1)])) : R("", !0), e.file.filesize ? (m(), I("div", eC, [S("dt", null, b(e.t("size")), 1), S("dd", null, b(e.size), 1)])) : R("", !0), e.file.charset ? (m(), I("div", tC, [S("dt", null, b(e.t("charset")), 1), S("dd", null, b(e.charset), 1)])) : R("", !0), e.file.embed ? (m(), I("div", nC, [S("dt", null, b(e.t("embed")), 1), S("dd", null, b(e.embed), 1)])) : R("", !0), e.creationDate ? (m(), I("div", lC, [S("dt", null, b(e.t("created")), 1), S("dd", null, b(e.creationDate), 1)])) : R("", !0), e.file.checksum ? (m(), I("div", oC, [S("dt", null, b(e.t("checksum")), 1), S("dd", null, b(e.file.checksum), 1)])) : R("", !0), e.userCreated ? (m(), I("div", aC, [S("dt", null, b(e.t("owner")), 1), S("dd", null, [a(s, { user: e.userCreated.id }, { default: d(() => [a(o, { to: e.userCreated.link }, { default: d(() => [D(b(e.userCreated.name), 1)]), _: 1 }, 8, ["to"])]), _: 1 }, 8, ["user"])])])) : R("", !0), e.modificationDate ? (m(), I("div", iC, [S("dt", null, b(e.t("modified")), 1), S("dd", null, b(e.modificationDate), 1)])) : R("", !0), e.userModified ? (m(), I("div", sC, [S("dt", null, b(e.t("edited_by")), 1), S("dd", null, [a(s, { user: e.userModified.id }, { default: d(() => [a(o, { to: e.userModified.link }, { default: d(() => [D(b(e.userModified.name), 1)]), _: 1 }, 8, ["to"])]), _: 1 }, 8, ["user"])])])) : R("", !0), S("div", null, [S("dt", null, b(e.t("file")), 1), S("dd", null, [S("a", { href: e.fileLink, target: "_blank" }, b(e.t("open_in_new_window")), 9, rC)])]), S("div", null, [S("dt", null, b(e.t("folder")), 1), S("dd", null, [a(o, { to: e.folderLink }, { default: d(() => [D(b(e.t("open_folder", { folder: e.folder ? e.folder.name : e.t("file_library") })), 1)]), _: 1 }, 8, ["to"])])]), ((_ = (v = e.file.metadata) == null ? void 0 : v.ifd0) == null ? void 0 : _.Make) || ((g = (y = e.file.metadata) == null ? void 0 : y.ifd0) == null ? void 0 : g.Model) || ((h = (w = e.file.metadata) == null ? void 0 : w.exif) == null ? void 0 : h.FNumber) || ((F = (k = e.file.metadata) == null ? void 0 : k.exif) == null ? void 0 : F.ExposureTime) || ((P = (A = e.file.metadata) == null ? void 0 : A.exif) == null ? void 0 : P.FocalLength) || ((T = (L = e.file.metadata) == null ? void 0 : L.exif) == null ? void 0 : T.ISO) ? (m(), I(se, { key: 11 }, [a(r), ((N = e.file.metadata.ifd0) == null ? void 0 : N.Make) && ((O = e.file.metadata.ifd0) == null ? void 0 : O.Model) ? (m(), I("div", dC, [S("dt", null, b(e.t("camera")), 1), S("dd", null, b(e.file.metadata.ifd0.Make) + " " + b(e.file.metadata.ifd0.Model), 1)])) : R("", !0), ((U = e.file.metadata.exif) == null ? void 0 : U.FNumber) ? (m(), I("div", uC, [S("dt", null, b(e.t("exposure")), 1), S("dd", null, "\u0192/" + b(e.file.metadata.exif.FNumber), 1)])) : R("", !0), ((q = e.file.metadata.exif) == null ? void 0 : q.ExposureTime) ? (m(), I("div", cC, [S("dt", null, b(e.t("shutter")), 1), S("dd", null, "1/" + b(Math.round(1 / +e.file.metadata.exif.ExposureTime)) + " " + b(e.t("second")), 1)])) : R("", !0), ((K = e.file.metadata.exif) == null ? void 0 : K.FocalLength) ? (m(), I("div", pC, [S("dt", null, b(e.t("focal_length")), 1), S("dd", null, b(e.file.metadata.exif.FocalLength) + "mm", 1)])) : R("", !0), ((W = e.file.metadata.exif) == null ? void 0 : W.ISO) ? (m(), I("div", mC, [S("dt", null, b(e.t("iso")), 1), S("dd", null, b(e.file.metadata.exif.ISO), 1)])) : R("", !0)], 64)) : R("", !0)])) : R("", !0), a(r), ee(S("div", fC, null, 512), [[f, e.t("page_help_files_item")]])] }), _: 1 }, 8, ["title"]) } var _C = B(QS, [["render", vC], ["__scopeId", "data-v-4018d0a4"]]); const yC = z({ components: { FilesNavigation: co }, setup() { const { t: e } = x(); return { t: e } } }), gC = { class: "not-found" }; function hC(e, t, n, l, i, u) { const o = c("files-navigation"), s = c("v-info"), r = c("private-view"); return m(), C(r, { title: e.t("page_not_found") }, { navigation: d(() => [a(o)]), default: d(() => [S("div", gC, [a(s, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])])]), _: 1 }, 8, ["title"]) } var bC = B(yC, [["render", hC], ["__scopeId", "data-v-6900fd47"]]); const $C = z({ props: { modelValue: { type: Boolean, default: !1 }, file: { type: Object, default: () => ({}) }, preset: { type: Object, default: () => ({}) } }, emits: ["update:modelValue", "replaced"], setup(e, { emit: t }) { const { t: n } = x(); return { t: n, uploaded: l }; function l() { t("update:modelValue", !1), t("replaced") } } }); function wC(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-upload"), r = c("v-card-text"), p = c("v-button"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"); return m(), C(_, { "model-value": e.modelValue, "onUpdate:modelValue": t[1] || (t[1] = y => e.$emit("update:modelValue", !1)), onEsc: t[2] || (t[2] = y => e.$emit("update:modelValue", !1)) }, { default: d(() => [e.file ? (m(), C(v, { key: 0 }, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("replace_file")), 1)]), _: 1 }), a(r, null, { default: d(() => [a(s, { preset: e.preset, "file-id": e.file.id, "from-url": "", onInput: e.uploaded }, null, 8, ["preset", "file-id", "onInput"])]), _: 1 }), a(f, null, { default: d(() => [a(p, { secondary: "", onClick: t[0] || (t[0] = y => e.$emit("update:modelValue", !1)) }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 })]), _: 1 })]), _: 1 })) : R("", !0)]), _: 1 }, 8, ["model-value"]) } var kC = B($C, [["render", wC], ["__scopeId", "data-v-767b664e"]]); const SC = z({ name: "FilesItem", components: { FilesNavigation: co, RevisionsDrawerDetail: Bn, CommentsSidebarDetail: ao, FilePreview: po, ImageEditor: WS, FileInfoSidebarDetail: _C, FolderPicker: uo, FilesNotFound: bC, ReplaceFile: kC, SaveOptions: $l }, props: { primaryKey: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = tt(), l = E(), { primaryKey: i } = je(e), { breadcrumb: u } = Z(), o = E(!1), s = E(null), { isNew: r, edits: p, item: f, saving: v, loading: _, error: y, save: g, remove: w, deleting: h, saveAsCopy: k, isBatch: F, refresh: A, validationErrors: P } = kn(E("directus_files"), i), L = V(() => Object.keys(p.value).length > 0); en(L); const T = E(!1), N = E(!1), O = V(() => f.value && f.value.modified_on ? st(Ye() + `assets/${e.primaryKey}?cache-buster=${f.value.modified_on}&key=system-large-contain`) : st(Ye() + `assets/${e.primaryKey}?key=system-large-contain`)), U = ["type", "width", "height", "filesize", "checksum", "uploaded_by", "uploaded_on", "modified_by", "modified_on", "duration", "folder", "charset", "embed"], q = V(() => { var ke; return f.value && ((ke = f.value) == null ? void 0 : ke.folder) ? `/files/folders/${f.value.folder}` : "/files" }), K = E(!1), W = E(null), { moveToDialogActive: te, moveToFolder: G, moving: X, selectedFolder: ve } = be(); nt("meta+s", fe, l); const ae = ke => { if (L.value) return K.value = !0, W.value = ke.fullPath, !1 }; Ot(ae), Tt(ae); const { deleteAllowed: ne, saveAllowed: Y, updateAllowed: ce, fields: pe, revisionsAllowed: H } = qn(E("directus_files"), f, r), Q = V(() => pe.value.filter(ke => U.includes(ke.field) === !1)); return { t, router: n, item: f, loading: _, error: y, isNew: r, breadcrumb: u, edits: p, hasEdits: L, saving: v, saveAndQuit: le, deleteAndQuit: ie, confirmDelete: T, deleting: h, saveAndStay: fe, saveAsCopyAndNavigate: J, discardAndStay: me, isBatch: F, editActive: N, revisionsDrawerDetail: s, confirmLeave: K, leaveTo: W, discardAndLeave: oe, downloadFile: ge, moveToDialogActive: te, moveToFolder: G, moving: X, selectedFolder: ve, fileSrc: O, form: l, to: q, replaceFileDialogActive: o, refresh: A, deleteAllowed: ne, saveAllowed: Y, updateAllowed: ce, fields: pe, fieldsFiltered: Q, revisionsAllowed: H, validationErrors: P }; function Z() { return { breadcrumb: V(() => { var Ie; return ((Ie = f == null ? void 0 : f.value) == null ? void 0 : Ie.folder) ? [{ name: t("file_library"), to: { path: `/files/folders/${f.value.folder}` } }] : [{ name: t("file_library"), to: "/files" }] }) } } async function le() { try { await g(), n.push(q.value) } catch { } } async function fe() { var ke, Ie; try { await g(), (Ie = (ke = s.value) == null ? void 0 : ke.refresh) == null || Ie.call(ke) } catch { } } async function J() { const ke = await k(); ke && n.push(`/files/${ke}`) } async function ie() { try { await w(), n.replace(q.value) } catch { T.value = !1 } } function oe() { !W.value || (p.value = {}, K.value = !1, n.push(W.value)) } function me() { p.value = {}, K.value = !1 } function ge() { const ke = st(Ye() + `assets/${e.primaryKey}?download`); window.open(ke, "_blank") } function be() { const ke = E(!1), Ie = E(!1), De = E(); return _e(f, () => { var lt; De.value = ((lt = f.value) == null ? void 0 : lt.folder) || null }), { moveToDialogActive: ke, moving: Ie, moveToFolder: Be, selectedFolder: De }; async function Be() { var lt; Ie.value = !0; try { const Te = await ue.patch(`/files/${e.primaryKey}`, { folder: De.value }, { params: { fields: "folder.name" } }); await A(); const Oe = ((lt = Te.data.data.folder) == null ? void 0 : lt.name) || t("file_library"); It({ title: t("file_moved", { folder: Oe }), type: "success", icon: "folder_move" }) } catch (Te) { Ve(Te) } finally { ke.value = !1, Ie.value = !1 } } } } }), CC = { class: "file-item" }; function VC(e, t, n, l, i, u) { const o = c("files-not-found"), s = c("v-icon"), r = c("v-button"), p = c("v-breadcrumb"), f = c("v-card-title"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"), g = c("folder-picker"), w = c("v-card-text"), h = c("save-options"), k = c("files-navigation"), F = c("file-preview"), A = c("image-editor"), P = c("v-form"), L = c("file-info-sidebar-detail"), T = c("revisions-drawer-detail"), N = c("comments-sidebar-detail"), O = c("replace-file"), U = c("private-view"), q = we("tooltip"); return !e.loading && !e.item ? (m(), C(o, { key: 0 })) : (m(), C(U, { key: 1, title: e.loading || !e.item ? e.t("loading") : e.item.title }, { "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", secondary: "", exact: "", onClick: t[0] || (t[0] = K => e.router.back()) }, { default: d(() => [a(s, { name: "arrow_back" })]), _: 1 })]), headline: d(() => [a(p, { items: e.breadcrumb }, null, 8, ["items"])]), actions: d(() => [a(y, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[2] || (t[2] = K => e.confirmDelete = K), onEsc: t[3] || (t[3] = K => e.confirmDelete = !1) }, { activator: d(({ on: K }) => [ee(a(r, { rounded: "", icon: "", class: "action-delete", disabled: e.item === null || e.deleteAllowed === !1, onClick: K }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[q, e.deleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: t[1] || (t[1] = K => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), e.isNew === !1 ? (m(), C(y, { key: 0, modelValue: e.moveToDialogActive, "onUpdate:modelValue": t[6] || (t[6] = K => e.moveToDialogActive = K), onEsc: t[7] || (t[7] = K => e.moveToDialogActive = !1) }, { activator: d(({ on: K }) => [ee(a(r, { rounded: "", icon: "", disabled: e.item === null, class: "folder", onClick: K }, { default: d(() => [a(s, { name: "folder_move" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[q, e.t("move_to_folder"), void 0, { bottom: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("move_to_folder")), 1)]), _: 1 }), a(w, null, { default: d(() => [a(g, { modelValue: e.selectedFolder, "onUpdate:modelValue": t[4] || (t[4] = K => e.selectedFolder = K) }, null, 8, ["modelValue"])]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: t[5] || (t[5] = K => e.moveToDialogActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { loading: e.moving, onClick: e.moveToFolder }, { default: d(() => [D(b(e.t("move")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), ee(a(r, { rounded: "", icon: "", class: "download", onClick: e.downloadFile }, { default: d(() => [a(s, { name: "save_alt" })]), _: 1 }, 8, ["onClick"]), [[q, e.t("download"), void 0, { bottom: !0 }]]), e.item && e.item.type.includes("image") ? ee((m(), C(r, { key: 1, rounded: "", icon: "", class: "edit", onClick: t[8] || (t[8] = K => e.editActive = !0) }, { default: d(() => [a(s, { name: "tune" })]), _: 1 }, 512)), [[q, e.t("edit"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(r, { rounded: "", icon: "", loading: e.saving, disabled: e.hasEdits === !1 || e.saveAllowed === !1, onClick: e.saveAndQuit }, { "append-outer": d(() => [e.hasEdits === !0 && e.saveAllowed === !0 ? (m(), C(h, { key: 0, "disabled-options": ["save-and-add-new"], onSaveAndStay: e.saveAndStay, onSaveAsCopy: e.saveAsCopyAndNavigate, onDiscardAndStay: e.discardAndStay }, null, 8, ["onSaveAndStay", "onSaveAsCopy", "onDiscardAndStay"])) : R("", !0)]), default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"]), [[q, e.saveAllowed ? e.t("save") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(k, { "current-folder": e.item && e.item.folder }, null, 8, ["current-folder"])]), sidebar: d(() => [a(L, { file: e.item }, null, 8, ["file"]), e.isBatch === !1 && e.isNew === !1 && e.revisionsAllowed ? (m(), C(T, { key: 0, ref: "revisionsDrawerDetail", collection: "directus_files", "primary-key": e.primaryKey }, null, 8, ["primary-key"])) : R("", !0), e.isBatch === !1 && e.isNew === !1 ? (m(), C(N, { key: 1, collection: "directus_files", "primary-key": e.primaryKey }, null, 8, ["primary-key"])) : R("", !0)]), default: d(() => [S("div", CC, [e.isBatch === !1 && e.item ? (m(), C(F, { key: 0, src: e.fileSrc, mime: e.item.type, width: e.item.width, height: e.item.height, title: e.item.title, onClick: t[9] || (t[9] = K => e.replaceFileDialogActive = !0) }, null, 8, ["src", "mime", "width", "height", "title"])) : R("", !0), e.item && e.item.type.startsWith("image") ? (m(), C(A, { key: 1, id: e.item.id, modelValue: e.editActive, "onUpdate:modelValue": t[10] || (t[10] = K => e.editActive = K), onRefresh: e.refresh }, null, 8, ["id", "modelValue", "onRefresh"])) : R("", !0), a(P, { ref: "form", modelValue: e.edits, "onUpdate:modelValue": t[11] || (t[11] = K => e.edits = K), fields: e.fieldsFiltered, loading: e.loading, "initial-values": e.item, "batch-mode": e.isBatch, "primary-key": e.primaryKey, disabled: e.updateAllowed === !1, "validation-errors": e.validationErrors }, null, 8, ["modelValue", "fields", "loading", "initial-values", "batch-mode", "primary-key", "disabled", "validation-errors"])]), a(y, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[13] || (t[13] = K => e.confirmLeave = K), onEsc: e.discardAndLeave }, { default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(w, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[12] || (t[12] = K => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue", "onEsc"]), a(O, { modelValue: e.replaceFileDialogActive, "onUpdate:modelValue": t[14] || (t[14] = K => e.replaceFileDialogActive = K), file: e.item, onReplaced: e.refresh }, null, 8, ["modelValue", "file", "onReplaced"])]), _: 1 }, 8, ["title"])) } var FC = B(SC, [["render", VC], ["__scopeId", "data-v-f54440a8"]]), AC = rn({ id: "files", name: "$t:file_library", icon: "folder", routes: [{ name: "files-collection", path: "", component: Gn, children: [{ path: "+", name: "add-file", components: { addNew: ja } }] }, { name: "files-item", path: ":primaryKey", component: FC, props: !0 }, { path: "folders", redirect: "/files" }, { name: "folders-collection", path: "folders/:folder", component: Gn, props: !0, children: [{ path: "+", name: "add-file-folder", components: { addNew: ja } }] }, { path: "all", component: Gn, props: { special: "all" } }, { path: "mine", component: Gn, props: { special: "mine" } }, { path: "recent", component: Gn, props: { special: "recent" } }], preRegisterCheck(e, t) { return e.role.admin_access ? !0 : !!t.find(i => i.collection === "directus_files" && i.action === "read") } }), IC = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: AC }); function Na(e) { const t = e.split(".")[1].replace("-", "+").replace("_", "/"), n = Ur.exports.decode(t); return JSON.parse(n) } const EC = z({ setup() { const { t: e } = x(), t = Yt(), n = V(() => t.query.token), l = E(null), i = E(!1), u = E(null), o = E(!1), s = V(() => u.value ? Kt(u.value) : null), r = V(() => "/login"), p = V(() => Na(n.value).email); return { t: e, creating: i, error: u, done: o, password: l, onSubmit: f, signInLink: r, errorFormatted: s, email: p }; async function f() { i.value = !0, u.value = null; try { await ue.post("/users/invite/accept", { password: l.value, token: n.value }), o.value = !0 } catch (v) { u.value = v } finally { i.value = !1 } } } }), DC = { class: "type-title" }; function TC(e, t, n, l, i, u) { const o = c("v-input"), s = c("v-notice"), r = c("v-button"), p = c("v-icon"), f = c("public-view"); return m(), C(f, null, { notice: d(() => [a(p, { name: "lock_outlined", left: "" }), D(" " + b(e.t("not_authenticated")), 1)]), default: d(() => [S("h1", DC, b(e.t("create_account")), 1), S("form", { onSubmit: t[1] || (t[1] = Ae((...v) => e.onSubmit && e.onSubmit(...v), ["prevent"])) }, [a(o, { "model-value": e.email, disabled: "" }, null, 8, ["model-value"]), a(o, { modelValue: e.password, "onUpdate:modelValue": t[0] || (t[0] = v => e.password = v), placeholder: e.t("password"), autofocus: "", autocomplete: "password", type: "password", disabled: e.done }, null, 8, ["modelValue", "placeholder", "disabled"]), e.done ? (m(), C(s, { key: 0, type: "success" }, { default: d(() => [D(b(e.t("account_created_successfully")), 1)]), _: 1 })) : R("", !0), e.error ? (m(), C(s, { key: 1, type: "danger" }, { default: d(() => [D(b(e.errorFormatted), 1)]), _: 1 })) : R("", !0), e.done ? (m(), C(r, { key: 3, large: "", to: e.signInLink }, { default: d(() => [D(b(e.t("sign_in")), 1)]), _: 1 }, 8, ["to"])) : (m(), C(r, { key: 2, type: "submit", loading: e.creating, large: "" }, { default: d(() => [D(b(e.t("create")), 1)]), _: 1 }, 8, ["loading"]))], 32)]), _: 1 }) } var PC = B(EC, [["render", TC], ["__scopeId", "data-v-8ab16d02"]]); const OC = z({ props: { provider: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = tt(), { provider: l } = je(e), i = E(!1), u = E(null), o = E(null), s = E(null), r = E(null), p = E(!1), f = Ze(); _e(u, () => { p.value === !0 && (p.value = !1) }), _e(l, () => { u.value = null, o.value = null, s.value = null, r.value = null, p.value = !1 }); const v = V(() => s.value === "INVALID_PAYLOAD" ? Kt("INVALID_CREDENTIALS") : s.value ? Kt(s.value) : null); return { t, errorFormatted: v, error: s, email: u, password: o, onSubmit: _, loggingIn: i, translateAPIError: Kt, otp: r, requiresTFA: p }; async function _() { var y, g, w, h, k, F, A, P, L, T, N; if (!(u.value === null || o.value === null)) try { i.value = !0; const O = { email: u.value, password: o.value }; r.value && (O.otp = r.value), await Cs(O, l.value); const U = (y = f.currentUser) == null ? void 0 : y.last_page; n.push(U || "/content") } catch (O) { ((F = (k = (h = (w = (g = O.response) == null ? void 0 : g.data) == null ? void 0 : w.errors) == null ? void 0 : h[0]) == null ? void 0 : k.extensions) == null ? void 0 : F.code) === "INVALID_OTP" && p.value === !1 ? p.value = !0 : s.value = ((N = (T = (L = (P = (A = O.response) == null ? void 0 : A.data) == null ? void 0 : P.errors) == null ? void 0 : L[0]) == null ? void 0 : T.extensions) == null ? void 0 : N.code) || O } finally { i.value = !1 } } } }), LC = { class: "buttons" }; function jC(e, t, n, l, i, u) { const o = c("v-input"), s = c("transition-expand"), r = c("v-notice"), p = c("v-button"), f = c("router-link"); return m(), I("form", { onSubmit: t[3] || (t[3] = Ae((...v) => e.onSubmit && e.onSubmit(...v), ["prevent"])) }, [a(o, { modelValue: e.email, "onUpdate:modelValue": t[0] || (t[0] = v => e.email = v), autofocus: "", autocomplete: "username", type: "email", placeholder: e.t("email") }, null, 8, ["modelValue", "placeholder"]), a(o, { modelValue: e.password, "onUpdate:modelValue": t[1] || (t[1] = v => e.password = v), type: "password", autocomplete: "current-password", placeholder: e.t("password") }, null, 8, ["modelValue", "placeholder"]), a(s, null, { default: d(() => [e.requiresTFA ? (m(), C(o, { key: 0, modelValue: e.otp, "onUpdate:modelValue": t[2] || (t[2] = v => e.otp = v), type: "text", placeholder: e.t("otp"), autofocus: "" }, null, 8, ["modelValue", "placeholder"])) : R("", !0)]), _: 1 }), e.error ? (m(), C(r, { key: 0, type: "warning" }, { default: d(() => [D(b(e.errorFormatted), 1)]), _: 1 })) : R("", !0), S("div", LC, [a(p, { type: "submit", loading: e.loggingIn, large: "" }, { default: d(() => [D(b(e.t("sign_in")), 1)]), _: 1 }, 8, ["loading"]), a(f, { to: "/reset-password", class: "forgot-password" }, { default: d(() => [D(b(e.t("forgot_password")), 1)]), _: 1 })])], 32) } var RC = B(OC, [["render", jC], ["__scopeId", "data-v-ea61aeba"]]); const MC = z({ props: { provider: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = tt(), { provider: l } = je(e), i = E(!1), u = E(null), o = E(null), s = E(null), r = E(null), p = E(!1), f = Ze(); _e(u, () => { p.value === !0 && (p.value = !1) }), _e(l, () => { u.value = null, o.value = null, s.value = null, r.value = null, p.value = !1 }); const v = V(() => s.value === "INVALID_PAYLOAD" ? Kt("INVALID_CREDENTIALS") : s.value ? Kt(s.value) : null); return { t, errorFormatted: v, error: s, identifier: u, password: o, onSubmit: _, loggingIn: i, translateAPIError: Kt, otp: r, requiresTFA: p }; async function _() { var y, g, w, h, k, F, A, P, L, T, N; if (!(u.value === null || o.value === null)) try { i.value = !0; const O = { identifier: u.value, password: o.value }; r.value && (O.otp = r.value), await Cs(O, l.value); const U = (y = f.currentUser) == null ? void 0 : y.last_page; n.push(U || "/content") } catch (O) { ((F = (k = (h = (w = (g = O.response) == null ? void 0 : g.data) == null ? void 0 : w.errors) == null ? void 0 : h[0]) == null ? void 0 : k.extensions) == null ? void 0 : F.code) === "INVALID_OTP" && p.value === !1 ? p.value = !0 : s.value = ((N = (T = (L = (P = (A = O.response) == null ? void 0 : A.data) == null ? void 0 : P.errors) == null ? void 0 : L[0]) == null ? void 0 : T.extensions) == null ? void 0 : N.code) || O } finally { i.value = !1 } } } }); function UC(e, t, n, l, i, u) { const o = c("v-input"), s = c("transition-expand"), r = c("v-notice"), p = c("v-button"); return m(), I("form", { onSubmit: t[3] || (t[3] = Ae((...f) => e.onSubmit && e.onSubmit(...f), ["prevent"])) }, [a(o, { modelValue: e.identifier, "onUpdate:modelValue": t[0] || (t[0] = f => e.identifier = f), autofocus: "", autocomplete: "username", placeholder: e.t("identifier") }, null, 8, ["modelValue", "placeholder"]), a(o, { modelValue: e.password, "onUpdate:modelValue": t[1] || (t[1] = f => e.password = f), type: "password", autocomplete: "current-password", placeholder: e.t("password") }, null, 8, ["modelValue", "placeholder"]), a(s, null, { default: d(() => [e.requiresTFA ? (m(), C(o, { key: 0, modelValue: e.otp, "onUpdate:modelValue": t[2] || (t[2] = f => e.otp = f), type: "text", placeholder: e.t("otp"), autofocus: "" }, null, 8, ["modelValue", "placeholder"])) : R("", !0)]), _: 1 }), e.error ? (m(), C(r, { key: 0, type: "warning" }, { default: d(() => [D(b(e.errorFormatted), 1)]), _: 1 })) : R("", !0), a(p, { type: "submit", loading: e.loggingIn, large: "" }, { default: d(() => [D(b(e.t("sign_in")), 1)]), _: 1 }, 8, ["loading"])], 32) } var NC = B(MC, [["render", UC], ["__scopeId", "data-v-676e1d14"]]); const BC = z({ setup() { const { t: e } = x(), t = tt(), n = E(!1), l = E(null), i = E(null); return u(), at(() => { "continue" in t.currentRoute.value.query && o() }), { t: e, name: l, lastPage: i, loading: n, hydrateAndLogin: o }; async function u() { n.value = !0; try { const s = await ue.get("/users/me", { params: { fields: ["email", "first_name", "last_name", "last_page"] } }); l.value = yt(s.data.data), i.value = s.data.data.last_page } catch (s) { Ve(s) } finally { n.value = !1 } } async function o() { await Po(), t.push(i.value || "/content") } } }), qC = { class: "continue-as" }, zC = { class: "actions" }; function KC(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = c("i18n-t"), r = c("router-link"), p = c("v-button"); return m(), I("div", qC, [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : (m(), I(se, { key: 1 }, [a(s, { keypath: "continue_as", scope: "global", tag: "p" }, { name: d(() => [S("b", null, b(e.name), 1)]), _: 1 }), S("div", zC, [a(r, { to: "/logout", class: "sign-out" }, { default: d(() => [D(b(e.t("sign_out")), 1)]), _: 1 }), a(p, { autofocus: "", large: "", onClick: e.hydrateAndLogin }, { default: d(() => [D(b(e.t("continue_label")), 1)]), _: 1 }, 8, ["onClick"])])], 64))]) } var HC = B(BC, [["render", KC], ["__scopeId", "data-v-8a7802e0"]]), WC = ["about", "above", "across", "after", "against", "along", "among", "around", "at", "because of", "before", "behind", "below", "beneath", "beside", "besides", "between", "beyond", "but", "by", "concerning", "despite", "down", "during", "except", "excepting", "for", "from", "in", "in front of", "inside", "in spite of", "instead of", "into", "like", "near", "of", "off", "on", "onto", "out", "outside", "over", "past", "regarding", "since", "through", "throughout", "to", "toward", "under", "underneath", "until", "up", "upon", "up to", "with", "within", "without", "with regard to", "with respect to"], GC = ["and", "that", "but", "or", "as", "if", "when", "than", "because", "while", "where", "after", "so", "though", "since", "until", "whether", "before", "although", "nor", "like", "once", "unless", "now", "except"], JC = ["2D", "3D", "4WD", "API", "BASIC", "BIOS", "CCTV", "CC", "CCV", "CD", "CD-ROM", "COBOL", "CIA", "CMS", "CSS", "CSV", "CV", "DIY", "DVD", "DB", "DNA", "E3", "EIN", "ESPN", "FAQ", "FAQs", "FTP", "FPS", "FORTRAN", "FBI", "HTML", "HTTP", "ID", "IP", "ISO", "JS", "JSON", "LASER", "M2M", "M2MM", "M2O", "MMORPG", "NAFTA", "NASA", "NDA", "O2M", "PDF", "PHP", "POP", "RAM", "RNGR", "ROM", "RPG", "RTFM", "RTS", "SCUBA", "SITCOM", "SKU", "SMTP", "SQL", "SSN", "SWAT", "TBS", "TTL", "TV", "TNA", "UI", "URL", "USB", "UWP", "VIP", "W3C", "WYSIWYG", "WWW", "WWE", "WWF"], mo = ["2FA", "3D", "DateTime", "GitHub", "ID", "IDs", "iMac", "IMAX", "iOS", "IP", "iPad", "iPhone", "iPod", "macOS", "M2M", "M2O", "McDonalds", "MySQL", "O2M", "PDFs", "pH", "PostgreSQL", "YouTube", "UUID", "SEO", "CTA", "4K", "HD", "UHD", "5K", "8K"]; function QC(e, t, n) { const l = e.toLowerCase(), i = e.toUpperCase(); for (let u = 0; u < mo.length; u += 1)if (mo[u].toLowerCase() === l) return mo[u]; return JC.includes(i) ? i : t === 0 || t === n.length - 1 ? e : WC.includes(l) || GC.includes(l) ? l : e } function XC(e, t) { return `${e} ${t}` } function ZC(e) { return e.charAt(0).toUpperCase() + e.substring(1) } function YC(e) { return e.replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g, "$1_$2").toLowerCase() } function Vt(e, t) { return t || (t = new RegExp("/s|-|_| ", "g")), YC(e).split(t).map(ZC).map(QC).reduce(XC) } const xC = z({ props: { providers: { type: Array, default: () => [] } }, setup(e) { const { t } = x(), { providers: n } = je(e), l = E([]); return _e(n, () => { l.value = n.value.filter(i => Sa.includes(i.driver)).map(i => { var u; return { name: Vt(i.name), link: `${Ye()}auth/login/${i.name}?redirect=${window.location.href.replace(location.search, "")}?continue`, icon: (u = i.icon) != null ? u : "account_circle" } }) }), { t, ssoProviders: l } } }), eV = { class: "sso-links" }, tV = ["href"], nV = { class: "sso-icon" }, lV = { class: "sso-title" }; function oV(e, t, n, l, i, u) { const o = c("v-divider"), s = c("v-icon"); return m(), I("div", eV, [e.ssoProviders.length > 0 ? (m(), I(se, { key: 0 }, [a(o), (m(!0), I(se, null, he(e.ssoProviders, r => (m(), I("a", { key: r.name, class: "sso-link", href: r.link }, [S("div", nV, [a(s, { name: r.icon }, null, 8, ["name"])]), S("div", lV, b(e.t("log_in_with", { provider: r.name })), 1)], 8, tV))), 128))], 64)) : R("", !0)]) } var aV = B(xC, [["render", oV], ["__scopeId", "data-v-32497dd8"]]); const iV = z({ components: { LoginForm: RC, LdapForm: NC, ContinueAs: HC, SsoLinks: aV }, props: { logoutReason: { type: String, default: null } }, setup() { const { t: e, te: t } = x(), n = wt(), l = E([]), i = E(to), u = E([]), o = E("local"), s = V({ get() { return i.value }, set(f) { var v, _; i.value = f, o.value = (_ = (v = l.value.find(y => y.name === f)) == null ? void 0 : v.driver) != null ? _ : "local" } }), r = V(() => n.authenticated); return at(() => p()), _e(l, () => { u.value = l.value.filter(f => !Sa.includes(f.driver)).map(f => ({ text: Vt(f.name), value: f.name })), u.value.unshift({ text: e("default_provider"), value: to }) }), { t: e, te: t, authenticated: r, providers: l, providerSelect: s, providerOptions: u, provider: i, driver: o }; async function p() { try { const f = await ue.get("/auth"); l.value = f.data.data } catch (f) { Ve(f) } } } }), sV = { class: "header" }, rV = { class: "type-title" }, dV = { key: 0, class: "provider-select" }; function uV(e, t, n, l, i, u) { const o = c("v-select"), s = c("continue-as"), r = c("ldap-form"), p = c("login-form"), f = c("sso-links"), v = c("v-icon"), _ = c("public-view"); return m(), C(_, null, et({ default: d(() => [S("div", sV, [S("h1", rV, b(e.t("sign_in")), 1), !e.authenticated && e.providerOptions.length > 1 ? (m(), I("div", dV, [a(o, { modelValue: e.providerSelect, "onUpdate:modelValue": t[0] || (t[0] = y => e.providerSelect = y), inline: "", items: e.providerOptions, label: "" }, null, 8, ["modelValue", "items"])])) : R("", !0)]), e.authenticated ? (m(), C(s, { key: 0 })) : e.driver === "ldap" ? (m(), C(r, { key: 1, provider: e.provider }, null, 8, ["provider"])) : (m(), C(p, { key: 2, provider: e.provider }, null, 8, ["provider"])), e.authenticated ? R("", !0) : (m(), C(f, { key: 3, providers: e.providers }, null, 8, ["providers"]))]), _: 2 }, [e.authenticated ? { name: "notice", fn: d(() => [a(v, { name: "lock_open", left: "" }), D(" " + b(e.t("authenticated")), 1)]) } : { name: "notice", fn: d(() => [a(v, { name: "lock_outlined", left: "" }), D(" " + b(e.logoutReason && e.te(`logoutReason.${e.logoutReason}`) ? e.t(`logoutReason.${e.logoutReason}`) : e.t("not_authenticated")), 1)]) }]), 1024) } var cV = B(iV, [["render", uV], ["__scopeId", "data-v-75eef6b2"]]); const pV = z({ setup() { at(() => { Ro() }) } }), mV = { class: "logout" }; function fV(e, t, n, l, i, u) { const o = c("v-progress-circular"); return m(), I("div", mV, [a(o, { indeterminate: "" })]) } var vV = B(pV, [["render", fV], ["__scopeId", "data-v-cfb047f4"]]); const _V = z({ setup() { const { t: e } = x(); return { t: e } } }), yV = { class: "not-found" }; function gV(e, t, n, l, i, u) { const o = c("v-info"), s = c("private-view"); return m(), C(s, { title: e.t("page_not_found") }, { default: d(() => [S("div", yV, [a(o, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])])]), _: 1 }, 8, ["title"]) } var hV = B(_V, [["render", gV], ["__scopeId", "data-v-a922425e"]]); const bV = z({ setup() { const { t: e } = x(), t = E(null), n = E(!1), l = E(null), i = E(!1), u = V(() => l.value ? Kt(l.value) : null), o = V(() => "/login"); return { t: e, sending: n, error: l, done: i, email: t, onSubmit: s, signInLink: o, errorFormatted: u }; async function s() { n.value = !0, l.value = null; try { await ue.post("/auth/password/request", { email: t.value }), i.value = !0 } catch (r) { l.value = r } finally { n.value = !1 } } } }), $V = { class: "buttons" }; function wV(e, t, n, l, i, u) { const o = c("v-input"), s = c("v-notice"), r = c("v-button"), p = c("router-link"); return m(), I("form", { onSubmit: t[1] || (t[1] = Ae((...f) => e.onSubmit && e.onSubmit(...f), ["prevent"])) }, [a(o, { modelValue: e.email, "onUpdate:modelValue": t[0] || (t[0] = f => e.email = f), autofocus: "", autocomplete: "username", type: "email", placeholder: e.t("email") }, null, 8, ["modelValue", "placeholder"]), e.done ? (m(), C(s, { key: 0, type: "success" }, { default: d(() => [D(b(e.t("password_reset_sent")), 1)]), _: 1 })) : R("", !0), e.error ? (m(), C(s, { key: 1, type: "danger" }, { default: d(() => [D(b(e.errorFormatted), 1)]), _: 1 })) : R("", !0), S("div", $V, [a(r, { type: "submit", loading: e.sending, large: "" }, { default: d(() => [D(b(e.t("reset")), 1)]), _: 1 }, 8, ["loading"]), a(p, { to: e.signInLink, class: "sign-in" }, { default: d(() => [D(b(e.t("sign_in")), 1)]), _: 1 }, 8, ["to"])])], 32) } var kV = B(bV, [["render", wV], ["__scopeId", "data-v-388f645e"]]); const SV = z({ props: { token: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = E(null), l = E(!1), i = E(null), u = E(!1), o = V(() => i.value ? Kt(i.value) : null), s = V(() => "/login"), r = V(() => Na(e.token).email); return { t, resetting: l, error: i, done: u, password: n, onSubmit: p, signInLink: s, errorFormatted: o, email: r }; async function p() { l.value = !0, i.value = null; try { await ue.post("/auth/password/reset", { password: n.value, token: e.token }), u.value = !0 } catch (f) { i.value = f } finally { l.value = !1 } } } }); function CV(e, t, n, l, i, u) { const o = c("v-input"), s = c("v-notice"), r = c("v-button"); return m(), I("form", { onSubmit: t[1] || (t[1] = Ae((...p) => e.onSubmit && e.onSubmit(...p), ["prevent"])) }, [a(o, { "model-value": e.email, disabled: "" }, null, 8, ["model-value"]), a(o, { modelValue: e.password, "onUpdate:modelValue": t[0] || (t[0] = p => e.password = p), placeholder: e.t("password"), autofocus: "", autocomplete: "username", type: "password", disabled: e.done }, null, 8, ["modelValue", "placeholder", "disabled"]), e.done ? (m(), C(s, { key: 0, type: "success" }, { default: d(() => [D(b(e.t("password_reset_successful")), 1)]), _: 1 })) : R("", !0), e.error ? (m(), C(s, { key: 1, type: "danger" }, { default: d(() => [D(b(e.errorFormatted), 1)]), _: 1 })) : R("", !0), e.done ? (m(), C(r, { key: 3, large: "", to: e.signInLink }, { default: d(() => [D(b(e.t("sign_in")), 1)]), _: 1 }, 8, ["to"])) : (m(), C(r, { key: 2, type: "submit", loading: e.resetting, large: "" }, { default: d(() => [D(b(e.t("reset")), 1)]), _: 1 }, 8, ["loading"]))], 32) } var VV = B(SV, [["render", CV], ["__scopeId", "data-v-31ae4e7a"]]); const FV = z({ components: { RequestForm: kV, ResetForm: VV }, setup() { const { t: e } = x(), t = Yt(), n = V(() => t.query.token); return { t: e, resetToken: n } } }), AV = { class: "type-title" }; function IV(e, t, n, l, i, u) { const o = c("request-form"), s = c("reset-form"), r = c("v-icon"), p = c("public-view"); return m(), C(p, null, { notice: d(() => [a(r, { name: "lock_outlined", left: "" }), D(" " + b(e.t("not_authenticated")), 1)]), default: d(() => [S("h1", AV, b(e.t("reset_password")), 1), e.resetToken ? (m(), C(s, { key: 1, token: e.resetToken }, null, 8, ["token"])) : (m(), C(o, { key: 0 }))]), _: 1 }) } var EV = B(FV, [["render", IV], ["__scopeId", "data-v-05544d73"]]); const DV = [{ path: "/", redirect: "/login" }, { name: "login", path: "/login", component: cV, props: e => ({ ssoErrorCode: e.query.error ? e.query.code : null, logoutReason: e.query.reason }), meta: { public: !0 } }, { name: "reset-password", path: "/reset-password", component: EV, meta: { public: !0 } }, { name: "accept-invite", path: "/accept-invite", component: PC, meta: { public: !0 } }, { name: "logout", path: "/logout", component: vV, meta: { public: !0 } }, { name: "private-404", path: "/:_(.+)+", component: hV }], Rt = Nr({ history: Br(Ye() + "admin/"), routes: DV }); let Ba = !0; const TV = async e => { var l; const t = wt(), n = Pn(); if (Ba) { Ba = !1; try { await _n({ navigate: !1 }) } catch { } } if (n.info === null && await n.hydrate(), ((l = e.meta) == null ? void 0 : l.public) !== !0 && t.hydrated === !1) return t.hydrating = !1, t.authenticated === !0 && t.hydrating === !1 ? (await Po(), e.fullPath) : "/login" }, PV = e => { const t = Ze(); e.meta.public !== !0 && setTimeout(() => { t.trackPage(e.fullPath) }, 500) }; Rt.beforeEach(TV); Rt.afterEach(PV); const OV = z({ name: "InsightsNavigation", emits: ["create"], setup() { const { t: e } = x(), t = Dn(), n = E(!1); return { navItems: V(() => t.dashboards.map(i => ({ icon: i.icon, name: i.name, to: `/insights/${i.id}` }))), createDialogActive: n, t: e } } }); function LV(e, t, n, l, i, u) { const o = c("v-button"), s = c("v-icon"), r = c("v-list-item-icon"), p = c("v-text-overflow"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-list"); return m(), C(_, { nav: "" }, { default: d(() => [e.navItems.length === 0 ? (m(), C(o, { key: 0, "full-width": "", outlined: "", dashed: "", onClick: t[0] || (t[0] = y => e.$emit("create")) }, { default: d(() => [D(b(e.t("create_dashboard")), 1)]), _: 1 })) : (m(!0), I(se, { key: 1 }, he(e.navItems, y => (m(), C(v, { key: y.to, to: y.to }, { default: d(() => [a(r, null, { default: d(() => [a(s, { name: y.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(f, null, { default: d(() => [a(p, { text: y.name }, null, 8, ["text"])]), _: 2 }, 1024)]), _: 2 }, 1032, ["to"]))), 128))]), _: 1 }) } var fo = B(OV, [["render", LV]]); const jV = z({ name: "DashboardDialog", props: { modelValue: { type: Boolean, default: !1 }, dashboard: { type: Object, default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { var r, p, f, v, _, y; const { t: n } = x(), l = Dn(), i = Xt({ name: (p = (r = e.dashboard) == null ? void 0 : r.name) != null ? p : null, icon: (v = (f = e.dashboard) == null ? void 0 : f.icon) != null ? v : "dashboard", note: (y = (_ = e.dashboard) == null ? void 0 : _.note) != null ? y : null }); _e(() => e.modelValue, (g, w) => { var h, k, F, A, P, L; M.exports.isEqual(g, w) === !1 && (i.name = (k = (h = e.dashboard) == null ? void 0 : h.name) != null ? k : null, i.icon = (A = (F = e.dashboard) == null ? void 0 : F.icon) != null ? A : "dashboard", i.note = (L = (P = e.dashboard) == null ? void 0 : P.note) != null ? L : null) }); const u = E(!1); return { values: i, cancel: o, saving: u, save: s, t: n }; function o() { t("update:modelValue", !1) } async function s() { u.value = !0; try { if (e.dashboard) await ue.patch(`/dashboards/${e.dashboard.id}`, i, { params: { fields: ["id"] } }), await l.hydrate(); else { const g = await ue.post("/dashboards", i, { params: { fields: ["id"] } }); await l.hydrate(), Rt.push(`/insights/${g.data.data.id}`) } t("update:modelValue", !1) } catch (g) { Ve(g) } finally { u.value = !1 } } } }), RV = { class: "fields" }; function MV(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-input"), r = c("interface-select-icon"), p = c("v-card-text"), f = c("v-button"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"); return m(), C(y, { "model-value": e.modelValue, persistent: "", "onUpdate:modelValue": t[3] || (t[3] = g => e.$emit("update:modelValue", g)), onEsc: e.cancel }, { activator: d(g => [ye(e.$slots, "activator", Je(xe(g)), void 0, !0)]), default: d(() => [a(_, null, { default: d(() => [e.dashboard ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("edit_dashboard")), 1)]), _: 1 })) : (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("create_dashboard")), 1)]), _: 1 })), a(p, null, { default: d(() => [S("div", RV, [a(s, { modelValue: e.values.name, "onUpdate:modelValue": t[0] || (t[0] = g => e.values.name = g), autofocus: "", placeholder: e.t("dashboard_name") }, null, 8, ["modelValue", "placeholder"]), a(r, { value: e.values.icon, onInput: t[1] || (t[1] = g => e.values.icon = g) }, null, 8, ["value"]), a(s, { modelValue: e.values.note, "onUpdate:modelValue": t[2] || (t[2] = g => e.values.note = g), class: "full", placeholder: e.t("note") }, null, 8, ["modelValue", "placeholder"])])]), _: 1 }), a(v, null, { default: d(() => [a(f, { secondary: "", onClick: e.cancel }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(f, { disabled: !e.values.name, loading: e.saving, onClick: e.save }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 3 }, 8, ["model-value", "onEsc"]) } var UV = B(jV, [["render", MV], ["__scopeId", "data-v-35403a37"]]); function Cl(e) { return qr.sanitize(zr(e)) } const NV = z({ name: "InsightsOverview", components: { InsightsNavigation: fo, DashboardDialog: UV }, setup() { const { t: e } = x(), t = Dn(), n = Dt(), l = E(null), i = E(!1), u = E(null), o = E(!1), s = V(() => n.hasPermission("directus_dashboards", "create")), r = [{ text: "", value: "icon", width: 42, sortable: !1 }, { text: e("name"), value: "name", width: 240 }, { text: e("note"), value: "note", width: 360 }]; return { dashboards: V(() => t.dashboards), createAllowed: s, tableHeaders: r, navigateToDashboard: f, createDialogActive: o, confirmDelete: l, deletingDashboard: i, deleteDashboard: v, editDashboard: u, t: e, md: Cl }; function f({ item: _ }) { Rt.push(`/insights/${_.id}`) } async function v() { if (!!l.value) { i.value = !0; try { await ue.delete(`/dashboards/${l.value}`), await t.hydrate(), l.value = null } catch (_) { Ve(_) } finally { i.value = !1 } } } } }), BV = { class: "page-description" }; function qV(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("insights-navigation"), p = c("dashboard-dialog"), f = c("sidebar-detail"), v = c("v-list-item-icon"), _ = c("v-list-item-content"), y = c("v-list-item"), g = c("v-list"), w = c("v-menu"), h = c("v-table"), k = c("v-info"), F = c("v-card-title"), A = c("v-card-actions"), P = c("v-card"), L = c("v-dialog"), T = c("private-view"), N = we("tooltip"), O = we("md"); return m(), C(T, { title: e.t("insights") }, { "title-outer:prepend": d(() => [a(s, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(o, { name: "insights" })]), _: 1 })]), navigation: d(() => [a(r, { onCreate: t[0] || (t[0] = U => e.createDialogActive = !0) })]), actions: d(() => [a(p, { modelValue: e.createDialogActive, "onUpdate:modelValue": t[1] || (t[1] = U => e.createDialogActive = U) }, { activator: d(({ on: U }) => [ee(a(s, { rounded: "", icon: "", disabled: e.createAllowed === !1, onClick: U }, { default: d(() => [a(o, { name: "add" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[N, e.createAllowed ? e.t("create_dashboard") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), _: 1 }, 8, ["modelValue"])]), sidebar: d(() => [a(f, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", BV, null, 512), [[O, e.t("page_help_insights_overview")]])]), _: 1 }, 8, ["title"])]), default: d(() => [e.dashboards.length > 0 ? (m(), C(h, { key: 0, headers: e.tableHeaders, "onUpdate:headers": t[2] || (t[2] = U => e.tableHeaders = U), items: e.dashboards, "show-resize": "", "fixed-header": "", "onClick:row": e.navigateToDashboard }, { ["item.icon"]: d(({ item: U }) => [a(o, { class: "icon", name: U.icon }, null, 8, ["name"])]), "item-append": d(({ item: U }) => [a(w, { placement: "left-start", "show-arrow": "" }, { activator: d(({ toggle: q }) => [a(o, { name: "more_vert", class: "ctx-toggle", onClick: q }, null, 8, ["onClick"])]), default: d(() => [a(g, null, { default: d(() => [a(y, { class: "warning", clickable: "", onClick: q => e.editDashboard = U }, { default: d(() => [a(v, null, { default: d(() => [a(o, { name: "edit", outline: "" })]), _: 1 }), a(_, null, { default: d(() => [D(b(e.t("edit_dashboard")), 1)]), _: 1 })]), _: 2 }, 1032, ["onClick"]), a(y, { class: "danger", clickable: "", onClick: q => e.confirmDelete = U.id }, { default: d(() => [a(v, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(_, null, { default: d(() => [D(b(e.t("delete_dashboard")), 1)]), _: 1 })]), _: 2 }, 1032, ["onClick"])]), _: 2 }, 1024)]), _: 2 }, 1024)]), _: 2 }, 1032, ["headers", "items", "onClick:row"])) : (m(), C(k, { key: 1, icon: "dashboard", title: e.t("no_dashboards"), center: "" }, { default: d(() => [D(b(e.t("no_dashboards_copy")), 1)]), _: 1 }, 8, ["title"])), a(L, { "model-value": !!e.confirmDelete, onEsc: t[4] || (t[4] = U => e.confirmDelete = null) }, { default: d(() => [a(P, null, { default: d(() => [a(F, null, { default: d(() => [D(b(e.t("dashboard_delete_confirm")), 1)]), _: 1 }), a(A, null, { default: d(() => [a(s, { secondary: "", onClick: t[3] || (t[3] = U => e.confirmDelete = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(s, { danger: "", loading: e.deletingDashboard, onClick: e.deleteDashboard }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"]), a(p, { "model-value": !!e.editDashboard, dashboard: e.editDashboard, "onUpdate:modelValue": t[5] || (t[5] = U => e.editDashboard = null) }, null, 8, ["model-value", "dashboard"])]), _: 1 }, 8, ["title"]) } var zV = B(NV, [["render", qV], ["__scopeId", "data-v-1571418d"]]); const KV = z({ components: { InsightsNavigation: fo }, setup() { const { t: e } = x(); return { t: e } } }), HV = { key: 0, class: "not-found" }; function WV(e, t, n, l, i, u) { const o = c("insights-navigation"), s = c("v-info"), r = c("private-view"); return m(), C(r, { title: e.t("insights") }, { navigation: d(() => [a(o)]), default: d(() => [e.currentDashboard ? R("", !0) : (m(), I("div", HV, [a(s, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])]))]), _: 1 }, 8, ["title"]) } var GV = B(KV, [["render", WV], ["__scopeId", "data-v-d6310128"]]); function Vl(e, t, n) { const [l, i] = e, [u, o] = t, [s, r] = n, p = l - u, f = i - o, v = s - u, _ = r - o; return p * _ - f * v !== 0 ? !1 : Math.abs(v) >= Math.abs(_) ? v > 0 ? u <= l && l <= s : s <= l && l <= u : _ > 0 ? o <= i && i <= r : r <= i && i <= o } const JV = z({ name: "Panel", props: { panel: { type: Object, required: !0 }, editMode: { type: Boolean, default: !1 }, now: { type: Date, required: !0 } }, emits: ["update", "move", "duplicate", "delete"], setup(e, { emit: t }) { const { t: n } = x(), { panels: l } = ml(), i = V(() => l.value.find(g => g.id === e.panel.type)), u = Xt({ position_x: void 0, position_y: void 0, width: void 0, height: void 0 }), { onPointerDown: o, onPointerUp: s, onPointerMove: r, dragging: p } = y(), f = V(() => { var g, w, h, k; return p.value ? { x: (g = u.position_x) != null ? g : e.panel.position_x, y: (w = u.position_y) != null ? w : e.panel.position_y, width: (h = u.width) != null ? h : e.panel.width, height: (k = u.height) != null ? k : e.panel.height } : { x: e.panel.position_x, y: e.panel.position_y, width: e.panel.width, height: e.panel.height } }), v = V(() => { var g, w, h, k; return p.value ? { "--pos-x": (g = u.position_x) != null ? g : e.panel.position_x, "--pos-y": (w = u.position_y) != null ? w : e.panel.position_y, "--width": (h = u.width) != null ? h : e.panel.width, "--height": (k = u.height) != null ? k : e.panel.height } : { "--pos-x": e.panel.position_x, "--pos-y": e.panel.position_y, "--width": e.panel.width, "--height": e.panel.height } }), _ = V(() => ({ "--v-icon-color": e.panel.color })); return { positioning: f, positionStyling: v, iconColor: _, onPointerDown: o, onPointerUp: s, onPointerMove: r, dragging: p, editedPosition: u, t: n, omit: M.exports.omit }; function y() { const g = E(!1); let w = 0, h = 0, k = 0, F = 0, A = 0, P = 0, L = "move"; const T = M.exports.throttle(U => { var G, X; if (e.editMode === !1 || g.value === !1) return; const q = U.pageX - w, K = U.pageY - h, W = Math.round(q / 20), te = Math.round(K / 20); if (L === "move") u.position_x = k + W, u.position_y = F + te, u.position_x < 1 && (u.position_x = 1), u.position_y < 1 && (u.position_y = 1); else { L.includes("top") && (u.height = P - te, u.position_y = F + te), L.includes("right") && (u.width = A + W), L.includes("bottom") && (u.height = P + te), L.includes("left") && (u.width = A - W, u.position_x = k + W); const ve = ((G = i.value) == null ? void 0 : G.minWidth) || 6, ae = ((X = i.value) == null ? void 0 : X.minHeight) || 6; u.position_x && u.position_x < 1 && (u.position_x = 1), u.position_y && u.position_y < 1 && (u.position_y = 1), u.width && u.width < ve && (u.width = ve), u.height && u.height < ae && (u.height = ae) } }, 20); return { dragging: g, onPointerDown: N, onPointerUp: O, onPointerMove: T }; function N(U, q) { e.editMode !== !1 && (L = U, g.value = !0, w = q.pageX, h = q.pageY, k = e.panel.position_x, F = e.panel.position_y, A = e.panel.width, P = e.panel.height, window.addEventListener("pointerup", O), window.addEventListener("pointermove", T)) } function O() { g.value = !1, e.editMode !== !1 && (t("update", u), window.removeEventListener("pointerup", O), window.removeEventListener("pointermove", T), u.position_x = void 0, u.position_y = void 0, u.width = void 0, u.height = void 0) } } } }), QV = e => (Qe("data-v-0205318a"), e = e(), Xe(), e), XV = { key: 0, class: "header" }, ZV = QV(() => S("div", { class: "spacer" }, null, -1)), YV = { class: "resize-details" }, xV = { key: 2, class: "resize-handlers" }; function eF(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-text-overflow"), r = c("v-list-item-icon"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-list"), _ = c("v-menu"), y = we("tooltip"); return m(), I("div", { class: de(["panel", { editing: e.editMode, dragging: e.dragging, "br-tl": e.dragging || e.panel.borderRadius[0], "br-tr": e.dragging || e.panel.borderRadius[1], "br-br": e.dragging || e.panel.borderRadius[2], "br-bl": e.dragging || e.panel.borderRadius[3] }]), style: Ke(e.positionStyling), "data-move": "", onPointerdown: t[13] || (t[13] = g => e.onPointerDown("move", g)) }, [e.panel.show_header ? (m(), I("div", XV, [a(o, { class: "icon", style: Ke(e.iconColor), name: e.panel.icon }, null, 8, ["style", "name"]), a(s, { class: "name selectable", text: e.panel.name || "" }, null, 8, ["text"]), ZV, e.panel.note ? ee((m(), C(o, { key: 0, class: "note", name: "info" }, null, 512)), [[y, e.panel.note]]) : R("", !0)])) : R("", !0), e.editMode ? (m(), I("div", { key: 1, class: "edit-actions", onPointerdown: t[4] || (t[4] = Ae(() => { }, ["stop"])) }, [ee(a(o, { class: "edit-icon", name: "edit", clickable: "", onClick: t[0] || (t[0] = Ae(g => e.$router.push(`/insights/${e.panel.dashboard}/${e.panel.id}`), ["stop"])) }, null, 512), [[y, e.t("edit")]]), a(_, { placement: "bottom-end", "show-arrow": "" }, { activator: d(({ toggle: g }) => [a(o, { class: "more-icon", name: "more_vert", clickable: "", onClick: g }, null, 8, ["onClick"])]), default: d(() => [a(v, null, { default: d(() => [a(f, { clickable: "", disabled: e.panel.id.startsWith("_"), onClick: t[1] || (t[1] = g => e.$emit("move")) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { class: "move-icon", name: "input" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("copy_to")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(f, { clickable: "", onClick: t[2] || (t[2] = g => e.$emit("duplicate")) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "control_point_duplicate" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("duplicate")), 1)]), _: 1 })]), _: 1 }), a(f, { class: "delete-action", clickable: "", onClick: t[3] || (t[3] = g => e.$emit("delete")) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "delete" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("delete_panel")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 })], 32)) : R("", !0), S("div", YV, " (" + b(e.positioning.x - 1) + ":" + b(e.positioning.y - 1) + ") " + b(e.positioning.width) + "\xD7" + b(e.positioning.height), 1), e.editMode ? (m(), I("div", xV, [S("div", { class: "top", onPointerdown: t[5] || (t[5] = Ae(g => e.onPointerDown("resize-top", g), ["stop"])) }, null, 32), S("div", { class: "right", onPointerdown: t[6] || (t[6] = Ae(g => e.onPointerDown("resize-right", g), ["stop"])) }, null, 32), S("div", { class: "bottom", onPointerdown: t[7] || (t[7] = Ae(g => e.onPointerDown("resize-bottom", g), ["stop"])) }, null, 32), S("div", { class: "left", onPointerdown: t[8] || (t[8] = Ae(g => e.onPointerDown("resize-left", g), ["stop"])) }, null, 32), S("div", { class: "top-left", onPointerdown: t[9] || (t[9] = Ae(g => e.onPointerDown("resize-top-left", g), ["stop"])) }, null, 32), S("div", { class: "top-right", onPointerdown: t[10] || (t[10] = Ae(g => e.onPointerDown("resize-top-right", g), ["stop"])) }, null, 32), S("div", { class: "bottom-right", onPointerdown: t[11] || (t[11] = Ae(g => e.onPointerDown("resize-bottom-right", g), ["stop"])) }, null, 32), S("div", { class: "bottom-left", onPointerdown: t[12] || (t[12] = Ae(g => e.onPointerDown("resize-bottom-left", g), ["stop"])) }, null, 32)])) : R("", !0), S("div", { class: de(["panel-content", { "has-header": e.panel.show_header }]) }, [(m(), C(Ne(`panel-${e.panel.type}`), dt(e.panel.options, { id: e.panel.id, "show-header": e.panel.show_header, height: e.panel.height, width: e.panel.width, dashboard: e.panel.dashboard, now: e.now }), null, 16, ["id", "show-header", "height", "width", "dashboard", "now"]))], 2)], 38) } var tF = B(JV, [["render", eF], ["__scopeId", "data-v-0205318a"]]); function qa(e) { return e == null || e === void 0 } function Ut(e) { return e != null } function Qn(e) { const t = E(0), n = E(0), l = new ResizeObserver(([i]) => { t.value = i.contentRect.width, n.value = i.contentRect.height }); return at(() => { const i = Nl(e) ? e.value : e; Ut(i) && l.observe(i) }), At(() => { l.disconnect() }), { width: t, height: n } } const nF = z({ name: "InsightsWorkspace", components: { InsightsPanel: tF }, props: { panels: { type: Array, required: !0 }, editMode: { type: Boolean, default: !1 }, zoomToFit: { type: Boolean, default: !1 }, now: { type: Date, required: !0 } }, emits: ["update", "move", "delete", "duplicate"], setup(e) { const t = ht("main-element", E()), n = Qn(t), l = V(() => { var r; return Number(((r = s("--content-padding")) == null ? void 0 : r.slice(0, -2)) || 0) }), i = V(() => { const r = e.panels.reduce((f, v) => (v.position_x > f.position_x && (f.position_x = v.position_x, f.width = v.width), f), { position_x: 0, width: 0 }), p = e.panels.reduce((f, v) => (v.position_y > f.position_y && (f.position_y = v.position_y, f.height = v.height), f), { position_y: 0, height: 0 }); return e.editMode === !0 ? { width: (r.position_x + r.width + 25) * 20, height: (p.position_y + p.height + 25) * 20 } : { width: (r.position_x + r.width - 1) * 20, height: (p.position_y + p.height - 1) * 20 } }), u = V(() => { if (e.zoomToFit === !1) return 1; const { width: r, height: p } = n, f = (r.value - l.value * 2) / i.value.width, v = (p.value - 114 - l.value * 2) / i.value.height; return Math.min(f, v) }), o = V(() => ({ width: i.value.width * u.value + l.value * 2, height: i.value.height * u.value + l.value * 2 })); return { workspaceSize: i, workspaceBoxSize: o, mainElement: t, zoomScale: u }; function s(r) { if (!!t.value) return getComputedStyle(t.value).getPropertyValue(r).trim() } } }); function lF(e, t, n, l, i, u) { const o = c("insights-panel"); return m(), I("div", { class: de(["workspace-padding-box", { editing: e.editMode }]), style: Ke({ width: e.workspaceBoxSize.width + "px", height: e.workspaceBoxSize.height + "px" }) }, [S("div", { class: "workspace", style: Ke({ transform: `scale(${e.zoomScale})`, width: e.workspaceSize.width + "px", height: e.workspaceSize.height + "px" }) }, [(m(!0), I(se, null, he(e.panels, s => (m(), C(o, { key: s.id, panel: s, "edit-mode": e.editMode, now: e.now, onUpdate: r => e.$emit("update", { edits: r, id: s.id }), onMove: r => e.$emit("move", s.id), onDelete: r => e.$emit("delete", s.id), onDuplicate: r => e.$emit("duplicate", s) }, null, 8, ["panel", "edit-mode", "now", "onUpdate", "onMove", "onDelete", "onDuplicate"]))), 128))], 4)], 6) } var oF = B(nF, [["render", lF], ["__scopeId", "data-v-ffa0afd4"]]); const aF = z({ name: "InsightsDashboard", components: { InsightsNotFound: GV, InsightsNavigation: fo, InsightsWorkspace: oF }, props: { primaryKey: { type: String, required: !0 }, panelKey: { type: String, default: null } }, setup(e) { var ve; const { t } = x(), n = Dn(), l = wt(), { fullScreen: i } = je(l), u = E(!1), o = E(!1), s = E(!1), r = E((ve = n.dashboards.find(ae => ae.id !== e.primaryKey)) == null ? void 0 : ve.id), p = E(), f = E(!1); nt("meta+s", () => { N() }), _e(u, ae => { ae ? (f.value = !1, window.onbeforeunload = () => "") : window.onbeforeunload = null }); const v = V(() => n.dashboards.find(ae => ae.id === e.primaryKey)), _ = V(() => n.dashboards.filter(ae => ae.id !== e.primaryKey)), y = E([]), g = E([]), w = new Date, h = V(() => { var pe; const Y = [...(((pe = v.value) == null ? void 0 : pe.panels) || []).filter(H => g.value.includes(H.id) === !1).map(H => { const Q = y.value.find(Z => Z.id === H.id); return Q ? M.exports.merge({}, H, Q) : H }), ...y.value.filter(H => { var Q; return (Q = H.id) == null ? void 0 : Q.startsWith("_") })].map(H => Ce(re({}, H), { _coordinates: [[H.position_x, H.position_y], [H.position_x + H.width, H.position_y], [H.position_x + H.width, H.position_y + H.height], [H.position_x, H.position_y + H.height]] })); return Y.map(H => { let Q = !1, Z = !1, le = !1, fe = !1; for (const J of Y) { if (J.id === H.id) continue; const ie = [[J._coordinates[0], J._coordinates[1]], [J._coordinates[1], J._coordinates[2]], [J._coordinates[2], J._coordinates[3]], [J._coordinates[3], J._coordinates[0]]]; Q === !1 && (Q = ie.some(([oe, me]) => Vl(H._coordinates[0], oe, me))), Z === !1 && (Z = ie.some(([oe, me]) => Vl(H._coordinates[1], oe, me))), le === !1 && (le = ie.some(([oe, me]) => Vl(H._coordinates[2], oe, me))), fe === !1 && (fe = ie.some(([oe, me]) => Vl(H._coordinates[3], oe, me))) } return Ce(re({}, H), { borderRadius: [!Q, !Z, !le, !fe] }) }) }), k = E(!1), F = E(!1), A = E(null), P = ae => { const ne = g.value.length > 0 || y.value.length > 0; if (u.value && ae.params.primaryKey !== e.primaryKey) { if (ne) return F.value = !0, A.value = ae.fullPath, !1; u.value = !1 } }; return Ot(P), Tt(P), { currentDashboard: v, editMode: u, panels: h, stagePanelEdits: L, stagedPanels: y, saving: o, saveChanges: N, stageConfiguration: T, movePanelID: p, movePanel: X, deletePanel: O, attemptCancelChanges: U, duplicatePanel: W, movePanelLoading: s, t, toggleFullScreen: te, zoomToFit: f, fullScreen: i, toggleZoomToFit: G, md: Cl, movePanelChoices: _, movePanelTo: r, confirmLeave: F, discardAndLeave: K, now: w, confirmCancel: k, cancelChanges: q }; function L(ae) { var Y; const ne = (Y = ae.id) != null ? Y : e.panelKey; ne === "+" ? y.value = [...y.value, re({ id: `_${bt()}`, dashboard: e.primaryKey }, ae.edits)] : y.value.some(ce => ce.id === ne) ? y.value = y.value.map(ce => ce.id === ne ? M.exports.merge({ id: ne, dashboard: e.primaryKey }, ce, ae.edits) : ce) : y.value = [...y.value, re({ id: ne, dashboard: e.primaryKey }, ae.edits)] } function T(ae) { L({ edits: ae }), Rt.replace(`/insights/${e.primaryKey}`) } async function N() { if (!v.value) return; if (y.value.length === 0 && g.value.length === 0) { u.value = !1; return } o.value = !0; const ne = [...v.value.panels.map(Y => Y.id).map(Y => y.value.find(ce => ce.id === Y) || Y), ...y.value.filter(Y => { var ce; return (ce = Y.id) == null ? void 0 : ce.startsWith("_") }).map(Y => M.exports.omit(Y, "id"))]; try { y.value.length > 0 && await ue.patch(`/dashboards/${e.primaryKey}`, { panels: ne }), g.value.length > 0 && await ue.delete("/panels", { data: g.value }), await n.hydrate(), y.value = [], u.value = !1 } catch (Y) { Ve(Y) } finally { o.value = !1 } } async function O(ae) { !v.value || (y.value = y.value.filter(ne => ne.id !== ae), ae.startsWith("_") === !1 && g.value.push(ae)) } function U() { y.value.length > 0 || g.value.length > 0 ? k.value = !0 : q() } function q() { k.value = !1, y.value = [], g.value = [], u.value = !1 } function K() { !A.value || (q(), F.value = !1, Rt.push(A.value)) } function W(ae) { const ne = M.exports.omit(M.exports.merge({}, ae), "id"); ne.position_x = ne.position_x + 2, ne.position_y = ne.position_y + 2, L({ edits: ne, id: "+" }) } function te() { i.value = !i.value } function G() { f.value = !f.value } async function X() { s.value = !0; const ae = h.value.find(ne => ne.id === p.value); try { await ue.post("/panels", Ce(re({}, M.exports.omit(ae, ["id"])), { dashboard: r.value })), await n.hydrate(), p.value = null } catch (ne) { Ve(ne) } finally { s.value = !1 } } } }), iF = { class: "page-description" }; function sF(e, t, n, l, i, u) { const o = c("insights-not-found"), s = c("v-icon"), r = c("v-button"), p = c("v-breadcrumb"), f = c("sidebar-detail"), v = c("insights-navigation"), _ = c("insights-workspace"), y = c("router-view"), g = c("v-card-title"), w = c("v-notice"), h = c("v-select"), k = c("v-card-text"), F = c("v-card-actions"), A = c("v-card"), P = c("v-dialog"), L = c("private-view"), T = we("tooltip"), N = we("md"); return e.currentDashboard ? (m(), C(L, { key: 1, title: e.currentDashboard.name }, { "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: e.currentDashboard.icon }, null, 8, ["name"])]), _: 1 })]), headline: d(() => [a(p, { items: [{ name: e.t("insights"), to: "/insights" }] }, null, 8, ["items"])]), actions: d(() => [e.editMode ? (m(), I(se, { key: 0 }, [ee(a(r, { class: "clear-changes", rounded: "", icon: "", outlined: "", onClick: e.attemptCancelChanges }, { default: d(() => [a(s, { name: "clear" })]), _: 1 }, 8, ["onClick"]), [[T, e.t("clear_changes"), void 0, { bottom: !0 }]]), ee(a(r, { rounded: "", icon: "", outlined: "", to: `/insights/${e.currentDashboard.id}/+` }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to"]), [[T, e.t("create_panel"), void 0, { bottom: !0 }]]), ee(a(r, { rounded: "", icon: "", loading: e.saving, onClick: e.saveChanges }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["loading", "onClick"]), [[T, e.t("save"), void 0, { bottom: !0 }]])], 64)) : (m(), I(se, { key: 1 }, [ee(a(r, { active: e.zoomToFit, class: "zoom-to-fit", rounded: "", icon: "", outlined: "", onClick: e.toggleZoomToFit }, { default: d(() => [a(s, { name: "aspect_ratio" })]), _: 1 }, 8, ["active", "onClick"]), [[T, e.t("fit_to_screen"), void 0, { bottom: !0 }]]), ee(a(r, { active: e.fullScreen, class: "fullscreen", rounded: "", icon: "", outlined: "", onClick: e.toggleFullScreen }, { default: d(() => [a(s, { name: "fullscreen" })]), _: 1 }, 8, ["active", "onClick"]), [[T, e.t("full_screen"), void 0, { bottom: !0 }]]), ee(a(r, { rounded: "", icon: "", outlined: "", onClick: t[0] || (t[0] = O => e.editMode = !e.editMode) }, { default: d(() => [a(s, { name: "edit" })]), _: 1 }, 512), [[T, e.t("edit_panels"), void 0, { bottom: !0 }]])], 64))]), sidebar: d(() => [a(f, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", iF, null, 512), [[N, e.t("page_help_insights_dashboard")]])]), _: 1 }, 8, ["title"])]), navigation: d(() => [a(v)]), default: d(() => [a(_, { "edit-mode": e.editMode, panels: e.panels, "zoom-to-fit": e.zoomToFit, now: e.now, onUpdate: e.stagePanelEdits, onMove: t[1] || (t[1] = O => e.movePanelID = O), onDelete: e.deletePanel, onDuplicate: e.duplicatePanel }, null, 8, ["edit-mode", "panels", "zoom-to-fit", "now", "onUpdate", "onDelete", "onDuplicate"]), a(y, { name: "detail", "dashboard-key": e.primaryKey, panel: e.panelKey ? e.panels.find(O => O.id === e.panelKey) : null, onSave: e.stageConfiguration, onCancel: t[2] || (t[2] = O => e.$router.replace(`/insights/${e.primaryKey}`)) }, null, 8, ["dashboard-key", "panel", "onSave"]), a(P, { "model-value": !!e.movePanelID, "onUpdate:modelValue": t[5] || (t[5] = O => e.movePanelID = null), onEsc: t[6] || (t[6] = O => e.movePanelID = null) }, { default: d(() => [a(A, null, { default: d(() => [a(g, null, { default: d(() => [D(b(e.t("copy_to")), 1)]), _: 1 }), a(k, null, { default: d(() => [e.movePanelChoices.length === 0 ? (m(), C(w, { key: 0 }, { default: d(() => [D(b(e.t("no_other_dashboards_copy")), 1)]), _: 1 })) : (m(), C(h, { key: 1, modelValue: e.movePanelTo, "onUpdate:modelValue": t[3] || (t[3] = O => e.movePanelTo = O), items: e.movePanelChoices, "item-text": "name", "item-value": "id" }, null, 8, ["modelValue", "items"]))]), _: 1 }), a(F, null, { default: d(() => [a(r, { secondary: "", onClick: t[4] || (t[4] = O => e.movePanelID = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { loading: e.movePanelLoading, onClick: e.movePanel }, { default: d(() => [D(b(e.t("copy")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"]), a(P, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[8] || (t[8] = O => e.confirmLeave = O), onEsc: t[9] || (t[9] = O => e.confirmLeave = !1) }, { default: d(() => [a(A, null, { default: d(() => [a(g, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(k, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[7] || (t[7] = O => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(P, { modelValue: e.confirmCancel, "onUpdate:modelValue": t[11] || (t[11] = O => e.confirmCancel = O), onEsc: t[12] || (t[12] = O => e.confirmCancel = !1) }, { default: d(() => [a(A, null, { default: d(() => [a(g, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(k, null, { default: d(() => [D(b(e.t("discard_changes_copy")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(r, { secondary: "", onClick: e.cancelChanges }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[10] || (t[10] = O => e.confirmCancel = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"])) : (m(), C(o, { key: 0 })) } var rF = B(aF, [["render", sF], ["__scopeId", "data-v-7e5e72e9"]]); const dF = z({ name: "PanelConfiguration", props: { panel: { type: Object, default: null } }, emits: ["cancel", "save"], setup(e, { emit: t }) { var p, f, v, _, y, g, w, h, k, F, A, P, L, T, N, O, U, q, K; const { t: n } = x(), { panels: l } = ml(), i = cn(), u = Xt({ show_header: (f = (p = e.panel) == null ? void 0 : p.show_header) != null ? f : !0, type: ((v = e.panel) == null ? void 0 : v.type) || void 0, name: (_ = e.panel) == null ? void 0 : _.name, note: (y = e.panel) == null ? void 0 : y.note, icon: (w = (g = e.panel) == null ? void 0 : g.icon) != null ? w : "insert_chart", color: (k = (h = e.panel) == null ? void 0 : h.color) != null ? k : "#00C897", width: (A = (F = e.panel) == null ? void 0 : F.width) != null ? A : void 0, height: (L = (P = e.panel) == null ? void 0 : P.height) != null ? L : void 0, position_x: (N = (T = e.panel) == null ? void 0 : T.position_x) != null ? N : 1, position_y: (U = (O = e.panel) == null ? void 0 : O.position_y) != null ? U : 1, options: (K = (q = e.panel) == null ? void 0 : q.options) != null ? K : {} }), o = V(() => l.value.map(W => ({ text: W.name, icon: W.icon, description: W.description, value: W.id }))), s = V(() => l.value.find(W => W.id === u.type)); return _e(s, W => { W ? (u.width = W.minWidth, u.height = W.minHeight) : (u.width = void 0, u.height = void 0) }), { selectItems: o, selectedPanel: s, close, emitSave: r, edits: u, t: n, isOpen: i }; function r() { t("save", u) } } }), uF = { class: "content" }, cF = { class: "type-label panel-type-label" }, pF = { class: "form-grid" }, mF = { class: "field half-left" }, fF = { class: "type-label" }, vF = { class: "field half-right" }, _F = { class: "type-label" }, yF = { class: "field half-left" }, gF = { class: "type-label" }, hF = { class: "field half-right" }, bF = { class: "type-label" }, $F = { class: "field full" }, wF = { class: "type-label" }; function kF(e, t, n, l, i, u) { var F, A; const o = c("v-icon"), s = c("v-button"), r = c("v-fancy-select"), p = c("v-notice"), f = c("v-form"), v = c("v-divider"), _ = c("v-checkbox"), y = c("v-input"), g = c("interface-select-icon"), w = c("interface-select-color"), h = c("v-drawer"), k = we("tooltip"); return m(), C(h, { "model-value": e.isOpen, title: ((F = e.panel) == null ? void 0 : F.name) || e.t("panel"), subtitle: e.t("panel_options"), icon: ((A = e.panel) == null ? void 0 : A.icon) || "insert_chart", persistent: "", onCancel: t[8] || (t[8] = P => e.$emit("cancel")) }, { actions: d(() => [ee(a(s, { disabled: !e.edits.type, icon: "", rounded: "", onClick: e.emitSave }, { default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["disabled", "onClick"]), [[k, e.t("done"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", uF, [S("p", cF, b(e.t("type")), 1), a(r, { modelValue: e.edits.type, "onUpdate:modelValue": t[0] || (t[0] = P => e.edits.type = P), class: "select", items: e.selectItems }, null, 8, ["modelValue", "items"]), e.edits.type && e.selectedPanel ? (m(), I(se, { key: 0 }, [!e.selectedPanel.options || e.selectedPanel.options.length === 0 ? (m(), C(p, { key: 0 }, { default: d(() => [D(b(e.t("no_options_available")), 1)]), _: 1 })) : Array.isArray(e.selectedPanel.options) ? (m(), C(f, { key: 1, modelValue: e.edits.options, "onUpdate:modelValue": t[1] || (t[1] = P => e.edits.options = P), fields: e.selectedPanel.options, "primary-key": "+", "initial-values": e.panel && e.panel.options }, null, 8, ["modelValue", "fields", "initial-values"])) : (m(), C(Ne(`panel-options-${e.selectedPanel.id}`), { key: 2, modelValue: e.edits.options, "onUpdate:modelValue": t[2] || (t[2] = P => e.edits.options = P), collection: e.collection }, null, 8, ["modelValue", "collection"]))], 64)) : R("", !0), a(v, { "inline-title": !1, large: "" }, { icon: d(() => [a(o, { name: "info" })]), default: d(() => [D(b(e.t("panel_header")), 1)]), _: 1 }), S("div", pF, [S("div", mF, [S("p", fF, b(e.t("visible")), 1), a(_, { modelValue: e.edits.show_header, "onUpdate:modelValue": t[3] || (t[3] = P => e.edits.show_header = P), block: "", label: e.t("show_header") }, null, 8, ["modelValue", "label"])]), S("div", vF, [S("p", _F, b(e.t("name")), 1), a(y, { modelValue: e.edits.name, "onUpdate:modelValue": t[4] || (t[4] = P => e.edits.name = P), nullable: !1, disabled: e.edits.show_header !== !0, placeholder: e.t("panel_name_placeholder") }, null, 8, ["modelValue", "disabled", "placeholder"])]), S("div", yF, [S("p", gF, b(e.t("icon")), 1), a(g, { value: e.edits.icon, disabled: e.edits.show_header !== !0, onInput: t[5] || (t[5] = P => e.edits.icon = P) }, null, 8, ["value", "disabled"])]), S("div", hF, [S("p", bF, b(e.t("color")), 1), a(w, { value: e.edits.color, disabled: e.edits.show_header !== !0, width: "half", onInput: t[6] || (t[6] = P => e.edits.color = P) }, null, 8, ["value", "disabled"])]), S("div", $F, [S("p", wF, b(e.t("note")), 1), a(y, { modelValue: e.edits.note, "onUpdate:modelValue": t[7] || (t[7] = P => e.edits.note = P), disabled: e.edits.show_header !== !0, placeholder: e.t("panel_note_placeholder") }, null, 8, ["modelValue", "disabled", "placeholder"])])])])]), _: 1 }, 8, ["model-value", "title", "subtitle", "icon"]) } var SF = B(dF, [["render", kF], ["__scopeId", "data-v-42a9e66e"]]), CF = rn({ id: "insights", name: "$t:insights", icon: "insights", routes: [{ name: "insights-overview", path: "", component: zV }, { name: "insights-dashboard", path: ":primaryKey", component: rF, props: !0, children: [{ name: "panel-detail", path: ":panelKey", props: !0, components: { detail: SF } }] }], preRegisterCheck(e, t) { return e.role.admin_access ? !0 : !!t.find(i => i.collection === "directus_dashboards" && i.action === "read") } }), VF = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: CF }); function za() { const e = E(), t = E(!1), n = E(), l = V(() => e.value ? { directus: { version: e.value.directus.version }, node: { version: e.value.node.version, uptime: aa(e.value.node.uptime * 1e3) }, os: { type: e.value.os.type, version: e.value.os.version, uptime: aa(e.value.os.uptime * 1e3), totalmem: Kr(e.value.os.totalmem) } } : null); return e.value || i(), { info: e, parsedInfo: l, loading: t, error: n }; async function i() { t.value = !0, n.value = null; try { const u = await ue.get("/server/info"); e.value = u.data.data } catch (u) { n.value = u } finally { t.value = !1 } } } const FF = z({ setup() { const { t: e } = x(), { parsedInfo: t } = za(), n = [{ icon: "public", name: e("settings_project"), to: "/settings/project" }, { icon: "list_alt", name: e("settings_data_model"), to: "/settings/data-model" }, { icon: "admin_panel_settings", name: e("settings_permissions"), to: "/settings/roles", outline: !0 }, { icon: "bookmark_border", name: e("settings_presets"), to: "/settings/presets" }, { icon: "anchor", name: e("settings_webhooks"), to: "/settings/webhooks" }], l = V(() => { var u, o, s, r, p, f, v, _; const i = new URLSearchParams({ template: "bug_report.yml", "directus-version": (o = (u = t.value) == null ? void 0 : u.directus.version) != null ? o : "", "node-version": (r = (s = t.value) == null ? void 0 : s.node.version) != null ? r : "", "operating-system": `${(f = (p = t.value) == null ? void 0 : p.os.type) != null ? f : ""} ${(_ = (v = t.value) == null ? void 0 : v.os.version) != null ? _ : ""}` }); return [{ icon: "bug_report", name: e("report_bug"), href: `https://github.com/directus/directus/issues/new?${i.toString()}`, outline: !0 }, { icon: "new_releases", name: e("request_feature"), href: "https://github.com/directus/directus/discussions/new", outline: !0 }] }); return { version: pa, navItems: n, externalItems: l } } }); function AF(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-text-overflow"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-divider"), _ = c("v-list"); return m(), C(_, { nav: "" }, { default: d(() => [(m(!0), I(se, null, he(e.navItems, y => (m(), C(f, { key: y.to, to: y.to }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: y.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(p, null, { default: d(() => [a(r, { text: y.name }, null, 8, ["text"])]), _: 2 }, 1024)]), _: 2 }, 1032, ["to"]))), 128)), a(v), (m(!0), I(se, null, he(e.externalItems, y => (m(), C(f, { key: y.href, href: y.href }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: y.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(p, null, { default: d(() => [a(r, { text: y.name }, null, 8, ["text"])]), _: 2 }, 1024)]), _: 2 }, 1032, ["href"]))), 128)), a(f, { href: "https://github.com/directus/directus/releases", class: "version" }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "directus" })]), _: 1 }), a(p, null, { default: d(() => [a(r, { class: "version", text: `Directus ${e.version}` }, null, 8, ["text"])]), _: 1 })]), _: 1 })]), _: 1 }) } var Mt = B(FF, [["render", AF], ["__scopeId", "data-v-0513df29"]]); const IF = z({ props: { collection: { type: Object, required: !0 } }, setup(e) { const { t } = x(), n = He(), { deleting: l, deleteActive: i, deleteCollection: u } = s(); return { t, deleting: l, deleteActive: i, deleteCollection: u, update: o }; async function o(r) { await n.updateCollection(e.collection.collection, r) } function s() { const r = E(!1), p = E(!1); return { deleting: r, deleteActive: p, deleteCollection: f }; async function f() { r.value = !0; try { await n.deleteCollection(e.collection.collection), p.value = !1 } finally { r.value = !1 } } } } }), EF = { key: 0 }; function DF(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("v-list"), v = c("v-menu"), _ = c("v-card-title"), y = c("v-button"), g = c("v-card-actions"), w = c("v-card"), h = c("v-dialog"); return e.collection.collection.startsWith("directus_") === !1 ? (m(), I("div", EF, [a(v, { placement: "left-start", "show-arrow": "" }, { activator: d(({ toggle: k, deactivate: F }) => [a(o, { name: "more_vert", clickable: "", class: "ctx-toggle", onClick: Ae(k, ["stop", "prevent"]), onFocusout: F }, null, 8, ["onClick", "onFocusout"])]), default: d(() => [a(f, null, { default: d(() => [a(p, { clickable: "", class: "danger", onClick: t[0] || (t[0] = k => e.deleteActive = !0) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("delete_collection")), 1)]), _: 1 })]), _: 1 }), a(p, { clickable: "", onClick: t[1] || (t[1] = k => { var F; return e.update({ meta: { hidden: !((F = e.collection.meta) == null ? void 0 : F.hidden) } }) }) }, { default: d(() => { var k; return [((k = e.collection.meta) == null ? void 0 : k.hidden) === !1 ? (m(), I(se, { key: 0 }, [a(s, null, { default: d(() => [a(o, { name: "visibility_off" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("make_collection_hidden")), 1)]), _: 1 })], 64)) : (m(), I(se, { key: 1 }, [a(s, null, { default: d(() => [a(o, { name: "visibility" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("make_collection_visible")), 1)]), _: 1 })], 64))] }), _: 1 })]), _: 1 })]), _: 1 }), a(h, { modelValue: e.deleteActive, "onUpdate:modelValue": t[3] || (t[3] = k => e.deleteActive = k), onEsc: t[4] || (t[4] = k => e.deleteActive = null) }, { default: d(() => [a(w, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("delete_collection_are_you_sure")), 1)]), _: 1 }), a(g, null, { default: d(() => [a(y, { disabled: e.deleting, secondary: "", onClick: t[2] || (t[2] = k => e.deleteActive = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["disabled"]), a(y, { loading: e.deleting, kind: "danger", onClick: e.deleteCollection }, { default: d(() => [D(b(e.t("delete_collection")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])])) : R("", !0) } var Ka = B(IF, [["render", DF], ["__scopeId", "data-v-11fe042c"]]); const TF = z({ name: "CollectionItem", components: { CollectionOptions: Ka, Draggable: kt }, props: { collection: { type: Object, required: !0 }, collections: { type: Array, required: !0 }, disableDrag: { type: Boolean, default: !1 } }, emits: ["setNestedSort", "editCollection"], setup(e, { emit: t }) { const n = He(), { t: l } = x(), i = V(() => e.collections.filter(v => { var _; return ((_ = v.meta) == null ? void 0 : _.group) === e.collection.collection })), u = V(() => { var v; switch ((v = e.collection.meta) == null ? void 0 : v.collapse) { case "open": return "folder_open"; case "closed": return "folder"; case "locked": return "folder_lock" } }), o = V(() => { var v; switch ((v = e.collection.meta) == null ? void 0 : v.collapse) { case "open": return l("start_open"); case "closed": return l("start_collapsed"); case "locked": return l("always_open") } }), s = E(!1); return { collapseIcon: u, onGroupSortChange: f, nestedCollections: i, update: p, toggleCollapse: r, collapseTooltip: o, collapseLoading: s }; async function r() { var _, y; if (s.value === !0) return; s.value = !0; let v = "open"; ((_ = e.collection.meta) == null ? void 0 : _.collapse) === "open" ? v = "closed" : ((y = e.collection.meta) == null ? void 0 : y.collapse) === "closed" && (v = "locked"); try { await p({ meta: { collapse: v } }) } catch (g) { Ve(g) } finally { s.value = !1 } } async function p(v) { await n.updateCollection(e.collection.collection, v) } function f(v) { const _ = v.map(y => ({ collection: y.collection, meta: { group: e.collection.collection } })); t("setNestedSort", _) } } }), PF = { class: "collection-item" }, OF = { class: "collection-name" }; function LF(e, t, n, l, i, u) { var g; const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-progress-circular"), p = c("collection-options"), f = c("v-list-item"), v = c("collection-item", !0), _ = c("draggable"), y = we("tooltip"); return m(), I("div", PF, [a(f, { block: "", dense: "", clickable: "", class: de({ hidden: (g = e.collection.meta) == null ? void 0 : g.hidden }), to: e.collection.schema ? `/settings/data-model/${e.collection.collection}` : void 0, onClick: t[0] || (t[0] = w => e.collection.schema ? null : e.$emit("editCollection", e.collection)) }, { default: d(() => { var w, h; return [a(s, null, { default: d(() => [e.disableDrag ? R("", !0) : (m(), C(o, { key: 0, class: "drag-handle", name: "drag_handle" }))]), _: 1 }), S("div", OF, [a(o, { color: ((w = e.collection.meta) == null ? void 0 : w.hidden) ? "var(--foreground-subdued)" : e.collection.color, class: "collection-icon", name: ((h = e.collection.meta) == null ? void 0 : h.hidden) ? "visibility_off" : e.collection.icon }, null, 8, ["color", "name"]), S("span", null, b(e.collection.name), 1)]), e.collection.type === "alias" || e.nestedCollections.length ? (m(), I(se, { key: 0 }, [e.collapseLoading ? (m(), C(r, { key: 0, small: "", indeterminate: "" })) : e.nestedCollections.length ? ee((m(), C(o, { key: 1, name: e.collapseIcon, clickable: e.nestedCollections.length > 0, onClick: Ae(e.toggleCollapse, ["stop", "prevent"]) }, null, 8, ["name", "clickable", "onClick"])), [[y, e.collapseTooltip]]) : (m(), C(o, { key: 2, name: e.collapseIcon }, null, 8, ["name"]))], 64)) : R("", !0), a(p, { collection: e.collection }, null, 8, ["collection"])] }), _: 1 }, 8, ["class", "to"]), a(_, { "force-fallback": !0, "model-value": e.nestedCollections, group: { name: "collections" }, "swap-threshold": .3, class: "drag-container", "item-key": "collection", handle: ".drag-handle", "onUpdate:modelValue": e.onGroupSortChange }, { item: d(({ element: w }) => [a(v, { collection: w, collections: e.collections, onEditCollection: t[1] || (t[1] = h => e.$emit("editCollection", h)), onSetNestedSort: t[2] || (t[2] = h => e.$emit("setNestedSort", h)) }, null, 8, ["collection", "collections"])]), _: 1 }, 8, ["model-value", "swap-threshold", "onUpdate:modelValue"])]) } var jF = B(TF, [["render", LF], ["__scopeId", "data-v-3d219244"]]); const RF = z({ name: "CollectionDialog", props: { modelValue: { type: Boolean, default: !1 }, collection: { type: Object, default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { var r, p, f, v, _, y, g, w, h, k, F, A; const { t: n } = x(), l = He(), i = Xt({ collection: (p = (r = e.collection) == null ? void 0 : r.collection) != null ? p : null, icon: (v = (f = e.collection) == null ? void 0 : f.icon) != null ? v : "folder", note: (g = (y = (_ = e.collection) == null ? void 0 : _.meta) == null ? void 0 : y.note) != null ? g : null, color: (h = (w = e.collection) == null ? void 0 : w.color) != null ? h : null, translations: (A = (F = (k = e.collection) == null ? void 0 : k.meta) == null ? void 0 : F.translations) != null ? A : null }); _e(() => e.modelValue, (P, L) => { var T, N, O, U, q, K, W, te, G, X, ve, ae; M.exports.isEqual(P, L) === !1 && (i.collection = (N = (T = e.collection) == null ? void 0 : T.collection) != null ? N : null, i.icon = (U = (O = e.collection) == null ? void 0 : O.icon) != null ? U : "folder", i.note = (W = (K = (q = e.collection) == null ? void 0 : q.meta) == null ? void 0 : K.note) != null ? W : null, i.color = (G = (te = e.collection) == null ? void 0 : te.color) != null ? G : null, i.translations = (ae = (ve = (X = e.collection) == null ? void 0 : X.meta) == null ? void 0 : ve.translations) != null ? ae : null) }); const u = E(!1); return { values: i, cancel: o, saving: u, save: s, t: n }; function o() { t("update:modelValue", !1) } async function s() { u.value = !0; try { e.collection ? (await ue.patch(`/collections/${e.collection.collection}`, { meta: i }), await l.hydrate()) : (await ue.post("/collections", { collection: i.collection, meta: i }), await l.hydrate()), t("update:modelValue", !1) } catch (P) { Ve(P) } finally { u.value = !1 } } } }), MF = { class: "fields" }; function UF(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-input"), r = c("interface-select-icon"), p = c("interface-select-color"), f = c("interface-list"), v = c("v-card-text"), _ = c("v-button"), y = c("v-card-actions"), g = c("v-card"), w = c("v-dialog"); return m(), C(w, { "model-value": e.modelValue, persistent: "", "onUpdate:modelValue": t[5] || (t[5] = h => e.$emit("update:modelValue", h)), onEsc: e.cancel }, { activator: d(h => [ye(e.$slots, "activator", Je(xe(h)), void 0, !0)]), default: d(() => [a(g, null, { default: d(() => [e.collection ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("edit_folder")), 1)]), _: 1 })) : (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("create_folder")), 1)]), _: 1 })), a(v, null, { default: d(() => [S("div", MF, [a(s, { modelValue: e.values.collection, "onUpdate:modelValue": t[0] || (t[0] = h => e.values.collection = h), disabled: !!e.collection, class: "full collection-key", "db-safe": "", autofocus: "", placeholder: e.t("folder_key") }, null, 8, ["modelValue", "disabled", "placeholder"]), a(r, { width: "half", value: e.values.icon, onInput: t[1] || (t[1] = h => e.values.icon = h) }, null, 8, ["value"]), a(p, { width: "half", value: e.values.color, onInput: t[2] || (t[2] = h => e.values.color = h) }, null, 8, ["value"]), a(s, { modelValue: e.values.note, "onUpdate:modelValue": t[3] || (t[3] = h => e.values.note = h), class: "full", placeholder: e.t("note") }, null, 8, ["modelValue", "placeholder"]), a(f, { width: "full", class: "full", value: e.values.translations, placeholder: e.t("no_translations"), template: "{{ translation }} ({{ language }})", fields: [{ field: "language", name: "$t:language", type: "string", schema: { default_value: "en-US" }, meta: { interface: "system-language", width: "half" } }, { field: "translation", name: "$t:field_options.directus_collections.collection_name", type: "string", meta: { interface: "input", width: "half", options: { placeholder: "$t:field_options.directus_collections.translation_placeholder" } } }], onInput: t[4] || (t[4] = h => e.values.translations = h) }, null, 8, ["value", "placeholder", "fields"])])]), _: 1 }), a(y, null, { default: d(() => [a(_, { secondary: "", onClick: e.cancel }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(_, { disabled: !e.values.collection, loading: e.saving, onClick: e.save }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 3 }, 8, ["model-value", "onEsc"]) } var NF = B(RF, [["render", UF], ["__scopeId", "data-v-ce1c7cd4"]]); const BF = z({ components: { SettingsNavigation: Mt, CollectionItem: jF, CollectionOptions: Ka, Draggable: kt, CollectionDialog: NF }, setup() { const { t: e } = x(), t = E(!1), n = E(), l = He(), i = V(() => Ct(M.exports.sortBy(l.collections.filter(p => p.collection.startsWith("directus_") === !1 && p.meta), ["meta.sort", "collection"]))), u = V(() => i.value.filter(p => { var f; return !((f = p.meta) == null ? void 0 : f.group) })), o = V(() => Ct(M.exports.sortBy(l.collections.filter(p => p.collection.startsWith("directus_") === !1 && !p.meta && p.schema), ["meta.sort", "collection"]))), s = V(() => Ct(M.exports.sortBy(l.collections.filter(p => p.collection.startsWith("directus_") === !0).map(p => Ce(re({}, p), { icon: "settings" })), "collection"))); return { collectionDialogActive: t, t: e, collections: i, tableCollections: o, systemCollections: s, onSort: r, rootCollections: u, editCollection: n }; async function r(p, f = !1) { const v = p.map((_, y) => { var g; return M.exports.merge(_, { meta: { sort: y + 1, group: f ? null : (g = _.meta) == null ? void 0 : g.group } }) }); l.collections = l.collections.map(_ => { const y = v.find(g => g.collection === _.collection); return y ? M.exports.merge({}, _, y) : _ }); try { await Promise.all(v.map(_ => ue.patch(`/collections/${_.collection}`, { meta: { sort: _.meta.sort, group: _.meta.group } }))) } catch (_) { Ve(_) } } } }), qF = { class: "padding-box" }, zF = { class: "collection-name" }, KF = { class: "page-description" }; function HF(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("collection-dialog"), f = c("settings-navigation"), v = c("v-info"), _ = c("collection-item"), y = c("draggable"), g = c("v-list"), w = c("v-list-item-icon"), h = c("router-link"), k = c("collection-options"), F = c("v-list-item"), A = c("v-detail"), P = c("router-view"), L = c("sidebar-detail"), T = c("private-view"), N = we("tooltip"), O = we("md"); return m(), C(T, { title: e.t("settings_data_model") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings"), to: "/settings" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "list_alt" })]), _: 1 })]), actions: d(() => [a(p, { modelValue: e.collectionDialogActive, "onUpdate:modelValue": t[0] || (t[0] = U => e.collectionDialogActive = U) }, { activator: d(({ on: U }) => [ee(a(r, { rounded: "", icon: "", class: "add-folder", onClick: U }, { default: d(() => [a(s, { name: "create_new_folder" })]), _: 2 }, 1032, ["onClick"]), [[N, e.t("create_folder"), void 0, { bottom: !0 }]])]), _: 1 }, 8, ["modelValue"]), ee(a(r, { rounded: "", icon: "", to: "/settings/data-model/+" }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 512), [[N, e.t("create_collection"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(f)]), sidebar: d(() => [a(L, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", KF, null, 512), [[O, e.t("page_help_settings_datamodel_collections")]])]), _: 1 }, 8, ["title"])]), default: d(() => [S("div", qF, [e.collections.length === 0 ? (m(), C(v, { key: 0, type: "warning", icon: "box", title: e.t("no_collections") }, { append: d(() => [a(r, { to: "/settings/data-model/+" }, { default: d(() => [D(b(e.t("create_collection")), 1)]), _: 1 })]), default: d(() => [D(b(e.t("no_collections_copy_admin")) + " ", 1)]), _: 1 }, 8, ["title"])) : (m(), C(g, { key: 1, class: "draggable-list" }, { default: d(() => [a(y, { "force-fallback": !0, "model-value": e.rootCollections, group: { name: "collections" }, "swap-threshold": .3, class: "root-drag-container", "item-key": "collection", handle: ".drag-handle", "onUpdate:modelValue": t[2] || (t[2] = U => e.onSort(U, !0)) }, { item: d(({ element: U }) => [a(_, { collection: U, collections: e.collections, onEditCollection: t[1] || (t[1] = q => e.editCollection = q), onSetNestedSort: e.onSort }, null, 8, ["collection", "collections", "onSetNestedSort"])]), _: 1 }, 8, ["model-value", "swap-threshold"])]), _: 1 })), a(g, { class: "db-only" }, { default: d(() => [(m(!0), I(se, null, he(e.tableCollections, U => ee((m(), C(F, { key: U.collection, class: "collection-row hidden", block: "", dense: "", clickable: "" }, { default: d(() => [a(w, null, { default: d(() => [a(s, { name: "add" })]), _: 1 }), a(h, { class: "collection-name", to: `/settings/data-model/${U.collection}` }, { default: d(() => [a(s, { class: "collection-icon", name: "dns" }), S("span", zF, b(U.name), 1)]), _: 2 }, 1032, ["to"]), a(k, { collection: U }, null, 8, ["collection"])]), _: 2 }, 1536)), [[N, e.t("db_only_click_to_configure")]])), 128))]), _: 1 }), a(A, { label: e.t("system_collections") }, { default: d(() => [(m(!0), I(se, null, he(e.systemCollections, U => (m(), C(_, { key: U.collection, collection: U, collections: e.systemCollections, "disable-drag": "" }, null, 8, ["collection", "collections"]))), 128))]), _: 1 }, 8, ["label"])]), a(P, { name: "add" }), a(p, { "model-value": !!e.editCollection, collection: e.editCollection, "onUpdate:modelValue": t[3] || (t[3] = U => e.editCollection = null) }, null, 8, ["model-value", "collection"])]), _: 1 }, 8, ["title"]) } var WF = B(BF, [["render", HF], ["__scopeId", "data-v-748405d9"]]); function Ha(e, t) { t.field.schema === void 0 && M.exports.set(e, "field.schema", {}) } function Wa(e) { var l, i, u, o; if (!((i = (l = e.field) == null ? void 0 : l.meta) == null ? void 0 : i.interface)) return; const t = St().interfaces.value.find(s => s.id === e.field.meta.interface); if (!t) return; const n = (o = (u = t == null ? void 0 : t.localTypes) == null ? void 0 : u[0]) != null ? o : "standard"; M.exports.set(e, "localType", n) } function Ga(e, t) { var i, u; if (!((u = (i = e.field) == null ? void 0 : i.meta) == null ? void 0 : u.interface)) return; const n = St().interfaces.value.find(o => o.id === e.field.meta.interface); if (!n) return e; if (t.field.type && n.types.includes(t.field.type)) return; const l = n == null ? void 0 : n.types[0]; M.exports.set(e, "field.type", l) } function Ja(e) { const t = e == null ? void 0 : e.localType; switch (t) { case "o2m": case "m2m": case "m2a": case "m2o": case "translations": case "file": case "files": M.exports.set(e, "field.meta.special", [t]); break; case "presentation": M.exports.set(e, "field.meta.special", ["alias", "no-data"]); break; case "group": M.exports.set(e, "field.meta.special", ["alias", "no-data", "group"]); break } } function Qa(e) { e.relations || (e.relations = {}), e.relations.m2o = void 0, e.relations.o2m = void 0 } var GF = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", resetSchema: Ha, setLocalTypeForInterface: Wa, setTypeForInterface: Ga, setSpecialForLocalType: Ja, resetRelations: Qa }); function JF(e, t, n) { const { hasChanged: l } = n; l("localType") && (Xa(e), Za(e, t)), l("field.field") && Ya(e) } function Xa(e) { M.exports.set(e, "field.type", "uuid") } function Za(e, t) { e.relations || (e.relations = {}), e.relations.m2o = { collection: t.collection, field: t.field.field, related_collection: "directus_files", meta: { sort_field: null }, schema: { on_delete: "SET NULL" } } } function Ya(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.m2o) || (e.relations = { m2o: {} }), M.exports.set(e, "relations.m2o.field", e.field.field)) } var QF = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: JF, setTypeToUUID: Xa, prepareRelation: Za, updateRelationField: Ya }); function XF(e, t, n) { const { hasChanged: l } = n; l("localType") && (xa(e), ei(e), ti(e, t), ii(e, t)), l("field.field") && ni(e), l("relations.m2o.related_collection") && li(e, t, n), l("relations.o2m.field") && vo(e, t, n), l("relations.m2o.field") && vo(e, t, n), (l("relations.o2m.collection") || l("relations.m2o.collection")) && si(e), ["relations.o2m.collection", "relations.o2m.field", "relations.m2o.field", "relations.m2o.related_collection", "relations.o2m.meta.sort_field"].some(l) && (ai(e, t, n), ZF(e, t, n)) } function xa(e) { M.exports.set(e, "field.schema", void 0) } function ei(e) { M.exports.set(e, "field.type", "alias") } function ti(e, t) { var n, l; e.relations || (e.relations = {}), e.relations.o2m = { collection: void 0, field: void 0, related_collection: t.collection, meta: { one_field: (l = (n = e.field) == null ? void 0 : n.field) != null ? l : t.field.field, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } }, e.relations.m2o = { collection: void 0, field: void 0, related_collection: void 0, meta: { one_field: null, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } } } function ni(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.o2m) || (e.relations = { o2m: {} }), M.exports.set(e, "relations.o2m.meta.one_field", e.field.field)) } function li(e, t, { getCurrent: n }) { n("relations.o2m.collection") === n("relations.o2m.related_collection") && M.exports.set(e, "relations.o2m.schema.on_delete", "NO ACTION"), n("relations.m2o.collection") === n("relations.m2o.related_collection") && M.exports.set(e, "relations.m2o.schema.on_delete", "NO ACTION") } function vo(e, t, { getCurrent: n }) { M.exports.set(e, "relations.o2m.meta.junction_field", n("relations.m2o.field")), M.exports.set(e, "relations.m2o.meta.junction_field", n("relations.o2m.field")) } function oi(e) { return !!He().getCollection(e) } function _o(e, t) { return !!Pe().getField(e, t) } function ai(e, t, { getCurrent: n }) { const l = n("relations.o2m.collection"); !l || oi(l) ? M.exports.set(e, "collections.junction", void 0) : M.exports.set(e, "collections.junction", { collection: l, meta: { hidden: !0, icon: "import_export" }, schema: { name: l }, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0 }, meta: { hidden: !0 } }] }) } function ZF(e, t, { getCurrent: n }) { var v, _, y; const l = Pe(), i = l.getPrimaryKeyFieldForCollection(t.collection), u = n("relations.o2m.collection"), o = n("relations.o2m.field"), s = n("relations.m2o.field"), r = n("relations.m2o.related_collection"), p = (v = l.getPrimaryKeyFieldForCollection(r)) != null ? v : n("collections.related.fields[0]"), f = n("relations.o2m.meta.sort_field"); u && o && _o(u, o) === !1 ? M.exports.set(e, "fields.junctionCurrent", { collection: u, field: o, type: (_ = i == null ? void 0 : i.type) != null ? _ : "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionCurrent", void 0), u && s && _o(u, s) === !1 ? M.exports.set(e, "fields.junctionRelated", { collection: u, field: s, type: (y = p == null ? void 0 : p.type) != null ? y : "uuid", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionRelated", void 0), u && f && _o(u, f) === !1 ? M.exports.set(e, "fields.sort", { collection: u, field: f, type: "integer", schema: {}, meta: { hidden: !1 } }) : M.exports.set(e, "fields.sort", void 0) } function ii(e, t) { var o, s; const n = Pe(), l = t.collection, i = (s = (o = n.getPrimaryKeyFieldForCollection(l)) == null ? void 0 : o.field) != null ? s : "id", u = ri(l); M.exports.set(e, "relations.o2m.collection", u), M.exports.set(e, "relations.o2m.field", `${l}_${i}`), M.exports.set(e, "relations.m2o.collection", u), M.exports.set(e, "relations.m2o.related_collection", "directus_files"), M.exports.set(e, "relations.m2o.field", "directus_files_id") } function si(e) { var t, n, l, i, u, o; ((n = (t = e == null ? void 0 : e.relations) == null ? void 0 : t.o2m) == null ? void 0 : n.collection) && e.relations.o2m.collection !== ((l = e.relations.m2o) == null ? void 0 : l.collection) && M.exports.set(e, "relations.m2o.collection", e.relations.o2m.collection), ((u = (i = e == null ? void 0 : e.relations) == null ? void 0 : i.m2o) == null ? void 0 : u.collection) && e.relations.m2o.collection !== ((o = e.relations.o2m) == null ? void 0 : o.collection) && M.exports.set(e, "relations.o2m.collection", e.relations.m2o.collection) } function ri(e) { let t = 0, n = l(t); for (; oi(n);)t++, n = l(t); return n; function l(i) { let u = `${e}_files`; return u.startsWith("directus_") && (u = "junction_" + u), i ? u + "_" + i : u } } var YF = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: XF, removeSchema: xa, setTypeToAlias: ei, prepareRelation: ti, updateRelationField: ni, preventCircularConstraint: li, setJunctionFields: vo, generateCollections: ai, setDefaults: ii, matchJunctionCollectionName: si, getAutomaticJunctionCollectionName: ri }); function xF(e, t, n) { const { hasChanged: l } = n; l("localType") && (di(e), ui(e), ci(e)) } function di(e) { M.exports.set(e, "field.schema", void 0) } function ui(e) { M.exports.set(e, "field.type", "alias") } function ci(e) { M.exports.set(e, "field.meta.special", ["alias", "no-data", "group"]) } var e3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: xF, removeSchema: di, setTypeToAlias: ui, setSpecialToGroup: ci }); function t3(e, t, n) { const { hasChanged: l } = n; l("localType") && (pi(e), mi(e), fi(e, t), vi(e, t, n)), l("field.field") && (yi(e), _i(e, t, n)), l("relations.o2m.field") && go(e, t, n), l("relations.m2o.field") && go(e, t, n), (l("relations.o2m.collection") || l("relations.m2o.collection")) && bi(e), l("fields.corresponding") && $i(e), ["relations.o2m.collection", "relations.o2m.field", "relations.m2o.field", "relations.o2m.meta.sort_field", "relations.m2o.meta.one_collection_field"].some(l) && (hi(e, t, n), l3(e, t, n)) } function pi(e) { M.exports.set(e, "field.schema", void 0) } function mi(e) { M.exports.set(e, "field.type", "alias") } function fi(e, t) { var n, l; e.relations || (e.relations = {}), e.relations.o2m = { collection: void 0, field: void 0, related_collection: t.collection, meta: { one_field: (l = (n = e.field) == null ? void 0 : n.field) != null ? l : t.field.field, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } }, e.relations.m2o = { collection: void 0, field: void 0, related_collection: null, meta: { one_field: null, sort_field: null, one_deselect_action: "nullify" }, schema: null } } function vi(e, t, { getCurrent: n }) { var s, r; const l = Pe(), i = t.collection, u = (r = (s = l.getPrimaryKeyFieldForCollection(i)) == null ? void 0 : s.field) != null ? r : "id", o = yo(i, n("field.field")); M.exports.set(e, "relations.o2m.collection", o), M.exports.set(e, "relations.o2m.field", `${i}_${u}`), M.exports.set(e, "relations.m2o.collection", o), M.exports.set(e, "relations.m2o.field", "item"), M.exports.set(e, "relations.m2o.meta.one_allowed_collections", []), M.exports.set(e, "relations.m2o.meta.one_collection_field", "collection") } function _i(e, t, { getCurrent: n }) { n("autoGenerateJunctionRelation") !== !1 && M.exports.set(e, "relations.o2m.collection", yo(n("collection"), n("field.field"))) } function yo(e, t) { let n = 0, l = i(n); for (; gi(l);)n++, l = i(n); return l; function i(u) { let o = `${e}_${t}`; return o.startsWith("directus_") && (o = "junction_" + o), u ? o + "_" + u : o } } function yi(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.o2m) || (e.relations = { o2m: {} }), M.exports.set(e, "relations.o2m.meta.one_field", e.field.field)) } function n3(e, t, { getCurrent: n }) { n("relations.o2m.collection") === n("relations.o2m.related_collection") && M.exports.set(e, "relations.o2m.schema.on_delete", "NO ACTION") } function go(e, t, { getCurrent: n }) { M.exports.set(e, "relations.o2m.meta.junction_field", n("relations.m2o.field")), M.exports.set(e, "relations.m2o.meta.junction_field", n("relations.o2m.field")) } function gi(e) { return !!He().getCollection(e) } function Fl(e, t) { return !!Pe().getField(e, t) } function hi(e, t, { getCurrent: n }) { const l = n("relations.o2m.collection"); !l || gi(l) ? M.exports.set(e, "collections.junction", void 0) : M.exports.set(e, "collections.junction", { collection: l, meta: { hidden: !0, icon: "import_export" }, schema: { name: l }, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0 }, meta: { hidden: !0 } }] }) } function l3(e, t, { getCurrent: n }) { var f; const i = Pe().getPrimaryKeyFieldForCollection(t.collection), u = n("relations.o2m.collection"), o = n("relations.o2m.field"), s = n("relations.m2o.field"), r = n("relations.m2o.meta.one_collection_field"), p = n("relations.o2m.meta.sort_field"); u && o && Fl(u, o) === !1 ? M.exports.set(e, "fields.junctionCurrent", { collection: u, field: o, type: (f = i == null ? void 0 : i.type) != null ? f : "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionCurrent", void 0), u && s && Fl(u, s) === !1 ? M.exports.set(e, "fields.junctionRelated", { collection: u, field: s, type: "string", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionRelated", void 0), u && r && Fl(u, r) === !1 ? M.exports.set(e, "fields.oneCollectionField", { collection: u, field: r, type: "string", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.oneCollectionField", void 0), u && p && Fl(u, p) === !1 ? M.exports.set(e, "fields.sort", { collection: u, field: p, type: "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.sort", void 0) } function bi(e) { var t, n, l, i, u, o; ((n = (t = e == null ? void 0 : e.relations) == null ? void 0 : t.o2m) == null ? void 0 : n.collection) && e.relations.o2m.collection !== ((l = e.relations.m2o) == null ? void 0 : l.collection) && M.exports.set(e, "relations.m2o.collection", e.relations.o2m.collection), ((u = (i = e == null ? void 0 : e.relations) == null ? void 0 : i.m2o) == null ? void 0 : u.collection) && e.relations.m2o.collection !== ((o = e.relations.o2m) == null ? void 0 : o.collection) && M.exports.set(e, "relations.o2m.collection", e.relations.m2o.collection) } function $i(e) { var t, n, l; ((n = (t = e == null ? void 0 : e.fields) == null ? void 0 : t.corresponding) == null ? void 0 : n.field) && M.exports.set(e, "relations.m2o.meta.one_field", e.fields.corresponding.field), ((l = e.fields) == null ? void 0 : l.corresponding) || M.exports.set(e, "relations.m2o.meta.one_field", null) } var o3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: t3, removeSchema: pi, setTypeToAlias: mi, prepareRelation: fi, setDefaults: vi, autoGenerateJunctionCollectionName: _i, getAutomaticJunctionCollectionName: yo, updateRelationField: yi, preventCircularConstraint: n3, setJunctionFields: go, generateCollections: hi, matchJunctionCollectionName: bi, setRelatedOneFieldForCorrespondingField: $i }); function a3(e, t, n) { const { hasChanged: l } = n; l("localType") && (wi(e), ki(e), Si(e, t)), l("autoGenerateJunctionRelation") && bo(e, t, n), l("field.field") && Ci(e), l("relations.m2o.related_collection") && (Vi(e, t, n), bo(e, t, n)), l("relations.o2m.field") && ho(e, t, n), l("relations.m2o.field") && ho(e, t, n), (l("relations.o2m.collection") || l("relations.m2o.collection")) && Ii(e), l("fields.corresponding") && Ei(e), ["relations.o2m.collection", "relations.o2m.field", "relations.m2o.field", "relations.m2o.related_collection", "relations.o2m.meta.sort_field"].some(l) && (Ai(e, t, n), i3(e, t, n)) } function wi(e) { M.exports.set(e, "field.schema", void 0) } function ki(e) { M.exports.set(e, "field.type", "alias") } function Si(e, t) { var n, l; e.relations || (e.relations = {}), e.relations.o2m = { collection: void 0, field: void 0, related_collection: t.collection, meta: { one_field: (l = (n = e.field) == null ? void 0 : n.field) != null ? l : t.field.field, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } }, e.relations.m2o = { collection: void 0, field: void 0, related_collection: void 0, meta: { one_field: null, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } } } function Ci(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.o2m) || (e.relations = { o2m: {} }), M.exports.set(e, "relations.o2m.meta.one_field", e.field.field)) } function Vi(e, t, { getCurrent: n }) { n("relations.o2m.collection") === n("relations.o2m.related_collection") && M.exports.set(e, "relations.o2m.schema.on_delete", "NO ACTION"), n("relations.m2o.collection") === n("relations.m2o.related_collection") && M.exports.set(e, "relations.m2o.schema.on_delete", "NO ACTION") } function ho(e, t, { getCurrent: n }) { M.exports.set(e, "relations.o2m.meta.junction_field", n("relations.m2o.field")), M.exports.set(e, "relations.m2o.meta.junction_field", n("relations.o2m.field")) } function bo(e, t, { getCurrent: n }) { var s, r, p, f, v, _; if (n("autoGenerateJunctionRelation") === !1) return; const l = Pe(), i = t.collection, u = (r = (s = l.getPrimaryKeyFieldForCollection(i)) == null ? void 0 : s.field) != null ? r : "id", o = (f = (p = e.relations) == null ? void 0 : p.m2o) == null ? void 0 : f.related_collection; if (o) { const y = Fi(i, o), g = (_ = (v = l.getPrimaryKeyFieldForCollection(o)) == null ? void 0 : v.field) != null ? _ : "id"; M.exports.set(e, "relations.o2m.collection", y), M.exports.set(e, "relations.m2o.collection", y), M.exports.set(e, "relations.o2m.related_collection", i), M.exports.set(e, "relations.m2o.related_collection", o), M.exports.set(e, "relations.o2m.field", `${i}_${u}`), M.exports.set(e, "relations.m2o.field", `${o}_${g}`), n("relations.o2m.field") === n("relations.m2o.field") && M.exports.set(e, "relations.m2o.field", `related_${n("relations.m2o.field")}`) } else M.exports.set(e, "relations.o2m.collection", void 0), M.exports.set(e, "relations.m2o.collection", void 0), M.exports.set(e, "relations.o2m.related_collection", t.collection), M.exports.set(e, "relations.m2o.related_collection", void 0), M.exports.set(e, "relations.o2m.field", void 0), M.exports.set(e, "relations.m2o.field", void 0) } function Fi(e, t) { let n = 0, l = i(n); for (; $o(l);)n++, l = i(n); return l; function i(u) { let o = `${e}_${t}`; return o.startsWith("directus_") && (o = "junction_" + o), u ? o + "_" + u : o } } function $o(e) { return !!He().getCollection(e) } function wo(e, t) { return !!Pe().getField(e, t) } function Ai(e, t, { getCurrent: n }) { const l = n("relations.o2m.collection"), i = n("relations.m2o.related_collection"); !l || $o(l) ? M.exports.set(e, "collections.junction", void 0) : M.exports.set(e, "collections.junction", { collection: l, meta: { hidden: !0, icon: "import_export" }, schema: { name: l }, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0 }, meta: { hidden: !0 } }] }), i && $o(i) === !1 ? M.exports.set(e, "collections.related", { collection: i, meta: {}, schema: { name: i }, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0 }, meta: { hidden: !0 } }] }) : M.exports.set(e, "collections.related", void 0) } function i3(e, t, { getCurrent: n }) { var y, g, w, h; const l = Pe(), i = ut(), u = l.getPrimaryKeyFieldForCollection(t.collection), o = n("relations.o2m.collection"), s = n("relations.o2m.field"), r = n("relations.m2o.field"), p = n("relations.o2m.meta.sort_field"), f = n("relations.m2o.related_collection"), v = (y = l.getPrimaryKeyFieldForCollection(f)) != null ? y : n("collections.related.fields[0]"), _ = i.relations.find(k => k.collection === o && k.field === r); _ && M.exports.set(e, "relations.m2o.meta.one_field", (g = _.meta) == null ? void 0 : g.one_field), o && s && wo(o, s) === !1 ? M.exports.set(e, "fields.junctionCurrent", { collection: o, field: s, type: (w = u == null ? void 0 : u.type) != null ? w : "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionCurrent", void 0), o && r && wo(o, r) === !1 ? M.exports.set(e, "fields.junctionRelated", { collection: o, field: r, type: (h = v == null ? void 0 : v.type) != null ? h : "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionRelated", void 0), o && p && wo(o, p) === !1 ? M.exports.set(e, "fields.sort", { collection: o, field: p, type: "integer", schema: {}, meta: { hidden: !1 } }) : M.exports.set(e, "fields.sort", void 0) } function Ii(e) { var t, n, l, i, u, o; ((n = (t = e == null ? void 0 : e.relations) == null ? void 0 : t.o2m) == null ? void 0 : n.collection) && e.relations.o2m.collection !== ((l = e.relations.m2o) == null ? void 0 : l.collection) && M.exports.set(e, "relations.m2o.collection", e.relations.o2m.collection), ((u = (i = e == null ? void 0 : e.relations) == null ? void 0 : i.m2o) == null ? void 0 : u.collection) && e.relations.m2o.collection !== ((o = e.relations.o2m) == null ? void 0 : o.collection) && M.exports.set(e, "relations.o2m.collection", e.relations.m2o.collection) } function Ei(e) { var t, n, l; ((n = (t = e == null ? void 0 : e.fields) == null ? void 0 : t.corresponding) == null ? void 0 : n.field) && M.exports.set(e, "relations.m2o.meta.one_field", e.fields.corresponding.field), ((l = e.fields) == null ? void 0 : l.corresponding) || M.exports.set(e, "relations.m2o.meta.one_field", null) } var s3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: a3, removeSchema: wi, setTypeToAlias: ki, prepareRelation: Si, updateRelationField: Ci, preventCircularConstraint: Vi, setJunctionFields: ho, autoGenerateJunctionFields: bo, getAutomaticJunctionCollectionName: Fi, generateCollections: Ai, matchJunctionCollectionName: Ii, setRelatedOneFieldForCorrespondingField: Ei }); function r3(e, t, n) { const { hasChanged: l } = n; l("localType") && Di(e, t), l("field.field") && Ti(e), l("relations.m2o.related_collection") && (Pi(e), Oi(e, t), Li(e, t)), l("fields.corresponding") && ji(e) } function Di(e, t) { e.relations || (e.relations = {}), e.relations.m2o = { collection: t.collection, field: t.field.field, related_collection: void 0, meta: { sort_field: null }, schema: { on_delete: "SET NULL" } } } function Ti(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.m2o) || (e.relations = { m2o: {} }), M.exports.set(e, "relations.m2o.field", e.field.field)) } function Pi(e) { var i, u, o; const t = (u = (i = e.relations) == null ? void 0 : i.m2o) == null ? void 0 : u.related_collection; if (!t) return; ((o = e.collections) == null ? void 0 : o.related) || (e.collections = { related: void 0 }), !!He().getCollection(t) === !1 && (e.collections.related = { collection: t, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0, is_primary_key: !0 }, meta: { hidden: !0 } }], meta: {}, schema: {} }) } function Oi(e, t) { var l, i; const n = (i = (l = e.relations) == null ? void 0 : l.m2o) == null ? void 0 : i.related_collection; !n || (e.relations || (e.relations = {}), n === t.collection && M.exports.set(e, "relations.m2o.schema.on_delete", "NO ACTION")) } function Li(e, t) { var u, o, s, r, p; const n = (o = (u = e.relations) == null ? void 0 : u.m2o) == null ? void 0 : o.related_collection; if (!n) return; const i = Pe().getPrimaryKeyFieldForCollection(n); i ? M.exports.set(e, "field.type", i.type) : ((p = (r = (s = t.collections.related) == null ? void 0 : s.fields) == null ? void 0 : r[0]) == null ? void 0 : p.type) && M.exports.set(e, "field.type", t.collections.related.fields[0].type) } function ji(e) { var t, n, l; ((n = (t = e == null ? void 0 : e.fields) == null ? void 0 : t.corresponding) == null ? void 0 : n.field) && M.exports.set(e, "relations.m2o.meta.one_field", e.fields.corresponding.field), ((l = e.fields) == null ? void 0 : l.corresponding) || M.exports.set(e, "relations.m2o.meta.one_field", null) } var d3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: r3, prepareRelation: Di, updateRelationField: Ti, generateRelatedCollection: Pi, preventCircularConstraint: Oi, setTypeToRelatedPrimaryKey: Li, setRelatedOneFieldForCorrespondingField: ji }); function u3(e, t, n) { const { hasChanged: l } = n; l("localType") && (Ri(e), Mi(e), Ui(e, t)), l("field.field") && Bi(e), l("relations.o2m.collection") && (zi(e), Ni(e, t), Hi(e, t), ko(e, t, n)), l("relations.o2m.field") && (qi(e), Ki(e, t)), l("relations.o2m.meta.sort_field") && ko(e, t, n) } function Ri(e) { M.exports.set(e, "field.schema", void 0) } function Mi(e) { M.exports.set(e, "field.type", "alias") } function Ui(e, t) { var n, l; e.relations || (e.relations = {}), e.relations.o2m = { collection: void 0, field: void 0, related_collection: t.collection, meta: { one_field: (l = (n = e.field) == null ? void 0 : n.field) != null ? l : t.field.field, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } } } function Ni(e, t) { var l, i; const n = (i = (l = e.relations) == null ? void 0 : l.o2m) == null ? void 0 : i.collection; !n || (e.relations || (e.relations = {}), n === t.collection && M.exports.set(e, "relations.o2m.schema.on_delete", "NO ACTION")) } function Bi(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.o2m) || (e.relations = { o2m: {} }), M.exports.set(e, "relations.o2m.meta.one_field", e.field.field)) } function qi(e) { var i, u, o; e.relations || (e.relations = {}); const t = ut(), n = (i = e.relations.o2m) == null ? void 0 : i.collection, l = (u = e.relations.o2m) == null ? void 0 : u.field; if (n && l) { const s = t.getRelationForField(n, l); if (s) { M.exports.set(e, "relations.o2m.schema.on_delete", (o = s.schema) == null ? void 0 : o.on_delete); return } } } function zi(e) { var i, u, o; const t = (u = (i = e.relations) == null ? void 0 : i.o2m) == null ? void 0 : u.collection; if (!t) return; const l = !!He().getCollection(t); ((o = e.collections) == null ? void 0 : o.related) || (e.collections = { related: void 0 }), l === !1 && (e.collections.related = { collection: t, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0, is_primary_key: !0 }, meta: { hidden: !0 } }], meta: {}, schema: {} }) } function Ki(e, t) { var s, r, p, f, v, _, y, g, w; const n = Pe(), l = (f = (r = (s = e.relations) == null ? void 0 : s.o2m) == null ? void 0 : r.collection) != null ? f : (p = t.relations.o2m) == null ? void 0 : p.collection; if (!l) return; const i = t.collection && (_ = (v = n.getPrimaryKeyFieldForCollection(t.collection)) == null ? void 0 : v.type) != null ? _ : "integer", u = (g = (y = e.relations) == null ? void 0 : y.o2m) == null ? void 0 : g.field; if (!u) return; const o = !!n.getField(l, u); ((w = e.fields) == null ? void 0 : w.corresponding) || (e.fields = { corresponding: void 0 }), o === !1 && (e.fields.corresponding = { collection: l, field: u, type: i, schema: {}, meta: { interface: "select-dropdown-m2o", hidden: !0 } }) } function Hi(e, t) { var l, i; const n = (i = (l = e.relations) == null ? void 0 : l.o2m) == null ? void 0 : i.collection; !n || t.fields.corresponding && M.exports.set(e, "fields.corresponding.collection", n) } function ko(e, t, { getCurrent: n }) { const l = n("relations.o2m.meta.sort_field"); if (!l) return; const i = Pe(), u = n("relations.o2m.collection"); !!i.getField(u, l) ? M.exports.set(e, "fields.sort", void 0) : M.exports.set(e, "fields.sort", { collection: u, field: l, type: "integer", schema: {}, meta: { hidden: !1 } }) } var c3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: u3, removeSchema: Ri, setTypeToAlias: Mi, prepareRelation: Ui, preventCircularConstraint: Ni, updateRelationField: Bi, useExistingRelationValues: qi, generateRelatedCollection: zi, generateRelatedField: Ki, updateGeneratedRelatedField: Hi, generateSortField: ko }); function p3(e, t, n) { const { hasChanged: l } = n; l("localType") && (Wi(e), Gi(e), Ji(e)) } function Wi(e) { M.exports.set(e, "field.schema", void 0) } function Gi(e) { M.exports.set(e, "field.type", "alias") } function Ji(e) { M.exports.set(e, "field.meta.special", ["alias", "no-data"]) } var m3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: p3, removeSchema: Wi, setTypeToAlias: Gi, setSpecialToNoData: Ji }); function f3(e, t, n) { const { hasChanged: l } = n; l("field.type") && Qi(e) } function Qi(e) { var n; const t = (n = e.field) == null ? void 0 : n.type; switch (t) { case "uuid": case "hash": case "json": case "csv": case "boolean": case "geometry": M.exports.set(e, "field.meta.special", [t]); break; case void 0: break; default: M.exports.set(e, "field.meta.special", null) } } var v3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: f3, setSpecialForType: Qi }); function _3(e, t, n) { const { hasChanged: l } = n; l("localType") && (Xi(e), Zi(e), Yi(e, t), ns(e, t, n)), l("field.field") && xi(e), l("relations.m2o.related_collection") && es(e, t, n), l("relations.o2m.field") && So(e, t, n), l("relations.m2o.field") && So(e, t, n), ["relations.o2m.collection", "relations.o2m.field", "relations.m2o.field", "relations.m2o.related_collection", "relations.o2m.meta.sort_field"].some(l) && (ts(e, t, n), y3(e, t, n)) } function Xi(e) { M.exports.set(e, "field.schema", void 0) } function Zi(e) { M.exports.set(e, "field.type", "alias") } function Yi(e, t) { var n, l; e.relations || (e.relations = {}), e.relations.o2m = { collection: void 0, field: void 0, related_collection: t.collection, meta: { one_field: (l = (n = e.field) == null ? void 0 : n.field) != null ? l : t.field.field, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } }, e.relations.m2o = { collection: void 0, field: void 0, related_collection: void 0, meta: { one_field: null, sort_field: null, one_deselect_action: "nullify" }, schema: { on_delete: "SET NULL" } } } function xi(e) { var t, n; !((t = e.field) == null ? void 0 : t.field) || (((n = e.relations) == null ? void 0 : n.o2m) || (e.relations = { o2m: {} }), M.exports.set(e, "relations.o2m.meta.one_field", e.field.field)) } function es(e, t, { getCurrent: n }) { n("relations.o2m.collection") === n("relations.o2m.related_collection") && M.exports.set(e, "relations.o2m.schema.on_delete", "NO ACTION"), n("relations.m2o.collection") === n("relations.m2o.related_collection") && M.exports.set(e, "relations.m2o.schema.on_delete", "NO ACTION") } function So(e, t, { getCurrent: n }) { M.exports.set(e, "relations.o2m.meta.junction_field", n("relations.m2o.field")), M.exports.set(e, "relations.m2o.meta.junction_field", n("relations.o2m.field")) } function Co(e) { return !!He().getCollection(e) } function Vo(e, t) { return !!Pe().getField(e, t) } function ts(e, t, { getCurrent: n }) { const l = n("relations.o2m.collection"), i = n("relations.m2o.related_collection"); if (!l || Co(l) ? M.exports.set(e, "collections.junction", void 0) : M.exports.set(e, "collections.junction", { collection: l, meta: { hidden: !0, icon: "import_export" }, schema: { name: l }, fields: [{ field: "id", type: "integer", schema: { has_auto_increment: !0 }, meta: { hidden: !0 } }] }), i && Co(i) === !1) { M.exports.set(e, "collections.related", { collection: i, meta: {}, schema: { name: i }, fields: [{ field: "code", type: "string", schema: { is_primary_key: !0 }, meta: {} }, { field: "name", type: "string", schema: {}, meta: {} }] }); const u = M.exports.get(t, "relations.m2o.related_collection"); t.items && t.items[u] && delete t.items[u], e.items = { [i]: [{ code: "en-US", name: "English" }, { code: "de-DE", name: "German" }, { code: "fr-FR", name: "French" }, { code: "ru-RU", name: "Russian" }, { code: "es-ES", name: "Spanish" }, { code: "it-IT", name: "Italian" }, { code: "pt-BR", name: "Portuguese" }] } } else M.exports.set(e, "collections.related", void 0), e.items = {} } function y3(e, t, { getCurrent: n }) { var v, _, y; const l = Pe(), i = l.getPrimaryKeyFieldForCollection(t.collection), u = n("relations.o2m.collection"), o = n("relations.o2m.field"), s = n("relations.m2o.field"), r = n("relations.m2o.related_collection"), p = (v = l.getPrimaryKeyFieldForCollection(r)) != null ? v : n("collections.related.fields[0]"), f = n("relations.o2m.sort_field"); u && o && Vo(u, o) === !1 ? M.exports.set(e, "fields.junctionCurrent", { collection: u, field: o, type: (_ = i == null ? void 0 : i.type) != null ? _ : "integer", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionCurrent", void 0), u && s && Vo(u, s) === !1 ? M.exports.set(e, "fields.junctionRelated", { collection: u, field: s, type: (y = p == null ? void 0 : p.type) != null ? y : "string", schema: {}, meta: { hidden: !0 } }) : M.exports.set(e, "fields.junctionRelated", void 0), u && f && Vo(u, f) === !1 ? M.exports.set(e, "fields.sort", { collection: u, field: f, type: "integer", schema: {}, meta: { hidden: !1 } }) : M.exports.set(e, "fields.sort", void 0) } function ns(e, t, { getCurrent: n }) { var p, f, v, _; const l = Pe(), i = t.collection, u = (f = (p = l.getPrimaryKeyFieldForCollection(i)) == null ? void 0 : p.field) != null ? f : "id", o = ls(i); M.exports.set(e, "relations.o2m.collection", o), M.exports.set(e, "relations.o2m.field", `${i}_${u}`), M.exports.set(e, "relations.m2o.collection", o), M.exports.set(e, "relations.m2o.related_collection", "languages"); const s = n("relations.m2o.related_collection"), r = (_ = (v = l.getPrimaryKeyFieldForCollection(s)) == null ? void 0 : v.field) != null ? _ : "id"; M.exports.set(e, "relations.m2o.field", `${s}_${r}`), n("field.field") || (M.exports.set(e, "field.field", "translations"), M.exports.set(e, "relations.o2m.meta", "translations")) } function ls(e) { let t = 0, n = l(t); for (; Co(n);)t++, n = l(t); return n; function l(i) { let u = `${e}_translations`; return u.startsWith("directus_") && (u = "junction_" + u), i ? u + "_" + i : u } } var g3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", applyChanges: _3, removeSchema: Xi, setTypeToAlias: Zi, prepareRelation: Yi, updateRelationField: xi, preventCircularConstraint: es, setJunctionFields: So, generateCollections: ts, setDefaults: ns, getAutomaticJunctionCollectionName: ls }), h3 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", global: GF, file: QF, files: YF, group: e3, m2a: o3, m2m: s3, m2o: d3, o2m: c3, presentation: m3, standard: v3, translations: g3 }); function Xn(e, t) { var o, s, r, p; const n = Pe(), l = ut(), i = n.getField(e, t), u = l.getRelationsForField(e, t); if (!i) return null; if (u.length === 0) return i.type === "alias" ? ((s = (o = i.meta) == null ? void 0 : o.special) == null ? void 0 : s.includes("group")) ? "group" : "presentation" : "standard"; if (u.length === 1) { const f = u[0]; return f.related_collection === "directus_files" ? "file" : f.collection === e && f.field === t ? "m2o" : "o2m" } if (u.length === 2) { if ((((r = i.meta) == null ? void 0 : r.special) || []).includes("translations")) return "translations"; if ((((p = i.meta) == null ? void 0 : p.special) || []).includes("m2a")) return "m2a"; const f = u.find(v => { var _; return v.collection === e && v.field === t || v.related_collection === e && ((_ = v.meta) == null ? void 0 : _.one_field) === t }); return (f == null ? void 0 : f.collection) === e && (f == null ? void 0 : f.field) === t ? "m2o" : u[0].related_collection === "directus_files" || u[1].related_collection === "directus_files" ? "files" : "m2m" } return "standard" } function Ee(e, t) { const n = ft(); return V({ get() { return M.exports.get(n, e, t) }, set(l) { n.update(M.exports.set({}, e, l)) } }) } const ft = Ft({ id: "fieldDetailStore", state: () => ({ collection: void 0, editing: "+", field: { field: void 0, type: void 0, schema: {}, meta: {} }, relations: { m2o: void 0, o2m: void 0 }, collections: { junction: void 0, related: void 0 }, fields: { corresponding: void 0, junctionCurrent: void 0, junctionRelated: void 0, sort: void 0, oneCollectionField: void 0 }, items: {}, localType: "standard", autoGenerateJunctionRelation: !0, saving: !1 }), actions: { startEditing(e, t, n) { if (this.$reset(), this.collection = e, this.field.collection = e, this.editing = t, t !== "+") { const l = Pe(), i = ut(); this.field = M.exports.cloneDeep(l.getField(e, t)), this.localType = Xn(e, t); const u = M.exports.cloneDeep(i.getRelationsForField(e, t)); this.relations.o2m = u.find(o => { var s; return o.related_collection === e && ((s = o.meta) == null ? void 0 : s.one_field) === t }), ["files", "m2m", "translations", "m2a"].includes(this.localType) ? this.relations.m2o = u.find(o => { var s, r, p; return ((s = o.meta) == null ? void 0 : s.id) !== ((p = (r = this.relations.o2m) == null ? void 0 : r.meta) == null ? void 0 : p.id) }) : this.relations.m2o = u.find(o => o.collection === e && o.field === t) } else this.update({ localType: n != null ? n : "standard" }) }, update(e) { const t = u => M.exports.has(e, u) && M.exports.get(e, u) !== M.exports.get(this, u), n = u => M.exports.has(e, u) ? M.exports.get(e, u) : M.exports.get(this, u), l = { hasChanged: t, getCurrent: n }; t("field.meta.interface") && (Wa(e), Ga(e, this)), t("localType") && (Ha(e, this), Qa(e), Ja(e)); const i = n("localType"); i && h3[i].applyChanges(e, this, l), this.$patch(e) }, async save() { if (!this.collection || !this.field.field) return; const e = He(), t = Pe(), n = ut(); this.saving = !0; try { await t.upsertField(this.collection, this.editing, this.field); for (const l of Object.values(this.collections)) !l || !l.collection || await e.upsertCollection(l == null ? void 0 : l.collection, l); for (const l of Object.values(this.fields)) !l || !l.collection || !l.field || await t.upsertField(l.collection, l.field, l); for (const l of Object.values(this.relations)) !l || !l.collection || !l.field || await n.upsertRelation(l.collection, l.field, l); for (const l of Object.keys(this.items)) await ue.post(`/items/${l}`, this.items[l]); await t.hydrate() } catch (l) { Ve(l) } finally { this.saving = !1 } } }, getters: { missingConfiguration(e) { const t = ["field.field", "field.type", "collection"], n = e.localType; return (n === "files" || n === "m2m" || n === "translations") && t.push("relations.o2m.collection", "relations.o2m.field", "relations.o2m.related_collection", "relations.m2o.collection", "relations.m2o.field", "relations.m2o.related_collection"), (n === "file" || n === "m2o") && t.push("relations.m2o.collection", "relations.m2o.field", "relations.m2o.related_collection"), n === "o2m" && t.push("relations.o2m.collection", "relations.o2m.field", "relations.o2m.related_collection"), n === "m2a" && t.push("relations.o2m.collection", "relations.o2m.field", "relations.o2m.related_collection", "relations.m2o.collection", "relations.m2o.field", "relations.m2o.meta.one_allowed_collections", "relations.m2o.meta.one_collection_field"), t.filter(l => (M.exports.has(e, l) && M.exports.isEmpty(M.exports.get(e, l)) === !1) === !1) }, readyToSave() { return this.missingConfiguration.length === 0 }, interfacesForType() { const { interfaces: e } = St(); return M.exports.orderBy(e.value.filter(t => { if (t.system === !0) return !1; const n = t.types.includes(this.field.type || "alias"), l = (t.localTypes || ["standard"]).includes(this.localType); return n && l }), ["name"]) }, displaysForType() { const { displays: e } = xt(); return M.exports.orderBy(e.value.filter(t => { const n = t.types.includes(this.field.type || "alias"), l = (t.localTypes || ["standard"]).includes(this.localType); return n && l }), ["name"]) }, generationInfo() { const e = []; for (const t of Object.values(this.collections)) !t || !t.collection || e.push({ name: t.collection, type: "collection" }); for (const t of Object.values(this.fields)) !t || !t.collection || !t.field || e.push({ name: `${t.collection}.${t.field}`, type: "field" }); return e } } }); function ct(e, t, n) { return V({ get() { var l, i; return (i = (l = e.value) == null ? void 0 : l[t]) != null ? i : Rn(n) }, set(l) { e.value = Object.assign({}, e.value, { [t]: l }) } }) } const b3 = z({ props: { type: { type: String, required: !0 }, extension: { type: String, required: !0 }, showAdvanced: { type: Boolean, default: !1 } }, setup(e) { const t = ft(), { t: n } = x(), { collection: l, field: i, relations: u, fields: o, collections: s } = $t(t), { interfaces: r } = St(), { displays: p } = xt(), f = V(() => e.type === "interface" ? r.value.find(g => g.id === e.extension) : e.type === "display" ? p.value.find(g => g.id === e.extension) : null), v = V(() => f.value ? f.value.options && "render" in f.value.options : !1), _ = V(() => { if (!f.value) return []; if (!f.value.options) return []; if (v.value === !0) return []; let g; return typeof f.value.options == "function" ? g = f.value.options(t) : g = f.value.options, Array.isArray(g) ? g : e.showAdvanced ? [...g.standard, ...g.advanced] : g.standard }), y = V({ get() { const g = e.type === "interface" ? "field.meta.options" : "field.meta.display_options"; return M.exports.get(t, g) }, set(g) { const w = e.type === "interface" ? "options" : "display_options"; t.$patch(h => { h.field.meta = Ce(re({}, h.field.meta), { [w]: g }) }) } }); return { usesCustomComponent: v, extensionInfo: f, optionsFields: _, options: y, collection: l, field: i, relations: u, fields: o, collections: s, t: n } } }); function $3(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-form"); return e.usesCustomComponent === !1 && e.optionsFields.length === 0 ? (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("no_options_available")), 1)]), _: 1 })) : e.usesCustomComponent === !1 ? (m(), C(s, { key: 1, modelValue: e.options, "onUpdate:modelValue": t[0] || (t[0] = r => e.options = r), class: "extension-options", fields: e.optionsFields, "primary-key": "+" }, null, 8, ["modelValue", "fields"])) : (m(), C(Ne(`${e.type}-options-${e.extensionInfo.id}`), { key: 2, value: e.options, collection: e.collection, field: e.field, onInput: t[1] || (t[1] = r => e.options = r) }, null, 8, ["value", "collection", "field"])) } var Fo = B(b3, [["render", $3]]); const w3 = z({ props: { modelValue: { type: String, default: null }, disabled: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e) { const { t } = x(), n = He(), l = V(() => !!n.getCollection(e.modelValue)), i = V(() => M.exports.orderBy(n.collections.filter(o => o.collection.startsWith("directus_") === !1 && o.schema), ["sort", "collection"], ["asc"])), u = V(() => M.exports.orderBy(n.crudSafeSystemCollections.filter(o => o.collection.startsWith("directus_") === !0), ["collection"], ["asc"])); return { t, collectionExists: l, availableCollections: i, systemCollections: u } } }); function k3(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-content"), r = c("v-list-item"), p = c("v-divider"), f = c("v-list-group"), v = c("v-list"), _ = c("v-menu"), y = c("v-text-overflow"), g = c("v-input"), w = we("tooltip"); return m(), C(g, { key: "related-collection-select", "model-value": e.modelValue, class: de({ matches: e.collectionExists }), "db-safe": "", nullable: !1, disabled: e.disabled, placeholder: e.t("collection") + "...", "onUpdate:modelValue": t[0] || (t[0] = h => e.$emit("update:modelValue", h)) }, et({ _: 2 }, [e.disabled ? void 0 : { name: "append", fn: d(() => [a(_, { "show-arrow": "", placement: "bottom-end" }, { activator: d(({ toggle: h }) => [ee(a(o, { name: "list_alt", clickable: "", disabled: e.disabled, onClick: h }, null, 8, ["disabled", "onClick"]), [[w, e.t("select_existing")]])]), default: d(() => [a(v, { class: "monospace" }, { default: d(() => [(m(!0), I(se, null, he(e.availableCollections, h => (m(), C(r, { key: h.collection, active: e.modelValue === h.collection, clickable: "", onClick: k => e.$emit("update:modelValue", h.collection) }, { default: d(() => [a(s, null, { default: d(() => [D(b(h.collection), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["active", "onClick"]))), 128)), a(p), a(f, null, { activator: d(() => [D(b(e.t("system")), 1)]), default: d(() => [(m(!0), I(se, null, he(e.systemCollections, h => (m(), C(r, { key: h.collection, active: e.modelValue === h.collection, clickable: "", onClick: k => e.$emit("update:modelValue", h.collection) }, { default: d(() => [a(s, null, { default: d(() => [D(b(h.collection), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["active", "onClick"]))), 128))]), _: 1 })]), _: 1 })]), _: 1 })]) }, e.disabled ? { name: "input", fn: d(() => [a(y, { text: e.modelValue }, null, 8, ["text"])]) } : void 0]), 1032, ["model-value", "class", "disabled", "placeholder"]) } var Vn = B(w3, [["render", k3]]); const S3 = z({ props: { modelValue: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, collection: { type: String, default: null }, typeDenyList: { type: Array, default: () => [] }, placeholder: { type: String, default: () => ze.global.t("foreign_key") + "..." }, nullable: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e) { const { t } = x(), n = Pe(), l = V(() => e.collection ? n.getFieldsForCollectionAlphabetical(e.collection).map(u => { var o; return { text: u.field, value: u.field, disabled: !u.schema || ((o = u.schema) == null ? void 0 : o.is_primary_key) || e.typeDenyList.includes(u.type) } }) : []), i = V(() => !e.collection || !e.modelValue ? !1 : !!n.getField(e.collection, e.modelValue)); return { t, fields: l, fieldExists: i } } }); function C3(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-content"), r = c("v-list-item"), p = c("v-list"), f = c("v-menu"), v = c("v-text-overflow"), _ = c("v-input"), y = we("tooltip"); return m(), C(_, { "model-value": e.modelValue, "db-safe": "", nullable: e.nullable, disabled: e.disabled, placeholder: e.placeholder, class: de({ matches: e.fieldExists }), "onUpdate:modelValue": t[0] || (t[0] = g => e.$emit("update:modelValue", g)) }, et({ _: 2 }, [e.fields && e.fields.length > 0 && !e.disabled ? { name: "append", fn: d(() => [a(f, { "show-arrow": "", placement: "bottom-end" }, { activator: d(({ toggle: g }) => [ee(a(o, { name: "list_alt", clickable: "", onClick: g }, null, 8, ["onClick"]), [[y, e.t("select_existing")]])]), default: d(() => [a(p, { class: "monospace" }, { default: d(() => [(m(!0), I(se, null, he(e.fields, g => (m(), C(r, { key: g.value, active: e.modelValue === g.value, disabled: g.disabled, clickable: "", onClick: w => e.$emit("update:modelValue", g.value) }, { default: d(() => [a(s, null, { default: d(() => [D(b(g.text), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["active", "disabled", "onClick"]))), 128))]), _: 1 })]), _: 1 })]) } : void 0, e.disabled ? { name: "input", fn: d(() => [a(v, { text: e.modelValue }, null, 8, ["text"])]) } : void 0]), 1032, ["model-value", "nullable", "disabled", "placeholder", "class"]) } var Zn = B(S3, [["render", C3]]); const V3 = z({ components: { RelatedCollectionSelect: Vn, RelatedFieldSelect: Zn }, props: { localType: { type: String, required: !0 } }, setup() { const e = He(), { t } = x(), n = Ee("relations.m2o.related_collection"), l = Ee("relations.o2m.collection"), i = Ee("relations.o2m.field"), u = Ee("relations.m2o.meta.one_allowed_collections", []); return { availableCollections: V(() => M.exports.orderBy([...e.allCollections, { divider: !0 }, { name: t("system"), selectable: !1, children: e.crudSafeSystemCollections }], ["collection"], ["asc"])), oneAllowedCollections: u, relatedCollectionM2O: n, o2mCollection: l, o2mField: i, t } } }), F3 = { class: "relationship" }, A3 = { key: 0, class: "field full" }, I3 = { class: "label type-label" }, E3 = { class: "field half-left" }, D3 = { class: "label type-label" }, T3 = { class: "field half-right" }, P3 = { class: "label type-label" }, O3 = { key: 2, class: "field full" }, L3 = { class: "label type-label" }, j3 = { key: 3, class: "field full" }, R3 = { class: "label type-label" }, M3 = { key: 4, class: "field full" }, U3 = { class: "label type-label" }; function N3(e, t, n, l, i, u) { const o = c("v-icon"), s = c("related-collection-select"), r = c("related-field-select"), p = c("v-select"), f = we("tooltip"); return m(), I("div", F3, [e.localType === "m2o" ? (m(), I("div", A3, [S("div", I3, [D(b(e.t("related_collection")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(s, { modelValue: e.relatedCollectionM2O, "onUpdate:modelValue": t[0] || (t[0] = v => e.relatedCollectionM2O = v) }, null, 8, ["modelValue"])])) : e.localType === "o2m" ? (m(), I(se, { key: 1 }, [S("div", E3, [S("div", D3, [D(b(e.t("related_collection")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(s, { modelValue: e.o2mCollection, "onUpdate:modelValue": t[1] || (t[1] = v => e.o2mCollection = v) }, null, 8, ["modelValue"])]), S("div", T3, [S("div", P3, [D(b(e.t("foreign_key")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(r, { modelValue: e.o2mField, "onUpdate:modelValue": t[2] || (t[2] = v => e.o2mField = v), collection: e.o2mCollection, disabled: !e.o2mCollection }, null, 8, ["modelValue", "collection", "disabled"])])], 64)) : R("", !0), e.localType === "m2m" ? (m(), I("div", O3, [S("div", L3, [D(b(e.t("related_collection")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(s, { modelValue: e.relatedCollectionM2O, "onUpdate:modelValue": t[3] || (t[3] = v => e.relatedCollectionM2O = v) }, null, 8, ["modelValue"])])) : R("", !0), e.localType === "translations" ? (m(), I("div", j3, [S("div", R3, [D(b(e.t("languages_collection")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(s, { modelValue: e.relatedCollectionM2O, "onUpdate:modelValue": t[4] || (t[4] = v => e.relatedCollectionM2O = v) }, null, 8, ["modelValue"])])) : R("", !0), e.localType === "m2a" ? (m(), I("div", M3, [S("div", U3, [D(b(e.t("related_collections")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[f, e.t("required")]])]), a(p, { modelValue: e.oneAllowedCollections, "onUpdate:modelValue": t[5] || (t[5] = v => e.oneAllowedCollections = v), placeholder: e.t("collection") + "...", items: e.availableCollections, "item-value": "collection", "item-text": "name", "item-disabled": "meta.singleton", multiple: "", "multiple-preview-threshold": 0 }, null, 8, ["modelValue", "placeholder", "items"])])) : R("", !0)]) } var B3 = B(V3, [["render", N3], ["__scopeId", "data-v-46184414"]]); const q3 = z({ components: { ExtensionOptions: Fo, RelationshipConfiguration: B3 }, props: { row: { type: Number, default: null }, chosenInterface: { type: String, required: !0 } }, emits: ["save", "toggleAdvanced"], setup(e) { const t = ft(), { readyToSave: n, saving: l, localType: i, collection: u } = $t(t), { t: o } = x(), { interfaces: s } = St(), r = V(() => s.value.find(w => w.id === e.chosenInterface)), p = V(() => r.value ? r.value.types.map(w => ({ text: o(w), value: w })) : []), f = Ee("field.field"), v = Ee("field.type"), _ = Ee("field.schema.default_value"), y = Ee("field.meta.required", !1), g = Ee("field.meta.note"); return { key: f, t: o, type: v, typeOptions: p, defaultValue: _, required: y, note: g, readyToSave: n, saving: l, localType: i, collection: u } } }), z3 = { class: "setup" }, K3 = { class: "schema" }, H3 = { class: "field half-left" }, W3 = { class: "label type-label" }, G3 = { class: "field half-right" }, J3 = { class: "label type-label" }, Q3 = { class: "field half-left" }, X3 = { class: "label type-label" }, Z3 = { class: "field half-right" }, Y3 = { class: "label type-label" }; function x3(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-select"), p = c("v-checkbox"), f = c("relationship-configuration"), v = c("v-divider"), _ = c("extension-options"), y = c("v-button"), g = we("tooltip"); return m(), I("div", { class: "field-configuration", style: Ke({ "grid-row": e.row }) }, [S("div", z3, [S("div", K3, [S("div", H3, [S("div", W3, [D(b(e.t("key")) + " ", 1), ee(a(o, { class: "required-mark", sup: "", name: "star" }, null, 512), [[g, e.t("required")]])]), a(s, { modelValue: e.key, "onUpdate:modelValue": t[0] || (t[0] = w => e.key = w), autofocus: "", class: "monospace", "db-safe": "", placeholder: e.t("a_unique_column_name") }, null, 8, ["modelValue", "placeholder"])]), S("div", G3, [S("div", J3, b(e.t("type")), 1), a(r, { modelValue: e.type, "onUpdate:modelValue": t[1] || (t[1] = w => e.type = w), items: e.typeOptions, disabled: e.typeOptions.length === 1 }, null, 8, ["modelValue", "items", "disabled"])]), S("div", Q3, [S("div", X3, b(e.t("default_value")), 1), e.type === "boolean" ? (m(), C(p, { key: 0, modelValue: e.defaultValue, "onUpdate:modelValue": t[2] || (t[2] = w => e.defaultValue = w), block: "", label: e.t("enabled") }, null, 8, ["modelValue", "label"])) : (m(), C(s, { key: 1, modelValue: e.defaultValue, "onUpdate:modelValue": t[3] || (t[3] = w => e.defaultValue = w), class: "monospace", placeholder: "NULL" }, null, 8, ["modelValue"]))]), S("div", Z3, [S("div", Y3, b(e.t("required")), 1), a(p, { modelValue: e.required, "onUpdate:modelValue": t[4] || (t[4] = w => e.required = w), block: "", label: e.t("require_value_to_be_set") }, null, 8, ["modelValue", "label"])])]), a(f, { "local-type": e.localType }, null, 8, ["local-type"]), a(v, { inline: "" }), a(_, { type: "interface", extension: e.chosenInterface }, null, 8, ["extension"]), a(y, { class: "save", "full-width": "", disabled: !e.readyToSave, loading: e.saving, onClick: t[5] || (t[5] = w => e.$emit("save")) }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading"]), S("button", { class: "toggle-advanced", onClick: t[6] || (t[6] = w => e.$emit("toggleAdvanced")) }, b(e.t("continue_in_advanced_field_creation_mode")), 1)])], 4) } var eA = B(q3, [["render", x3], ["__scopeId", "data-v-bc096a84"]]); const tA = z({ components: { FieldConfiguration: eA }, props: { collection: { type: Object, required: !0 } }, emits: ["save", "toggleAdvanced"], setup(e) { const { collection: t } = je(e), { t: n } = x(), l = ft(); _e(t, () => l.update({ collection: t.value.collection }), { immediate: !0 }); const { interfaces: i } = St(), u = V(() => M.exports.orderBy(i.value.filter(v => !v.system), ["order"])), o = V(() => [{ key: "standard", name: n("interface_group_text_and_numbers"), interfaces: u.value.filter(v => v.group === "standard") }, { key: "selection", name: n("interface_group_selection"), interfaces: u.value.filter(v => v.group === "selection") }, { key: "relational", name: n("interface_group_relational"), interfaces: u.value.filter(v => v.group === "relational") }, { key: "presentation", name: n("interface_group_presentation"), interfaces: u.value.filter(v => v.group === "presentation") }, { key: "group", name: n("interface_group_groups"), interfaces: u.value.filter(v => v.group === "group") }, { key: "other", name: n("interface_group_other"), interfaces: u.value.filter(v => v.group === "other") }]), s = Ee("field.meta.interface"), r = V(() => { if (!s.value) return null; let v = null; if (o.value.forEach(g => { const w = g.interfaces.findIndex(h => h.id === s.value); w !== -1 && (v = w) }), v === null) return null; const _ = window.innerWidth; let y = 1; return _ > 400 && (y = 2), _ > 600 && (y = 3), _ > 840 && (y = 4), Math.ceil((v + 1) / y) + 1 }); return { t: n, interfaces: i, groups: o, isSVG: p, syncRefProperty: ct, chosenInterface: s, configRow: r, toggleInterface: f }; function p(v) { return v.startsWith("<svg") } function f(v) { s.value === v ? s.value = null : s.value = v } } }), nA = { class: "content" }, lA = { class: "grid" }, oA = ["onClick"], aA = { class: "preview" }, iA = ["innerHTML"], sA = ["src"], rA = { key: 1, class: "fallback" }; function dA(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-text-overflow"), r = c("field-configuration"), p = c("transition-expand"); return m(), I("div", nA, [(m(!0), I(se, null, he(e.groups, f => (m(), I("div", { key: f.key, class: "group" }, [S("h2", null, b(f.name), 1), S("div", lA, [(m(!0), I(se, null, he(f.interfaces, v => (m(), I("button", { key: v.id, class: de(["interface", { active: e.chosenInterface === v.id, gray: e.chosenInterface && e.chosenInterface !== v.id }]), onClick: _ => e.toggleInterface(v.id) }, [S("div", aA, [v.preview ? (m(), I(se, { key: 0 }, [e.isSVG(v.preview) ? (m(), I("span", { key: 0, innerHTML: v.preview }, null, 8, iA)) : (m(), I("img", { key: 1, src: v.preview, alt: "" }, null, 8, sA))], 64)) : (m(), I("span", rA, [a(o, { large: "", name: v.icon }, null, 8, ["name"])]))]), a(s, { text: v.name, class: "name" }, null, 8, ["text"])], 10, oA))), 128)), a(p, null, { default: d(() => [e.chosenInterface && !!f.interfaces.some(v => v.id === e.chosenInterface) ? (m(), C(r, { key: 0, row: e.configRow, "chosen-interface": e.chosenInterface, onSave: t[0] || (t[0] = v => e.$emit("save")), onToggleAdvanced: t[1] || (t[1] = v => e.$emit("toggleAdvanced")) }, null, 8, ["row", "chosen-interface"])) : R("", !0)]), _: 2 }, 1024)])]))), 128))]) } var uA = B(tA, [["render", dA], ["__scopeId", "data-v-ac90bd84"]]); const cA = [{ text: "$t:string", value: "string" }, { text: "$t:text", value: "text" }, { divider: !0 }, { text: "$t:boolean", value: "boolean" }, { divider: !0 }, { text: "$t:integer", value: "integer" }, { text: "$t:bigInteger", value: "bigInteger" }, { text: "$t:float", value: "float" }, { text: "$t:decimal", value: "decimal" }, { divider: !0 }, { text: "$t:timestamp", value: "timestamp" }, { text: "$t:datetime", value: "dateTime" }, { text: "$t:date", value: "date" }, { text: "$t:time", value: "time" }, { divider: !0 }, { text: "$t:json", value: "json" }, { text: "$t:csv", value: "csv" }, { text: "$t:uuid", value: "uuid" }, { text: "$t:hash", value: "hash" }, { divider: !0 }, { text: "$t:geometry", value: "geometry" }, { text: "$t:geometry.Point", value: "geometry.Point" }, { text: "$t:geometry.LineString", value: "geometry.LineString" }, { text: "$t:geometry.Polygon", value: "geometry.Polygon" }, { text: "$t:geometry.MultiPoint", value: "geometry.MultiPoint" }, { text: "$t:geometry.MultiLineString", value: "geometry.MultiLineString" }, { text: "$t:geometry.MultiPolygon", value: "geometry.MultiPolygon" }], pA = z({ setup() { const e = ft(), { localType: t, relations: n, editing: l } = $t(e), i = V(() => l.value !== "+"), u = Ee("field.type"), o = Ee("field.schema.default_value"), s = Ee("field.field"), r = Ee("field.meta.special"), p = Ee("field.schema.max_length"), f = Ee("field.schema.numeric_precision"), v = Ee("field.schema.is_nullable", !0), _ = Ee("field.schema.is_unique", !1), y = Ee("field.schema.numeric_scale"), { t: g } = x(), w = V(() => Ct(cA)), h = V(() => ["file", "files", "o2m", "m2m", "m2a", "m2o", "translations"].includes(t.value)), k = V(() => t.value === "m2o" ? g("determined_by_relationship") : g("choose_a_type")), { onCreateOptions: F, onCreateValue: A } = q(), { onUpdateOptions: P, onUpdateValue: L } = K(), T = V(() => ["uuid", "date", "time", "dateTime", "timestamp"].includes(u.value) && t.value !== "file"), N = V(() => !e.field.schema), O = V(() => { var W; return ((W = e.field.schema) == null ? void 0 : W.is_primary_key) === !0 }), U = V(() => { var W; return (W = e.field.schema) == null ? void 0 : W.is_generated }); return { t: g, typesWithLabels: w, GEOMETRY_TYPES: ha, typeDisabled: h, typePlaceholder: k, defaultValue: o, onCreateOptions: F, onCreateValue: A, onUpdateOptions: P, onUpdateValue: L, hasCreateUpdateTriggers: T, field: s, isAlias: N, type: u, maxLength: p, numericPrecision: f, numericScale: y, special: r, nullable: v, unique: _, isPrimaryKey: O, isExisting: i, isGenerated: U }; function q() { const W = ["uuid", "user-created", "role-created", "date-created"], te = V(() => { var X, ve; if (u.value === "uuid") { const ae = [{ text: g("do_nothing"), value: null }, { text: g("generate_and_save_uuid"), value: "uuid" }, { text: g("save_current_user_id"), value: "user-created" }, { text: g("save_current_user_role"), value: "role-created" }]; return t.value === "m2o" && ((X = n.value.m2o) == null ? void 0 : X.related_collection) === "directus_users" ? ae.filter(({ value: ne }) => [null, "user-created"].includes(ne)) : t.value === "m2o" && ((ve = n.value.m2o) == null ? void 0 : ve.related_collection) === "directus_roles" ? ae.filter(({ value: ne }) => [null, "role-created"].includes(ne)) : ae } else if (["date", "time", "dateTime", "timestamp"].includes(u.value)) return [{ text: g("do_nothing"), value: null }, { text: g("save_current_datetime"), value: "date-created" }]; return [] }), G = V({ get() { var ve; const X = (ve = r.value) != null ? ve : []; for (const ae of W) if (X.includes(ae)) return ae; return null }, set(X) { var ve, ae; r.value = ((ve = r.value) != null ? ve : []).filter(ne => W.includes(ne) === !1), X && (r.value = [...(ae = r.value) != null ? ae : [], X]) } }); return { onCreateSpecials: W, onCreateOptions: te, onCreateValue: G } } function K() { const W = ["user-updated", "role-updated", "date-updated"], te = V(() => { var X, ve; if (u.value === "uuid") { const ae = [{ text: g("do_nothing"), value: null }, { text: g("save_current_user_id"), value: "user-updated" }, { text: g("save_current_user_role"), value: "role-updated" }]; return t.value === "m2o" && ((X = n.value.m2o) == null ? void 0 : X.related_collection) === "directus_users" ? ae.filter(({ value: ne }) => [null, "user-updated"].includes(ne)) : t.value === "m2o" && ((ve = n.value.m2o) == null ? void 0 : ve.related_collection) === "directus_roles" ? ae.filter(({ value: ne }) => [null, "role-updated"].includes(ne)) : ae } else if (["date", "time", "dateTime", "timestamp"].includes(u.value)) return [{ text: g("do_nothing"), value: null }, { text: g("save_current_datetime"), value: "date-updated" }]; return [] }), G = V({ get() { var ve; const X = (ve = r.value) != null ? ve : []; for (const ae of W) if (X.includes(ae)) return ae; return null }, set(X) { var ve, ae; r.value = ((ve = r.value) != null ? ve : []).filter(ne => W.includes(ne) === !1), X && (r.value = [...(ae = r.value) != null ? ae : [], X]) } }); return { onUpdateSpecials: W, onUpdateOptions: te, onUpdateValue: G } } } }), mA = { class: "form" }, fA = { class: "field" }, vA = { class: "label type-label" }, _A = { class: "note" }, yA = { class: "field half" }, gA = { class: "label type-label" }, hA = { key: 0, class: "field half" }, bA = { class: "label type-label" }, $A = { key: 0, class: "field half" }, wA = { class: "label type-label" }, kA = { class: "precision-scale" }, SA = { class: "field half-left" }, CA = { class: "label type-label" }, VA = { class: "field half-right" }, FA = { class: "label type-label" }, AA = { key: 3, class: "field full" }, IA = { class: "label type-label" }, EA = { key: 4, class: "field half-left" }, DA = { class: "label type-label" }, TA = { key: 5, class: "field half-right" }, PA = { class: "label type-label" }; function OA(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-select"), p = c("v-textarea"), f = c("interface-input-code"), v = c("v-checkbox"); return m(), I("div", null, [S("div", mA, [S("div", fA, [S("div", vA, [D(b(e.t("key")) + " ", 1), a(o, { class: "required", sup: "", name: "star" })]), a(s, { modelValue: e.field, "onUpdate:modelValue": t[0] || (t[0] = _ => e.field = _), disabled: e.isExisting, autofocus: "", class: "monospace", nullable: !1, "db-safe": "", placeholder: e.t("a_unique_column_name") }, null, 8, ["modelValue", "disabled", "placeholder"]), S("small", _A, b(e.t("schema_setup_key")), 1)]), S("div", yA, [S("div", gA, [D(b(e.t("type")) + " ", 1), a(o, { class: "required", sup: "", name: "star" })]), e.isAlias ? (m(), C(s, { key: 0, "model-value": e.t("alias"), disabled: "" }, null, 8, ["model-value"])) : (m(), C(r, { key: 1, modelValue: e.type, "onUpdate:modelValue": t[1] || (t[1] = _ => e.type = _), disabled: e.typeDisabled || e.isExisting, items: e.typesWithLabels, placeholder: e.typePlaceholder }, null, 8, ["modelValue", "disabled", "items", "placeholder"]))]), ["decimal", "float"].includes(e.type) === !1 ? (m(), I(se, { key: 0 }, [e.isAlias ? R("", !0) : (m(), I("div", hA, [S("div", bA, b(e.t("length")), 1), a(s, { modelValue: e.maxLength, "onUpdate:modelValue": t[2] || (t[2] = _ => e.maxLength = _), type: "number", placeholder: e.type !== "string" ? e.t("not_available_for_type") : "255", disabled: e.isExisting || e.type !== "string" }, null, 8, ["modelValue", "placeholder", "disabled"])]))], 64)) : (m(), I(se, { key: 1 }, [e.isAlias ? R("", !0) : (m(), I("div", $A, [S("div", wA, b(e.t("precision_scale")), 1), S("div", kA, [a(s, { modelValue: e.numericPrecision, "onUpdate:modelValue": t[3] || (t[3] = _ => e.numericPrecision = _), type: "number", placeholder: 10 }, null, 8, ["modelValue"]), a(s, { modelValue: e.numericScale, "onUpdate:modelValue": t[4] || (t[4] = _ => e.numericScale = _), type: "number", placeholder: 5 }, null, 8, ["modelValue"])])]))], 64)), e.hasCreateUpdateTriggers ? (m(), I(se, { key: 2 }, [S("div", SA, [S("div", CA, b(e.t("on_create")), 1), a(r, { modelValue: e.onCreateValue, "onUpdate:modelValue": t[5] || (t[5] = _ => e.onCreateValue = _), items: e.onCreateOptions }, null, 8, ["modelValue", "items"])]), S("div", VA, [S("div", FA, b(e.t("on_update")), 1), a(r, { modelValue: e.onUpdateValue, "onUpdate:modelValue": t[6] || (t[6] = _ => e.onUpdateValue = _), items: e.onUpdateOptions }, null, 8, ["modelValue", "items"])])], 64)) : R("", !0), !e.isAlias && !e.isPrimaryKey && !e.isGenerated ? (m(), I("div", AA, [S("div", IA, b(e.t("default_value")), 1), ["string", "uuid"].includes(e.type) ? (m(), C(s, { key: 0, modelValue: e.defaultValue, "onUpdate:modelValue": t[7] || (t[7] = _ => e.defaultValue = _), class: "monospace", placeholder: "NULL" }, null, 8, ["modelValue"])) : ["text"].includes(e.type) ? (m(), C(p, { key: 1, modelValue: e.defaultValue, "onUpdate:modelValue": t[8] || (t[8] = _ => e.defaultValue = _), class: "monospace", placeholder: "NULL" }, null, 8, ["modelValue"])) : ["integer", "bigInteger", "float", "decimal"].includes(e.type) ? (m(), C(s, { key: 2, modelValue: e.defaultValue, "onUpdate:modelValue": t[9] || (t[9] = _ => e.defaultValue = _), type: "number", class: "monospace", placeholder: "NULL" }, null, 8, ["modelValue"])) : ["timestamp", "dateTime", "date", "time"].includes(e.type) ? (m(), C(s, { key: 3, modelValue: e.defaultValue, "onUpdate:modelValue": t[10] || (t[10] = _ => e.defaultValue = _), class: "monospace", placeholder: "NULL" }, null, 8, ["modelValue"])) : e.type === "boolean" ? (m(), C(r, { key: 4, modelValue: e.defaultValue, "onUpdate:modelValue": t[11] || (t[11] = _ => e.defaultValue = _), class: "monospace", items: [{ text: "true", value: !0 }, { text: "false", value: !1 }, { text: "NULL", value: null }] }, null, 8, ["modelValue"])) : e.type === "json" ? (m(), C(f, { key: 5, value: e.defaultValue || "", language: "JSON", placeholder: "NULL", type: "json", onInput: t[12] || (t[12] = _ => e.defaultValue = _) }, null, 8, ["value"])) : (m(), C(s, { key: 6, modelValue: e.defaultValue, "onUpdate:modelValue": t[13] || (t[13] = _ => e.defaultValue = _), class: "monospace", disabled: "", placeholder: "NULL" }, null, 8, ["modelValue"]))])) : R("", !0), e.isAlias ? R("", !0) : (m(), I("div", EA, [S("div", DA, b(e.t("nullable")), 1), a(v, { modelValue: e.nullable, "onUpdate:modelValue": t[14] || (t[14] = _ => e.nullable = _), disabled: e.isGenerated, label: e.t("allow_null_value"), block: "" }, null, 8, ["modelValue", "disabled", "label"])])), e.isAlias ? R("", !0) : (m(), I("div", TA, [S("div", PA, b(e.t("unique")), 1), a(v, { modelValue: e.unique, "onUpdate:modelValue": t[15] || (t[15] = _ => e.unique = _), disabled: e.isGenerated, label: e.t("value_unique"), block: "" }, null, 8, ["modelValue", "disabled", "label"])]))])]) } var LA = B(pA, [["render", OA], ["__scopeId", "data-v-856e564c"]]); const jA = z({ components: { RelatedCollectionSelect: Vn }, setup() { const { t: e } = x(), t = ft(), n = Pe(), l = Ee("relations.m2o.related_collection"), i = Ee("fields.corresponding"), u = Ee("fields.corresponding.field"), o = Ee("relations.m2o.schema.on_delete"), { field: s, collection: r, editing: p, generationInfo: f } = $t(t), v = V(() => p.value !== "+"), _ = V(() => { var h, k; return (k = (h = n.getPrimaryKeyFieldForCollection(l.value)) == null ? void 0 : h.field) != null ? k : "id" }), y = V(() => s.value.field), g = V({ get() { return !!i.value }, set(h) { h ? i.value = { field: r.value, collection: l.value, type: "alias", meta: { special: ["o2m"], interface: "list-o2m" } } : i.value = null } }), w = V(() => l.value ? e("add_o2m_to_collection", { collection: l.value }) : e("add_field_related")); return { t: e, collection: r, relatedCollection: l, isExisting: v, relatedPrimaryKey: _, currentField: y, hasCorresponding: g, correspondingLabel: w, correspondingFieldKey: u, generationInfo: f, onDeleteRelated: o } } }), RA = { class: "grid" }, MA = { class: "field" }, UA = { class: "type-label" }, NA = { class: "field" }, BA = { class: "type-label" }, qA = { key: 1, class: "grid" }, zA = { class: "field" }, KA = { class: "type-label" }, HA = { class: "field" }, WA = { class: "type-label" }, GA = { class: "relational-triggers" }, JA = { class: "field" }, QA = { class: "type-label" }, XA = { class: "field-name" }; function ZA(e, t, n, l, i, u) { const o = c("v-input"), s = c("related-collection-select"), r = c("v-icon"), p = c("v-divider"), f = c("v-checkbox"), v = c("v-select"), _ = c("v-notice"); return m(), I("div", null, [S("div", RA, [S("div", MA, [S("div", UA, b(e.t("this_collection")), 1), a(o, { disabled: "", "model-value": e.collection }, null, 8, ["model-value"])]), S("div", NA, [S("div", BA, b(e.t("related_collection")), 1), a(s, { modelValue: e.relatedCollection, "onUpdate:modelValue": t[0] || (t[0] = y => e.relatedCollection = y), disabled: e.isExisting }, null, 8, ["modelValue", "disabled"])]), a(o, { disabled: "", "model-value": e.currentField }, null, 8, ["model-value"]), a(o, { "model-value": e.relatedPrimaryKey, disabled: "", placeholder: e.t("primary_key") + "..." }, null, 8, ["model-value", "placeholder"]), a(r, { class: "arrow", name: "arrow_back" })]), e.isExisting ? R("", !0) : (m(), C(p, { key: 0, large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("corresponding_field")), 1)]), _: 1 })), e.isExisting ? R("", !0) : (m(), I("div", qA, [S("div", zA, [S("div", KA, b(e.t("create_field")), 1), a(f, { modelValue: e.hasCorresponding, "onUpdate:modelValue": t[1] || (t[1] = y => e.hasCorresponding = y), block: "", label: e.correspondingLabel }, null, 8, ["modelValue", "label"])]), S("div", HA, [S("div", WA, b(e.t("field_name")), 1), a(o, { modelValue: e.correspondingFieldKey, "onUpdate:modelValue": t[2] || (t[2] = y => e.correspondingFieldKey = y), disabled: e.hasCorresponding === !1, placeholder: e.t("field_name") + "...", "db-safe": "" }, null, 8, ["modelValue", "disabled", "placeholder"])]), a(r, { name: "arrow_forward", class: "arrow" })])), S("div", GA, [a(p, { class: "field full", large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("relational_triggers")), 1)]), _: 1 }), S("div", JA, [S("div", QA, b(e.t("referential_action_field_label_m2o", { collection: e.relatedCollection || "related" })), 1), a(v, { modelValue: e.onDeleteRelated, "onUpdate:modelValue": t[3] || (t[3] = y => e.onDeleteRelated = y), disabled: e.collection === e.relatedCollection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.currentField }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.currentField }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.collection, field: e.currentField }), value: "CASCADE" }, { text: e.t("referential_action_no_action", { field: e.currentField }), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])])]), e.generationInfo.length > 0 ? (m(), C(_, { key: 2, class: "generated-data", type: "warning" }, { default: d(() => [S("span", null, [D(b(e.t("new_data_alert")) + " ", 1), S("ul", null, [(m(!0), I(se, null, he(e.generationInfo, (y, g) => (m(), I("li", { key: g }, [S("span", XA, b(y.name), 1)]))), 128))])])]), _: 1 })) : R("", !0)]) } var YA = B(jA, [["render", ZA], ["__scopeId", "data-v-52d1328a"]]); const xA = z({ components: { RelatedCollectionSelect: Vn, RelatedFieldSelect: Zn }, setup() { const { t: e } = x(), t = ft(), n = Pe(), l = Ee("relations.o2m.collection"), i = Ee("relations.o2m.field"), u = Ee("relations.o2m.meta.sort_field"), o = Ee("relations.o2m.schema.on_delete"), s = Ee("relations.o2m.meta.one_deselect_action"), { collection: r, editing: p, generationInfo: f } = $t(t), v = V(() => p.value !== "+"), _ = V(() => { var y; return (y = n.getPrimaryKeyFieldForCollection(r.value)) == null ? void 0 : y.field }); return { t: e, isExisting: v, collection: r, relatedCollection: l, currentPrimaryKey: _, relatedField: i, generationInfo: f, sortField: u, onDelete: o, onDeselect: s } } }), e4 = { class: "grid" }, t4 = { class: "field" }, n4 = { class: "type-label" }, l4 = { class: "field" }, o4 = { class: "type-label" }, a4 = { class: "sort-field" }, i4 = { class: "relational-triggers" }, s4 = { class: "field" }, r4 = { class: "type-label" }, d4 = { class: "field" }, u4 = { class: "type-label" }, c4 = { class: "field-name" }; function p4(e, t, n, l, i, u) { const o = c("v-input"), s = c("related-collection-select"), r = c("related-field-select"), p = c("v-icon"), f = c("v-divider"), v = c("v-select"), _ = c("v-notice"); return m(), I("div", null, [S("div", e4, [S("div", t4, [S("div", n4, b(e.t("this_collection")), 1), a(o, { disabled: "", "model-value": e.collection }, null, 8, ["model-value"])]), S("div", l4, [S("div", o4, b(e.t("related_collection")), 1), a(s, { modelValue: e.relatedCollection, "onUpdate:modelValue": t[0] || (t[0] = y => e.relatedCollection = y), disabled: e.isExisting }, null, 8, ["modelValue", "disabled"])]), a(o, { disabled: "", "model-value": e.currentPrimaryKey }, null, 8, ["model-value"]), a(r, { modelValue: e.relatedField, "onUpdate:modelValue": t[1] || (t[1] = y => e.relatedField = y), collection: e.relatedCollection }, null, 8, ["modelValue", "collection"]), a(p, { class: "arrow", name: "arrow_forward" })]), S("div", a4, [a(f, { large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("sort_field")), 1)]), _: 1 }), a(r, { modelValue: e.sortField, "onUpdate:modelValue": t[2] || (t[2] = y => e.sortField = y), collection: e.relatedCollection, placeholder: e.t("add_sort_field") + "...", nullable: !0 }, null, 8, ["modelValue", "collection", "placeholder"])]), S("div", i4, [a(f, { class: "field full", large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("relational_triggers")), 1)]), _: 1 }), S("div", s4, [S("div", r4, b(e.t("referential_action_field_label_o2m", { collection: e.relatedCollection || "related" })), 1), a(v, { modelValue: e.onDeselect, "onUpdate:modelValue": t[3] || (t[3] = y => e.onDeselect = y), placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.relatedField }), value: "nullify" }, { text: e.t("referential_action_cascade", { collection: e.relatedCollection, field: e.relatedField }), value: "delete" }] }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", d4, [S("div", u4, b(e.t("referential_action_field_label_m2o", { collection: e.collection || "related" })), 1), a(v, { modelValue: e.onDelete, "onUpdate:modelValue": t[4] || (t[4] = y => e.onDelete = y), disabled: e.collection === e.relatedCollection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.relatedField }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.relatedField }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.collection, field: e.relatedField }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])])]), e.generationInfo.length > 0 ? (m(), C(_, { key: 0, class: "generated-data", type: "warning" }, { default: d(() => [S("span", null, [D(b(e.t("new_data_alert")) + " ", 1), S("ul", null, [(m(!0), I(se, null, he(e.generationInfo, (y, g) => (m(), I("li", { key: g }, [S("span", c4, b(y.name), 1)]))), 128))])])]), _: 1 })) : R("", !0)]) } var m4 = B(xA, [["render", p4], ["__scopeId", "data-v-bb6d41dc"]]); const f4 = z({ components: { RelatedCollectionSelect: Vn, RelatedFieldSelect: Zn }, setup() { const { t: e } = x(), t = ft(), n = Pe(), { field: l, collection: i, editing: u, generationInfo: o } = $t(t), s = Ee("relations.o2m.meta.sort_field"), r = Ee("relations.o2m.collection"), p = Ee("relations.o2m.field"), f = Ee("relations.m2o.field"), v = Ee("relations.m2o.related_collection"), _ = Ee("autoGenerateJunctionRelation"), y = Ee("relations.o2m.schema.on_delete"), g = Ee("relations.m2o.schema.on_delete"), w = Ee("relations.o2m.meta.one_deselect_action"), h = Ee("fields.corresponding"), k = Ee("fields.corresponding.field"), F = V(() => l.value.type), A = V(() => u.value !== "+"), P = V(() => { var O; return (O = n.getPrimaryKeyFieldForCollection(i.value)) == null ? void 0 : O.field }), L = V(() => { var O, U; return (U = (O = n.getPrimaryKeyFieldForCollection(v.value)) == null ? void 0 : O.field) != null ? U : "id" }), T = V({ get() { return !!h.value }, set(O) { O ? h.value = { field: i.value, collection: v.value, type: "alias", meta: { special: ["m2m"], interface: "list-m2m" } } : h.value = null } }), N = V(() => r.value ? e("add_m2m_to_collection", { collection: v.value }) : e("add_field_related")); return { t: e, autoGenerateJunctionRelation: _, collection: i, type: F, isExisting: A, junctionCollection: r, junctionFieldCurrent: p, relatedCollection: v, sortField: s, currentPrimaryKey: P, junctionFieldRelated: f, relatedPrimaryKey: L, onDeleteCurrent: y, onDeleteRelated: g, deselectAction: w, hasCorresponding: T, correspondingLabel: N, correspondingFieldKey: k, generationInfo: o } } }), Ao = e => (Qe("data-v-2ef7c0d9"), e = e(), Xe(), e), v4 = { class: "grid" }, _4 = { class: "field" }, y4 = { class: "type-label" }, g4 = { class: "field" }, h4 = { class: "type-label" }, b4 = { class: "field" }, $4 = { class: "type-label" }, w4 = Ao(() => S("div", { class: "spacer" }, null, -1)), k4 = Ao(() => S("div", { class: "spacer" }, null, -1)), S4 = Ao(() => S("div", { class: "spacer" }, null, -1)), C4 = { key: 1, class: "corresponding" }, V4 = { class: "field" }, F4 = { class: "type-label" }, A4 = { class: "field" }, I4 = { class: "type-label" }, E4 = { class: "sort-field" }, D4 = { class: "relational-triggers" }, T4 = { class: "field" }, P4 = { class: "type-label" }, O4 = { class: "field" }, L4 = { class: "type-label" }, j4 = { class: "field" }, R4 = { class: "type-label" }, M4 = { class: "field-name" }; function U4(e, t, n, l, i, u) { const o = c("v-input"), s = c("related-collection-select"), r = c("related-field-select"), p = c("v-checkbox"), f = c("v-icon"), v = c("v-divider"), _ = c("v-select"), y = c("v-notice"); return m(), I("div", null, [S("div", v4, [S("div", _4, [S("div", y4, b(e.t("this_collection")), 1), a(o, { disabled: "", "model-value": e.collection }, null, 8, ["model-value"])]), S("div", g4, [S("div", h4, b(e.t("junction_collection")), 1), a(s, { modelValue: e.junctionCollection, "onUpdate:modelValue": t[0] || (t[0] = g => e.junctionCollection = g), disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "disabled"])]), S("div", b4, [S("div", $4, b(e.t("related_collection")), 1), a(s, { modelValue: e.relatedCollection, "onUpdate:modelValue": t[1] || (t[1] = g => e.relatedCollection = g), disabled: e.type === "files" || e.isExisting }, null, 8, ["modelValue", "disabled"])]), a(o, { disabled: "", "model-value": e.currentPrimaryKey }, null, 8, ["model-value"]), a(r, { modelValue: e.junctionFieldCurrent, "onUpdate:modelValue": t[2] || (t[2] = g => e.junctionFieldCurrent = g), collection: e.junctionCollection, disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "disabled"]), w4, k4, a(r, { modelValue: e.junctionFieldRelated, "onUpdate:modelValue": t[3] || (t[3] = g => e.junctionFieldRelated = g), collection: e.junctionCollection, disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "disabled"]), a(o, { modelValue: e.relatedPrimaryKey, "onUpdate:modelValue": t[4] || (t[4] = g => e.relatedPrimaryKey = g), disabled: "", placeholder: e.t("primary_key") + "..." }, null, 8, ["modelValue", "placeholder"]), S4, e.isExisting ? R("", !0) : (m(), C(p, { key: 0, modelValue: e.autoGenerateJunctionRelation, "onUpdate:modelValue": t[5] || (t[5] = g => e.autoGenerateJunctionRelation = g), block: "", label: e.t("auto_fill") }, null, 8, ["modelValue", "label"])), a(f, { class: "arrow", name: "arrow_forward" }), a(f, { class: "arrow", name: "arrow_backward" })]), e.isExisting ? R("", !0) : (m(), C(v, { key: 0, large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("corresponding_field")), 1)]), _: 1 })), e.isExisting ? R("", !0) : (m(), I("div", C4, [S("div", V4, [S("div", F4, b(e.t("create_field")), 1), a(p, { modelValue: e.hasCorresponding, "onUpdate:modelValue": t[6] || (t[6] = g => e.hasCorresponding = g), block: "", label: e.correspondingLabel }, null, 8, ["modelValue", "label"])]), S("div", A4, [S("div", I4, b(e.t("field_name")), 1), a(o, { modelValue: e.correspondingFieldKey, "onUpdate:modelValue": t[7] || (t[7] = g => e.correspondingFieldKey = g), disabled: e.hasCorresponding === !1, placeholder: e.t("field_name") + "...", "db-safe": "" }, null, 8, ["modelValue", "disabled", "placeholder"])]), a(f, { name: "arrow_forward", class: "arrow" })])), S("div", E4, [a(v, { large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("sort_field")), 1)]), _: 1 }), a(r, { modelValue: e.sortField, "onUpdate:modelValue": t[8] || (t[8] = g => e.sortField = g), collection: e.junctionCollection, placeholder: e.t("add_sort_field") + "...", nullable: !0 }, null, 8, ["modelValue", "collection", "placeholder"])]), S("div", D4, [a(v, { class: "field full", large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("relational_triggers")), 1)]), _: 1 }), S("div", T4, [S("div", P4, b(e.t("referential_action_field_label_o2m", { collection: e.junctionCollection || "" })), 1), a(_, { modelValue: e.deselectAction, "onUpdate:modelValue": t[9] || (t[9] = g => e.deselectAction = g), placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "nullify" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "delete" }] }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", O4, [S("div", L4, b(e.t("referential_action_field_label_m2o", { collection: e.collection || "related" })), 1), a(_, { modelValue: e.onDeleteCurrent, "onUpdate:modelValue": t[10] || (t[10] = g => e.onDeleteCurrent = g), disabled: e.junctionCollection === e.collection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldCurrent }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.junctionFieldCurrent }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])]), S("div", j4, [S("div", R4, b(e.t("referential_action_field_label_m2o", { collection: e.relatedCollection || "related" })), 1), a(_, { modelValue: e.onDeleteRelated, "onUpdate:modelValue": t[11] || (t[11] = g => e.onDeleteRelated = g), disabled: e.junctionCollection === e.relatedCollection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldRelated }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.junctionFieldRelated }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldRelated }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])])]), e.generationInfo.length > 0 ? (m(), C(y, { key: 2, class: "generated-data", type: "warning" }, { default: d(() => [S("span", null, [D(b(e.t("new_data_alert")) + " ", 1), S("ul", null, [(m(!0), I(se, null, he(e.generationInfo, (g, w) => (m(), I("li", { key: w }, [S("span", M4, b(g.name), 1)]))), 128))])])]), _: 1 })) : R("", !0)]) } var N4 = B(f4, [["render", U4], ["__scopeId", "data-v-2ef7c0d9"]]); const B4 = z({ components: { RelatedCollectionSelect: Vn, RelatedFieldSelect: Zn }, setup() { const { t: e } = x(), t = ft(), n = He(), l = Pe(), { collection: i, editing: u, generationInfo: o } = $t(t), s = Ee("autoGenerateJunctionRelation"), r = Ee("relations.o2m.collection"), p = Ee("relations.o2m.field"), f = Ee("relations.m2o.field"), v = Ee("relations.m2o.meta.one_collection_field"), _ = Ee("relations.m2o.meta.one_allowed_collections", []), y = Ee("relations.o2m.meta.sort_field"), g = Ee("relations.o2m.schema.on_delete"), w = Ee("relations.o2m.meta.one_deselect_action"), h = V(() => u.value !== "+"), k = V(() => { var A; return (A = l.getPrimaryKeyFieldForCollection(i.value)) == null ? void 0 : A.field }), F = V(() => M.exports.orderBy([...n.allCollections, { divider: !0 }, { name: e("system"), selectable: !1, children: n.crudSafeSystemCollections }], ["collection"], ["asc"])); return { t: e, availableCollections: F, generationInfo: o, collection: i, isExisting: h, autoGenerateJunctionRelation: s, junctionCollection: r, oneAllowedCollections: _, currentPrimaryKey: k, junctionFieldCurrent: p, junctionFieldRelated: f, oneCollectionField: v, sortField: y, onDelete: g, onDeselect: w } } }), Io = e => (Qe("data-v-2c8bde2f"), e = e(), Xe(), e), q4 = { class: "grid" }, z4 = { class: "field" }, K4 = { class: "type-label" }, H4 = { class: "field" }, W4 = { class: "type-label" }, G4 = { class: "field" }, J4 = { class: "type-label" }, Q4 = { class: "related-collections-preview" }, X4 = Io(() => S("div", { class: "spacer" }, null, -1)), Z4 = Io(() => S("div", { class: "spacer" }, null, -1)), Y4 = Io(() => S("div", { class: "spacer" }, null, -1)), x4 = { class: "sort-field" }, eI = { class: "relational-triggers" }, tI = { class: "field" }, nI = { class: "type-label" }, lI = { class: "field" }, oI = { class: "type-label" }, aI = { class: "field-name" }; function iI(e, t, n, l, i, u) { var g, w; const o = c("v-input"), s = c("related-collection-select"), r = c("v-select"), p = c("related-field-select"), f = c("v-checkbox"), v = c("v-icon"), _ = c("v-divider"), y = c("v-notice"); return m(), I("div", null, [S("div", q4, [S("div", z4, [S("div", K4, b(e.t("this_collection")), 1), a(o, { disabled: "", "model-value": e.collection }, null, 8, ["model-value"])]), S("div", H4, [S("div", W4, b(e.t("junction_collection")), 1), a(s, { modelValue: e.junctionCollection, "onUpdate:modelValue": t[0] || (t[0] = h => e.junctionCollection = h), disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "disabled"])]), S("div", G4, [S("div", J4, b(e.t("related_collections")), 1), a(r, { modelValue: e.oneAllowedCollections, "onUpdate:modelValue": t[1] || (t[1] = h => e.oneAllowedCollections = h), placeholder: e.t("collection") + "...", items: e.availableCollections, "item-value": "collection", "item-text": "name", "item-disabled": "meta.singleton", multiple: "", "multiple-preview-threshold": 0 }, null, 8, ["modelValue", "placeholder", "items"])]), a(o, { disabled: "", "model-value": e.currentPrimaryKey }, null, 8, ["model-value"]), a(p, { modelValue: e.junctionFieldCurrent, "onUpdate:modelValue": t[2] || (t[2] = h => e.junctionFieldCurrent = h), collection: e.junctionCollection, disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "disabled"]), S("div", Q4, b(((g = e.oneAllowedCollections) != null ? g : []).join(", ")), 1), X4, a(p, { modelValue: e.oneCollectionField, "onUpdate:modelValue": t[3] || (t[3] = h => e.oneCollectionField = h), collection: e.junctionCollection, placeholder: e.t("collection_key") + "...", disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "placeholder", "disabled"]), Z4, a(p, { modelValue: e.junctionFieldRelated, "onUpdate:modelValue": t[4] || (t[4] = h => e.junctionFieldRelated = h), disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "disabled"]), a(o, { disabled: "", "model-value": e.t("primary_key") }, null, 8, ["model-value"]), Y4, e.isExisting ? R("", !0) : (m(), C(f, { key: 0, modelValue: e.autoGenerateJunctionRelation, "onUpdate:modelValue": t[5] || (t[5] = h => e.autoGenerateJunctionRelation = h), block: "", label: e.t("auto_fill") }, null, 8, ["modelValue", "label"])), a(v, { class: "arrow", name: "arrow_forward" }), a(v, { class: "arrow", name: "arrow_backward" }), a(v, { class: "arrow", name: "arrow_backward" })]), S("div", x4, [a(_, { large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("sort_field")), 1)]), _: 1 }), a(p, { modelValue: e.sortField, "onUpdate:modelValue": t[6] || (t[6] = h => e.sortField = h), collection: e.junctionCollection, placeholder: e.t("add_sort_field"), nullable: !0 }, null, 8, ["modelValue", "collection", "placeholder"])]), S("div", eI, [a(_, { class: "field full", large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("relational_triggers")), 1)]), _: 1 }), S("div", tI, [S("div", nI, b(e.t("referential_action_field_label_m2o", { collection: e.collection || "related" })), 1), a(r, { modelValue: e.onDelete, "onUpdate:modelValue": t[7] || (t[7] = h => e.onDelete = h), disabled: e.collection === e.junctionCollection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldRelated }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.junctionFieldRelated }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldRelated }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])]), S("div", lI, [S("div", oI, b(e.t("referential_action_field_label_o2m", { collection: e.junctionCollection || "related" })), 1), a(r, { modelValue: e.onDeselect, "onUpdate:modelValue": t[8] || (t[8] = h => e.onDeselect = h), placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldRelated }), value: "nullify" }, { text: e.t("referential_action_cascade", { collection: ((w = e.oneAllowedCollections) != null ? w : []).join(" / "), field: e.junctionFieldRelated }), value: "delete" }] }, null, 8, ["modelValue", "placeholder", "items"])])]), e.generationInfo.length > 0 ? (m(), C(y, { key: 0, class: "generated-data", type: "warning" }, { default: d(() => [S("span", null, [D(b(e.t("new_data_alert")) + " ", 1), S("ul", null, [(m(!0), I(se, null, he(e.generationInfo, (h, k) => (m(), I("li", { key: k }, [S("span", aI, b(h.name), 1)]))), 128))])])]), _: 1 })) : R("", !0)]) } var sI = B(B4, [["render", iI], ["__scopeId", "data-v-2c8bde2f"]]); const rI = z({ components: { RelatedCollectionSelect: Vn, RelatedFieldSelect: Zn }, setup() { const { t: e } = x(), t = ft(), n = Pe(), { field: l, collection: i, editing: u, generationInfo: o } = $t(t), s = Ee("relations.o2m.meta.sort_field"), r = Ee("relations.o2m.collection"), p = Ee("relations.o2m.field"), f = Ee("relations.m2o.field"), v = Ee("relations.m2o.related_collection"), _ = Ee("autoGenerateJunctionRelation"), y = Ee("relations.o2m.schema.on_delete"), g = Ee("relations.m2o.schema.on_delete"), w = Ee("relations.o2m.meta.one_deselect_action"), h = Ee("fields.corresponding"), k = V(() => l.value.type), F = V(() => u.value !== "+"), A = V(() => { var O; return (O = n.getPrimaryKeyFieldForCollection(i.value)) == null ? void 0 : O.field }), P = V(() => { var O, U; return (U = (O = n.getPrimaryKeyFieldForCollection(v.value)) == null ? void 0 : O.field) != null ? U : "id" }), L = V({ get() { return !!h.value }, set(O) { O ? h.value = { field: i.value, collection: v.value, type: "alias", meta: { special: ["m2m"], interface: "list-m2m" } } : h.value = null } }), T = V(() => r.value ? e("add_m2m_to_collection", { collection: v.value }) : e("add_field_related")), N = V({ get() { var O; return (O = h.value) == null ? void 0 : O.field }, set(O) { L.value || (L.value = !0), h.value.field = O } }); return { t: e, autoGenerateJunctionRelation: _, collection: i, type: k, isExisting: F, junctionCollection: r, junctionFieldCurrent: p, relatedCollection: v, sortField: s, currentPrimaryKey: A, junctionFieldRelated: f, relatedPrimaryKey: P, onDeleteCurrent: y, onDeleteRelated: g, deselectAction: w, hasCorresponding: L, correspondingLabel: T, correspondingFieldKey: N, generationInfo: o } } }), Eo = e => (Qe("data-v-4e650362"), e = e(), Xe(), e), dI = { class: "grid" }, uI = { class: "field" }, cI = { class: "type-label" }, pI = { class: "field" }, mI = { class: "type-label" }, fI = { class: "field" }, vI = { class: "type-label" }, _I = Eo(() => S("div", { class: "spacer" }, null, -1)), yI = Eo(() => S("div", { class: "spacer" }, null, -1)), gI = Eo(() => S("div", { class: "spacer" }, null, -1)), hI = { class: "relational-triggers" }, bI = { class: "field" }, $I = { class: "type-label" }, wI = { class: "field" }, kI = { class: "type-label" }, SI = { class: "field" }, CI = { class: "type-label" }; function VI(e, t, n, l, i, u) { const o = c("v-input"), s = c("related-collection-select"), r = c("related-field-select"), p = c("v-checkbox"), f = c("v-icon"), v = c("v-divider"), _ = c("v-select"); return m(), I("div", null, [S("div", dI, [S("div", uI, [S("div", cI, b(e.t("this_collection")), 1), a(o, { disabled: "", "model-value": e.collection }, null, 8, ["model-value"])]), S("div", pI, [S("div", mI, b(e.t("translations_collection")), 1), a(s, { modelValue: e.junctionCollection, "onUpdate:modelValue": t[0] || (t[0] = y => e.junctionCollection = y), disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "disabled"])]), S("div", fI, [S("div", vI, b(e.t("languages_collection")), 1), a(s, { modelValue: e.relatedCollection, "onUpdate:modelValue": t[1] || (t[1] = y => e.relatedCollection = y), disabled: e.type === "files" || e.isExisting }, null, 8, ["modelValue", "disabled"])]), a(o, { disabled: "", "model-value": e.currentPrimaryKey }, null, 8, ["model-value"]), a(r, { modelValue: e.junctionFieldCurrent, "onUpdate:modelValue": t[2] || (t[2] = y => e.junctionFieldCurrent = y), collection: e.junctionCollection, disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "disabled"]), _I, yI, a(r, { modelValue: e.junctionFieldRelated, "onUpdate:modelValue": t[3] || (t[3] = y => e.junctionFieldRelated = y), collection: e.junctionCollection, disabled: e.autoGenerateJunctionRelation || e.isExisting }, null, 8, ["modelValue", "collection", "disabled"]), a(o, { modelValue: e.relatedPrimaryKey, "onUpdate:modelValue": t[4] || (t[4] = y => e.relatedPrimaryKey = y), disabled: "", placeholder: e.t("primary_key") + "..." }, null, 8, ["modelValue", "placeholder"]), gI, a(p, { modelValue: e.autoGenerateJunctionRelation, "onUpdate:modelValue": t[5] || (t[5] = y => e.autoGenerateJunctionRelation = y), disabled: e.isExisting, block: "", label: e.t("auto_fill") }, null, 8, ["modelValue", "disabled", "label"]), a(f, { class: "arrow", name: "arrow_forward" }), a(f, { class: "arrow", name: "arrow_backward" })]), S("div", hI, [a(v, { class: "field full", large: "", "inline-title": !1 }, { default: d(() => [D(b(e.t("relational_triggers")), 1)]), _: 1 }), S("div", bI, [S("div", $I, b(e.t("referential_action_field_label_o2m", { collection: e.junctionCollection || "" })), 1), a(_, { modelValue: e.deselectAction, "onUpdate:modelValue": t[6] || (t[6] = y => e.deselectAction = y), placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "nullify" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "delete" }] }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", wI, [S("div", kI, b(e.t("referential_action_field_label_m2o", { collection: e.collection || "related" })), 1), a(_, { modelValue: e.onDeleteCurrent, "onUpdate:modelValue": t[7] || (t[7] = y => e.onDeleteCurrent = y), disabled: e.junctionCollection === e.collection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldCurrent }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.junctionFieldCurrent }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldCurrent }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])]), S("div", SI, [S("div", CI, b(e.t("referential_action_field_label_m2o", { collection: e.relatedCollection || "related" })), 1), a(_, { modelValue: e.onDeleteRelated, "onUpdate:modelValue": t[8] || (t[8] = y => e.onDeleteRelated = y), disabled: e.junctionCollection === e.relatedCollection, placeholder: e.t("choose_action") + "...", items: [{ text: e.t("referential_action_set_null", { field: e.junctionFieldRelated }), value: "SET NULL" }, { text: e.t("referential_action_set_default", { field: e.junctionFieldRelated }), value: "SET DEFAULT" }, { text: e.t("referential_action_cascade", { collection: e.junctionCollection, field: e.junctionFieldRelated }), value: "CASCADE" }, { text: e.t("referential_action_no_action"), value: "NO ACTION" }] }, null, 8, ["modelValue", "disabled", "placeholder", "items"])])])]) } var FI = B(rI, [["render", VI], ["__scopeId", "data-v-4e650362"]]); const AI = z({ components: { RelationshipM2o: YA, RelationshipO2m: m4, RelationshipM2m: N4, RelationshipM2a: sI, RelationshipTranslations: FI }, setup() { const e = ft(), { collection: t, localType: n } = $t(e); return { collection: t, localType: n } } }); function II(e, t, n, l, i, u) { const o = c("relationship-m2o"), s = c("relationship-o2m"), r = c("relationship-m2m"), p = c("relationship-m2a"), f = c("relationship-translations"); return e.localType === "m2o" || e.localType === "file" ? (m(), C(o, { key: 0 })) : e.localType === "o2m" ? (m(), C(s, { key: 1 })) : e.localType === "m2m" || e.localType === "files" ? (m(), C(r, { key: 2 })) : e.localType === "m2a" ? (m(), C(p, { key: 3 })) : e.localType === "translations" ? (m(), C(f, { key: 4 })) : R("", !0) } var EI = B(AI, [["render", II]]); const DI = z({ setup() { const { t: e } = x(), t = ft(), n = Ee("field.meta.readonly", !1), l = Ee("field.meta.hidden", !1), i = Ee("field.meta.required", !1), u = Ee("field.meta.note"), o = Ee("field.meta.translations"), { field: s } = $t(t), r = V(() => s.value.type), p = V(() => { var f; return (f = s.value.schema) == null ? void 0 : f.is_generated }); return { t: e, readonly: n, hidden: l, required: i, note: u, translations: o, type: r, isGenerated: p } } }), TI = { class: "form" }, PI = { key: 0, class: "field half-left" }, OI = { class: "label type-label" }, LI = { key: 1, class: "field half-right" }, jI = { class: "label type-label" }, RI = { class: "field half-left" }, MI = { class: "label type-label" }, UI = { key: 2, class: "field full" }, NI = { class: "label type-label" }, BI = { class: "field full" }, qI = { class: "label type-label" }; function zI(e, t, n, l, i, u) { const o = c("v-checkbox"), s = c("v-input"), r = c("interface-list"); return m(), I("div", TI, [e.isGenerated ? R("", !0) : (m(), I("div", PI, [S("div", OI, b(e.t("readonly")), 1), a(o, { modelValue: e.readonly, "onUpdate:modelValue": t[0] || (t[0] = p => e.readonly = p), label: e.t("disabled_editing_value"), block: "" }, null, 8, ["modelValue", "label"])])), e.isGenerated ? R("", !0) : (m(), I("div", LI, [S("div", jI, b(e.t("required")), 1), a(o, { modelValue: e.required, "onUpdate:modelValue": t[1] || (t[1] = p => e.required = p), label: e.t("require_value_to_be_set"), block: "" }, null, 8, ["modelValue", "label"])])), S("div", RI, [S("div", MI, b(e.t("hidden")), 1), a(o, { modelValue: e.hidden, "onUpdate:modelValue": t[2] || (t[2] = p => e.hidden = p), label: e.t("hidden_on_detail"), block: "" }, null, 8, ["modelValue", "label"])]), e.type !== "group" ? (m(), I("div", UI, [S("div", NI, b(e.t("note")), 1), a(s, { modelValue: e.note, "onUpdate:modelValue": t[3] || (t[3] = p => e.note = p), placeholder: e.t("add_note") }, null, 8, ["modelValue", "placeholder"])])) : R("", !0), S("div", BI, [S("div", qI, b(e.t("field_name_translations")), 1), a(r, { template: "[{{ language }}] {{ translation }}", fields: [{ field: "language", type: "string", name: e.t("language"), meta: { interface: "system-language", width: "half", display: "formatted-value", display_options: { font: "monospace", color: "var(--foreground-subdued)" } }, schema: { default_value: "en-US" } }, { field: "translation", type: "string", name: e.t("translation"), meta: { interface: "input", width: "half", options: { placeholder: e.t("translation_placeholder") } } }], value: e.translations, onInput: t[4] || (t[4] = p => e.translations = p) }, null, 8, ["fields", "value"])])]) } var KI = B(DI, [["render", zI], ["__scopeId", "data-v-73d70b88"]]); const HI = z({ components: { ExtensionOptions: Fo }, setup() { const { t: e } = x(), t = ft(), n = Ee("field.meta.interface"), l = Ee("field.meta.options"), { field: i, interfacesForType: u } = $t(t), o = V(() => i.value.type), { interfaces: s } = St(), r = V(() => { var h; const v = { string: ["input", "select-dropdown"], text: ["input-rich-text-html"], boolean: ["boolean"], integer: ["input"], bigInteger: ["input"], float: ["input"], decimal: ["input"], timestamp: ["datetime"], datetime: ["datetime"], date: ["datetime"], time: ["datetime"], json: ["select-multiple-checkbox", "tags"], uuid: ["input"], csv: ["tags"] }[(h = o.value) != null ? h : "alias"] || [], _ = u.value.map(k => { const F = { text: k.name, description: k.description, value: k.id, icon: k.icon }; return v.includes(F.value) && (F.iconRight = "star"), F }), y = [], g = v.map(k => _.find(F => F.value === k)); g !== void 0 && y.push(...g.filter(k => k)), _.length >= 5 && v.length > 0 && y.push({ divider: !0 }); const w = _.filter(k => v.includes(k.value) === !1); return w !== void 0 && y.push(...w.filter(k => k)), y }), p = V(() => s.value.find(f => f.id === n.value)); return { t: e, selectItems: r, selectedInterface: p, interfaceID: n, options: l } } }), WI = e => (Qe("data-v-048a218e"), e = e(), Xe(), e), GI = WI(() => S("div", { class: "spacer" }, null, -1)); function JI(e, t, n, l, i, u) { const o = c("v-fancy-select"), s = c("v-notice"), r = c("extension-options"); return m(), I("div", null, [a(o, { modelValue: e.interfaceID, "onUpdate:modelValue": t[0] || (t[0] = p => e.interfaceID = p), class: "select", items: e.selectItems }, null, 8, ["modelValue", "items"]), e.interfaceID && !e.selectedInterface ? (m(), C(s, { key: 0, class: "not-found", type: "danger" }, { default: d(() => [D(b(e.t("interface_not_found", { interface: e.interfaceID })) + " ", 1), GI, S("button", { onClick: t[1] || (t[1] = p => e.interfaceID = null) }, b(e.t("reset_interface")), 1)]), _: 1 })) : R("", !0), e.interfaceID && e.selectedInterface ? (m(), C(r, { key: 1, type: "interface", extension: e.interfaceID, "show-advanced": "" }, null, 8, ["extension"])) : R("", !0)]) } var QI = B(HI, [["render", JI], ["__scopeId", "data-v-048a218e"]]); const XI = z({ components: { ExtensionOptions: Fo }, setup() { const { t: e } = x(), t = ft(), { field: n, displaysForType: l } = $t(t), i = V(() => { var v; return (v = n.value.meta) == null ? void 0 : v.interface }), u = Ee("field.meta.display"), { displays: o } = xt(), { interfaces: s } = St(), r = V(() => s.value.find(v => v.id === i.value)), p = V(() => { var h; let v = M.exports.clone((h = r.value) == null ? void 0 : h.recommendedDisplays) || []; v.push("raw", "formatted-value"), v = [...new Set(v)]; const _ = l.value.map(k => { const F = { text: k.name, description: k.description, value: k.id, icon: k.icon }; return v.includes(F.value) && (F.iconRight = "star"), F }), y = [], g = v.map(k => _.find(F => F.value === k)); g !== void 0 && y.push(...g.filter(k => k)), _.length >= 5 && v.length > 0 && y.push({ divider: !0 }); const w = _.filter(k => v.includes(k.value) === !1); return w !== void 0 && y.push(...w.filter(k => k)), y }), f = V(() => o.value.find(v => v.id === u.value)); return { t: e, selectItems: p, selectedDisplay: f, display: u } } }), ZI = e => (Qe("data-v-54fd92c6"), e = e(), Xe(), e), YI = ZI(() => S("div", { class: "spacer" }, null, -1)); function xI(e, t, n, l, i, u) { const o = c("v-fancy-select"), s = c("v-notice"), r = c("extension-options"); return m(), I("div", null, [a(o, { modelValue: e.display, "onUpdate:modelValue": t[0] || (t[0] = p => e.display = p), class: "select", items: e.selectItems }, null, 8, ["modelValue", "items"]), e.display && !e.selectedDisplay ? (m(), C(s, { key: 0, class: "not-found", type: "danger" }, { default: d(() => [D(b(e.t("display_not_found", { display: e.display })) + " ", 1), YI, S("button", { onClick: t[1] || (t[1] = p => e.display = null) }, b(e.t("reset_display")), 1)]), _: 1 })) : R("", !0), e.display && e.selectedDisplay ? (m(), C(r, { key: 1, type: "display", extension: e.display }, null, 8, ["extension"])) : R("", !0)]) } var eE = B(XI, [["render", xI], ["__scopeId", "data-v-54fd92c6"]]); const tE = z({ setup() { const { t: e } = x(), t = ft(), { field: n, collection: l } = $t(t), i = Ee("field.meta.conditions"), u = V(() => { var s; return (s = n.value.meta) == null ? void 0 : s.interface }); return { repeaterFields: V(() => [{ field: "name", name: e("name"), type: "string", meta: { interface: "input", options: { iconLeft: "label", placeholder: e("enter_a_value") } } }, { field: "rule", name: e("rule"), type: "json", meta: { interface: "system-filter", options: { collectionName: l.value } } }, { field: "readonly", name: e("readonly"), type: "boolean", meta: { interface: "boolean", options: { label: e("disabled_editing_value") }, width: "half" } }, { field: "hidden", name: e("hidden"), type: "boolean", meta: { interface: "boolean", options: { label: e("hidden_on_detail") }, width: "half" } }, { field: "required", name: e("required"), type: "boolean", meta: { interface: "boolean", options: { label: e("require_value_to_be_set") }, width: "half" } }, { field: "options", name: e("interface_options"), type: "json", meta: { interface: "system-interface-options", options: { interface: u.value } } }]), conditions: i } } }); function nE(e, t, n, l, i, u) { const o = c("interface-list"); return m(), I("div", null, [a(o, { fields: e.repeaterFields, template: "{{ name }}", value: e.conditions, onInput: t[0] || (t[0] = s => e.conditions = s) }, null, 8, ["fields", "value"])]) } var lE = B(tE, [["render", nE]]); const oE = z({ components: { FieldDetailAdvancedSchema: LA, FieldDetailAdvancedRelationship: EI, FieldDetailAdvancedField: KI, FieldDetailAdvancedInterface: QI, FieldDetailAdvancedDisplay: eE, FieldDetailAdvancedConditions: lE }, props: { currentTab: { type: String, required: !0 } } }), aE = { class: "content" }; function iE(e, t, n, l, i, u) { const o = c("field-detail-advanced-schema"), s = c("field-detail-advanced-relationship"), r = c("field-detail-advanced-field"), p = c("field-detail-advanced-interface"), f = c("field-detail-advanced-display"), v = c("field-detail-advanced-conditions"); return m(), I("div", aE, [e.currentTab === "schema" ? (m(), C(o, { key: 0 })) : R("", !0), e.currentTab === "relationship" ? (m(), C(s, { key: 1 })) : R("", !0), e.currentTab === "field" ? (m(), C(r, { key: 2 })) : R("", !0), e.currentTab === "interface" ? (m(), C(p, { key: 3 })) : R("", !0), e.currentTab === "display" ? (m(), C(f, { key: 4 })) : R("", !0), e.currentTab === "conditions" ? (m(), C(v, { key: 5 })) : R("", !0)]) } var sE = B(oE, [["render", iE], ["__scopeId", "data-v-25cdbb16"]]); const rE = z({ props: { currentTab: { type: Array, required: !0 } }, emits: ["update:currentTab"], setup(e, { emit: t }) { const n = ft(), { localType: l } = $t(n), i = Re(e, "currentTab", t), { t: u } = x(); return { tabs: V(() => { const s = [{ text: u("schema"), value: "schema" }, { text: u("field", 1), value: "field" }, { text: u("interface_label"), value: "interface" }]; return l.value !== "presentation" && l.value !== "group" && s.push({ text: u("display"), value: "display" }), ["o2m", "m2o", "m2m", "m2a", "files"].includes(l.value) && s.splice(1, 0, { text: u("relationship"), value: "relationship" }), l.value === "translations" && s.splice(1, 0, { text: u("translations"), value: "relationship" }), s.push({ text: u("conditions"), value: "conditions" }), s }), currentTabSync: i } } }); function dE(e, t, n, l, i, u) { const o = c("v-tab"), s = c("v-tabs"); return m(), C(s, { modelValue: e.currentTabSync, "onUpdate:modelValue": t[0] || (t[0] = r => e.currentTabSync = r), vertical: "" }, { default: d(() => [(m(!0), I(se, null, he(e.tabs, r => (m(), C(o, { key: r.value, value: r.value, disabled: r.disabled }, { default: d(() => [D(b(r.text), 1)]), _: 2 }, 1032, ["value", "disabled"]))), 128))]), _: 1 }, 8, ["modelValue"]) } var uE = B(rE, [["render", dE]]); const cE = z({ emits: ["save"], setup() { const e = ft(), { saving: t, readyToSave: n } = $t(e), { t: l } = x(); return { saving: t, t: l, readyToSave: n } } }); function pE(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = we("tooltip"); return ee((m(), C(s, { disabled: e.readyToSave === !1, loading: e.saving, icon: "", rounded: "", onClick: t[0] || (t[0] = p => e.$emit("save")) }, { default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["disabled", "loading"])), [[r, e.t("save"), void 0, { bottom: !0 }]]) } var mE = B(cE, [["render", pE]]); const fE = z({ name: "FieldDetail", components: { FieldDetailSimple: uA, FieldDetailAdvanced: sE, FieldDetailAdvancedTabs: uE, FieldDetailAdvancedActions: mE }, props: { collection: { type: String, required: !0 }, field: { type: String, required: !0 }, type: { type: String, default: null } }, setup(e) { const { collection: t } = je(e), n = cn(), l = ft(), { editing: i } = $t(l); _e(() => e.field, () => l.startEditing(e.collection, e.field, e.type), { immediate: !0 }); const u = He(), o = Pe(), s = tt(), { t: r } = x(), p = V(() => u.getCollection(t.value)), f = E(e.type === null), v = V(() => { var F, A; const h = o.getField(e.collection, e.field), k = (h == null ? void 0 : h.name) || Vt(l.field.name || ""); return e.field === "+" && k === "" ? r("creating_new_field", { collection: (F = p.value) == null ? void 0 : F.name }) : r("field_in_collection", { field: k, collection: (A = p.value) == null ? void 0 : A.name }) }), _ = E(["schema"]), y = V(() => i.value !== "+" || !f.value); return { simple: f, cancel: g, collectionInfo: p, t: r, title: v, save: w, isOpen: n, currentTab: _, showAdvanced: y }; async function g() { await s.push(`/settings/data-model/${e.collection}`), l.$reset() } async function w() { await l.save(), s.push(`/settings/data-model/${e.collection}`), l.$reset() } } }); function vE(e, t, n, l, i, u) { const o = c("field-detail-simple"), s = c("field-detail-advanced-tabs"), r = c("field-detail-advanced-actions"), p = c("field-detail-advanced"), f = c("v-drawer"); return m(), C(f, { "model-value": e.isOpen, title: e.title, persistent: "", onCancel: e.cancel, "onUpdate:modelValue": e.cancel }, et({ default: d(() => [e.showAdvanced ? R("", !0) : (m(), C(o, { key: 0, collection: e.collectionInfo, onSave: e.save, onToggleAdvanced: t[0] || (t[0] = v => e.simple = !1) }, null, 8, ["collection", "onSave"])), e.showAdvanced ? (m(), C(p, { key: 1, collection: e.collectionInfo, "current-tab": e.currentTab[0], onSave: e.save }, null, 8, ["collection", "current-tab", "onSave"])) : R("", !0)]), _: 2 }, [e.showAdvanced ? { name: "sidebar", fn: d(() => [a(s, { "current-tab": e.currentTab, "onUpdate:current-tab": t[1] || (t[1] = v => e.currentTab = v) }, null, 8, ["current-tab"])]) } : void 0, e.showAdvanced ? { name: "actions", fn: d(() => [a(r, { onSave: e.save }, null, 8, ["onSave"])]) } : void 0]), 1032, ["model-value", "title", "onCancel", "onUpdate:modelValue"]) } var _E = B(fE, [["render", vE], ["__scopeId", "data-v-4fc67dfe"]]); const yE = z({ name: "FieldSelectMenu", props: { field: { type: Object, required: !0 }, noDelete: { type: Boolean, default: !1 } }, emits: ["toggleVisibility", "duplicate", "delete", "setWidth"], setup(e) { const { t } = x(), n = V(() => Xn(e.field.collection, e.field.field)), l = V(() => { var u; return ((u = e.field.schema) == null ? void 0 : u.is_primary_key) === !0 }), i = V(() => n.value === "standard" && l.value === !1); return { t, localType: n, isPrimaryKey: l, duplicable: i } } }); function gE(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("v-divider"), v = c("v-list"), _ = c("v-menu"); return m(), C(_, { "show-arrow": "", placement: "bottom-end" }, { activator: d(({ toggle: y }) => [a(o, { clickable: "", name: "more_vert", onClick: y }, null, 8, ["onClick"])]), default: d(() => [a(v, null, { default: d(() => { var y, g, w, h; return [a(p, { to: `/settings/data-model/${e.field.collection}/${e.field.field}` }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "edit", outline: "" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("edit_field")), 1)]), _: 1 })]), _: 1 }, 8, ["to"]), a(p, { disabled: e.duplicable === !1, clickable: "", onClick: t[0] || (t[0] = k => e.$emit("duplicate")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "content_copy" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("duplicate_field")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(p, { clickable: "", onClick: t[1] || (t[1] = k => e.$emit("toggleVisibility")) }, { default: d(() => { var k; return [((k = e.field.meta) == null ? void 0 : k.hidden) === !1 ? (m(), I(se, { key: 0 }, [a(s, null, { default: d(() => [a(o, { name: "visibility_off" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("hide_field_on_detail")), 1)]), _: 1 })], 64)) : (m(), I(se, { key: 1 }, [a(s, null, { default: d(() => [a(o, { name: "visibility" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("show_field_on_detail")), 1)]), _: 1 })], 64))] }), _: 1 }), a(f), a(p, { clickable: "", disabled: ((y = e.field.meta) == null ? void 0 : y.width) === "half" || e.localType === "group", onClick: t[2] || (t[2] = k => e.$emit("setWidth", "half")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "border_vertical" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("half_width")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(p, { clickable: "", disabled: ((g = e.field.meta) == null ? void 0 : g.width) === "full" || e.localType === "group", onClick: t[3] || (t[3] = k => e.$emit("setWidth", "full")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "border_right" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("full_width")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(p, { clickable: "", disabled: ((w = e.field.meta) == null ? void 0 : w.width) === "fill" || e.localType === "group", onClick: t[4] || (t[4] = k => e.$emit("setWidth", "fill")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "aspect_ratio" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("fill_width")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), a(f), a(p, { clickable: "", class: "danger", disabled: ((h = e.field.schema) == null ? void 0 : h.is_primary_key) === !0 || e.noDelete, onClick: t[5] || (t[5] = k => e.$emit("delete")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("delete_field")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])] }), _: 1 })]), _: 1 }) } var hE = B(yE, [["render", gE]]); function Nt(e) { const t = new Image; e.setDragImage(t, 0, 0) } const bE = z({ name: "FieldSelect", components: { FieldSelectMenu: hE, Draggable: kt }, props: { field: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, fields: { type: Array, default: () => [] } }, emits: ["setNestedSort"], setup(e, { emit: t }) { const { t: n } = x(), l = tt(), i = He(), u = Pe(), { interfaces: o } = St(), s = E(!1), { deleteActive: r, deleting: p, deleteField: f } = N(), { duplicateActive: v, duplicateName: _, collections: y, duplicateTo: g, saveDuplicate: w, duplicating: h } = O(), k = V(() => { var K; return (K = o.value.find(W => { var te; return W.id === ((te = e.field.meta) == null ? void 0 : te.interface) })) == null ? void 0 : K.name }), F = V(() => { var K; return ((K = e.field.meta) == null ? void 0 : K.hidden) === !0 }), A = V(() => Xn(e.field.collection, e.field.field)), P = V(() => e.fields.filter(K => { var W; return ((W = K.meta) == null ? void 0 : W.group) === e.field.field })); return { t: n, interfaceName: k, formatTitle: Vt, editActive: s, setWidth: L, deleteActive: r, deleting: p, deleteField: f, duplicateActive: v, collections: y, duplicateName: _, duplicateTo: g, saveDuplicate: w, duplicating: h, openFieldDetail: U, hidden: F, toggleVisibility: T, localType: A, hideDragImage: Nt, onGroupSortChange: q, nestedFields: P }; function L(K) { u.updateField(e.field.collection, e.field.field, { meta: { width: K } }) } function T() { var K; u.updateField(e.field.collection, e.field.field, { meta: { hidden: !((K = e.field.meta) == null ? void 0 : K.hidden) } }) } function N() { const K = E(!1), W = E(!1); return { deleteActive: K, deleting: W, deleteField: te }; async function te() { await u.deleteField(e.field.collection, e.field.field), W.value = !1, K.value = !1 } } function O() { const K = E(!1), W = E(e.field.field + "_copy"), te = E(!1), G = V(() => i.collections.map(({ collection: ae }) => ae).filter(ae => ae.startsWith("directus_") === !1)), X = E(e.field.collection); return { duplicateActive: K, duplicateName: W, collections: G, duplicateTo: X, saveDuplicate: ve, duplicating: te }; async function ve() { const ae = Ce(re({}, M.exports.cloneDeep(e.field)), { field: W.value, collection: X.value }); ae.meta && (delete ae.meta.id, delete ae.meta.sort, delete ae.meta.group), ae.schema && delete ae.schema.comment, delete ae.name, te.value = !0; try { await u.createField(X.value, ae), It({ title: n("field_create_success", { field: ae.field }), type: "success" }), K.value = !1 } catch (ne) { Ve(ne) } finally { te.value = !1 } } } async function U() { e.field.meta || await u.updateField(e.field.collection, e.field.field, { meta: {} }), l.push(`/settings/data-model/${e.field.collection}/${e.field.field}`) } async function q(K) { const W = K.map((te, G) => ({ field: te.field, meta: { sort: G + 1, group: e.field.meta.field } })); t("setNestedSort", W) } } }), $E = { class: "label" }, wE = { class: "name" }, kE = { class: "header full" }, SE = { class: "name" }, CE = { class: "label-inner" }, VE = { class: "name" }, FE = { key: 0, class: "interface" }, AE = { key: 1, class: "interface" }, IE = { class: "icons" }, EE = { class: "form-grid" }, DE = { class: "field" }, TE = { class: "type-label" }, PE = { class: "field" }, OE = { class: "type-label" }; function LE(e, t, n, l, i, u) { var A; const o = c("v-icon"), s = c("v-input"), r = c("field-select-menu"), p = c("field-select", !0), f = c("draggable"), v = c("v-card-title"), _ = c("v-select"), y = c("v-card-text"), g = c("v-button"), w = c("v-card-actions"), h = c("v-card"), k = c("v-dialog"), F = we("tooltip"); return m(), I("div", { class: de(["field-select", ((A = e.field.meta) == null ? void 0 : A.width) || "full"]) }, [e.disabled ? (m(), C(s, { key: 0, disabled: "", class: "field" }, { prepend: d(() => [ee(a(o, { name: "lock" }, null, 512), [[F, e.t("system_fields_locked")]])]), input: d(() => [S("div", $E, [S("span", wE, b(e.field.field), 1)])]), _: 1 })) : (m(), I(se, { key: 1 }, [e.localType === "group" ? (m(), C(f, { key: 0, class: "field-grid group full nested", "model-value": e.nestedFields, "force-fallback": !0, handle: ".drag-handle", group: { name: "fields" }, "set-data": e.hideDragImage, animation: 150, "item-key": "field", "fallback-on-body": !0, "invert-swap": !0, "onUpdate:modelValue": e.onGroupSortChange }, { header: d(() => [S("div", kE, [a(o, { class: "drag-handle", name: "drag_indicator", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) }), S("span", SE, b(e.field.field), 1), e.hidden ? ee((m(), C(o, { key: 0, name: "visibility_off", class: "hidden-icon", small: "" }, null, 512)), [[F, e.t("hidden_field")]]) : R("", !0), a(r, { field: e.field, "no-delete": e.nestedFields.length > 0, onToggleVisibility: e.toggleVisibility, onSetWidth: t[1] || (t[1] = P => e.setWidth(P)), onDuplicate: t[2] || (t[2] = P => e.duplicateActive = !0), onDelete: t[3] || (t[3] = P => e.deleteActive = !0) }, null, 8, ["field", "no-delete", "onToggleVisibility"])])]), item: d(({ element: P }) => [a(p, { field: P, fields: e.fields, onSetNestedSort: t[4] || (t[4] = L => e.$emit("setNestedSort", L)) }, null, 8, ["field", "fields"])]), _: 1 }, 8, ["model-value", "set-data", "onUpdate:modelValue"])) : (m(), C(s, { key: 1, class: de(["field", { hidden: e.hidden }]), readonly: "" }, { prepend: d(() => [a(o, { class: "drag-handle", name: "drag_indicator", onClick: t[5] || (t[5] = Ae(() => { }, ["stop"])) })]), input: d(() => { var P; return [ee(S("div", { class: "label", onClick: t[6] || (t[6] = (...L) => e.openFieldDetail && e.openFieldDetail(...L)) }, [S("div", CE, [S("span", VE, [D(b(e.field.field) + " ", 1), ((P = e.field.meta) == null ? void 0 : P.required) === !0 ? (m(), C(o, { key: 0, name: "star", class: "required", sup: "" })) : R("", !0)]), e.field.meta ? (m(), I("span", FE, b(e.interfaceName), 1)) : (m(), I("span", AE, b(e.t("db_only_click_to_configure")), 1))])], 512), [[F, e.interfaceName ? `${e.field.name} (${e.formatTitle(e.field.type)}) - ${e.interfaceName}` : e.field.name]])] }), append: d(() => [S("div", IE, [e.field.schema && e.field.schema.is_primary_key ? ee((m(), C(o, { key: 0, name: "vpn_key", small: "" }, null, 512)), [[F, e.t("primary_key")]]) : R("", !0), e.field.meta ? R("", !0) : ee((m(), C(o, { key: 1, name: "report_problem", class: "unmanaged", small: "" }, null, 512)), [[F, e.t("db_only_click_to_configure")]]), e.hidden ? ee((m(), C(o, { key: 2, name: "visibility_off", class: "hidden-icon", small: "" }, null, 512)), [[F, e.t("hidden_field")]]) : R("", !0), a(r, { field: e.field, onToggleVisibility: e.toggleVisibility, onSetWidth: t[7] || (t[7] = P => e.setWidth(P)), onDuplicate: t[8] || (t[8] = P => e.duplicateActive = !0), onDelete: t[9] || (t[9] = P => e.deleteActive = !0) }, null, 8, ["field", "onToggleVisibility"])])]), _: 1 }, 8, ["class"])), a(k, { modelValue: e.duplicateActive, "onUpdate:modelValue": t[13] || (t[13] = P => e.duplicateActive = P), onEsc: t[14] || (t[14] = P => e.duplicateActive = !1) }, { default: d(() => [a(h, { class: "duplicate" }, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("duplicate_where_to")), 1)]), _: 1 }), a(y, null, { default: d(() => [S("div", EE, [S("div", DE, [S("span", TE, b(e.t("collection", 0)), 1), a(_, { modelValue: e.duplicateTo, "onUpdate:modelValue": t[10] || (t[10] = P => e.duplicateTo = P), class: "monospace", items: e.collections }, null, 8, ["modelValue", "items"])]), S("div", PE, [S("span", OE, b(e.t("field", 0)), 1), a(s, { modelValue: e.duplicateName, "onUpdate:modelValue": t[11] || (t[11] = P => e.duplicateName = P), class: "monospace", "db-safe": "", autofocus: "" }, null, 8, ["modelValue"])])])]), _: 1 }), a(w, null, { default: d(() => [a(g, { secondary: "", onClick: t[12] || (t[12] = P => e.duplicateActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(g, { disabled: e.duplicateName === null, loading: e.duplicating, onClick: e.saveDuplicate }, { default: d(() => [D(b(e.t("duplicate")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(k, { modelValue: e.deleteActive, "onUpdate:modelValue": t[16] || (t[16] = P => e.deleteActive = P), onEsc: t[17] || (t[17] = P => e.deleteActive = !1) }, { default: d(() => [a(h, null, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("delete_field_are_you_sure", { field: e.field.field })), 1)]), _: 1 }), a(w, null, { default: d(() => [a(g, { secondary: "", onClick: t[15] || (t[15] = P => e.deleteActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(g, { loading: e.deleting, kind: "danger", onClick: e.deleteField }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])], 64))], 2) } var jE = B(bE, [["render", LE], ["__scopeId", "data-v-7bcdc863"]]); const RE = z({ name: "FieldsManagement", components: { Draggable: kt, FieldSelect: jE }, props: { collection: { type: String, required: !0 } }, setup(e) { const { t } = x(), { collection: n } = je(e), { fields: l } = ot(n), i = Pe(), u = V(() => M.exports.orderBy(l.value, [v => { var _, y; return ((_ = v.meta) == null ? void 0 : _.sort) ? Number((y = v.meta) == null ? void 0 : y.sort) : null }, v => { var _; return (_ = v.meta) == null ? void 0 : _.id }]).filter(v => v.field.startsWith("$") === !1)), o = V(() => u.value.filter(v => { var _; return ((_ = v.meta) == null ? void 0 : _.system) === !0 })), s = V(() => u.value.filter(v => { var _; return ((_ = v.meta) == null ? void 0 : _.system) !== !0 })), r = V(() => [{ type: "standard", icon: "create", text: t("standard_field") }, { type: "presentation", icon: "scatter_plot", text: t("presentation_and_aliases") }, { type: "group", icon: "view_in_ar", text: t("field_group") }, { divider: !0 }, { type: "file", icon: "photo", text: t("single_file") }, { type: "files", icon: "collections", text: t("multiple_files") }, { divider: !0 }, { type: "m2o", icon: "call_merge", text: t("m2o_relationship") }, { type: "o2m", icon: "call_split", text: t("o2m_relationship") }, { type: "m2m", icon: "import_export", text: t("m2m_relationship") }, { type: "m2a", icon: "gesture", text: t("m2a_relationship") }, { divider: !0 }, { type: "translations", icon: "translate", text: t("translations") }]); return { t, usableFields: s, lockedFields: o, setSort: p, hideDragImage: Nt, addOptions: r, setNestedSort: f, isNil: M.exports.isNil }; async function p(v) { const _ = v.map((y, g) => ({ field: y.field, meta: { sort: g + 1, group: null } })); await i.updateFields(n.value, _) } async function f(v) { v = (v || []).filter(_ => M.exports.isNil(_) === !1), v.length > 0 && await i.updateFields(n.value, v) } } }), ME = { class: "fields-management" }, UE = { key: 0, class: "field-grid" }, NE = ["dashed", "onClick"]; function BE(e, t, n, l, i, u) { const o = c("field-select"), s = c("draggable"), r = c("v-button"), p = c("v-divider"), f = c("v-icon"), v = c("v-list-item-icon"), _ = c("v-list-item-content"), y = c("v-list-item"), g = c("v-list"), w = c("v-menu"); return m(), I("div", ME, [e.lockedFields.length > 0 ? (m(), I("div", UE, [(m(!0), I(se, null, he(e.lockedFields, h => (m(), C(o, { key: h.field, disabled: "", field: h }, null, 8, ["field"]))), 128))])) : R("", !0), a(s, { class: "field-grid", "model-value": e.usableFields.filter(h => { var k; return e.isNil((k = h == null ? void 0 : h.meta) == null ? void 0 : k.group) }), "force-fallback": !0, handle: ".drag-handle", group: { name: "fields" }, "set-data": e.hideDragImage, "item-key": "field", animation: 150, "fallback-on-body": !0, "invert-swap": !0, "onUpdate:modelValue": e.setSort }, { item: d(({ element: h }) => [a(o, { field: h, fields: e.usableFields, onSetNestedSort: e.setNestedSort }, null, 8, ["field", "fields", "onSetNestedSort"])]), _: 1 }, 8, ["model-value", "set-data", "onUpdate:modelValue"]), a(r, { "full-width": "", to: `/settings/data-model/${e.collection}/+` }, { default: d(() => [D(b(e.t("create_field")), 1)]), _: 1 }, 8, ["to"]), a(w, { "show-arrow": "" }, { activator: d(({ toggle: h, active: k }) => [S("button", { class: de(["add-field-advanced", { active: k }]), dashed: !k, onClick: h }, b(e.t("create_in_advanced_field_creation_mode")), 11, NE)]), default: d(() => [a(g, null, { default: d(() => [(m(!0), I(se, null, he(e.addOptions, (h, k) => (m(), I(se, { key: k }, [h.divider === !0 ? (m(), C(p, { key: 0 })) : (m(), C(y, { key: 1, to: `/settings/data-model/${e.collection}/+?type=${h.type}` }, { default: d(() => [a(v, null, { default: d(() => [a(f, { name: h.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(_, null, { default: d(() => [D(b(h.text), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["to"]))], 64))), 128))]), _: 1 })]), _: 1 })]) } var qE = B(RE, [["render", BE], ["__scopeId", "data-v-4cc65bb1"]]); const zE = z({ components: { SettingsNavigation: Mt, FieldsManagement: qE }, props: { collection: { type: String, required: !0 }, field: { type: String, default: null }, type: { type: String, default: null } }, setup(e) { const { t } = x(), n = tt(), { collection: l } = je(e), { info: i, fields: u } = ot(l), o = He(), s = Pe(), { isNew: r, edits: p, item: f, saving: v, loading: _, error: y, save: g, remove: w, deleting: h, saveAsCopy: k, isBatch: F } = kn(E("directus_collections"), l), A = V(() => p.value.meta ? Object.keys(p.value.meta).length > 0 : !1); nt("meta+s", () => { A.value && q() }); const P = E(!1), L = V(() => A.value === !0 ? !0 : A.value); en(L); const T = E(!1), N = E(null), O = te => { if (A.value) return T.value = !0, N.value = te.fullPath, !1 }; return Ot(O), Tt(O), { t, collectionInfo: i, fields: u, confirmDelete: P, isNew: r, edits: p, item: f, saving: v, loading: _, error: y, save: g, remove: w, deleting: h, saveAsCopy: k, isBatch: F, deleteAndQuit: U, saveAndQuit: K, hasEdits: A, isSavable: L, confirmLeave: T, leaveTo: N, discardAndLeave: W }; async function U() { await w(), await o.hydrate(), await s.hydrate(), n.replace("/settings/data-model") } async function q() { await g(), await o.hydrate(), await s.hydrate() } async function K() { await g(), await o.hydrate(), await s.hydrate(), n.push("/settings/data-model") } function W() { !N.value || (p.value = {}, T.value = !1, n.push(N.value)) } } }), KE = { class: "collections-item" }, HE = { class: "fields" }, WE = { class: "title type-label" }, GE = { class: "instant-save" }, JE = { class: "page-description" }; function QE(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("v-card-title"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"), y = c("settings-navigation"), g = c("fields-management"), w = c("router-view"), h = c("v-form"), k = c("sidebar-detail"), F = c("v-card-text"), A = c("private-view"), P = we("tooltip"), L = we("md"); return m(), C(A, { title: e.collectionInfo && e.collectionInfo.name }, { headline: d(() => [a(o, { items: [{ name: e.t("settings_data_model"), to: "/settings/data-model" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", exact: "", to: "/settings/data-model" }, { default: d(() => [a(s, { name: "arrow_back" })]), _: 1 })]), actions: d(() => [a(_, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[1] || (t[1] = T => e.confirmDelete = T), onEsc: t[2] || (t[2] = T => e.confirmDelete = !1) }, { activator: d(({ on: T }) => [e.item && e.item.collection.startsWith("directus_") === !1 ? ee((m(), C(r, { key: 0, rounded: "", icon: "", class: "action-delete", disabled: e.item === null, onClick: T }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"])), [[P, e.t("delete_collection"), void 0, { bottom: !0 }]]) : R("", !0)]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: t[0] || (t[0] = T => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), ee(a(r, { rounded: "", icon: "", loading: e.saving, disabled: e.hasEdits === !1, onClick: e.saveAndQuit }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"]), [[P, e.t("save"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(y)]), sidebar: d(() => [a(k, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", JE, null, 512), [[L, e.t("page_help_settings_datamodel_fields")]])]), _: 1 }, 8, ["title"])]), default: d(() => [S("div", KE, [S("div", HE, [S("h2", WE, [D(b(e.t("fields_and_layout")) + " ", 1), S("span", GE, b(e.t("saves_automatically")), 1)]), a(g, { collection: e.collection }, null, 8, ["collection"])]), a(w, { name: "field", collection: e.collection, field: e.field, type: e.type }, null, 8, ["collection", "field", "type"]), a(h, { modelValue: e.edits.meta, "onUpdate:modelValue": t[3] || (t[3] = T => e.edits.meta = T), collection: "directus_collections", loading: e.loading, "initial-values": e.item && e.item.meta, "batch-mode": e.isBatch, "primary-key": e.collection, disabled: e.item && e.item.collection.startsWith("directus_") }, null, 8, ["modelValue", "loading", "initial-values", "batch-mode", "primary-key", "disabled"])]), a(_, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[5] || (t[5] = T => e.confirmLeave = T), onEsc: t[6] || (t[6] = T => e.confirmLeave = !1) }, { default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(F, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[4] || (t[4] = T => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"]) } var XE = B(zE, [["render", QE], ["__scopeId", "data-v-18c2c9ea"]]); const os = { status: { enabled: !1, inputDisabled: !1, name: "status", label: "status", icon: "flag" }, sort: { enabled: !1, inputDisabled: !1, name: "sort", label: "sort", icon: "low_priority" }, dateCreated: { enabled: !1, inputDisabled: !1, name: "date_created", label: "created_on", icon: "access_time" }, userCreated: { enabled: !1, inputDisabled: !1, name: "user_created", label: "created_by", icon: "account_circle" }, dateUpdated: { enabled: !1, inputDisabled: !1, name: "date_updated", label: "updated_on", icon: "access_time" }, userUpdated: { enabled: !1, inputDisabled: !1, name: "user_updated", label: "updated_by", icon: "account_circle" } }, ZE = z({ setup() { const { t: e } = x(), t = tt(), n = He(), l = Pe(), i = ut(), u = cn(), o = E(["collection_setup"]), s = E(null), r = E(!1), p = E("id"), f = E("auto_int"), v = E(), _ = E(), y = E(), g = E(), w = Xt(M.exports.cloneDeep(os)), h = E(!1); return _e(() => r.value, k), { t: e, router: t, isOpen: u, currentTab: o, save: F, systemFields: w, primaryKeyFieldName: p, primaryKeyFieldType: f, collectionName: s, saving: h, singleton: r }; function k() { w.sort = re({}, os.sort), w.sort.inputDisabled = r.value } async function F() { h.value = !0; try { await ue.post("/collections", { collection: s.value, fields: [A(), ...P()], schema: {}, meta: { sort_field: v.value, archive_field: _.value, archive_value: y.value, unarchive_value: g.value, singleton: r.value } }); const T = L(); if (T.length > 0) { for (const N of T) await ue.post("/relations", N); await i.hydrate() } await n.hydrate(), await l.hydrate(), It({ title: e("collection_created"), type: "success" }), t.replace(`/settings/data-model/${s.value}`) } catch (T) { Ve(T) } finally { h.value = !1 } } function A() { return f.value === "uuid" ? { field: p.value, type: "uuid", meta: { hidden: !0, readonly: !0, interface: "input", special: ["uuid"] }, schema: { is_primary_key: !0, length: 36, has_auto_increment: !1 } } : f.value === "manual" ? { field: p.value, type: "string", meta: { interface: "input", readonly: !1, hidden: !1 }, schema: { is_primary_key: !0, length: 255, has_auto_increment: !1 } } : { field: p.value, type: "integer", meta: { hidden: !0, interface: "input", readonly: !0 }, schema: { is_primary_key: !0, has_auto_increment: !0 } } } function P() { const T = []; return w.status.enabled === !0 && (T.push({ field: w.status.name, type: "string", meta: { width: "full", options: { choices: [{ text: "$t:published", value: "published" }, { text: "$t:draft", value: "draft" }, { text: "$t:archived", value: "archived" }] }, interface: "select-dropdown", display: "labels", display_options: { showAsDot: !0, choices: [{ background: "#00C897", value: "published" }, { background: "#D3DAE4", value: "draft" }, { background: "#F7971C", value: "archived" }] } }, schema: { default_value: "draft", is_nullable: !1 } }), _.value = "status", y.value = "archived", g.value = "draft"), w.sort.enabled === !0 && (T.push({ field: w.sort.name, type: "integer", meta: { interface: "input", hidden: !0 }, schema: {} }), v.value = w.sort.name), w.userCreated.enabled === !0 && T.push({ field: w.userCreated.name, type: "uuid", meta: { special: ["user-created"], interface: "select-dropdown-m2o", options: { template: "{{avatar.$thumbnail}} {{first_name}} {{last_name}}" }, display: "user", readonly: !0, hidden: !0, width: "half" }, schema: {} }), w.dateCreated.enabled === !0 && T.push({ field: w.dateCreated.name, type: "timestamp", meta: { special: ["date-created"], interface: "datetime", readonly: !0, hidden: !0, width: "half", display: "datetime", display_options: { relative: !0 } }, schema: {} }), w.userUpdated.enabled === !0 && T.push({ field: w.userUpdated.name, type: "uuid", meta: { special: ["user-updated"], interface: "select-dropdown-m2o", options: { template: "{{avatar.$thumbnail}} {{first_name}} {{last_name}}" }, display: "user", readonly: !0, hidden: !0, width: "half" }, schema: {} }), w.dateUpdated.enabled === !0 && T.push({ field: w.dateUpdated.name, type: "timestamp", meta: { special: ["date-updated"], interface: "datetime", readonly: !0, hidden: !0, width: "half", display: "datetime", display_options: { relative: !0 } }, schema: {} }), T } function L() { const T = []; return w.userCreated.enabled === !0 && T.push({ collection: s.value, field: w.userCreated.name, related_collection: "directus_users", schema: { on_delete: "SET NULL" } }), w.userUpdated.enabled === !0 && T.push({ collection: s.value, field: w.userUpdated.name, related_collection: "directus_users", schema: { on_delete: "SET NULL" } }), T } } }), YE = { class: "grid" }, xE = { class: "field half" }, eD = { class: "type-label" }, tD = { class: "field half" }, nD = { class: "type-label" }, lD = { class: "field half" }, oD = { class: "type-label" }, aD = { class: "field half" }, iD = { class: "type-label" }, sD = { class: "grid system" }, rD = { class: "type-label" }; function dD(e, t, n, l, i, u) { const o = c("v-tab"), s = c("v-tabs"), r = c("v-notice"), p = c("v-icon"), f = c("v-input"), v = c("v-checkbox"), _ = c("v-divider"), y = c("v-select"), g = c("v-tab-item"), w = c("v-tabs-items"), h = c("v-button"), k = c("v-drawer"), F = we("tooltip"); return m(), C(k, { title: e.t("creating_new_collection"), "model-value": e.isOpen, class: "new-collection", persistent: "", "sidebar-label": e.t(e.currentTab[0]), onCancel: t[7] || (t[7] = A => e.router.push("/settings/data-model")) }, { sidebar: d(() => [a(s, { modelValue: e.currentTab, "onUpdate:modelValue": t[0] || (t[0] = A => e.currentTab = A), vertical: "" }, { default: d(() => [a(o, { value: "collection_setup" }, { default: d(() => [D(b(e.t("collection_setup")), 1)]), _: 1 }), a(o, { value: "optional_system_fields", disabled: !e.collectionName }, { default: d(() => [D(b(e.t("optional_system_fields")), 1)]), _: 1 }, 8, ["disabled"])]), _: 1 }, 8, ["modelValue"])]), actions: d(() => [e.currentTab[0] === "collection_setup" ? ee((m(), C(h, { key: 0, disabled: !e.collectionName || e.collectionName.length === 0, icon: "", rounded: "", onClick: t[6] || (t[6] = A => e.currentTab = ["optional_system_fields"]) }, { default: d(() => [a(p, { name: "arrow_forward" })]), _: 1 }, 8, ["disabled"])), [[F, e.t("next"), void 0, { bottom: !0 }]]) : R("", !0), e.currentTab[0] === "optional_system_fields" ? ee((m(), C(h, { key: 1, loading: e.saving, icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(p, { name: "check" })]), _: 1 }, 8, ["loading", "onClick"])), [[F, e.t("finish_setup"), void 0, { bottom: !0 }]]) : R("", !0)]), default: d(() => [a(w, { modelValue: e.currentTab, "onUpdate:modelValue": t[5] || (t[5] = A => e.currentTab = A), class: "content" }, { default: d(() => [a(g, { value: "collection_setup" }, { default: d(() => [a(r, { type: "info" }, { default: d(() => [D(b(e.t("creating_collection_info")), 1)]), _: 1 }), S("div", YE, [S("div", xE, [S("div", eD, [D(b(e.t("name")) + " ", 1), ee(a(p, { class: "required", name: "star", sup: "" }, null, 512), [[F, e.t("required")]])]), a(f, { modelValue: e.collectionName, "onUpdate:modelValue": t[1] || (t[1] = A => e.collectionName = A), autofocus: "", class: "monospace", "db-safe": "", placeholder: e.t("a_unique_table_name") }, null, 8, ["modelValue", "placeholder"])]), S("div", tD, [S("div", nD, b(e.t("singleton")), 1), a(v, { modelValue: e.singleton, "onUpdate:modelValue": t[2] || (t[2] = A => e.singleton = A), block: "", label: e.t("singleton_label") }, null, 8, ["modelValue", "label"])]), a(_, { class: "full" }), S("div", lD, [S("div", oD, b(e.t("primary_key_field")), 1), a(f, { modelValue: e.primaryKeyFieldName, "onUpdate:modelValue": t[3] || (t[3] = A => e.primaryKeyFieldName = A), class: "monospace", "db-safe": "", placeholder: e.t("a_unique_column_name") }, null, 8, ["modelValue", "placeholder"])]), S("div", aD, [S("div", iD, b(e.t("type")), 1), a(y, { modelValue: e.primaryKeyFieldType, "onUpdate:modelValue": t[4] || (t[4] = A => e.primaryKeyFieldType = A), items: [{ text: e.t("auto_increment_integer"), value: "auto_int" }, { text: e.t("generated_uuid"), value: "uuid" }, { text: e.t("manual_string"), value: "manual" }] }, null, 8, ["modelValue", "items"])])])]), _: 1 }), a(g, { value: "optional_system_fields" }, { default: d(() => [a(r, { type: "info" }, { default: d(() => [D(b(e.t("creating_collection_system")), 1)]), _: 1 }), S("div", sD, [(m(!0), I(se, null, he(e.systemFields, (A, P, L) => (m(), I("div", { key: P, class: de(["field", L % 2 == 0 ? "half" : "half-right"]) }, [S("div", rD, b(e.t(A.label)), 1), a(f, { modelValue: A.name, "onUpdate:modelValue": T => A.name = T, class: de(["monospace", { active: A.enabled }]), disabled: A.inputDisabled, onFocus: T => A.enabled = !0 }, { prepend: d(() => [a(v, { modelValue: A.enabled, "onUpdate:modelValue": T => A.enabled = T, disabled: A.inputDisabled }, null, 8, ["modelValue", "onUpdate:modelValue", "disabled"])]), append: d(() => [a(p, { name: A.icon }, null, 8, ["name"])]), _: 2 }, 1032, ["modelValue", "onUpdate:modelValue", "class", "disabled", "onFocus"])], 2))), 128))])]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title", "model-value", "sidebar-label"]) } var uD = B(ZE, [["render", dD], ["__scopeId", "data-v-6438aa58"]]); const cD = z({ components: { SettingsNavigation: Mt }, setup() { const { t: e } = x(); return { t: e } } }), pD = { class: "not-found" }; function mD(e, t, n, l, i, u) { const o = c("settings-navigation"), s = c("v-info"), r = c("private-view"); return m(), C(r, { title: e.t("page_not_found") }, { navigation: d(() => [a(o)]), default: d(() => [S("div", pD, [a(s, { title: e.t("page_not_found"), icon: "not_interested" }, { default: d(() => [D(b(e.t("page_not_found_body")), 1)]), _: 1 }, 8, ["title"])])]), _: 1 }, 8, ["title"]) } var fD = B(cD, [["render", mD], ["__scopeId", "data-v-bf888afe"]]); const vD = {}, _D = { class: "null" }; function yD(e, t) { return m(), I("span", _D, "--") } var tn = B(vD, [["render", yD], ["__scopeId", "data-v-cf005d72"]]); const gD = z({ setup() { const { t: e } = x(), t = E(!1), n = E(null), l = E(null); return i(), { t: e, bookmarksCount: n, presetsCount: l }; async function i() { t.value = !0; try { const u = await ue.get("/presets", { params: { ["filter[bookmark][_nnull]"]: !0, fields: ["id"], meta: "filter_count,total_count" } }); n.value = u.data.meta.filter_count, l.value = u.data.meta.total_count - n.value } catch (u) { Ve(u) } finally { t.value = !1 } } } }), hD = { class: "page-description" }; function bD(e, t, n, l, i, u) { const o = c("v-divider"), s = c("sidebar-detail"), r = we("md"); return m(), C(s, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [S("dl", null, [S("div", null, [S("dt", null, b(e.t("bookmarks")), 1), S("dd", null, b(e.bookmarksCount), 1)]), S("div", null, [S("dt", null, b(e.t("presets")), 1), S("dd", null, b(e.presetsCount), 1)])]), a(o), ee(S("div", hD, null, 512), [[r, e.t("page_help_settings_presets_collection")]])]), _: 1 }, 8, ["title"]) } var $D = B(gD, [["render", bD], ["__scopeId", "data-v-7ed28445"]]); const wD = z({ components: { SettingsNavigation: Mt, ValueNull: tn, PresetsInfoSidebarDetail: $D }, setup() { const { t: e } = x(), t = tt(), { layouts: n } = dn(), l = He(), i = E([]), { addNewLink: u } = y(), { loading: o, presets: s, getPresets: r } = g(), { headers: p } = w(), { confirmDelete: f, deleting: v, deleteSelection: _ } = k(); return r(), { t: e, addNewLink: u, usePresets: g, loading: o, presets: s, getPresets: r, headers: p, selection: i, onRowClick: h, confirmDelete: f, deleting: v, deleteSelection: _ }; function y() { return { addNewLink: V(() => "/settings/presets/+") } } function g() { const F = E(!1), A = E(null), P = V(() => (A.value || []).map(T => { var q, K; let N = "all"; T.role && (N = T.role.name), T.user && (N = yt(T.user)); const O = (q = l.getCollection(T.collection)) == null ? void 0 : q.name, U = (K = n.value.find(W => W.id === T.layout)) == null ? void 0 : K.name; return { id: T.id, scope: N, collection: O, layout: U, name: T.bookmark } })); return { loading: F, presetsRaw: A, getPresets: L, presets: P }; async function L() { F.value = !0; try { const T = await ue.get("/presets", { params: { fields: ["id", "bookmark", "user.email", "user.first_name", "user.last_name", "role.name", "collection", "layout"], limit: -1 } }); A.value = T.data.data } catch (T) { Ve(T) } finally { F.value = !1 } } } function w() { return { headers: [{ text: e("collection"), value: "collection", align: "left", sortable: !0, width: 200 }, { text: e("scope"), value: "scope", align: "left", sortable: !0, width: 200 }, { text: e("layout"), value: "layout", align: "left", sortable: !0, width: 200 }, { text: e("name"), value: "name", align: "left", sortable: !0, width: 200 }] } } function h({ item: F }) { i.value.length === 0 ? t.push(`/settings/presets/${F.id}`) : i.value.includes(F) ? i.value = i.value.filter(A => A !== F) : i.value = [...i.value, F] } function k() { const F = E(!1), A = E(!1); return { confirmDelete: F, deleting: A, deleteSelection: P }; async function P() { A.value = !0; try { const L = i.value.map(T => T.id); await ue.delete("/presets", { data: L }), i.value = [], await r(), F.value = !1 } finally { A.value = !1 } } } } }), kD = { class: "presets-collection" }, SD = { key: 1 }; function CD(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("v-card-title"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"), y = c("settings-navigation"), g = c("v-info"), w = c("value-null"), h = c("v-table"), k = c("presets-info-sidebar-detail"), F = c("private-view"), A = we("tooltip"); return m(), C(F, { title: e.t("settings_presets") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings"), to: "/settings" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "bookmark_border" })]), _: 1 })]), actions: d(() => [e.selection.length > 0 ? (m(), C(_, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[1] || (t[1] = P => e.confirmDelete = P), onEsc: t[2] || (t[2] = P => e.confirmDelete = !1) }, { activator: d(({ on: P }) => [ee(a(r, { rounded: "", icon: "", class: "action-delete", onClick: P }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["onClick"]), [[A, e.t("delete_label"), void 0, { bottom: !0 }]])]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("batch_delete_confirm", e.selection.length)), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: t[0] || (t[0] = P => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteSelection }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), ee(a(r, { rounded: "", icon: "", to: e.addNewLink }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to"]), [[A, e.t("create_preset"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(y)]), sidebar: d(() => [a(k)]), default: d(() => [S("div", kD, [!e.loading && e.presets.length === 0 ? (m(), C(g, { key: 0, center: "", type: "warning", title: e.t("no_presets"), icon: "bookmark" }, { append: d(() => [a(r, { to: e.addNewLink }, { default: d(() => [D(b(e.t("no_presets_cta")), 1)]), _: 1 }, 8, ["to"])]), default: d(() => [D(b(e.t("no_presets_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : (m(), C(h, { key: 1, modelValue: e.selection, "onUpdate:modelValue": t[3] || (t[3] = P => e.selection = P), headers: e.headers, "fixed-header": "", items: e.presets, loading: e.loading, "show-select": "", "onClick:row": e.onRowClick }, { ["item.scope"]: d(({ item: P }) => [S("span", { class: de({ all: P.scope === "all" }) }, b(P.scope === "all" ? e.t("all") : P.scope), 3)]), ["item.layout"]: d(({ item: P }) => [P.layout ? (m(), I("span", SD, b(P.layout), 1)) : (m(), C(w, { key: 0 }))]), ["item.name"]: d(({ item: P }) => [S("span", { class: de({ default: P.name === null }) }, b(P.name === null ? e.t("default_label") : P.name), 3)]), _: 2 }, 1032, ["modelValue", "headers", "items", "loading", "onClick:row"]))])]), _: 1 }, 8, ["title"]) } var VD = B(wD, [["render", CD], ["__scopeId", "data-v-707af3dc"]]); const FD = z({ components: { SettingsNavigation: Mt }, props: { id: { type: String, default: null } }, setup(e) { const { t } = x(), n = tt(), l = He(), i = Tn(), { layouts: u } = dn(), { backLink: o } = Y(), s = V(() => e.id === "+"), { loading: r, preset: p } = ne(), { fields: f } = ce(), { edits: v, hasEdits: _, initialValues: y, values: g, layoutQuery: w, layoutOptions: h, updateFilters: k, search: F } = ae(), { save: A, saving: P } = X(), { deleting: L, deleteAndQuit: T, confirmDelete: N } = ve(), O = V({ get() { var H; return (H = g.value.filter) != null ? H : null }, set(H) { k(H) } }), U = V(() => g.value.layout), { layoutWrapper: q } = un(U); nt("meta+s", () => { _.value && A() }); const K = V(() => _.value === !0 ? !0 : _.value); en(K); const W = E(!1), te = E(null), G = H => { if (_.value) return W.value = !0, te.value = H.fullPath, !1 }; return Ot(G), Tt(G), { t, backLink: o, loading: r, preset: p, edits: v, fields: f, values: g, initialValues: y, saving: P, save: A, layoutWrapper: q, layoutQuery: w, layoutOptions: h, layoutFilter: O, hasEdits: _, deleting: L, deleteAndQuit: T, confirmDelete: N, updateFilters: k, search: F, isSavable: K, confirmLeave: W, leaveTo: te, discardAndLeave: pe }; function X() { const H = E(!1); return { saving: H, save: Q }; async function Q() { var le; H.value = !0; const Z = {}; v.value.name && (Z.bookmark = v.value.name), ((le = v.value.name) == null ? void 0 : le.length) === 0 && (Z.bookmark = null), v.value.collection && (Z.collection = v.value.collection), v.value.layout && (Z.layout = v.value.layout), v.value.layout_query && (Z.layout_query = v.value.layout_query), v.value.layout_options && (Z.layout_options = v.value.layout_options), v.value.filter && (Z.filter = v.value.filter), Z.search = v.value.search, v.value.scope && (v.value.scope.startsWith("role_") ? (Z.role = v.value.scope.substring(5), Z.user = null) : v.value.scope.startsWith("user_") ? (Z.user = v.value.scope.substring(5), Z.role = null) : (Z.role = null, Z.user = null)); try { s.value === !0 ? await ue.post("/presets", Z) : await ue.patch(`/presets/${e.id}`, Z), await i.hydrate(), v.value = {} } catch (fe) { Ve(fe) } finally { H.value = !1, n.push("/settings/presets") } } } function ve() { const H = E(!1), Q = E(!1); return { deleting: H, confirmDelete: Q, deleteAndQuit: Z }; async function Z() { H.value = !0; try { await ue.delete(`/presets/${e.id}`), n.replace("/settings/presets") } catch (le) { Ve(le) } finally { H.value = !1 } } } function ae() { const H = E({}), Q = V(() => Object.keys(H.value).length > 0), Z = V(() => { const me = { collection: null, layout: "tabular", search: null, scope: "all", layout_query: null, layout_options: null, filter: null }; if (s.value === !0 || p.value === null) return me; let ge = "all"; return p.value.user !== null ? ge = `user_${p.value.user}` : p.value.role !== null && (ge = `role_${p.value.role}`), { id: p.value.id, collection: p.value.collection, layout: p.value.layout, name: p.value.bookmark, search: p.value.search, scope: ge, layout_query: p.value.layout_query, layout_options: p.value.layout_options, filter: p.value.filter } }), le = V(() => re(re({}, Z.value), H.value)), fe = V({ get() { return !le.value.layout_query || !le.value.layout ? null : le.value.layout_query[le.value.layout] }, set(me) { le.value.layout_query && le.value.layout && M.exports.isEqual(me, le.value.layout_query[le.value.layout]) || (H.value = Ce(re({}, H.value), { layout_query: Ce(re({}, H.value.layout_query), { [le.value.layout || "tabular"]: me }) })) } }), J = V({ get() { return !le.value.layout_options || !le.value.layout ? null : le.value.layout_options[le.value.layout] }, set(me) { le.value.layout_options && le.value.layout && M.exports.isEqual(me, le.value.layout_options[le.value.layout]) || (H.value = Ce(re({}, H.value), { layout_options: Ce(re({}, H.value.layout_options), { [le.value.layout || "tabular"]: me }) })) } }), ie = V({ get() { return le.value.search }, set(me) { H.value = Ce(re({}, H.value), { search: me }) } }); return { edits: H, initialValues: Z, values: le, layoutQuery: fe, layoutOptions: J, hasEdits: Q, updateFilters: oe, search: ie }; function oe(me) { H.value = Ce(re({}, H.value), { filter: me }) } } function ne() { const H = E(!1), Q = E(null); return Z(), { loading: H, preset: Q, fetchPreset: Z }; async function Z() { if (e.id !== "+") { H.value = !0; try { const le = await ue.get(`/presets/${e.id}`); Q.value = le.data.data } catch (le) { Ve(le) } finally { H.value = !1 } } } } function Y() { return { backLink: V(() => "/settings/presets") } } function ce() { const H = ["directus_users", "directus_files", "directus_activity"]; return { fields: V(() => [{ field: "collection", name: t("collection"), type: "string", meta: { interface: "select-dropdown", options: { choices: l.collections.map(Z => ({ text: Z.name, value: Z.collection })).filter(Z => Z.value.startsWith("directus_") ? H.includes(Z.value) : !0) }, width: "half" } }, { field: "scope", name: t("scope"), type: "string", meta: { interface: "system-scope", width: "half" } }, { field: "layout", name: t("layout"), type: "string", meta: { interface: "select-dropdown", options: { choices: u.value.map(Z => ({ text: Z.name, value: Z.id })) }, width: "half" } }, { field: "name", name: t("name"), type: "string", meta: { interface: "input", width: "half", options: { placeholder: t("preset_name_placeholder") } } }, { field: "divider", name: t("divider"), type: "alias", meta: { interface: "presentation-divider", width: "fill", options: { title: t("layout_preview"), icon: "visibility" } } }]) } } function pe() { !te.value || (v.value = {}, W.value = !1, n.push(te.value)) } } }), AD = { class: "preset-item" }, ID = { class: "layout" }, ED = { class: "page-description" }, DD = { class: "layout-sidebar" }, TD = { class: "layout-options" }; function PD(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("settings-navigation"), f = c("v-card-title"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"), g = c("v-form"), w = c("v-info"), h = c("v-notice"), k = c("sidebar-detail"), F = c("v-input"), A = c("v-card-text"), P = c("private-view"), L = we("tooltip"), T = we("md"); return m(), C(Ne(e.layoutWrapper), { "layout-options": e.layoutOptions, "onUpdate:layout-options": t[8] || (t[8] = N => e.layoutOptions = N), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[9] || (t[9] = N => e.layoutQuery = N), filter: e.layoutFilter, search: e.search, collection: e.values.collection, readonly: "" }, { default: d(({ layoutState: N }) => [a(P, { title: e.t("editing_preset") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings_presets"), to: "/settings/presets" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", exact: "", to: e.backLink }, { default: d(() => [a(s, { name: "arrow_back" })]), _: 1 }, 8, ["to"])]), navigation: d(() => [a(p)]), actions: d(() => [a(y, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[1] || (t[1] = O => e.confirmDelete = O), onEsc: t[2] || (t[2] = O => e.confirmDelete = !1) }, { activator: d(({ on: O }) => [ee(a(r, { rounded: "", icon: "", class: "action-delete", disabled: e.preset === null || e.id === "+", onClick: O }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[L, e.t("delete_label"), void 0, { bottom: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: t[0] || (t[0] = O => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), ee(a(r, { icon: "", rounded: "", disabled: e.hasEdits === !1, loading: e.saving, onClick: e.save }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["disabled", "loading", "onClick"]), [[L, e.t("save"), void 0, { bottom: !0 }]])]), sidebar: d(() => [a(k, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", ED, null, 512), [[T, e.t("page_help_settings_presets_item")]])]), _: 1 }, 8, ["title"]), S("div", DD, [a(k, { icon: "search", title: e.t("search") }, { default: d(() => [a(F, { modelValue: e.search, "onUpdate:modelValue": t[4] || (t[4] = O => e.search = O), placeholder: e.t("preset_search_placeholder") }, null, 8, ["modelValue", "placeholder"])]), _: 1 }, 8, ["title"]), e.values.layout && e.values.collection ? (m(), C(Ne(`layout-sidebar-${e.values.layout}`), Je(dt({ key: 0 }, N)), null, 16)) : R("", !0), a(k, { icon: "layers", title: e.t("layout_options") }, { default: d(() => [S("div", TD, [e.values.layout && e.values.collection ? (m(), C(Ne(`layout-options-${e.values.layout}`), Je(dt({ key: 0 }, N)), null, 16)) : R("", !0)])]), _: 2 }, 1032, ["title"])])]), default: d(() => [S("div", AD, [a(g, { modelValue: e.edits, "onUpdate:modelValue": t[3] || (t[3] = O => e.edits = O), fields: e.fields, loading: e.loading, "initial-values": e.initialValues, "primary-key": e.id }, null, 8, ["modelValue", "fields", "loading", "initial-values", "primary-key"]), S("div", ID, [e.values.layout && e.values.collection ? (m(), C(Ne(`layout-${e.values.layout}`), Je(dt({ key: 0 }, N)), { "no-results": d(() => [a(w, { title: e.t("no_results"), icon: "search", center: "" }, { default: d(() => [D(b(e.t("no_results_copy")), 1)]), _: 1 }, 8, ["title"])]), "no-items": d(() => [a(w, { title: e.t("item_count", 0), center: "" }, { default: d(() => [D(b(e.t("no_items_copy")), 1)]), _: 1 }, 8, ["title"])]), _: 2 }, 1040)) : (m(), C(h, { key: 1 }, { default: d(() => [D(b(e.t("no_layout_collection_selected_yet")), 1)]), _: 1 }))])]), a(y, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[6] || (t[6] = O => e.confirmLeave = O), onEsc: t[7] || (t[7] = O => e.confirmLeave = !1) }, { default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(A, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[5] || (t[5] = O => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 2 }, 1032, ["title"])]), _: 1 }, 8, ["layout-options", "layout-query", "filter", "search", "collection"]) } var OD = B(FD, [["render", PD], ["__scopeId", "data-v-7c004d91"]]); const LD = z({ setup() { const { t: e } = x(), { parsedInfo: t } = za(); return { t: e, parsedInfo: t } } }), jD = { key: 0 }, RD = { class: "page-description" }; function MD(e, t, n, l, i, u) { const o = c("v-divider"), s = c("sidebar-detail"), r = we("md"); return m(), C(s, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [e.parsedInfo ? (m(), I("dl", jD, [S("div", null, [S("dt", null, b(e.t("directus_version")), 1), S("dd", null, b(e.parsedInfo.directus.version), 1)]), S("div", null, [S("dt", null, b(e.t("node_version")), 1), S("dd", null, b(e.parsedInfo.node.version), 1)]), S("div", null, [S("dt", null, b(e.t("node_uptime")), 1), S("dd", null, b(e.parsedInfo.node.uptime), 1)]), S("div", null, [S("dt", null, b(e.t("os_type")), 1), S("dd", null, b(e.parsedInfo.os.type), 1)]), S("div", null, [S("dt", null, b(e.t("os_version")), 1), S("dd", null, b(e.parsedInfo.os.version), 1)]), S("div", null, [S("dt", null, b(e.t("os_uptime")), 1), S("dd", null, b(e.parsedInfo.os.uptime), 1)]), S("div", null, [S("dt", null, b(e.t("os_totalmem")), 1), S("dd", null, b(e.parsedInfo.os.totalmem), 1)])])) : R("", !0), a(o), ee(S("div", RD, null, 512), [[r, e.t("page_help_settings_project")]])]), _: 1 }, 8, ["title"]) } var UD = B(LD, [["render", MD], ["__scopeId", "data-v-1a92ed59"]]); const ND = z({ components: { SettingsNavigation: Mt, ProjectInfoSidebarDetail: UD }, setup() { const { t: e } = x(), t = tt(), n = Il(), l = Pn(), { fields: i } = ot("directus_settings"), u = E(M.exports.clone(n.settings)), o = E(null), s = V(() => o.value === null || Object.keys(o.value).length === 0), r = E(!1); nt("meta+s", () => { s.value || y() }); const p = V(() => s.value === !0 ? !1 : s.value); en(p); const f = E(!1), v = E(null), _ = w => { if (!s.value) return f.value = !0, v.value = w.fullPath, !1 }; return Ot(_), Tt(_), { t: e, fields: i, initialValues: u, edits: o, noEdits: s, saving: r, isSavable: p, confirmLeave: f, leaveTo: v, save: y, discardAndLeave: g }; async function y() { o.value !== null && (r.value = !0, await n.updateSettings(o.value), await l.hydrate(), o.value = null, r.value = !1, u.value = M.exports.clone(n.settings)) } function g() { !v.value || (o.value = {}, f.value = !1, t.push(v.value)) } } }), BD = { class: "settings" }; function qD(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("settings-navigation"), f = c("v-form"), v = c("project-info-sidebar-detail"), _ = c("v-card-title"), y = c("v-card-text"), g = c("v-card-actions"), w = c("v-card"), h = c("v-dialog"), k = c("private-view"), F = we("tooltip"); return m(), C(k, { title: e.t("settings_project") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings"), to: "/settings" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "public" })]), _: 1 })]), actions: d(() => [ee(a(r, { icon: "", rounded: "", disabled: e.noEdits, loading: e.saving, onClick: e.save }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["disabled", "loading", "onClick"]), [[F, e.t("save"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(p)]), sidebar: d(() => [a(v)]), default: d(() => [S("div", BD, [a(f, { modelValue: e.edits, "onUpdate:modelValue": t[0] || (t[0] = A => e.edits = A), "initial-values": e.initialValues, fields: e.fields, "primary-key": 1 }, null, 8, ["modelValue", "initial-values", "fields"])]), a(h, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[2] || (t[2] = A => e.confirmLeave = A), onEsc: t[3] || (t[3] = A => e.confirmLeave = !1) }, { default: d(() => [a(w, null, { default: d(() => [a(_, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(y, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(g, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[1] || (t[1] = A => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"]) } var zD = B(ND, [["render", qD], ["__scopeId", "data-v-69b900f4"]]); const as = [{ collection: "directus_files", action: "create", permissions: {}, fields: ["*"] }, { collection: "directus_files", action: "read", permissions: {}, fields: ["*"] }, { collection: "directus_files", action: "update", permissions: {}, fields: ["*"] }, { collection: "directus_files", action: "delete", permissions: {}, fields: ["*"] }, { collection: "directus_dashboards", action: "create", permissions: {}, fields: ["*"] }, { collection: "directus_dashboards", action: "read", permissions: {}, fields: ["*"] }, { collection: "directus_dashboards", action: "update", permissions: {}, fields: ["*"] }, { collection: "directus_dashboards", action: "delete", permissions: {}, fields: ["*"] }, { collection: "directus_panels", action: "create", permissions: {}, fields: ["*"] }, { collection: "directus_panels", action: "read", permissions: {}, fields: ["*"] }, { collection: "directus_panels", action: "update", permissions: {}, fields: ["*"] }, { collection: "directus_panels", action: "delete", permissions: {}, fields: ["*"] }, { collection: "directus_folders", action: "create", permissions: {}, fields: ["*"] }, { collection: "directus_folders", action: "read", permissions: {}, fields: ["*"] }, { collection: "directus_folders", action: "update", permissions: {}, fields: ["*"] }, { collection: "directus_folders", action: "delete", permissions: {} }, { collection: "directus_users", action: "read", permissions: {} }, { collection: "directus_users", action: "update", permissions: { id: { _eq: "$CURRENT_USER" } }, fields: ["first_name", "last_name", "email", "password", "location", "title", "description", "avatar", "language", "theme"] }, { collection: "directus_roles", action: "read", permissions: {}, fields: ["*"] }], is = [{ collection: "directus_activity", action: "read", permissions: { user: { _eq: "$CURRENT_USER" } } }, { collection: "directus_activity", action: "create", validation: { comment: { _nnull: !0 } } }, { collection: "directus_collections", action: "read" }, { collection: "directus_fields", action: "read" }, { collection: "directus_permissions", action: "read", permissions: { role: { _eq: "$CURRENT_ROLE" } } }, { collection: "directus_presets", action: "read", permissions: { _or: [{ user: { _eq: "$CURRENT_USER" } }, { _and: [{ user: { _null: !0 } }, { role: { _eq: "$CURRENT_ROLE" } }] }, { _and: [{ user: { _null: !0 } }, { role: { _null: !0 } }] }] } }, { collection: "directus_presets", action: "create", validation: { user: { _eq: "$CURRENT_USER" } } }, { collection: "directus_presets", action: "update", permissions: { user: { _eq: "$CURRENT_USER" } } }, { collection: "directus_presets", action: "delete", permissions: { user: { _eq: "$CURRENT_USER" } } }, { collection: "directus_relations", action: "read" }, { collection: "directus_roles", action: "read", permissions: { id: { _eq: "$CURRENT_ROLE" } } }, { collection: "directus_settings", action: "read" }, { collection: "directus_users", action: "read", permissions: { id: { _eq: "$CURRENT_USER" } }, fields: ["id", "first_name", "last_name", "email", "password", "location", "title", "description", "tags", "preferences_divider", "avatar", "language", "theme", "tfa_secret", "status", "role"] }]; const KD = z({ setup() { const { t: e } = x(), t = tt(), n = cn(), l = E(null), i = E(!0), u = E(!1), { saving: o, save: s } = r(); return { t: e, router: t, isOpen: n, roleName: l, saving: o, save: s, appAccess: i, adminAccess: u }; function r() { const p = E(!1); return { saving: p, save: f }; async function f() { p.value = !0; try { const v = await ue.post("/roles", { name: l.value, admin_access: u.value, app_access: i.value }); i.value === !0 && u.value === !1 && await ue.post("/permissions", as.map(_ => Ce(re({}, _), { role: v.data.data.id }))), t.push(`/settings/roles/${v.data.data.id}`) } catch (v) { Ve(v) } finally { p.value = !1 } } } } }), HD = { class: "form-grid" }, WD = { class: "field full" }, GD = { class: "field half" }, JD = { class: "type-label" }, QD = { class: "field half" }, XD = { class: "type-label" }; function ZD(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-input"), r = c("v-checkbox"), p = c("v-card-text"), f = c("v-button"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"); return m(), C(y, { "model-value": e.isOpen, persistent: "", onEsc: t[3] || (t[3] = g => e.router.push("/settings/roles")) }, { default: d(() => [a(_, null, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("create_role")), 1)]), _: 1 }), a(p, null, { default: d(() => [S("div", HD, [S("div", WD, [a(s, { modelValue: e.roleName, "onUpdate:modelValue": t[0] || (t[0] = g => e.roleName = g), autofocus: "", placeholder: e.t("role_name") + "...", onKeyup: gn(e.save, ["enter"]) }, null, 8, ["modelValue", "placeholder", "onKeyup"])]), S("div", GD, [S("p", JD, b(e.t("fields.directus_roles.app_access")), 1), a(r, { modelValue: e.appAccess, "onUpdate:modelValue": t[1] || (t[1] = g => e.appAccess = g), block: "", label: e.t("enabled") }, null, 8, ["modelValue", "label"])]), S("div", QD, [S("p", XD, b(e.t("fields.directus_roles.admin_access")), 1), a(r, { modelValue: e.adminAccess, "onUpdate:modelValue": t[2] || (t[2] = g => e.adminAccess = g), block: "", label: e.t("enabled") }, null, 8, ["modelValue", "label"])])])]), _: 1 }), a(v, null, { default: d(() => [a(f, { to: "/settings/roles", secondary: "" }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(f, { disabled: e.roleName === null, loading: e.saving, onClick: e.save }, { default: d(() => [D(b(e.t("save")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"]) } var YD = B(KD, [["render", ZD], ["__scopeId", "data-v-2bf24ab7"]]); const xD = z({ name: "RolesCollection", components: { SettingsNavigation: Mt, ValueNull: tn }, props: {}, setup() { const { t: e } = x(), t = tt(), n = E([]), l = E(!1), i = [{ text: "", value: "icon", sortable: !1, width: 42, align: "left" }, { text: e("name"), value: "name", sortable: !1, width: 140, align: "left" }, { text: e("users"), value: "count", sortable: !1, width: 140, align: "left" }, { text: e("description"), value: "description", sortable: !1, width: 470, align: "left" }]; o(); const u = V(() => "/settings/roles/+"); return { t: e, loading: l, roles: n, tableHeaders: i, addNewLink: u, navigateToRole: s }; async function o() { l.value = !0; try { const r = await ue.get("/roles", { params: { limit: -1, fields: ["id", "name", "description", "icon", "users"], deep: { users: { _aggregate: { count: "id" }, _groupBy: ["role"], _sort: "role", _limit: -1 } }, sort: "name" } }); n.value = [{ public: !0, name: e("public_label"), icon: "public", description: e("public_description"), id: "public" }, ...r.data.data.map(p => { var f; return Ce(re({}, p), { count: ((f = p.users[0]) == null ? void 0 : f.count.id) || 0 }) })] } catch (r) { Ve(r) } finally { l.value = !1 } } function s({ item: r }) { t.push(`/settings/roles/${r.id}`) } } }), e5 = { class: "page-description" }, t5 = { class: "roles" }, n5 = { class: "description" }; function l5(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("settings-navigation"), f = c("sidebar-detail"), v = c("value-null"), _ = c("v-table"), y = c("router-view"), g = c("private-view"), w = we("tooltip"), h = we("md"); return m(), C(g, { title: e.t("settings_permissions") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings"), to: "/settings" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "admin_panel_settings", outline: "" })]), _: 1 })]), actions: d(() => [ee(a(r, { rounded: "", icon: "", to: e.addNewLink }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to"]), [[w, e.t("create_role"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(p)]), sidebar: d(() => [a(f, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", e5, null, 512), [[h, e.t("page_help_settings_roles_collection")]])]), _: 1 }, 8, ["title"])]), default: d(() => [S("div", t5, [a(_, { items: e.roles, headers: e.tableHeaders, "fixed-header": "", "item-key": "id", loading: e.loading, "onClick:row": e.navigateToRole }, { ["item.icon"]: d(({ item: k }) => [a(s, { class: de(["icon", { public: k.public }]), name: k.icon }, null, 8, ["name", "class"])]), ["item.name"]: d(({ item: k }) => [S("span", { class: de(["name", { public: k.public }]) }, b(k.name), 3)]), ["item.count"]: d(({ item: k }) => [k.public ? (m(), C(v, { key: 0 })) : R("", !0)]), ["item.description"]: d(({ item: k }) => [S("span", n5, b(k.description), 1)]), _: 2 }, 1032, ["items", "headers", "loading", "onClick:row"])]), a(y, { name: "add" })]), _: 1 }, 8, ["title"]) } var o5 = B(xD, [["render", l5], ["__scopeId", "data-v-9d57793a"]]); const a5 = z({ props: { isNew: { type: Boolean, default: !1 }, role: { type: Object, default: null } }, setup() { const { t: e } = x(); return { t: e } } }), i5 = { key: 0 }, s5 = { class: "page-description" }; function r5(e, t, n, l, i, u) { const o = c("v-divider"), s = c("sidebar-detail"), r = we("md"); return m(), C(s, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [!e.isNew && e.role ? (m(), I("dl", i5, [S("div", null, [S("dt", null, b(e.t("primary_key")), 1), S("dd", null, b(e.role.id), 1)])])) : R("", !0), a(o), ee(S("div", s5, null, 512), [[r, e.t("page_help_settings_roles_item")]])]), _: 1 }, 8, ["title"]) } var d5 = B(a5, [["render", r5], ["__scopeId", "data-v-b5c69570"]]); const u5 = z({ setup() { const { t: e } = x(); return { t: e } } }), c5 = { class: "permissions-overview-header" }, p5 = { class: "name" }; function m5(e, t, n, l, i, u) { const o = c("v-icon"), s = we("tooltip"); return m(), I("div", c5, [S("span", p5, b(e.t("collection")), 1), ee(a(o, { name: "add" }, null, 512), [[s, e.t("create")]]), ee(a(o, { name: "visibility" }, null, 512), [[s, e.t("read")]]), ee(a(o, { name: "edit", outline: "" }, null, 512), [[s, e.t("update")]]), ee(a(o, { name: "delete", outline: "" }, null, 512), [[s, e.t("delete_label")]])]) } var f5 = B(u5, [["render", m5], ["__scopeId", "data-v-1a0c28fc"]]); function ss(e, t, n) { const l = E(!1), i = ht("refresh-permissions"); return { getPermission: u, setFullAccess: o, setNoAccess: s, setFullAccessAll: r, setNoAccessAll: p }; function u(f) { return t.value.find(v => v.action === f) } async function o(f) { if (l.value === !0) return; l.value = !0, e.value.meta === null && await ue.patch(`/collections/${e.value.collection}`, { meta: {} }); const v = u(f); if (v) try { await ue.patch(`/permissions/${v.id}`, { fields: "*", permissions: {}, validation: {} }) } catch (_) { Ve(_) } finally { await (i == null ? void 0 : i()), l.value = !1 } else try { await ue.post("/permissions/", { role: n.value, collection: e.value.collection, action: f, fields: "*", permissions: {}, validation: {} }) } catch (_) { Ve(_) } finally { await (i == null ? void 0 : i()), l.value = !1 } } async function s(f) { if (l.value === !0) return; const v = u(f); if (!!v) { l.value = !0; try { await ue.delete(`/permissions/${v.id}`) } catch (_) { Ve(_) } finally { await (i == null ? void 0 : i()), l.value = !1 } } } async function r() { if (l.value === !0) return; l.value = !0, e.value.meta === null && await ue.patch(`/collections/${e.value.collection}`, { meta: {} }); const f = ["create", "read", "update", "delete"]; await Promise.all(f.map(async v => { const _ = u(v); if (_) try { await ue.patch(`/permissions/${_.id}`, { fields: "*", permissions: {}, validation: {} }) } catch (y) { Ve(y) } else try { await ue.post("/permissions/", { role: n.value, collection: e.value.collection, action: v, fields: "*", permissions: {}, validation: {} }) } catch (y) { Ve(y) } })), await (i == null ? void 0 : i()), l.value = !1 } async function p() { if (l.value !== !0) { l.value = !0; try { await ue.delete("/permissions", { data: t.value.map(f => f.id) }) } catch (f) { Ve(f) } finally { await (i == null ? void 0 : i()), l.value = !1 } } } } const v5 = z({ props: { collection: { type: Object, required: !0 }, role: { type: String, default: null }, action: { type: String, required: !0 }, permissions: { type: Array, default: null }, loading: { type: Boolean, default: !1 }, appMinimal: { type: [Boolean, Object], default: !1 } }, setup(e) { const { t } = x(), n = tt(), { collection: l, role: i, permissions: u } = je(e), { setFullAccess: o, setNoAccess: s, getPermission: r } = ss(l, u, i), p = V(() => r(e.action)), f = V(() => { var w; return p.value === void 0 ? "none" : ((w = p.value.fields) == null ? void 0 : w.includes("*")) && Object.keys(p.value.permissions || {}).length === 0 && Object.keys(p.value.validation || {}).length === 0 ? "all" : "custom" }), v = E(!1), _ = ht("refresh-permissions"), y = V(() => e.appMinimal === !1 ? null : Object.keys(e.appMinimal).length === 2 ? "full" : "partial"); return { t, permissionLevel: f, saving: v, setFullAccess: o, setNoAccess: s, openPermissions: g, appMinimalLevel: y }; async function g() { if (e.collection.meta === null && await ue.patch(`/collections/${e.collection.collection}`, { meta: {} }), p.value) n.push(`/settings/roles/${e.role || "public"}/${p.value.id}`); else { v.value = !0; const w = await ue.post("/permissions", { role: e.role, collection: e.collection.collection, action: e.action }); await (_ == null ? void 0 : _()), v.value = !1, n.push(`/settings/roles/${e.role || "public"}/${w.data.data.id}`) } } } }); function _5(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-progress-circular"), r = c("v-list-item-icon"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-divider"), _ = c("v-list"), y = c("v-menu"), g = we("tooltip"); return ee((m(), I("div", { class: de(["permissions-overview-toggle", [{ "has-app-minimal": !!e.appMinimal }, e.permissionLevel, e.appMinimalLevel]]) }, [e.appMinimalLevel === "full" ? (m(), C(o, { key: 0, name: "check", class: "all app-minimal" })) : (m(), C(y, { key: 1, "show-arrow": "" }, { activator: d(({ toggle: w }) => [S("div", null, [e.loading || e.saving ? (m(), C(s, { key: 0, indeterminate: "", small: "" })) : e.permissionLevel === "all" ? (m(), C(o, { key: 1, clickable: "", name: "check", onClick: w }, null, 8, ["onClick"])) : e.appMinimalLevel === "partial" || e.permissionLevel === "custom" ? (m(), C(o, { key: 2, clickable: "", name: "rule", onClick: w }, null, 8, ["onClick"])) : e.permissionLevel === "none" ? (m(), C(o, { key: 3, clickable: "", name: "block", onClick: w }, null, 8, ["onClick"])) : R("", !0)])]), default: d(() => [a(_, null, { default: d(() => [a(f, { disabled: e.permissionLevel === "all", clickable: "", onClick: t[0] || (t[0] = w => e.setFullAccess(e.action)) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "check" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("all_access")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"]), e.appMinimalLevel ? R("", !0) : (m(), C(f, { key: 0, disabled: e.permissionLevel === "none", clickable: "", onClick: t[1] || (t[1] = w => e.setNoAccess(e.action)) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "block" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("no_access")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])), a(v), a(f, { clickable: "", onClick: e.openPermissions }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "rule" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("use_custom")), 1)]), _: 1 }), a(r, null, { default: d(() => [a(o, { name: "launch" })]), _: 1 })]), _: 1 }, 8, ["onClick"])]), _: 1 })]), _: 1 }))], 2)), [[g, e.appMinimal && e.t("required_for_app_access")]]) } var y5 = B(v5, [["render", _5], ["__scopeId", "data-v-169ac11c"]]); const g5 = z({ components: { PermissionsOverviewToggle: y5 }, props: { role: { type: String, default: null }, collection: { type: Object, required: !0 }, permissions: { type: Array, required: !0 }, refreshing: { type: Array, required: !0 }, appMinimal: { type: [Boolean, Array], default: !1 } }, setup(e) { const { t } = x(), { collection: n, role: l, permissions: i } = je(e), { setFullAccessAll: u, setNoAccessAll: o, getPermission: s } = ss(n, i, l); return { t, getPermission: s, isLoading: r, setFullAccessAll: u, setNoAccessAll: o }; function r(p) { const f = s(p); return f ? e.refreshing.includes(f.id) : !1 } } }), h5 = e => (Qe("data-v-fb90f180"), e = e(), Xe(), e), b5 = { class: "permissions-overview-row" }, $5 = { class: "name" }, w5 = { class: "actions" }, k5 = h5(() => S("span", { class: "divider" }, "/", -1)); function S5(e, t, n, l, i, u) { const o = c("permissions-overview-toggle"); return m(), I("div", b5, [S("span", $5, [D(b(e.collection.name) + " ", 1), S("span", w5, [S("span", { class: "all", onClick: t[0] || (t[0] = (...s) => e.setFullAccessAll && e.setFullAccessAll(...s)) }, b(e.t("all")), 1), k5, S("span", { class: "none", onClick: t[1] || (t[1] = (...s) => e.setNoAccessAll && e.setNoAccessAll(...s)) }, b(e.t("none")), 1)])]), a(o, { action: "create", collection: e.collection, role: e.role, permissions: e.permissions, loading: e.isLoading("create"), "app-minimal": e.appMinimal && e.appMinimal.find(s => s.action === "create") }, null, 8, ["collection", "role", "permissions", "loading", "app-minimal"]), a(o, { action: "read", collection: e.collection, role: e.role, permissions: e.permissions, loading: e.isLoading("read"), "app-minimal": e.appMinimal && e.appMinimal.find(s => s.action === "read") }, null, 8, ["collection", "role", "permissions", "loading", "app-minimal"]), a(o, { action: "update", collection: e.collection, role: e.role, permissions: e.permissions, loading: e.isLoading("update"), "app-minimal": e.appMinimal && e.appMinimal.find(s => s.action === "update") }, null, 8, ["collection", "role", "permissions", "loading", "app-minimal"]), a(o, { action: "delete", collection: e.collection, role: e.role, permissions: e.permissions, loading: e.isLoading("delete"), "app-minimal": e.appMinimal && e.appMinimal.find(s => s.action === "delete") }, null, 8, ["collection", "role", "permissions", "loading", "app-minimal"])]) } var C5 = B(g5, [["render", S5], ["__scopeId", "data-v-fb90f180"]]); const V5 = z({ components: { PermissionsOverviewHeader: f5, PermissionsOverviewRow: C5 }, props: { role: { type: String, default: null }, permission: { type: String, default: null }, appAccess: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = He(), l = V(() => n.collections.filter(k => k.collection.startsWith("directus_") === !1 && k.schema)), i = V(() => M.exports.orderBy(n.collections.filter(k => k.collection.startsWith("directus_") === !0), "name")), u = E(!1), { permissions: o, loading: s, fetchPermissions: r, refreshPermission: p, refreshing: f } = w(), { resetActive: v, resetSystemPermissions: _, resetting: y, resetError: g } = h(); return r(), _e(() => e.permission, r, { immediate: !0 }), Zt("refresh-permissions", r), { t, systemVisible: u, regularCollections: l, systemCollections: i, permissions: o, loading: s, fetchPermissions: r, refreshPermission: p, refreshing: f, resetActive: v, resetSystemPermissions: _, resetting: y, resetError: g, appMinimalPermissions: is }; function w() { const k = E([]), F = E(!1), A = E([]); return { permissions: k, loading: F, fetchPermissions: P, refreshPermission: L, refreshing: A }; async function P() { F.value = !0; try { const T = { filter: { role: {} }, limit: -1 }; e.role === null ? T.filter.role = { _null: !0 } : T.filter.role = { _eq: e.role }; const N = await ue.get("/permissions", { params: T }); k.value = N.data.data } catch (T) { Ve(T) } finally { F.value = !1 } } async function L(T) { A.value.includes(T) === !1 && A.value.push(T); try { const N = await ue.get(`/permissions/${T}`); k.value = k.value.map(O => O.id === T ? N.data.data : O) } catch (N) { Ve(N) } finally { A.value = A.value.filter(N => N !== T) } } } function h() { const k = E(!1), F = E(!1), A = E(null); return { resetActive: k, resetSystemPermissions: P, resetting: F, resetError: A }; async function P(L) { F.value = !0; const T = o.value.filter(N => N.collection.startsWith("directus_")).map(N => N.id); try { T.length > 0 && await ue.delete("/permissions", { data: T }), e.role !== null && e.appAccess === !0 && L === !0 && await ue.post("/permissions", as.map(N => Ce(re({}, N), { role: e.role }))), await r(), k.value = !1 } catch (N) { A.value = N } finally { F.value = !1 } } } } }), F5 = { class: "permissions-overview" }, A5 = { class: "title type-label" }, I5 = { class: "instant-save" }, E5 = { class: "table" }, D5 = { key: 0 }, T5 = { key: 0, class: "reset-toggle" }, P5 = D(" / "); function O5(e, t, n, l, i, u) { const o = c("permissions-overview-header"), s = c("permissions-overview-row"), r = c("v-icon"), p = c("transition-expand"), f = c("router-view"), v = c("v-card-title"), _ = c("v-button"), y = c("v-card-actions"), g = c("v-card"), w = c("v-dialog"); return m(), I("div", F5, [S("h2", A5, [D(b(e.t("permissions")) + " ", 1), S("span", I5, b(e.t("saves_automatically")), 1)]), S("div", E5, [a(o), (m(!0), I(se, null, he(e.regularCollections, h => (m(), C(s, { key: h.collection, collection: h, role: e.role, permissions: e.permissions.filter(k => k.collection === h.collection), refreshing: e.refreshing }, null, 8, ["collection", "role", "permissions", "refreshing"]))), 128)), S("button", { class: "system-toggle", onClick: t[0] || (t[0] = h => e.systemVisible = !e.systemVisible) }, [D(b(e.t("system_collections")) + " ", 1), a(r, { name: e.systemVisible ? "expand_less" : "expand_more" }, null, 8, ["name"])]), a(p, null, { default: d(() => [e.systemVisible ? (m(), I("div", D5, [(m(!0), I(se, null, he(e.systemCollections, h => (m(), C(s, { key: h.collection, collection: h, role: e.role, permissions: e.permissions.filter(k => k.collection === h.collection), refreshing: e.refreshing, "app-minimal": e.appAccess && e.appMinimalPermissions.filter(k => k.collection === h.collection) }, null, 8, ["collection", "role", "permissions", "refreshing", "app-minimal"]))), 128))])) : R("", !0)]), _: 1 }), e.systemVisible && e.appAccess ? (m(), I("span", T5, [D(b(e.t("reset_system_permissions_to")) + " ", 1), S("button", { onClick: t[1] || (t[1] = h => e.resetActive = "minimum") }, b(e.t("app_access_minimum")), 1), P5, S("button", { onClick: t[2] || (t[2] = h => e.resetActive = "recommended") }, b(e.t("recommended_defaults")), 1)])) : R("", !0)]), a(f, { name: "permissionsDetail", "role-key": e.role, "permission-key": e.permission }, null, 8, ["role-key", "permission-key"]), a(w, { "model-value": !!e.resetActive, "onUpdate:modelValue": t[5] || (t[5] = h => e.resetActive = !1), onEsc: t[6] || (t[6] = h => e.resetActive = !1) }, { default: d(() => [a(g, null, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("reset_system_permissions_copy")), 1)]), _: 1 }), a(y, null, { default: d(() => [a(_, { secondary: "", onClick: t[3] || (t[3] = h => e.resetActive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(_, { loading: e.resetting, onClick: t[4] || (t[4] = h => e.resetSystemPermissions(e.resetActive === "recommended")) }, { default: d(() => [D(b(e.t("reset")), 1)]), _: 1 }, 8, ["loading"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"])]) } var rs = B(V5, [["render", O5], ["__scopeId", "data-v-554c2db2"]]); const L5 = z({ props: { modelValue: { type: Boolean, default: !1 }, role: { type: String, default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = E(""), i = E([]), u = E(e.role), o = E(!1), s = E([]); return _e(() => e.modelValue, () => { p() }), { t: n, emails: l, inviteUsers: r, roles: i, roleSelected: u, loading: o, uniqueValidationErrors: s }; async function r() { var f, v, _, y, g, w; o.value = !0; try { const h = l.value.split(/,|\n/).filter(k => k).map(k => k.trim()); await ue.post("/users/invite", { email: h, role: u.value }), l.value = "", t("update:modelValue", !1) } catch (h) { s.value = (_ = (v = (f = h == null ? void 0 : h.response) == null ? void 0 : f.data) == null ? void 0 : v.errors) == null ? void 0 : _.filter(F => { var A; return ((A = F.extensions) == null ? void 0 : A.code) === "RECORD_NOT_UNIQUE" }); const k = (w = (g = (y = h == null ? void 0 : h.response) == null ? void 0 : y.data) == null ? void 0 : g.errors) == null ? void 0 : w.filter(F => { var A; return ((A = F == null ? void 0 : F.extensions) == null ? void 0 : A.code) !== "RECORD_NOT_UNIQUE" }); k.length > 0 && k.forEach(F => Ve(F)) } finally { o.value = !1 } } async function p() { const f = await ue.get("/roles"); i.value = f.data.data.map(v => ({ text: v.name, value: v.id })), i.value.length > 0 && u.value === null && (u.value = i.value[0].value) } } }), j5 = { class: "grid" }, R5 = { class: "field" }, M5 = { class: "type-label" }, U5 = { key: 0, class: "field" }, N5 = { class: "type-label" }; function B5(e, t, n, l, i, u) { const o = c("v-card-title"), s = c("v-textarea"), r = c("v-select"), p = c("v-notice"), f = c("v-card-text"), v = c("v-button"), _ = c("v-card-actions"), y = c("v-card"), g = c("v-dialog"); return m(), C(g, { "model-value": e.modelValue, "onUpdate:modelValue": t[3] || (t[3] = w => e.$emit("update:modelValue", w)), onEsc: t[4] || (t[4] = w => e.$emit("update:modelValue", !1)) }, { default: d(() => [a(y, null, { default: d(() => [a(o, null, { default: d(() => [D(b(e.t("invite_users")), 1)]), _: 1 }), a(f, null, { default: d(() => [S("div", j5, [S("div", R5, [S("div", M5, b(e.t("emails")), 1), a(s, { modelValue: e.emails, "onUpdate:modelValue": t[0] || (t[0] = w => e.emails = w), nullable: !1, placeholder: "admin@example.com, user@example.com..." }, null, 8, ["modelValue"])]), e.role === null ? (m(), I("div", U5, [S("div", N5, b(e.t("role")), 1), a(r, { modelValue: e.roleSelected, "onUpdate:modelValue": t[1] || (t[1] = w => e.roleSelected = w), items: e.roles }, null, 8, ["modelValue", "items"])])) : R("", !0), e.uniqueValidationErrors.length > 0 ? (m(), C(p, { key: 1, class: "field", type: "danger" }, { default: d(() => [(m(!0), I(se, null, he(e.uniqueValidationErrors, (w, h) => (m(), I("div", { key: h }, [w.extensions.invalid ? (m(), I(se, { key: 0 }, [D(b(e.t("email_already_invited", { email: w.extensions.invalid })), 1)], 64)) : h === 0 ? (m(), I(se, { key: 1 }, [D(b(e.t("validationError.unique")), 1)], 64)) : R("", !0)]))), 128))]), _: 1 })) : R("", !0)])]), _: 1 }), a(_, null, { default: d(() => [a(v, { secondary: "", onClick: t[2] || (t[2] = w => e.$emit("update:modelValue", !1)) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(v, { disabled: e.emails === null || e.emails.length === 0, loading: e.loading, onClick: e.inviteUsers }, { default: d(() => [D(b(e.t("invite")), 1)]), _: 1 }, 8, ["disabled", "loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"]) } var ds = B(L5, [["render", B5], ["__scopeId", "data-v-52e00551"]]); const q5 = z({ name: "RolesItem", components: { SettingsNavigation: Mt, RevisionsDrawerDetail: Bn, RoleInfoSidebarDetail: d5, PermissionsOverview: rs, UsersInvite: ds }, props: { primaryKey: { type: String, required: !0 }, permissionKey: { type: String, default: null } }, setup(e) { const { t } = x(), n = tt(), l = Ze(), i = E(!1), { primaryKey: u } = je(e), { edits: o, item: s, saving: r, loading: p, error: f, save: v, remove: _, deleting: y, isBatch: g } = kn(E("directus_roles"), u), w = V(() => Object.keys(o.value).length > 0), h = E(!1), k = V(() => !!re(re({}, s.value), o.value).admin_access), F = V(() => !!re(re({}, s.value), o.value).app_access); nt("meta+s", () => { w.value && N() }); const A = V(() => w.value === !0 ? !0 : w.value); en(A); const P = E(!1), L = E(null), T = K => { if (w.value) return P.value = !0, L.value = K.fullPath, !1 }; return Ot(T), Tt(T), { t, item: s, loading: p, error: f, edits: o, hasEdits: w, saving: r, saveAndQuit: O, deleteAndQuit: U, confirmDelete: h, deleting: y, isBatch: g, adminEnabled: k, userInviteModalActive: i, appAccess: F, isSavable: A, confirmLeave: P, leaveTo: L, discardAndLeave: q }; async function N() { await v(), await l.hydrate() } async function O() { await v(), await l.hydrate(), n.push("/settings/roles") } async function U() { await _(), n.replace("/settings/roles") } function q() { !L.value || (o.value = {}, P.value = !1, n.push(L.value)) } } }), z5 = { class: "roles" }; function K5(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("v-card-title"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"), y = c("settings-navigation"), g = c("users-invite"), w = c("v-notice"), h = c("permissions-overview"), k = c("v-form"), F = c("role-info-sidebar-detail"), A = c("revisions-drawer-detail"), P = c("v-card-text"), L = c("private-view"), T = we("tooltip"); return m(), C(L, { title: e.loading ? e.t("loading") : e.t("editing_role", { role: e.item && e.item.name }) }, { headline: d(() => [a(o, { items: [{ name: e.t("settings_permissions"), to: "/settings/roles" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", exact: "", to: "/settings/roles/" }, { default: d(() => [a(s, { name: "arrow_back" })]), _: 1 })]), actions: d(() => [[1, 2].includes(+e.primaryKey) === !1 ? (m(), C(_, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[1] || (t[1] = N => e.confirmDelete = N), onEsc: t[2] || (t[2] = N => e.confirmDelete = !1) }, { activator: d(({ on: N }) => [ee(a(r, { rounded: "", icon: "", class: "action-delete", disabled: e.item === null, onClick: N }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[T, e.t("delete_label"), void 0, { bottom: !0 }]])]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: t[0] || (t[0] = N => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), ee(a(r, { rounded: "", icon: "", class: "invite-user", onClick: t[3] || (t[3] = N => e.userInviteModalActive = !0) }, { default: d(() => [a(s, { name: "person_add" })]), _: 1 }, 512), [[T, e.t("invite_users"), void 0, { bottom: !0 }]]), ee(a(r, { rounded: "", icon: "", loading: e.saving, disabled: e.hasEdits === !1, onClick: e.saveAndQuit }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"]), [[T, e.t("save"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(y)]), sidebar: d(() => [a(F, { role: e.item }, null, 8, ["role"]), a(A, { collection: "directus_roles", "primary-key": e.primaryKey }, null, 8, ["primary-key"])]), default: d(() => [a(g, { modelValue: e.userInviteModalActive, "onUpdate:modelValue": t[4] || (t[4] = N => e.userInviteModalActive = N), role: e.primaryKey }, null, 8, ["modelValue", "role"]), S("div", z5, [e.adminEnabled ? (m(), C(w, { key: 0, type: "info" }, { default: d(() => [D(b(e.t("admins_have_all_permissions")), 1)]), _: 1 })) : (m(), C(h, { key: 1, role: e.primaryKey, permission: e.permissionKey, "app-access": e.appAccess }, null, 8, ["role", "permission", "app-access"])), a(k, { modelValue: e.edits, "onUpdate:modelValue": t[5] || (t[5] = N => e.edits = N), collection: "directus_roles", "primary-key": e.primaryKey, loading: e.loading, "initial-values": e.item, "batch-mode": e.isBatch }, null, 8, ["modelValue", "primary-key", "loading", "initial-values", "batch-mode"])]), a(_, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[7] || (t[7] = N => e.confirmLeave = N), onEsc: t[8] || (t[8] = N => e.confirmLeave = !1) }, { default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(P, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[6] || (t[6] = N => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"]) } var H5 = B(q5, [["render", K5], ["__scopeId", "data-v-0fa14833"]]); function us(e) { return (e.fields || []).length === 0 && Object.keys(e.validation || {}).length === 0 && Object.keys(e.presets || {}).length === 0 && Object.keys(e.permissions || {}).length === 0 } const W5 = z({ props: { roleKey: { type: String, default: null }, permission: { type: Object, required: !0 } }, emits: ["refresh"], setup(e, { emit: t }) { const { t: n } = x(), l = tt(), i = E(!1); return { t: n, save: u, loading: i }; async function u() { i.value = !0; try { us(e.permission) ? await ue.delete(`/permissions/${e.permission.id}`) : await ue.patch(`/permissions/${e.permission.id}`, e.permission), t("refresh"), l.push(`/settings/roles/${e.roleKey || "public"}`) } catch (o) { Ve(o) } finally { i.value = !1 } } } }), G5 = { class: "actions" }; function J5(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = we("tooltip"); return m(), I("div", G5, [ee(a(s, { loading: e.loading, icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["loading", "onClick"]), [[r, e.t("save"), void 0, { bottom: !0 }]])]) } var Q5 = B(W5, [["render", J5], ["__scopeId", "data-v-47610afd"]]); const X5 = z({ props: { currentTab: { type: Array, default: null }, tabs: { type: Array, required: !0 } }, emits: ["update:currentTab"], setup(e, { emit: t }) { return { internalCurrentTab: Re(e, "currentTab", t) } } }), Z5 = { class: "text" }; function Y5(e, t, n, l, i, u) { const o = c("v-tab"), s = c("v-tabs"); return m(), C(s, { modelValue: e.internalCurrentTab, "onUpdate:modelValue": t[0] || (t[0] = r => e.internalCurrentTab = r), vertical: "" }, { default: d(() => [(m(!0), I(se, null, he(e.tabs, r => (m(), C(o, { key: r.value, value: r.value }, { default: d(() => [S("span", Z5, b(r.text), 1), S("span", { class: de(["dot", { on: r.hasValue }]) }, null, 2)]), _: 2 }, 1032, ["value"]))), 128))]), _: 1 }, 8, ["modelValue"]) } var x5 = B(X5, [["render", Y5], ["__scopeId", "data-v-678d5948"]]); const eT = z({ props: { permission: { type: Object, required: !0 }, role: { type: Object, default: null }, appMinimal: { type: Object, default: void 0 } }, emits: ["update:permission"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "permission", t), i = V(() => [{ field: "permissions", name: n("rule"), type: "json", meta: { interface: "system-filter", options: { collectionName: l.value.collection } } }]); return { t: n, fields: i, permissionSync: l } } }), tT = { key: 0, class: "app-minimal" }, nT = { class: "app-minimal-preview" }; function lT(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-form"), r = c("v-divider"); return m(), I("div", null, [a(o, { type: "info" }, { default: d(() => [D(b(e.t("permissions_for_role", { action: e.t(e.permission.action === "delete" ? "delete_label" : e.permission.action).toLowerCase(), role: e.role ? e.role.name : e.t("public_label") })), 1)]), _: 1 }), a(s, { modelValue: e.permissionSync, "onUpdate:modelValue": t[0] || (t[0] = p => e.permissionSync = p), fields: e.fields }, null, 8, ["modelValue", "fields"]), e.appMinimal ? (m(), I("div", tT, [a(r), a(o, { type: "warning" }, { default: d(() => [D(b(e.t("the_following_are_minimum_permissions")), 1)]), _: 1 }), S("pre", nT, b(e.appMinimal), 1)])) : R("", !0)]) } var oT = B(eT, [["render", lT], ["__scopeId", "data-v-da09841c"]]); const aT = z({ props: { permission: { type: Object, required: !0 }, role: { type: Object, default: null }, appMinimal: { type: Object, default: void 0 } }, emits: ["update:permission"], setup(e, { emit: t }) { const { t: n } = x(), l = Pe(), i = Re(e, "permission", t), u = V(() => l.getFieldsForCollection(e.permission.collection).map(r => ({ text: r.name, value: r.field }))), o = V({ get() { return i.value.fields ? i.value.fields.includes("*") ? u.value.map(({ value: s }) => s) : i.value.fields : [] }, set(s) { s && s.length > 0 ? i.value = Ce(re({}, i.value), { fields: s }) : i.value = Ce(re({}, i.value), { fields: null }) } }); return { t: n, fields: o, fieldsInCollection: u } } }), iT = { class: "type-label" }, sT = { key: 0, class: "app-minimal" }, rT = { class: "app-minimal-preview" }; function dT(e, t, n, l, i, u) { const o = c("v-notice"), s = c("interface-select-multiple-checkbox"), r = c("v-divider"); return m(), I("div", null, [a(o, { type: "info" }, { default: d(() => [D(b(e.t("fields_for_role", { role: e.role ? e.role.name : e.t("public_label"), action: e.t(e.permission.action).toLowerCase() })), 1)]), _: 1 }), S("p", iT, b(e.t("field", 0)), 1), a(s, { value: e.fields, type: "json", choices: e.fieldsInCollection, onInput: t[0] || (t[0] = p => e.fields = p) }, null, 8, ["value", "choices"]), e.appMinimal ? (m(), I("div", sT, [a(r), a(o, { type: "warning" }, { default: d(() => [D(b(e.t("the_following_are_minimum_permissions")), 1)]), _: 1 }), S("pre", rT, b(e.appMinimal), 1)])) : R("", !0)]) } var uT = B(aT, [["render", dT], ["__scopeId", "data-v-28e7bb60"]]); const cT = z({ props: { permission: { type: Object, required: !0 }, role: { type: Object, default: null } }, emits: ["update:permission"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "permission", t), i = V(() => [{ field: "validation", name: n("rule"), type: "json", meta: { interface: "system-filter", options: { collectionName: l.value.collection } } }]); return { t: n, permissionSync: l, fields: i } } }); function pT(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-form"); return m(), I("div", null, [a(o, { type: "info" }, { default: d(() => [D(b(e.t("validation_for_role", { action: e.t(e.permission.action).toLowerCase(), role: e.role ? e.role.name : e.t("public_label") })), 1)]), _: 1 }), a(s, { modelValue: e.permissionSync, "onUpdate:modelValue": t[0] || (t[0] = r => e.permissionSync = r), fields: e.fields }, null, 8, ["modelValue", "fields"])]) } var mT = B(cT, [["render", pT], ["__scopeId", "data-v-e3088adc"]]); const fT = z({ props: { permission: { type: Object, default: null }, role: { type: Object, default: null } }, emits: ["update:permission"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "permission", t), i = V({ get() { return l.value.presets }, set(u) { l.value = Ce(re({}, l.value), { presets: u }) } }); return { t: n, presets: i } } }); function vT(e, t, n, l, i, u) { const o = c("v-notice"), s = c("interface-input-code"); return m(), I("div", null, [a(o, { type: "info" }, { default: d(() => [D(b(e.t("presets_for_role", { action: e.t(e.permission.action).toLowerCase(), role: e.role ? e.role.name : e.t("public_label") })), 1)]), _: 1 }), a(s, { value: e.presets, language: "json", type: "json", onInput: t[0] || (t[0] = r => e.presets = r) }, null, 8, ["value"])]) } var _T = B(fT, [["render", vT], ["__scopeId", "data-v-660c7066"]]); const yT = z({ components: { Actions: Q5, Tabs: x5, Permissions: oT, Fields: uT, Validation: mT, Presets: _T }, props: { roleKey: { type: String, default: null }, permissionKey: { type: String, required: !0 } }, emits: ["refresh"], setup(e) { const { t } = x(), n = tt(), l = He(), i = cn(), u = E(), o = E(), s = E(!1), r = V(() => { var h; return u.value ? (h = l.collections.find(k => k.collection === u.value.collection)) == null ? void 0 : h.name : null }), p = V(() => s.value || !u.value ? t("loading") : e.roleKey ? o.value.name + " -> " + r.value + " -> " + t(u.value.action) : t("public_label") + " -> " + r.value + " -> " + t(u.value.action)); _e(() => e.permissionKey, w, { immediate: !0 }); const f = V(() => { if (!u.value) return []; const h = u.value.action, k = []; return ["read", "update", "delete"].includes(h) && k.push({ text: t("item_permissions"), value: "permissions", hasValue: u.value.permissions !== null && Object.keys(u.value.permissions).length > 0 }), ["create", "read", "update"].includes(h) && k.push({ text: t("field_permissions"), value: "fields", hasValue: u.value.fields !== null }), ["create", "update"].includes(h) && k.push({ text: t("field_validation"), value: "validation", hasValue: u.value.validation !== null && Object.keys(u.value.validation).length > 0 }), ["create", "update"].includes(h) && k.push({ text: t("field_presets"), value: "presets", hasValue: u.value.presets !== null && Object.keys(u.value.presets).length > 0 }), k }), v = E([]), _ = V(() => { var k; const h = (k = v.value) == null ? void 0 : k[0]; return h ? f.value.find(F => F.value === h) : null }); _e(f, (h, k) => { var F, A; h && k && h.length === k.length || (v.value = [(A = (F = f == null ? void 0 : f.value) == null ? void 0 : F[0]) == null ? void 0 : A.value]) }, { immediate: !0 }); const y = V(() => u.value ? is.find(h => h.collection === u.value.collection && h.action === u.value.action) : null); return { isOpen: i, permission: u, role: o, loading: s, modalTitle: p, tabs: f, currentTab: v, currentTabInfo: _, appMinimal: y, close: g }; async function g() { u.value && us(u.value) ? (await ue.delete(`/permissions/${u.value.id}`), n.replace(`/settings/roles/${e.roleKey || "public"}`)) : n.push(`/settings/roles/${e.roleKey || "public"}`) } async function w() { var h; s.value = !0; try { if (e.roleKey) { const F = await ue.get(`/roles/${e.roleKey}`); o.value = F.data.data } const k = await ue.get(`/permissions/${e.permissionKey}`); u.value = k.data.data } catch (k) { ((h = k == null ? void 0 : k.response) == null ? void 0 : h.status) === 403 ? n.push(`/settings/roles/${e.roleKey || "public"}`) : Ve(k) } finally { s.value = !1 } } } }), gT = { key: 0, class: "content" }; function hT(e, t, n, l, i, u) { const o = c("tabs"), s = c("permissions"), r = c("fields"), p = c("validation"), f = c("presets"), v = c("actions"), _ = c("v-drawer"); return m(), C(_, { title: e.modalTitle, "model-value": e.isOpen, class: "new-collection", persistent: "", "sidebar-label": e.currentTabInfo && e.currentTabInfo.text, onCancel: e.close }, et({ default: d(() => [e.loading ? R("", !0) : (m(), I("div", gT, [e.currentTab[0] === "permissions" ? (m(), C(s, { key: 0, permission: e.permission, "onUpdate:permission": t[1] || (t[1] = y => e.permission = y), role: e.role, "app-minimal": e.appMinimal && e.appMinimal.permissions }, null, 8, ["permission", "role", "app-minimal"])) : R("", !0), e.currentTab[0] === "fields" ? (m(), C(r, { key: 1, permission: e.permission, "onUpdate:permission": t[2] || (t[2] = y => e.permission = y), role: e.role, "app-minimal": e.appMinimal && e.appMinimal.fields }, null, 8, ["permission", "role", "app-minimal"])) : R("", !0), e.currentTab[0] === "validation" ? (m(), C(p, { key: 2, permission: e.permission, "onUpdate:permission": t[3] || (t[3] = y => e.permission = y), role: e.role, "app-minimal": e.appMinimal && e.appMinimal.validation }, null, 8, ["permission", "role", "app-minimal"])) : R("", !0), e.currentTab[0] === "presets" ? (m(), C(f, { key: 3, permission: e.permission, "onUpdate:permission": t[4] || (t[4] = y => e.permission = y), role: e.role, "app-minimal": e.appMinimal && e.appMinimal.presets }, null, 8, ["permission", "role", "app-minimal"])) : R("", !0)]))]), _: 2 }, [e.loading ? void 0 : { name: "sidebar", fn: d(() => [a(o, { "current-tab": e.currentTab, "onUpdate:current-tab": t[0] || (t[0] = y => e.currentTab = y), tabs: e.tabs }, null, 8, ["current-tab", "tabs"])]) }, e.loading ? void 0 : { name: "actions", fn: d(() => [a(v, { "role-key": e.roleKey, permission: e.permission, onRefresh: t[5] || (t[5] = y => e.$emit("refresh", Number(e.permissionKey))) }, null, 8, ["role-key", "permission"])]) }]), 1032, ["title", "model-value", "sidebar-label", "onCancel"]) } var cs = B(yT, [["render", hT], ["__scopeId", "data-v-69981f41"]]); const bT = z({ name: "RolesItem", components: { SettingsNavigation: Mt, PermissionsOverview: rs }, props: { permissionKey: { type: String, default: null } }, setup() { const { t: e } = x(); return { t: e } } }), $T = { class: "roles" }; function wT(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("settings-navigation"), p = c("permissions-overview"), f = c("private-view"); return m(), C(f, { title: e.t("public_label") }, { headline: d(() => [D(b(e.t("settings_permissions")), 1)]), "title-outer:prepend": d(() => [a(s, { class: "header-icon", rounded: "", icon: "", exact: "", to: "/settings/roles/" }, { default: d(() => [a(o, { name: "arrow_back" })]), _: 1 })]), navigation: d(() => [a(r)]), default: d(() => [S("div", $T, [a(p, { role: null, permission: e.permissionKey }, null, 8, ["permission"])])]), _: 1 }, 8, ["title"]) } var kT = B(bT, [["render", wT], ["__scopeId", "data-v-696c80cd"]]); const ST = z({ name: "WebhooksCollection", components: { SettingsNavigation: Mt, LayoutSidebarDetail: Nn, SearchInput: $n }, setup() { const { t: e } = x(), t = E(), n = E([]), { layout: l, layoutOptions: i, layoutQuery: u, filter: o, search: s } = bn(E("directus_webhooks")), { addNewLink: r, batchLink: p } = h(), { confirmDelete: f, deleting: v, batchDelete: _ } = w(), { layoutWrapper: y } = un(l); return { t: e, addNewLink: r, batchDelete: _, batchLink: p, confirmDelete: f, deleting: v, layoutRef: t, layoutWrapper: y, filter: o, selection: n, layoutOptions: i, layoutQuery: u, layout: l, search: s, clearFilters: k }; async function g() { var F, A, P; await ((P = (A = (F = t.value) == null ? void 0 : F.state) == null ? void 0 : A.refresh) == null ? void 0 : P.call(A)) } function w() { const F = E(!1), A = E(!1); return { confirmDelete: F, deleting: A, batchDelete: P }; async function P() { A.value = !0, F.value = !1; const L = n.value; await ue.delete(`/webhooks/${L}`), await g(), n.value = [], A.value = !1, F.value = !1 } } function h() { const F = V(() => "/settings/webhooks/+"), A = V(() => `/settings/webhooks/${n.value}`); return { addNewLink: F, batchLink: A } } function k() { o.value = null, s.value = null } } }), CT = { class: "page-description" }; function VT(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("settings-navigation"), f = c("search-input"), v = c("v-card-title"), _ = c("v-card-actions"), y = c("v-card"), g = c("v-dialog"), w = c("v-info"), h = c("sidebar-detail"), k = c("layout-sidebar-detail"), F = c("private-view"), A = we("tooltip"), P = we("md"); return m(), C(Ne(e.layoutWrapper), { ref: "layoutRef", selection: e.selection, "onUpdate:selection": t[5] || (t[5] = L => e.selection = L), "layout-options": e.layoutOptions, "onUpdate:layout-options": t[6] || (t[6] = L => e.layoutOptions = L), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[7] || (t[7] = L => e.layoutQuery = L), filter: e.filter, search: e.search, collection: "directus_webhooks" }, { default: d(({ layoutState: L }) => [a(F, { title: e.t("webhooks") }, { headline: d(() => [a(o, { items: [{ name: e.t("settings"), to: "/settings" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "anchor" })]), _: 1 })]), navigation: d(() => [a(p)]), actions: d(() => [a(f, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = T => e.search = T), collection: "directus_webhooks" }, null, 8, ["modelValue"]), e.selection.length > 0 ? (m(), C(g, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[2] || (t[2] = T => e.confirmDelete = T), onEsc: t[3] || (t[3] = T => e.confirmDelete = !1) }, { activator: d(({ on: T }) => [a(r, { rounded: "", icon: "", class: "action-delete", onClick: T }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["onClick"])]), default: d(() => [a(y, null, { default: d(() => [a(v, null, { default: d(() => [D(b(e.t("batch_delete_confirm", e.selection.length)), 1)]), _: 1 }), a(_, null, { default: d(() => [a(r, { secondary: "", onClick: t[1] || (t[1] = T => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.batchDelete }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 1 ? ee((m(), C(r, { key: 1, rounded: "", icon: "", class: "action-batch", to: e.batchLink }, { default: d(() => [a(s, { name: "edit", outline: "" })]), _: 1 }, 8, ["to"])), [[A, e.t("edit"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(r, { rounded: "", icon: "", to: e.addNewLink }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to"]), [[A, e.t("create_webhook"), void 0, { bottom: !0 }]])]), sidebar: d(() => [a(h, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", CT, null, 512), [[P, e.t("page_help_settings_webhooks_collection")]])]), _: 1 }, 8, ["title"]), a(k, { modelValue: e.layout, "onUpdate:modelValue": t[4] || (t[4] = T => e.layout = T) }, { default: d(() => [(m(), C(Ne(`layout-options-${e.layout}`), Je(xe(L)), null, 16))]), _: 2 }, 1032, ["modelValue"]), (m(), C(Ne(`layout-sidebar-${e.layout}`), Je(xe(L)), null, 16))]), default: d(() => [(m(), C(Ne(`layout-${e.layout}`), dt({ class: "layout" }, L), { "no-results": d(() => [a(w, { title: e.t("no_results"), icon: "search", center: "" }, { append: d(() => [a(r, { onClick: e.clearFilters }, { default: d(() => [D(b(e.t("clear_filters")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("no_results_copy")) + " ", 1)]), _: 1 }, 8, ["title"])]), "no-items": d(() => [a(w, { title: e.t("webhooks_count", 0), icon: "anchor", center: "", type: "info" }, { append: d(() => [a(r, { to: { path: "/settings/webhooks/+" } }, { default: d(() => [D(b(e.t("create_webhook")), 1)]), _: 1 })]), default: d(() => [D(b(e.t("no_webhooks_copy")) + " ", 1)]), _: 1 }, 8, ["title"])]), _: 2 }, 1040))]), _: 2 }, 1032, ["title"])]), _: 1 }, 8, ["selection", "layout-options", "layout-query", "filter", "search"]) } var FT = B(ST, [["render", VT], ["__scopeId", "data-v-35d1a91d"]]); const AT = z({ name: "WebhooksItem", components: { SettingsNavigation: Mt, RevisionsDrawerDetail: Bn, SaveOptions: $l }, props: { primaryKey: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = tt(), { primaryKey: l } = je(e), { isNew: i, edits: u, item: o, saving: s, loading: r, error: p, save: f, remove: v, deleting: _, saveAsCopy: y, isBatch: g, validationErrors: w } = kn(E("directus_webhooks"), l), h = V(() => Object.keys(u.value).length > 0), k = E(!1), F = V(() => { var G; return r.value ? t("loading") : i.value ? t("creating_webhook") : (G = o.value) == null ? void 0 : G.name }); nt("meta+s", () => { h.value && O() }), nt("meta+shift+s", () => { h.value && U() }); const A = V(() => h.value === !0 ? !0 : h.value); en(A); const P = E(!1), L = E(null), T = G => { if (h.value) return P.value = !0, L.value = G.fullPath, !1 }; return Ot(T), Tt(T), { t, item: o, loading: r, error: p, isNew: i, edits: u, hasEdits: h, saving: s, saveAndQuit: N, deleteAndQuit: K, confirmDelete: k, deleting: _, saveAndStay: O, saveAndAddNew: U, saveAsCopyAndNavigate: q, discardAndStay: te, isBatch: g, title: F, validationErrors: w, isSavable: A, confirmLeave: P, leaveTo: L, discardAndLeave: W }; async function N() { await f(), n.push("/settings/webhooks") } async function O() { await f() } async function U() { await f(), n.push("/settings/webhooks/+") } async function q() { const G = await y(); G && n.push(`/settings/webhooks/${G}`) } async function K() { await v(), n.replace("/settings/webhooks") } function W() { !L.value || (u.value = {}, P.value = !1, n.push(L.value)) } function te() { u.value = {}, P.value = !1 } } }), IT = { class: "page-description" }; function ET(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("v-card-title"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"), y = c("save-options"), g = c("settings-navigation"), w = c("v-form"), h = c("sidebar-detail"), k = c("revisions-drawer-detail"), F = c("v-card-text"), A = c("private-view"), P = we("md"); return m(), C(A, { title: e.title }, { headline: d(() => [a(o, { items: [{ name: e.t("settings_webhooks"), to: "/settings/webhooks" }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", exact: "", to: "/settings/webhooks/" }, { default: d(() => [a(s, { name: "arrow_back" })]), _: 1 })]), actions: d(() => [a(_, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[1] || (t[1] = L => e.confirmDelete = L), onEsc: t[2] || (t[2] = L => e.confirmDelete = !1) }, { activator: d(({ on: L }) => [a(r, { rounded: "", icon: "", class: "action-delete", disabled: e.item === null, onClick: L }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"])]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: t[0] || (t[0] = L => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), a(r, { rounded: "", icon: "", loading: e.saving, disabled: e.hasEdits === !1, onClick: e.saveAndQuit }, { "append-outer": d(() => [e.hasEdits === !0 ? (m(), C(y, { key: 0, onSaveAndStay: e.saveAndStay, onSaveAndAddNew: e.saveAndAddNew, onSaveAsCopy: e.saveAsCopyAndNavigate, onDiscardAndStay: e.discardAndStay }, null, 8, ["onSaveAndStay", "onSaveAndAddNew", "onSaveAsCopy", "onDiscardAndStay"])) : R("", !0)]), default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"])]), navigation: d(() => [a(g)]), sidebar: d(() => [a(h, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", IT, null, 512), [[P, e.t("page_help_settings_webhooks_item")]])]), _: 1 }, 8, ["title"]), e.isNew === !1 ? (m(), C(k, { key: 0, collection: "directus_webhooks", "primary-key": e.primaryKey }, null, 8, ["primary-key"])) : R("", !0)]), default: d(() => [a(w, { modelValue: e.edits, "onUpdate:modelValue": t[3] || (t[3] = L => e.edits = L), loading: e.loading, "initial-values": e.item, collection: "directus_webhooks", "batch-mode": e.isBatch, "primary-key": e.primaryKey, "validation-errors": e.validationErrors }, null, 8, ["modelValue", "loading", "initial-values", "batch-mode", "primary-key", "validation-errors"]), a(_, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[5] || (t[5] = L => e.confirmLeave = L), onEsc: t[6] || (t[6] = L => e.confirmLeave = !1) }, { default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(F, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(r, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(r, { onClick: t[4] || (t[4] = L => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"]) } var DT = B(AT, [["render", ET], ["__scopeId", "data-v-473183ba"]]), TT = rn({ id: "settings", name: "$t:settings", icon: "settings", color: "var(--warning)", routes: [{ path: "", redirect: "/settings/data-model" }, { name: "settings-project", path: "project", component: zD }, { path: "data-model", component: pn, children: [{ name: "settings-collections", path: "", component: WF, beforeEnter() { He().hydrate() }, children: [{ path: "+", name: "settings-add-new", components: { add: uD } }] }, { name: "settings-fields", path: ":collection", component: XE, async beforeEnter(e) { const n = He().getCollection(e.params.collection), l = Pe(); (n == null ? void 0 : n.meta) || await ue.patch(`/collections/${e.params.collection}`, { meta: {} }), l.hydrate() }, props: e => ({ collection: e.params.collection, field: e.params.field, type: e.query.type }), children: [{ path: ":field", name: "settings-fields-field", components: { field: _E } }] }] }, { path: "roles", component: pn, children: [{ name: "settings-roles-collection", path: "", component: o5, children: [{ path: "+", name: "settings-add-new-role", components: { add: YD } }] }, { path: "public", component: kT, props: !0, children: [{ path: ":permissionKey", components: { permissionsDetail: cs } }] }, { name: "settings-roles-item", path: ":primaryKey", component: H5, props: !0, children: [{ path: ":permissionKey", components: { permissionsDetail: cs } }] }] }, { path: "presets", component: pn, children: [{ name: "settings-presets-collection", path: "", component: VD }, { name: "settings-presets-item", path: ":id", component: OD, props: !0 }] }, { path: "webhooks", component: pn, children: [{ name: "settings-webhooks-collection", path: "", component: FT }, { name: "settings-webhooks-item", path: ":primaryKey", component: DT, props: !0 }] }, { name: "settings-not-found", path: ":_(.+)+", component: fD }], preRegisterCheck: e => e.role.admin_access === !0 }), PT = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: TT }); let Fn = null, Gt = null; function ps() { return Fn === null && (Fn = E(null)), Gt === null && (Gt = E(!1)), Fn.value === null && (Gt == null ? void 0 : Gt.value) === !1 && e(), { roles: Fn, loading: Gt }; async function e() { if (!Gt || !Fn) return; Gt.value = !0; const t = await ue.get("/roles", { params: { sort: "name" } }); Fn.value = t.data.data, Gt.value = !1 } } const OT = z({ props: { currentRole: { type: String, default: null } }, setup() { const { t: e } = x(), { roles: t, loading: n } = ps(); return { t: e, roles: t, loading: n } } }); function LT(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("v-divider"), v = c("v-skeleton-loader"), _ = c("v-list"); return m(), C(_, { nav: "" }, { default: d(() => [a(p, { to: "/users", exact: "", active: e.currentRole === null }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "folder_shared", outline: "" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("all_users")), 1)]), _: 1 })]), _: 1 }, 8, ["active"]), e.roles && e.roles.length > 0 || e.loading ? (m(), C(f, { key: 0 })) : R("", !0), e.loading ? (m(), I(se, { key: 1 }, he(4, y => a(p, { key: y }, { default: d(() => [a(v, { type: "list-item-icon" })]), _: 2 }, 1024)), 64)) : R("", !0), (m(!0), I(se, null, he(e.roles, ({ name: y, id: g, icon: w }) => (m(), C(p, { key: g, to: `/users/roles/${g}`, active: e.currentRole === g }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: w, outline: "" }, null, 8, ["name"])]), _: 2 }, 1024), a(r, null, { default: d(() => [D(b(y), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["to", "active"]))), 128))]), _: 1 }) } var ms = B(OT, [["render", LT], ["__scopeId", "data-v-1db98fc0"]]); const jT = z({ name: "UsersCollection", components: { UsersNavigation: ms, LayoutSidebarDetail: Nn, SearchInput: $n, UsersInvite: ds, DrawerBatch: no }, props: { role: { type: String, default: null } }, setup(e) { const { t } = x(), { roles: n } = ps(), l = E(!1), i = Ze(), u = Dt(), o = E(), s = E([]), { layout: r, layoutOptions: p, layoutQuery: f, filter: v, search: _, resetPreset: y } = bn(E("directus_users")), { addNewLink: g } = G(), { confirmDelete: w, deleting: h, batchDelete: k, error: F, batchEditActive: A } = te(), { breadcrumb: P, title: L } = X(), T = V(() => e.role !== null ? { _and: [{ role: { _eq: e.role } }] } : null), N = V(() => { var pe, H; if (!!((H = (pe = i.currentUser) == null ? void 0 : pe.role) == null ? void 0 : H.admin_access)) return !0; const Y = u.permissions.find(Q => Q.collection === "directus_users" && Q.action === "create"), ce = u.permissions.find(Q => Q.collection === "directus_roles" && Q.action === "read"); return !!Y && !!ce }), { layoutWrapper: O } = un(r), { batchEditAllowed: U, batchDeleteAllowed: q, createAllowed: K } = ae(); return Tt(() => { s.value = [] }), Ot(() => { s.value = [] }), { t, canInviteUsers: N, addNewLink: g, breadcrumb: P, title: L, layoutRef: o, layoutWrapper: O, selection: s, layoutOptions: p, layoutQuery: f, layout: r, search: _, clearFilters: ve, userInviteModalActive: l, refresh: W, batchEditAllowed: U, batchDeleteAllowed: q, createAllowed: K, resetPreset: y, confirmDelete: w, deleting: h, batchDelete: k, deleteError: F, batchEditActive: A, filter: v, roleFilter: T, mergeFilters: fl }; async function W() { var ne, Y, ce; await ((ce = (Y = (ne = o.value) == null ? void 0 : ne.state) == null ? void 0 : Y.refresh) == null ? void 0 : ce.call(Y)) } function te() { const ne = E(!1), Y = E(!1), ce = E(!1), pe = E(); return { batchEditActive: ce, confirmDelete: ne, deleting: Y, batchDelete: H, error: pe }; async function H() { Y.value = !0; const Q = s.value; try { await ue.delete("/users", { data: Q }), await W(), s.value = [], ne.value = !1 } catch (Z) { pe.value = Z, Ve(Z) } finally { Y.value = !1 } } } function G() { return { addNewLink: V(() => e.role ? `/users/roles/${e.role}/+` : "/users/+") } } function X() { const ne = V(() => e.role ? [{ name: t("user_directory"), to: "/users" }] : null), Y = V(() => { var ce, pe; return e.role ? (pe = (ce = n.value) == null ? void 0 : ce.find(H => H.id === e.role)) == null ? void 0 : pe.name : t("user_directory") }); return { breadcrumb: ne, title: Y } } function ve() { v.value = null, _.value = null } function ae() { const ne = V(() => { var Q; return ((Q = i == null ? void 0 : i.currentUser) == null ? void 0 : Q.role.admin_access) === !0 ? !0 : !!u.permissions.find(Z => Z.action === "update" && Z.collection === "directus_users") }), Y = V(() => { var Q; return ((Q = i == null ? void 0 : i.currentUser) == null ? void 0 : Q.role.admin_access) === !0 ? !0 : !!u.permissions.find(Z => Z.action === "delete" && Z.collection === "directus_users") }), ce = V(() => { var Q; return ((Q = i == null ? void 0 : i.currentUser) == null ? void 0 : Q.role.admin_access) === !0 ? !0 : !!u.permissions.find(Z => Z.action === "create" && Z.collection === "directus_users") }); return { batchEditAllowed: ne, batchDeleteAllowed: Y, createAllowed: ce } } } }), RT = { class: "page-description" }; function MT(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("search-input"), f = c("v-card-title"), v = c("v-card-actions"), _ = c("v-card"), y = c("v-dialog"), g = c("users-navigation"), w = c("users-invite"), h = c("v-info"), k = c("drawer-batch"), F = c("sidebar-detail"), A = c("layout-sidebar-detail"), P = c("export-sidebar-detail"), L = c("private-view"), T = we("tooltip"), N = we("md"); return m(), C(Ne(e.layoutWrapper), { ref: "layoutRef", selection: e.selection, "onUpdate:selection": t[10] || (t[10] = O => e.selection = O), "layout-options": e.layoutOptions, "onUpdate:layout-options": t[11] || (t[11] = O => e.layoutOptions = O), "layout-query": e.layoutQuery, "onUpdate:layout-query": t[12] || (t[12] = O => e.layoutQuery = O), filter: e.mergeFilters(e.filter, e.roleFilter), "filter-user": e.filter, "filter-system": e.roleFilter, search: e.search, collection: "directus_users", "reset-preset": e.resetPreset }, { default: d(({ layoutState: O }) => [a(L, { title: e.title }, et({ "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", disabled: "", icon: "", secondary: "" }, { default: d(() => [a(s, { name: "people_alt", outline: "" })]), _: 1 })]), "actions:prepend": d(() => [(m(), C(Ne(`layout-actions-${e.layout}`), Je(xe(O)), null, 16))]), actions: d(() => [a(p, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = U => e.search = U), filter: e.filter, "onUpdate:filter": t[1] || (t[1] = U => e.filter = U), collection: "directus_users" }, null, 8, ["modelValue", "filter"]), e.selection.length > 0 ? (m(), C(y, { key: 0, modelValue: e.confirmDelete, "onUpdate:modelValue": t[3] || (t[3] = U => e.confirmDelete = U), onEsc: t[4] || (t[4] = U => e.confirmDelete = !1) }, { activator: d(({ on: U }) => [ee(a(r, { disabled: e.batchDeleteAllowed !== !0, rounded: "", icon: "", class: "action-delete", onClick: U }, { default: d(() => [a(s, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[T, e.batchDeleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(_, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("batch_delete_confirm", e.selection.length)), 1)]), _: 1 }), a(v, null, { default: d(() => [a(r, { secondary: "", onClick: t[2] || (t[2] = U => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(r, { kind: "danger", loading: e.deleting, onClick: e.batchDelete }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])) : R("", !0), e.selection.length > 1 ? ee((m(), C(r, { key: 1, rounded: "", icon: "", class: "action-batch", disabled: e.batchEditAllowed === !1, onClick: t[5] || (t[5] = U => e.batchEditActive = !0) }, { default: d(() => [a(s, { name: "edit", outline: "" })]), _: 1 }, 8, ["disabled"])), [[T, e.batchEditAllowed ? e.t("edit") : e.t("not_allowed"), void 0, { bottom: !0 }]]) : R("", !0), e.canInviteUsers ? ee((m(), C(r, { key: 2, rounded: "", icon: "", class: "invite-user", onClick: t[6] || (t[6] = U => e.userInviteModalActive = !0) }, { default: d(() => [a(s, { name: "person_add" })]), _: 1 }, 512)), [[T, e.t("invite_users"), void 0, { bottom: !0 }]]) : R("", !0), ee(a(r, { rounded: "", icon: "", to: e.addNewLink, disabled: e.createAllowed === !1 }, { default: d(() => [a(s, { name: "add" })]), _: 1 }, 8, ["to", "disabled"]), [[T, e.createAllowed ? e.t("create_item") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(g, { "current-role": e.role }, null, 8, ["current-role"])]), sidebar: d(() => [a(F, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [ee(S("div", RT, null, 512), [[N, e.t("page_help_users_collection")]])]), _: 1 }, 8, ["title"]), a(A, { modelValue: e.layout, "onUpdate:modelValue": t[9] || (t[9] = U => e.layout = U) }, { default: d(() => [(m(), C(Ne(`layout-options-${e.layout}`), Je(xe(O)), null, 16))]), _: 2 }, 1032, ["modelValue"]), (m(), C(Ne(`layout-sidebar-${e.layout}`), Je(xe(O)), null, 16)), a(P, { collection: "directus_users", filter: e.mergeFilters(e.filter, e.roleFilter), search: e.search }, null, 8, ["filter", "search"])]), default: d(() => [e.canInviteUsers ? (m(), C(w, { key: 0, modelValue: e.userInviteModalActive, "onUpdate:modelValue": [t[7] || (t[7] = U => e.userInviteModalActive = U), e.refresh] }, null, 8, ["modelValue", "onUpdate:modelValue"])) : R("", !0), (m(), C(Ne(`layout-${e.layout}`), dt({ class: "layout" }, O), { "no-results": d(() => [!e.filter && !e.search ? (m(), C(h, { key: 0, title: e.t("user_count", 0), icon: "people_alt", center: "" }, et({ default: d(() => [D(b(e.t("no_users_copy")) + " ", 1)]), _: 2 }, [e.canInviteUsers ? { name: "append", fn: d(() => [a(r, { to: e.role ? { path: `/users/roles/${e.role}/+` } : { path: "/users/+" } }, { default: d(() => [D(b(e.t("create_user")), 1)]), _: 1 }, 8, ["to"])]) } : void 0]), 1032, ["title"])) : (m(), C(h, { key: 1, title: e.t("no_results"), icon: "search", center: "" }, { append: d(() => [a(r, { onClick: e.clearFilters }, { default: d(() => [D(b(e.t("clear_filters")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("no_results_copy")) + " ", 1)]), _: 1 }, 8, ["title"]))]), "no-items": d(() => [a(h, { title: e.t("user_count", 0), icon: "people_alt", center: "" }, et({ default: d(() => [D(b(e.t("no_users_copy")) + " ", 1)]), _: 2 }, [e.canInviteUsers ? { name: "append", fn: d(() => [a(r, { to: e.role ? { path: `/users/roles/${e.role}/+` } : { path: "/users/+" } }, { default: d(() => [D(b(e.t("create_user")), 1)]), _: 1 }, 8, ["to"])]) } : void 0]), 1032, ["title"])]), _: 2 }, 1040)), a(k, { active: e.batchEditActive, "onUpdate:active": t[8] || (t[8] = U => e.batchEditActive = U), "primary-keys": e.selection, collection: "directus_users", onRefresh: e.refresh }, null, 8, ["active", "primary-keys", "onRefresh"])]), _: 2 }, [e.breadcrumb ? { name: "headline", fn: d(() => [a(o, { items: e.breadcrumb }, null, 8, ["items"])]) } : void 0]), 1032, ["title"])]), _: 1 }, 8, ["selection", "layout-options", "layout-query", "filter", "filter-user", "filter-system", "search", "reset-preset"]) } var fs = B(jT, [["render", MT], ["__scopeId", "data-v-3ecd516f"]]); const UT = { alias: "input", bigInteger: "input", binary: "input", boolean: "boolean", date: "datetime", dateTime: "datetime", decimal: "input", float: "input", integer: "input", json: "input-code", string: "input", text: "input-multiline", time: "datetime", timestamp: "datetime", uuid: "input", unknown: "input", csv: "tags", hash: "input-hash", geometry: "map", "geometry.Point": "map", "geometry.LineString": "map", "geometry.Polygon": "map", "geometry.MultiPoint": "map", "geometry.MultiLineString": "map", "geometry.MultiPolygon": "map" }; function vs(e) { return UT[e] || "input" } function _s(e) { const { interfaces: t } = St(); return { formFields: V(() => { let l = M.exports.clone(e.value); return l = l.map((i, u) => { var r; if (!i.meta) return i; let o = t.value.find(p => { var f; return p.id === ((f = i.meta) == null ? void 0 : f.interface) }); return o !== void 0 === !1 && (i.meta.interface = vs(i.type)), o = t.value.find(p => { var f; return p.id === ((f = i.meta) == null ? void 0 : f.interface) }), (o == null ? void 0 : o.hideLabel) === !0 && (i.hideLabel = !0), (o == null ? void 0 : o.hideLoader) === !0 && (i.hideLoader = !0), u !== 0 && i.meta.width === "half" && ((r = l[u - 1].meta) == null ? void 0 : r.width) === "half" && (i.meta.width = "half-right"), i }), l = l.filter(i => { var o; return (((o = i.field) == null ? void 0 : o.startsWith("$")) || !1) === !1 }), l = M.exports.orderBy(l, [i => { var u; return !!((u = i.meta) == null ? void 0 : u.system) }, "meta.sort", "meta.id"], ["desc", "asc", "asc"]), l = Ct(l), l }) } } const NT = z({ props: { user: { type: Object, default: null }, isNew: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = E(""); return _e(e, async () => { !e.user || (n.value = await jt(new Date(e.user.last_access), String(t("date-fns_date_short")))) }, { immediate: !0 }), { t, lastAccessDate: n } } }), BT = { key: 0 }, qT = { key: 0 }, zT = { key: 1 }, KT = { key: 2 }, HT = { key: 3 }, WT = { key: 4 }, GT = { key: 5 }, JT = { class: "page-description" }; function QT(e, t, n, l, i, u) { const o = c("router-link"), s = c("v-divider"), r = c("sidebar-detail"), p = we("md"); return m(), C(r, { icon: "info_outline", title: e.t("information"), close: "" }, { default: d(() => [e.isNew === !1 && e.user ? (m(), I("dl", BT, [e.user.id ? (m(), I("div", qT, [S("dt", null, b(e.t("key")), 1), S("dd", null, b(e.user.id), 1)])) : R("", !0), e.user.last_page ? (m(), I("div", zT, [S("dt", null, b(e.t("last_page")), 1), S("dd", null, [a(o, { to: e.user.last_page }, { default: d(() => [D(b(e.user.last_page), 1)]), _: 1 }, 8, ["to"])])])) : R("", !0), e.user.last_access ? (m(), I("div", KT, [S("dt", null, b(e.t("last_access")), 1), S("dd", null, b(e.lastAccessDate), 1)])) : R("", !0), e.user.created_on ? (m(), I("div", HT, [S("dt", null, b(e.t("created_on")), 1), S("dd", null, b(e.user.created_on), 1)])) : R("", !0), e.user.created_by ? (m(), I("div", WT, [S("dt", null, b(e.t("created_by")), 1), S("dd", null, b(e.user.created_by), 1)])) : R("", !0), e.user.modified_on ? (m(), I("div", GT, [S("dt", null, b(e.t("modified_on")), 1), S("dd", null, b(e.user.modified_on), 1)])) : R("", !0)])) : R("", !0), a(s), ee(S("div", JT, null, 512), [[p, e.t("page_help_users_item")]])]), _: 1 }, 8, ["title"]) } var XT = B(NT, [["render", QT], ["__scopeId", "data-v-8ba7c4c4"]]); const ZT = z({ name: "UsersItem", components: { UsersNavigation: ms, RevisionsDrawerDetail: Bn, SaveOptions: $l, CommentsSidebarDetail: ao, UserInfoSidebarDetail: XT }, props: { primaryKey: { type: String, required: !0 }, role: { type: String, default: null } }, setup(e) { const { t, locale: n } = x(), l = tt(), i = E(), u = Pe(), o = He(), s = Ze(), { primaryKey: r } = je(e), { breadcrumb: p } = me(), { info: f } = ot("directus_users"), v = E(null), { isNew: _, edits: y, item: g, saving: w, loading: h, save: k, remove: F, deleting: A, saveAsCopy: P, isBatch: L, archive: T, archiving: N, isArchived: O, validationErrors: U } = kn(E("directus_users"), r); e.role && (y.value = re({ role: e.role }, y.value)); const q = V(() => Object.keys(y.value).length > 0); en(q); const K = E(!1), W = E(!1), te = V(() => { if (h.value === !0) return t("loading"); if (_.value === !1 && g.value) { const Se = g.value; return yt(Se) } return t("adding_user") }), { loading: G, avatarSrc: X, roleName: ve } = Te(), ae = E(!1), ne = E(null), Y = Se => { if (q.value) return ae.value = !0, ne.value = Se.fullPath, !1 }; Ot(Y), Tt(Y); const { deleteAllowed: ce, archiveAllowed: pe, saveAllowed: H, updateAllowed: Q, revisionsAllowed: Z, fields: le } = qn(E("directus_users"), g, _), fe = ["id", "external_id", "last_page", "created_on", "created_by", "modified_by", "modified_on", "last_access"], J = V(() => le.value.filter(Se => (!_.value && ["provider", "external_identifier"].includes(Se.field) && (Se.meta.readonly = !0), !fe.includes(Se.field)))), { formFields: ie } = _s(J), oe = V(() => pe.value === !1 ? t("not_allowed") : O.value === !0 ? t("unarchive") : t("archive")); return nt("meta+s", be, i), nt("meta+shift+s", ke, i), { t, router: l, title: te, item: g, loading: h, isNew: _, breadcrumb: p, edits: y, hasEdits: q, saving: w, saveAndQuit: ge, deleteAndQuit: De, confirmDelete: K, deleting: A, saveAndStay: be, saveAndAddNew: ke, saveAsCopyAndNavigate: Ie, discardAndStay: qe, isBatch: L, revisionsDrawerDetail: v, previewLoading: G, avatarSrc: X, roleName: ve, confirmLeave: ae, leaveTo: ne, discardAndLeave: Oe, formFields: ie, deleteAllowed: ce, saveAllowed: H, archiveAllowed: pe, isArchived: O, updateAllowed: Q, toggleArchive: Le, confirmArchive: W, collectionInfo: f, archiving: N, archiveTooltip: oe, form: i, userName: yt, revisionsAllowed: Z, validationErrors: U, revert: Fe }; function me() { return { breadcrumb: V(() => [{ name: t("user_directory"), to: "/users" }]) } } async function ge() { try { const Se = await k(); await Be(Se), await lt(), l.push("/users") } catch { } } async function be() { var Se, We; try { const $e = await k(); if (await Be($e), (We = (Se = v.value) == null ? void 0 : Se.refresh) == null || We.call(Se), e.primaryKey === "+") { const Ue = $e.id; l.replace(`/users/${Ue}`) } } catch { } } async function ke() { try { const Se = await k(); await Be(Se), await lt(), l.push("/users/+") } catch { } } async function Ie() { try { const Se = await P(); Se && l.push(`/users/${Se}`) } catch { } } async function De() { try { await F(), l.replace("/users") } catch { } } async function Be(Se) { var $e; if (s.currentUser.id !== (($e = g.value) == null ? void 0 : $e.id)) return; const We = Se == null ? void 0 : Se.language; We && We !== n.value && (await ya(We), await u.hydrate(), await o.hydrate()) } async function lt() { var Se; s.currentUser.id === ((Se = g.value) == null ? void 0 : Se.id) && await s.hydrate() } function Te() { const Se = E(!1), We = E(null), $e = E(null); return _e(() => e.primaryKey, Ue, { immediate: !0 }), { loading: Se, avatarSrc: We, roleName: $e }; async function Ue() { var Ge, it, pt; if (e.primaryKey !== "+") { Se.value = !0; try { const gt = await ue.get(`/users/${e.primaryKey}`, { params: { fields: ["role.name", "avatar.id"] } }); We.value = ((Ge = gt.data.data.avatar) == null ? void 0 : Ge.id) ? st(Ye() + `assets/${gt.data.data.avatar.id}?key=system-medium-cover`) : null, $e.value = (pt = (it = gt.data.data) == null ? void 0 : it.role) == null ? void 0 : pt.name } catch (gt) { Ve(gt) } finally { Se.value = !1 } } } } function Oe() { !ne.value || (y.value = {}, ae.value = !1, l.push(ne.value)) } function qe() { y.value = {}, ae.value = !1 } async function Le() { await T(), O.value === !0 ? l.push("/users") : W.value = !1 } function Fe(Se) { y.value = re(re({}, y.value), Se) } } }), YT = { class: "user-item" }, xT = { key: 0, class: "user-box" }, e6 = { class: "avatar" }, t6 = ["src", "alt"], n6 = { class: "user-box-content" }, l6 = { class: "name type-label" }, o6 = { key: 0, class: "title" }, a6 = { key: 0, class: "email" }, i6 = { key: 1, class: "location" }; function s6(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-breadcrumb"), p = c("v-card-title"), f = c("v-card-actions"), v = c("v-card"), _ = c("v-dialog"), y = c("save-options"), g = c("users-navigation"), w = c("v-skeleton-loader"), h = c("v-chip"), k = c("v-form"), F = c("v-card-text"), A = c("user-info-sidebar-detail"), P = c("revisions-drawer-detail"), L = c("comments-sidebar-detail"), T = c("private-view"), N = we("tooltip"); return m(), C(T, { title: e.title }, { "title-outer:prepend": d(() => [a(s, { class: "header-icon", rounded: "", icon: "", secondary: "", exact: "", onClick: t[0] || (t[0] = O => e.router.back()) }, { default: d(() => [a(o, { name: "arrow_back" })]), _: 1 })]), headline: d(() => [a(r, { items: e.breadcrumb }, null, 8, ["items"])]), actions: d(() => [a(_, { modelValue: e.confirmDelete, "onUpdate:modelValue": t[2] || (t[2] = O => e.confirmDelete = O), disabled: e.deleteAllowed === !1, onEsc: t[3] || (t[3] = O => e.confirmDelete = !1) }, { activator: d(({ on: O }) => [ee(a(s, { rounded: "", icon: "", class: "action-delete", disabled: e.item === null || e.deleteAllowed !== !0, onClick: O }, { default: d(() => [a(o, { name: "delete", outline: "" })]), _: 2 }, 1032, ["disabled", "onClick"]), [[N, e.deleteAllowed ? e.t("delete_label") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("delete_are_you_sure")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(s, { secondary: "", onClick: t[1] || (t[1] = O => e.confirmDelete = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(s, { kind: "danger", loading: e.deleting, onClick: e.deleteAndQuit }, { default: d(() => [D(b(e.t("delete_label")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue", "disabled"]), e.collectionInfo.meta && e.collectionInfo.meta.archive_field && !e.isNew ? (m(), C(_, { key: 0, modelValue: e.confirmArchive, "onUpdate:modelValue": t[5] || (t[5] = O => e.confirmArchive = O), disabled: e.archiveAllowed === !1, onEsc: t[6] || (t[6] = O => e.confirmArchive = !1) }, { activator: d(({ on: O }) => [e.collectionInfo.meta && e.collectionInfo.meta.singleton === !1 ? ee((m(), C(s, { key: 0, rounded: "", icon: "", class: "action-archive", disabled: e.item === null || e.archiveAllowed !== !0, onClick: O }, { default: d(() => [a(o, { name: e.isArchived ? "unarchive" : "archive", outline: "" }, null, 8, ["name"])]), _: 2 }, 1032, ["disabled", "onClick"])), [[N, e.archiveTooltip, void 0, { bottom: !0 }]]) : R("", !0)]), default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.isArchived ? e.t("unarchive_confirm") : e.t("archive_confirm")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(s, { secondary: "", onClick: t[4] || (t[4] = O => e.confirmArchive = !1) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }), a(s, { kind: "warning", loading: e.archiving, onClick: e.toggleArchive }, { default: d(() => [D(b(e.isArchived ? e.t("unarchive") : e.t("archive")), 1)]), _: 1 }, 8, ["loading", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue", "disabled"])) : R("", !0), ee(a(s, { rounded: "", icon: "", loading: e.saving, disabled: e.hasEdits === !1 || e.saveAllowed === !1, onClick: e.saveAndQuit }, { "append-outer": d(() => [e.hasEdits === !0 ? (m(), C(y, { key: 0, onSaveAndStay: e.saveAndStay, onSaveAndAddNew: e.saveAndAddNew, onSaveAsCopy: e.saveAsCopyAndNavigate, onDiscardAndStay: e.discardAndStay }, null, 8, ["onSaveAndStay", "onSaveAndAddNew", "onSaveAsCopy", "onDiscardAndStay"])) : R("", !0)]), default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["loading", "disabled", "onClick"]), [[N, e.saveAllowed ? e.t("save") : e.t("not_allowed"), void 0, { bottom: !0 }]])]), navigation: d(() => [a(g, { "current-role": e.item && e.item.role || e.role }, null, 8, ["current-role"])]), sidebar: d(() => [a(A, { "is-new": e.isNew, user: e.item }, null, 8, ["is-new", "user"]), e.isBatch === !1 && e.isNew === !1 && e.revisionsAllowed ? (m(), C(P, { key: 0, ref: "revisionsDrawerDetail", collection: "directus_users", "primary-key": e.primaryKey, onRevert: e.revert }, null, 8, ["primary-key", "onRevert"])) : R("", !0), e.isBatch === !1 && e.isNew === !1 ? (m(), C(L, { key: 1, collection: "directus_users", "primary-key": e.primaryKey }, null, 8, ["primary-key"])) : R("", !0)]), default: d(() => [S("div", YT, [e.isNew === !1 ? (m(), I("div", xT, [S("div", e6, [e.loading || e.previewLoading ? (m(), C(w, { key: 0 })) : e.avatarSrc ? (m(), I("img", { key: 1, src: e.avatarSrc, alt: e.t("avatar") }, null, 8, t6)) : (m(), C(o, { key: 2, name: "account_circle", outline: "", "x-large": "" }))]), S("div", n6, [e.loading ? (m(), I(se, { key: 0 }, [a(w, { type: "text" }), a(w, { type: "text" }), a(w, { type: "text" })], 64)) : e.isNew === !1 && e.item ? (m(), I(se, { key: 1 }, [S("div", l6, [D(b(e.userName(e.item)) + " ", 1), e.item.title ? (m(), I("span", o6, ", " + b(e.item.title), 1)) : R("", !0)]), e.item.email ? (m(), I("div", a6, [a(o, { name: "alternate_email", small: "", outline: "" }), D(" " + b(e.item.email), 1)])) : R("", !0), e.item.location ? (m(), I("div", i6, [a(o, { name: "place", small: "", outline: "" }), D(" " + b(e.item.location), 1)])) : R("", !0), e.roleName ? (m(), C(h, { key: 2, class: de(e.item.status), small: "" }, { default: d(() => [D(b(e.roleName), 1)]), _: 1 }, 8, ["class"])) : R("", !0)], 64)) : R("", !0)])])) : R("", !0), a(k, { ref: "form", modelValue: e.edits, "onUpdate:modelValue": t[7] || (t[7] = O => e.edits = O), disabled: e.isNew ? !1 : e.updateAllowed === !1, fields: e.formFields, loading: e.loading, "initial-values": e.item, "batch-mode": e.isBatch, "primary-key": e.primaryKey, "validation-errors": e.validationErrors }, null, 8, ["modelValue", "disabled", "fields", "loading", "initial-values", "batch-mode", "primary-key", "validation-errors"])]), a(_, { modelValue: e.confirmLeave, "onUpdate:modelValue": t[9] || (t[9] = O => e.confirmLeave = O), onEsc: t[10] || (t[10] = O => e.confirmLeave = !1) }, { default: d(() => [a(v, null, { default: d(() => [a(p, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(F, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(f, null, { default: d(() => [a(s, { secondary: "", onClick: e.discardAndLeave }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }, 8, ["onClick"]), a(s, { onClick: t[8] || (t[8] = O => e.confirmLeave = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["title"]) } var ys = B(ZT, [["render", s6], ["__scopeId", "data-v-6d98ab59"]]), r6 = rn({ id: "users", name: "$t:user_directory", icon: "people_alt", routes: [{ name: "users-collection", path: "", component: fs }, { name: "users-item", path: ":primaryKey", component: ys, props: !0 }, { path: "roles", redirect: "/users" }, { name: "roles-collection", path: "roles/:role", component: fs, props: !0 }, { name: "roles-item-add", path: "roles/:role/+", component: ys, props: e => ({ primaryKey: "+", role: e.params.role }) }], preRegisterCheck(e, t) { return e.role.admin_access ? !0 : !!t.find(i => i.collection === "directus_users" && i.action === "read") } }), d6 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: r6 }); const { modulesRaw: Do } = Gl(); let gs = []; async function u6() { const t = Object.values({ "./activity/index.ts": dw, "./content/index.ts": I8, "./docs/index.ts": X8, "./files/index.ts": IC, "./insights/index.ts": VF, "./settings/index.ts": PT, "./users/index.ts": d6 }).map(n => n.default); try { const n = await j(() => import(`${Ye()}extensions/modules/index.js`), []); t.push(...n.default) } catch (n) { console.warn("Couldn't load custom modules"), console.warn(n) } gs = t } async function c6() { const e = Ze(), t = Dt(), n = []; for (const l of gs) !e.currentUser || (l.preRegisterCheck ? await l.preRegisterCheck(e.currentUser, t.permissions) && n.push(l) : n.push(l)); for (const l of n) Rt.addRoute({ name: l.id, path: `/${l.id}`, component: pn, children: l.routes }); Do.value = n } function p6() { for (const e of Do.value) Rt.removeRoute(e.id); Do.value = [] } function An(e) { const t = Il(); return t.settings && e in t.settings ? t.settings[e] : null } function m6() { const e = Ze(); return e.currentUser ? e.currentUser.theme === "auto" ? window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" : e.currentUser.theme : "light" } const hs = { name: "OpenStreetMap", type: "raster", url: "https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png", tileSize: 256 }, f6 = { version: 8, glyphs: "https://fonts.openmaptiles.org/{fontstack}/{range}.pbf" }; function Yn() { return An("mapbox_key") ? [y6(), hs, ...An("basemaps") || []] : [hs, ...An("basemaps") || []] } function To(e) { if (_6(e.url), e.type == "style") return e.url; { const t = re({}, f6), n = { type: "raster" }; return e.type == "raster" && (n.tiles = v6(e.url), n.tileSize = e.tileSize || 512), e.type == "tile" && (n.url = e.url), t.layers = [{ id: e.name, source: e.name, type: "raster" }], t.sources = { [e.name]: n }, t } } function v6(e) { const t = []; let n = /\{([a-z])-([a-z])\}/.exec(e); if (n) { const l = n[1].charCodeAt(0), i = n[2].charCodeAt(0); let u; for (u = l; u <= i; ++u)t.push(e.replace(n[0], String.fromCharCode(u))); return t } if (n = /\{(\d+)-(\d+)\}/.exec(e), n) { const l = parseInt(n[2], 10); for (let i = parseInt(n[1], 10); i <= l; i++)t.push(e.replace(n[0], i.toString())); return t } if (n = /\{(([a-z0-9]+)(,([a-z0-9]+))+)\}/.exec(e), n) { const l = n[1].split(","); for (const i of l) t.push(e.replace(n[0], i)); return t } return t.push(e), t } function _6(e) { e = e.replace(/^mapbox:\//, "https://api.mapbox.com/styles/v1"); try { const t = new URL(e); if (t.host == "api.mapbox.com") { const n = t.searchParams.get("access_token"); n && (Bl.accessToken = n) } } catch { return } } function y6() { const e = { name: "Mapbox", type: "style", url: "mapbox://styles/directus/cktaiz31c509n18nrxj63zdy6" }; return m6() === "dark" && (e.url = "mapbox://styles/directus/cktaixyhk2joh17lrb5i8zs22"), e } function bs(e = [He, Pe, Ze, tl, Tn, Il, Pn, Uo, ut, Dt, Dn, el]) { return e.map(t => t()) } async function Po(e = bs()) { var i, u, o; const t = wt(), n = Ze(), l = Dt(); if (!t.hydrated && !t.hydrating) { t.hydrating = !0; try { if (await n.hydrate(), (i = n.currentUser) == null ? void 0 : i.role) { await l.hydrate(); const s = ["userStore", "permissionsStore"]; await Promise.all(e.filter(({ $id: r }) => !s.includes(r)).map(r => { var p; return (p = r.hydrate) == null ? void 0 : p.call(r) })), await c6(), await ya((o = (u = n.currentUser) == null ? void 0 : u.language) != null ? o : "en-US") } t.basemap = Yn()[0].name } catch (s) { t.error = s } finally { t.hydrating = !1 } t.hydrated = !0 } } async function g6(e = bs()) { var n; const t = wt(); if (t.hydrated !== !1) { for (const l of e) await ((n = l.dehydrate) == null ? void 0 : n.call(l)); p6(), t.hydrated = !1 } } const $s = ["pointermove", "pointerdown", "keydown"], h6 = 5 * 60 * 1e3; let Oo, Al = !0, Lo = !1; const nn = la(); function b6() { document.addEventListener("visibilitychange", ks); for (const e of $s) document.addEventListener(e, ws); Ss() } function $6() { document.removeEventListener("visibilitychange", ks); for (const e of $s) document.removeEventListener(e, ws) } function ws() { Lo === !0 && (Lo = !1, nn.emit("active")), Ss() } function ks() { document.visibilityState === "hidden" && Al === !0 && (Al = !1, nn.emit("hide")), document.visibilityState === "visible" && Al === !1 && (Al = !0, nn.emit("show")) } function Ss() { Oo && clearTimeout(Oo), Oo = setTimeout(() => { Lo = !0, nn.emit("idle") }, h6) } async function Cs(e, t) { const n = wt(), l = await ue.post(t !== to ? `/auth/login/${t}` : "/auth/login", Ce(re({}, e), { mode: "cookie" })), i = l.data.data.access_token; ue.defaults.headers.common.Authorization = `Bearer ${i}`, l.data.data.expires <= 21e8 && (ln = setTimeout(() => _n(), l.data.data.expires - 1e4)), n.accessTokenExpiry = Date.now() + l.data.data.expires, n.authenticated = !0, await Po() } let ln, In = !1, jo = !1, Vs = !0; nn.on("idle", () => { clearTimeout(ln), In = !0 }); nn.on("hide", () => { clearTimeout(ln), In = !0 }); nn.on("active", () => { In === !0 && (_n(), In = !1) }); nn.on("show", () => { In === !0 && (_n(), In = !1) }); async function _n({ navigate: e } = { navigate: !0 }) { if (Vs) Vs = !1; else if (!ue.defaults.headers.common.Authorization) return; if (jo) return; const t = wt(); if (t.accessTokenExpiry && Date.now() < t.accessTokenExpiry - 1e4) { clearTimeout(ln), ln = setTimeout(() => _n(), t.accessTokenExpiry - 1e4 - Date.now()); return } jo = !0; finally { jo = !1 } } var En; (function (e) { e.SIGN_OUT = "SIGN_OUT", e.SESSION_EXPIRED = "SESSION_EXPIRED" })(En || (En = {})); async function Ro(e = {}) { const t = wt(), n = { navigate: !0, reason: En.SIGN_OUT }; delete ue.defaults.headers.common.Authorization, clearTimeout(ln); const l = re(re({}, n), e); if (l.reason === En.SIGN_OUT && await ue.post("/auth/logout"), t.authenticated = !1, await g6(), l.navigate === !0) { const i = { path: "/login", query: { reason: l.reason } }; Rt.push(i) } } const xn = Ml.create({ baseURL: Ye(), withCredentials: !0, headers: { "Cache-Control": "no-store" } }), Mo = new Hr({ concurrency: 5, intervalCap: 5, interval: 500, carryoverConcurrencyCount: !0 }), w6 = e => { const n = tl().startRequest(), l = re({ id: n }, e);  k6 = e => { var l; const t = tl(), n = (l = e.config) == null ? void 0 : l.id; return n && t.endRequest(n), e }, S6 = async e => { var u, o, s, r, p, f, v, _; const t = tl(), n = (o = (u = e.response) == null ? void 0 : u.config) == null ? void 0 : o.id; n && t.endRequest(n); const l = (s = e.response) == null ? void 0 : s.status, i = (_ = (v = (f = (p = (r = e.response) == null ? void 0 : r.data) == null ? void 0 : p.errors) == null ? void 0 : f[0]) == null ? void 0 : v.extensions) == null ? void 0 : _.code; if (l === 401 && i === "INVALID_CREDENTIALS" && e.request.responseURL.includes("refresh") === !1 && e.request.responseURL.includes("login") === !1 && e.request.responseURL.includes("tfa") === !1) { let y; try { y = await _n() } catch { return Ro({ reason: En.SESSION_EXPIRED }), Promise.reject() } if (y) return xn.request(Ce(re({}, e.config), { headers: { Authorization: `Bearer ${y}` } })) } return Promise.reject(e) }; xn.interceptors.request.use(w6); xn.interceptors.response.use(k6, S6); var ue = xn; function C6() { var e; return ((e = xn.defaults.headers.common.Authorization) == null ? void 0 : e.split(" ")[1]) || null } function st(e, t) { const n = t || C6(); return n ? Zl(e, { access_token: n }) : e } const ut = Ft({ id: "relationsStore", state: () => ({ relations: [] }), actions: { async hydrate() { const e = await ue.get("/relations", { params: { limit: -1 } }); this.relations = e.data.data }, async dehydrate() { this.$reset() }, getRelationsForCollection(e) { return this.relations.filter(t => t.collection === e || t.related_collection === e) }, async upsertRelation(e, t, n) { const l = this.getRelationForField(e, t); try { if (l) { if (M.exports.isEqual(l, n)) return; const i = await ue.patch(`/relations/${e}/${t}`, n); this.relations = this.relations.map(u => u.collection === e && u.field === t ? i.data.data : u) } else { const i = await ue.post("/relations", n); this.relations = [...this.relations, i.data.data] } } catch (i) { Ve(i) } }, getRelationsForField(e, t) { var u; if (!Pe().getField(e, t)) return []; const i = this.getRelationsForCollection(e).filter(o => { var s; return o.collection === e && o.field === t || o.related_collection === e && ((s = o.meta) == null ? void 0 : s.one_field) === t }); if (i.length > 0 && ((u = i[0].meta) == null ? void 0 : u.junction_field) !== null) { const s = this.relations.find(r => { var p; return r.collection === i[0].collection && r.field === ((p = i[0].meta) == null ? void 0 : p.junction_field) }); s && i.push(s) } return i }, getRelationForField(e, t) { return Pe().getField(e, t) && this.getRelationsForCollection(e).filter(u => { var o; return u.collection === e && u.field === t || u.related_collection === e && ((o = u.meta) == null ? void 0 : o.one_field) === t }).find(u => u.collection === e && u.field === t) || null } } }), He = Ft({ id: "collectionsStore", state: () => ({ collections: [] }), getters: { visibleCollections() { return this.collections.filter(({ collection: e }) => e.startsWith("directus_") === !1).filter(e => { var t; return ((t = e.meta) == null ? void 0 : t.hidden) !== !0 }) }, allCollections() { return this.collections.filter(({ collection: e }) => e.startsWith("directus_") === !1) }, crudSafeSystemCollections() { return M.exports.orderBy(this.collections.filter(e => e.collection.startsWith("directus_") === !0), ["collection"], ["asc"]).filter(e => Uw.includes(e.collection) === !1) } }, actions: { async hydrate() { const t = (await ue.get("/collections", { params: { limit: -1 } })).data.data; this.collections = t.map(this.prepareCollectionForApp) }, prepareCollectionForApp(e) { var u, o; const t = ((u = e.meta) == null ? void 0 : u.icon) || "label", n = (o = e.meta) == null ? void 0 : o.color; let l = Vt(e.collection); const i = S$(e); if (e.meta && Ut(e.meta.translations)) for (let s = 0; s < e.meta.translations.length; s++) { const { language: r, translation: p, singular: f, plural: v } = e.meta.translations[s]; ze.global.mergeLocaleMessage(r, { collection_names: { [e.collection]: p }, collection_names_singular: { [e.collection]: f }, collection_names_plural: { [e.collection]: v } }) } return ze.global.te(`collection_names.${e.collection}`) && (l = ze.global.t(`collection_names.${e.collection}`)), Ce(re({}, e), { name: l, type: i, icon: t, color: n }) }, async dehydrate() { this.$reset() }, translateCollections() { this.collections = this.collections.map(e => (ze.global.te(`collection_names.${e.collection}`) && (e.name = ze.global.t(`collection_names.${e.collection}`)), e)) }, async upsertCollection(e, t) { const n = this.getCollection(e), l = M.exports.omit(t, ["name", "type", "icon", "color"]); try { if (n) { if (M.exports.isEqual(n, t)) return; const i = await ue.patch(`/collections/${e}`, l); this.collections = this.collections.map(u => u.collection === e ? this.prepareCollectionForApp(i.data.data) : u) } else { const i = await ue.post("/collections", l); this.collections = [...this.collections, this.prepareCollectionForApp(i.data.data)] } } catch (i) { Ve(i) } }, async updateCollection(e, t) { try { await ue.patch(`/collections/${e}`, t), await this.hydrate(), It({ type: "success", title: ze.global.t("update_collection_success") }) } catch (n) { Ve(n) } }, async deleteCollection(e) { const t = ut(); try { await ue.delete(`/collections/${e}`), await this.hydrate(), await t.hydrate(), It({ type: "success", title: ze.global.t("delete_collection_success") }) } catch (n) { Ve(n) } }, getCollection(e) { return this.collections.find(t => t.collection === e) || null } } }), V6 = { collection: "directus_files", field: "$thumbnail", schema: null, name: "$thumbnail", type: "integer", meta: { id: -1, collection: "directus_files", field: "$thumbnail", sort: null, special: null, interface: null, options: null, display: "file", display_options: null, hidden: !1, translations: null, readonly: !0, width: "full", group: null, note: null, required: !1, conditions: null } }; let Fs; const Pe = Ft({ id: "fieldsStore", state: () => ({ fields: [] }), actions: { async hydrate() { const t = (await ue.get("/fields", { params: { limit: -1 } })).data.data; this.fields = [...t.map(this.parseField), V6], this.translateFields() }, async dehydrate() { this.$reset() }, parseField(e) { let t = Vt(e.field); if (e.meta && Ut(e.meta.translations) && e.meta.translations.length > 0) for (let n = 0; n < e.meta.translations.length; n++) { const { language: l, translation: i } = e.meta.translations[n]; ze.global.mergeLocaleMessage(l, { fields: { [e.collection]: { [e.field]: i } } }) } return ze.global.te(`fields.${e.collection}.${e.field}`) && (t = ze.global.t(`fields.${e.collection}.${e.field}`)), Ce(re({}, e), { name: t }) }, translateFields() { this.fields = this.fields.map(e => (ze.global.te(`fields.${e.collection}.${e.field}`) && (e.name = ze.global.t(`fields.${e.collection}.${e.field}`)), e)) }, async upsertField(e, t, n) { const l = this.getField(e, t), i = M.exports.omit(n, ["name"]); return l ? M.exports.isEqual(n, l) ? void 0 : await this.updateField(e, t, i) : await this.createField(e, i) }, async createField(e, t) { const n = [...this.fields]; try { const l = await ue.post(`/fields/${e}`, t), i = this.parseField(l.data.data); return this.fields = [...this.fields, i], i } catch (l) { this.fields = n, Ve(l) } }, async updateField(e, t, n) { const l = [...this.fields]; this.fields = this.fields.map(i => i.collection === e && i.field === t ? M.exports.merge({}, i, n) : i); try { const i = await ue.patch(`/fields/${e}/${t}`, n); this.fields = this.fields.map(u => u.collection === e && u.field === t ? this.parseField(i.data.data) : u) } catch (i) { this.fields = l, Ve(i) } }, async updateFields(e, t) { const n = bt(), l = [...this.fields]; Fs = n, this.fields = this.fields.map(i => { if (i.collection === e) { const u = t.find(o => o.field === i.field); if (u) return M.exports.merge({}, i, u) } return i }); try { const i = await ue.patch(`/fields/${e}`, t); Fs === n && (this.fields = this.fields.map(u => { if (u.collection === e) { const o = i.data.data.find(s => s.field === u.field); if (o) return this.parseField(o) } return u }), this.translateFields()) } catch (i) { this.fields = l, Ve(i) } }, async deleteField(e, t) { const n = ut(), l = [...this.fields], i = [...n.relations]; this.fields = this.fields.filter(u => !(u.field === t && u.collection === e)), n.relations = n.relations.filter(u => !(u.collection === e && u.field === t)); try { await ue.delete(`/fields/${e}/${t}`) } catch (u) { this.fields = l, n.relations = i, Ve(u) } }, getPrimaryKeyFieldForCollection(e) { const t = this.fields.find(n => { var l; return n.collection === e && ((l = n.schema) == null ? void 0 : l.is_primary_key) === !0 }); return t != null ? t : null }, getFieldsForCollection(e) { return M.exports.orderBy(this.fields.filter(t => t.collection === e), [t => { var n; return ((n = t.meta) == null ? void 0 : n.system) === !0 }, t => { var n, l; return ((n = t.meta) == null ? void 0 : n.sort) ? Number((l = t.meta) == null ? void 0 : l.sort) : null }]) }, getFieldsForCollectionAlphabetical(e) { return this.getFieldsForCollection(e).sort((t, n) => t.field < n.field ? -1 : (t.field > n.field, 1)) }, getField(e, t) { return t.includes(".") ? this.getRelationalField(e, t) || null : this.fields.find(n => n.collection === e && n.field === t) || null }, getRelationalField(e, t) { const n = ut(), [l, ...i] = t.split("."); if (l.includes(":")) { const [p, f] = l.split(":"); return this.getField(f, i.join(".")) } const u = n.getRelationsForField(e, l), o = u == null ? void 0 : u.find(p => { var f; return p.field === l || ((f = p.meta) == null ? void 0 : f.one_field) === l }); if (o === void 0) return !1; const s = o.field === l ? o.related_collection : o.collection, r = i.join("."); return this.getField(s, r) } } }), Dn = Ft({ id: "insightsStore", state: () => ({ dashboards: [] }), actions: { async hydrate() { const e = Ze(), t = Dt(); if (e.isAdmin !== !0 && !t.hasPermission("directus_dashboards", "read")) this.dashboards = []; else try { const n = await ue.get("/dashboards", { params: { limit: -1, fields: ["*", "panels.*"], sort: ["name"] } }); this.dashboards = n.data.data } catch { this.dashboards = [] } }, async dehydrate() { this.$reset() } } }), Uo = Ft({ id: "latencyStore", state: () => ({ latency: [] }), actions: { async dehydrate() { this.$reset() }, save(e) { this.latency.push(e), this.latency = this.latency.slice(-20) } } }), el = Ft({ id: "notificationsStore", state: () => ({ dialogs: [], queue: [], previous: [], notifications: [], unread: 0 }), actions: { async hydrate() { await this.getUnreadCount() }, async getUnreadCount() { const e = Ze(), t = await ue.get("/notifications", { params: { filter: { _and: [{ recipient: { _eq: e.currentUser.id } }, { status: { _eq: "inbox" } }] }, aggregate: { count: "id" } } }); this.unread = t.data.data[0].count.id }, add(e) { const t = bt(), n = Date.now(); return e.dialog === !0 ? (e.persist = !0, this.dialogs = [...this.dialogs, Ce(re({}, e), { id: t, timestamp: n })]) : this.queue = [...this.queue, Ce(re({}, e), { id: t, timestamp: n })], e.persist !== !0 && setTimeout(() => { this.remove(t) }, 3e3), t }, hide(e) { const n = [...this.queue, ...this.dialogs].find(l => l.id === e); !n || (n.dialog === !0 ? this.dialogs = this.dialogs.filter(l => l.id !== e) : this.queue = this.queue.filter(l => l.id !== e), this.previous = [...this.previous, n]) }, remove(e) { const n = [...this.queue, ...this.dialogs].find(l => l.id === e); !n || (n.dialog === !0 ? this.dialogs = this.dialogs.filter(l => l.id !== e) : this.queue = this.queue.filter(l => l.id !== e)) }, update(e, t) { this.queue = this.queue.map(n), this.dialogs = this.dialogs.map(n), this.previous = this.queue.map(n); function n(l) { return l.id === e ? re(re({}, l), t) : l } } }, getters: { lastFour() { const e = [...this.queue, ...this.previous.filter(l => l.dialog !== !0)], n = M.exports.reverse(M.exports.sortBy(e, ["timestamp"])).slice(0, 4); return M.exports.reverse(n) } } }), Dt = Ft({ id: "permissionsStore", state: () => ({ permissions: [] }), actions: { async hydrate() { const e = Ze(), t = await ue.get("/permissions", { params: { limit: -1, filter: { role: { _eq: e.currentUser.role.id } } } }); this.permissions = t.data.data.map(n => (n.permissions && (n.permissions = bl(n.permissions)), n.validation && (n.validation = bl(n.validation)), n.presets && (n.presets = bl(n.presets)), n)) }, dehydrate() { this.$reset() }, getPermissionsForUser(e, t) { const n = Ze(); return this.permissions.find(l => { var i, u; return l.action === t && l.collection === e && l.role === ((u = (i = n.currentUser) == null ? void 0 : i.role) == null ? void 0 : u.id) }) || null }, hasPermission(e, t) { var l, i; return ((i = (l = Ze().currentUser) == null ? void 0 : l.role) == null ? void 0 : i.admin_access) === !0 ? !0 : !!this.getPermissionsForUser(e, t) } } }), As = { bookmark: null, role: null, user: null, search: null, filter: null, layout: null, layout_query: null, layout_options: null, refresh_interval: null }, Is = { directus_files: { collection: "directus_files", layout: "cards", layout_query: { cards: { sort: ["-uploaded_on"] } }, layout_options: { cards: { icon: "insert_drive_file", title: "{{ title }}", subtitle: "{{ type }} \u2022\xA0{{ filesize }}", size: 4, imageFit: "crop" } } }, directus_users: { collection: "directus_users", layout: "cards", layout_query: { cards: { sort: ["email"] } }, layout_options: { cards: { icon: "account_circle", title: "{{ first_name }} {{ last_name }}", subtitle: "{{ email }}", size: 4 } } }, directus_activity: { collection: "directus_activity", layout: "tabular", layout_query: { tabular: { sort: ["-timestamp"], fields: ["action", "collection", "timestamp", "user"] } }, layout_options: { tabular: { widths: { action: 100, collection: 210, timestamp: 240, user: 240 } } } }, directus_roles: { collection: "directus_roles", layout: "tabular", layout_query: { tabular: { fields: ["icon", "name", "description"] } }, layout_options: { tabular: { widths: { icon: 36, name: 248, description: 500 } } } }, directus_webhooks: { collection: "directus_webhooks", layout: "tabular", layout_query: { tabular: { fields: ["status", "method", "name", "collections", "actions"] } }, layout_options: { tabular: { widths: { status: 32, method: 100, name: 210, collections: 240, actions: 210 } } } } }, Es = {}, Tn = Ft({ id: "presetsStore", state: () => ({ collectionPresets: [] }), getters: { bookmarks() { return this.collectionPresets.filter(e => e.bookmark !== null) } }, actions: { async hydrate() { const { id: e, role: t } = Ze().currentUser, l = (await Promise.all([ue.get("/presets", { params: { "filter[user][_eq]": e, limit: -1 } }), ue.get("/presets", { params: { "filter[role][_eq]": t.id, "filter[user][_null]": !0, limit: -1 } }), ue.get("/presets", { params: { "filter[role][_null]": !0, "filter[user][_null]": !0, limit: -1 } })])).map(i => i.data.data).flat(); for (const i of Object.keys(Is)) l.find(o => o.collection === i && !o.user && !o.role && !o.bookmark) || l.push(M.exports.merge({}, As, Is[i])); this.collectionPresets = l }, async dehydrate() { this.$reset() }, async create(e) { const t = await ue.post("/presets", e); return this.collectionPresets.push(t.data.data), t.data.data }, async update(e, t) { const n = bt(); Es[e] = n; const l = await ue.patch(`/presets/${e}`, t); return Es[e] === n && (this.collectionPresets = this.collectionPresets.map(i => { const u = l.data.data; return i.id === u.id ? u : i })), l.data.data }, async delete(e) { await ue.delete(`/presets/${e}`), this.collectionPresets = this.collectionPresets.filter(t => t.id !== e) }, getPresetForCollection(e) { const t = Ze(); if (t.currentUser === null) return null; const { id: n, role: l } = t.currentUser, i = Ce(re({}, As), { collection: e, user: n }), u = this.collectionPresets.filter(p => { const f = p.user === n || p.user === null, v = p.role === l.id || p.role === null, _ = p.collection === e; return p.bookmark ? !1 : !!(f && _ || v && _) }); if (u.length === 0) return i; if (u.length === 1) return u[0]; const o = u.find(p => p.user === n); if (o) return o; const s = u.find(p => p.role === l.id); return s || u[u.length - 1] }, getBookmark(e) { return this.collectionPresets.find(t => t.id === e) || null }, async savePreset(e) { const t = Ze(); if (t.currentUser === null) return null; const { id: n } = t.currentUser; if (e = M.exports.cloneDeep(e), e.id === void 0 || e.id === null) return await this.create(Ce(re({}, e), { user: n })); if (e.user !== n) return "id" in e && delete e.id, await this.create(Ce(re({}, e), { user: n })); { const l = e.id; return delete e.id, await this.update(l, e) } }, saveLocal(e) { this.collectionPresets = this.collectionPresets.map(t => t.id === e.id ? re({}, e) : t) }, async clearLocalSave(e) { const t = await ue.get(`/presets/${e.id}`); this.collectionPresets = this.collectionPresets.map(n => n.id === t.data.data.id ? t.data.data : n) } } }), tl = Ft({ id: "requestsStore", state: () => ({ queue: [] }), getters: { queueHasItems() { return this.queue.length > 0 } }, actions: { startRequest() { const e = bt(); return this.queue = [...this.queue, e], setTimeout(() => this.endRequest(e), 3500), e }, endRequest(e) { this.queue = this.queue.filter(t => t !== e) } } }), Pn = Ft({ id: "serverStore", state: () => ({ info: null }), actions: { async hydrate() { const e = await ue.get("/server/info", { params: { limit: -1 } }); this.info = e.data.data }, dehydrate() { this.$reset() } } }), Il = Ft({ id: "settingsStore", state: () => ({ settings: null }), actions: { async hydrate() { const e = await ue.get("/settings"); this.settings = e.data.data }, async dehydrate() { this.$reset() }, async updateSettings(e) { const t = re({}, this.settings), n = M.exports.merge({}, this.settings, e); this.settings = n; try { const l = await ue.patch("/settings", e); this.settings = l.data.data, It({ title: ze.global.t("settings_update_success"), type: "success" }) } catch (l) { this.settings = t, Ve(l) } } } }); var F6 = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", useAppStore: wt, useCollectionsStore: He, useFieldsStore: Pe, useInsightsStore: Dn, useLatencyStore: Uo, useNotificationsStore: el, usePermissionsStore: Dt, usePresetsStore: Tn, useRelationsStore: ut, useRequestsStore: tl, useServerStore: Pn, useSettingsStore: Il, useUserStore: Ze }); function A6() { Zt(Ud, F6), Zt(Nd, ue) } const I6 = (e, t) => `
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
	<style>
		circle {
			fill: ${e};
		}
	</style>

	<circle cx="100" cy="100" r="100"/>

	${t ? "" : '<path d="M143.122 109.533c-.663-.167-1.216-.334-1.715-.557a3.945 3.945 0 01-1.216-.836c.332-2.952 0-5.514.276-8.411 1.106-11.253 8.132-7.688 14.439-9.526 3.928-1.114 7.855-3.398 8.851-8.078-4.315-5.069-9.128-9.526-14.383-13.314-17.094-12.255-39.444-17.157-59.747-13.76a30.762 30.762 0 0013.428 12.535s-5.502 0-10.218-3.548c-1.383.558-4.15 1.654-5.478 2.322 10.788 10.417 27.66 11.587 39.776 2.228-.055.112-1.107 1.727-2.379 8.468-2.821 14.372-10.954 13.258-21.022 9.637-20.911-7.631-32.418-.557-42.873-15.04a9.73 9.73 0 00-4.924 8.467c0 3.621 1.992 6.685 4.868 8.356 1.57-2.098 2.275-2.695 5.014-2.695-4.239 2.42-4.737 4.533-6.563 10.382-2.213 7.075-1.272 14.317-11.617 16.211-5.477.279-5.366 4.011-7.358 9.582-2.489 7.242-5.808 10.139-12.281 16.99 2.655 3.231 5.421 3.621 8.243 2.451 5.808-2.45 10.29-10.027 14.494-14.929 4.702-5.46 15.988-3.12 24.507-8.467 5.864-3.622 8.74-8.524 4.868-16.824 2.49 2.785 3.983 6.295 4.204 10.027 9.848-1.28 23.014 10.807 35.019 12.813-1.217-1.56-2.213-3.231-2.932-4.958-1.383-3.342-1.826-6.406-1.55-9.08 1.107 6.629 7.746 15.152 18.423 15.932 2.71.223 5.697-.112 8.795-1.058 3.707-1.115 7.137-2.563 11.23-1.783 3.043.557 5.864 2.117 7.635 4.735 2.655 3.9 8.464 4.735 11.064-.056-5.864-15.43-22.018-16.433-28.878-18.216z" fill="#FFF"/>'}
</svg>`; function E6(e = "#00C897", t = !1) { const n = I6(e, t), l = document.createElement("div"); if (l.innerHTML = n.trim(), l.firstChild) { const i = new XMLSerializer().serializeToString(l.firstChild), u = "data:image/svg+xml;base64," + window.btoa(i), o = document.querySelector("link[rel*='icon']") || document.createElement("link"); o.type = "image/x-icon", o.rel = "icon", o.href = u, document.getElementsByTagName("head")[0].appendChild(o) } } const D6 = z({ setup() { const { t: e } = x(), t = wt(), n = Ze(), l = Pn(), { hydrating: i } = je(t), u = V(() => { var r, p; return { "--brand": ((p = (r = l.info) == null ? void 0 : r.project) == null ? void 0 : p.project_color) || "var(--primary)" } }); at(() => b6()), At(() => $6()), _e([() => { var r, p; return (p = (r = l.info) == null ? void 0 : r.project) == null ? void 0 : p.project_color }, () => { var r, p; return (p = (r = l.info) == null ? void 0 : r.project) == null ? void 0 : p.project_logo }], () => { var p, f, v, _; const r = !!((f = (p = l.info) == null ? void 0 : p.project) == null ? void 0 : f.project_logo); E6(((_ = (v = l.info) == null ? void 0 : v.project) == null ? void 0 : _.project_color) || "#00C897", r) }), _e(() => n.currentUser, r => { var p; document.body.classList.remove("dark"), document.body.classList.remove("light"), document.body.classList.remove("auto"), r != null && r.theme ? (document.body.classList.add(r.theme), (p = document.querySelector('head meta[name="theme-color"]')) == null || p.setAttribute("content", r.theme === "light" ? "#ffffff" : "#263238")) : document.body.classList.add("light") }), _e(() => { var r, p; return (p = (r = l.info) == null ? void 0 : r.project) == null ? void 0 : p.project_name }, r => { document.title = r || "Directus" }); const o = V(() => { var r, p; return ((p = (r = l.info) == null ? void 0 : r.project) == null ? void 0 : p.custom_css) || "" }), s = V(() => t.error); return A6(), { t: e, hydrating: i, brandStyle: u, error: s, customCSS: o } } }), T6 = { key: 0, class: "hydrating" }; function P6(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = c("v-error"), r = c("v-info"), p = c("router-view"); return m(), I("div", { id: "directus", style: Ke(e.brandStyle) }, [a(Lt, { name: "fade" }, { default: d(() => [e.hydrating ? (m(), I("div", T6, [a(o, { indeterminate: "" })])) : R("", !0)]), _: 1 }), e.error ? (m(), C(r, { key: 0, type: "danger", title: e.t("unexpected_error"), icon: "error", center: "" }, { append: d(() => [a(s, { error: e.error }, null, 8, ["error"])]), default: d(() => [D(b(e.t("unexpected_error_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : e.hydrating ? R("", !0) : (m(), C(p, { key: 1 })), (m(), C(ql, { to: "#custom-css" }, [D(b(e.customCSS), 1)]))], 4) } var O6 = B(D6, [["render", P6], ["__scopeId", "data-v-d66a0348"]]); const L6 = z({ props: { layoutQuery: { type: Object, default: () => ({}) }, filter: { type: Object, default: null }, search: { type: String, default: null }, collection: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = E("csv"), l = E(!0), i = He(), u = V(() => i.getCollection(e.collection).name); return { t, format: n, useFilters: l, exportData: o, collectionName: u }; function o() { var v, _, y; const s = e.collection.startsWith("directus_") ? `${e.collection.substring(9)}` : `items/${e.collection}`, r = Ye() + s; let p = { access_token: ue.defaults.headers.common.Authorization.substring(7), export: n.value || "json" }; l.value === !0 && (((v = e.layoutQuery) == null ? void 0 : v.sort) && (p.sort = e.layoutQuery.sort), ((_ = e.layoutQuery) == null ? void 0 : _.fields) && (p.fields = e.layoutQuery.fields), ((y = e.layoutQuery) == null ? void 0 : y.limit) && (p.limit = e.layoutQuery.limit), e.search && (p.search = e.search), e.filter && (p.filter = e.filter), e.search && (p.search = e.search)); const f = ue.getUri({ url: r, params: p }); window.open(f) } } }), j6 = { class: "fields" }, R6 = { class: "field full" }, M6 = { class: "type-label" }, U6 = { class: "field full" }; function N6(e, t, n, l, i, u) { const o = c("v-select"), s = c("v-checkbox"), r = c("v-button"), p = c("sidebar-detail"); return m(), C(p, { icon: "save_alt", title: e.t("export_data") }, { default: d(() => [S("div", j6, [S("div", R6, [S("p", M6, b(e.t("format")), 1), a(o, { modelValue: e.format, "onUpdate:modelValue": t[0] || (t[0] = f => e.format = f), items: [{ text: e.t("csv"), value: "csv" }, { text: e.t("json"), value: "json" }, { text: e.t("xml"), value: "xml" }] }, null, 8, ["modelValue", "items"]), a(s, { modelValue: e.useFilters, "onUpdate:modelValue": t[1] || (t[1] = f => e.useFilters = f), label: e.t("use_current_filters_settings") }, null, 8, ["modelValue", "label"])]), S("div", U6, [a(r, { "full-width": "", onClick: e.exportData }, { default: d(() => [D(b(e.t("export_collection", { collection: e.collectionName })), 1)]), _: 1 }, 8, ["onClick"])])])]), _: 1 }, 8, ["title"]) } var B6 = B(L6, [["render", N6], ["__scopeId", "data-v-11c53db4"]]); const q6 = z({ components: { ValueNull: tn }, props: { display: { type: String, default: null }, options: { type: Object, default: () => ({}) }, interface: { type: String, default: null }, interfaceOptions: { type: Object, default: null }, value: { type: [String, Number, Object, Array, Boolean], default: null }, type: { type: String, required: !0 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 } }, setup(e) { const { displays: t } = xt(); return { displayInfo: V(() => t.value.find(l => l.id === e.display) || null) } } }); function z6(e, t, n, l, i, u) { const o = c("value-null"), s = c("v-text-overflow"); return e.value === null || e.value === void 0 ? (m(), C(o, { key: 0 })) : e.displayInfo === null ? (m(), C(s, { key: 1, class: "display", text: e.value }, null, 8, ["text"])) : (m(), C(Ne(`display-${e.display}`), dt({ key: 2 }, e.options, { interface: e.interface, "interface-options": e.interfaceOptions, value: e.value, type: e.type, collection: e.collection, field: e.field }), null, 16, ["interface", "interface-options", "value", "type", "collection", "field"])) } var K6 = B(q6, [["render", z6], ["__scopeId", "data-v-edd38016"]]); const H6 = { alias: "raw", bigInteger: "formatted-value", binary: "raw", boolean: "boolean", date: "datetime", dateTime: "datetime", decimal: "formatted-value", float: "formatted-value", integer: "formatted-value", json: "raw", string: "formatted-value", text: "formatted-value", time: "datetime", timestamp: "datetime", uuid: "formatted-value", unknown: "raw", csv: "labels", hash: "formatted-value", geometry: "raw", "geometry.Point": "raw", "geometry.LineString": "raw", "geometry.Polygon": "raw", "geometry.MultiPoint": "raw", "geometry.MultiLineString": "raw", "geometry.MultiPolygon": "raw" }; function Ds(e) { return H6[e] || "raw" } const W6 = z({ components: { ValueNull: tn }, props: { collection: { type: String, default: null }, fields: { type: Array, default: null }, item: { type: Object, default: null }, template: { type: String, required: !0 } }, setup(e) { const t = Pe(), { displays: n } = xt(), l = E(), i = /({{.*?}})/g; return { parts: V(() => e.template.split(i).filter(o => o).map(o => { var _, y, g, w, h, k; if (o.startsWith("{{") === !1) return o; let s = o.replace(/{{/g, "").replace(/}}/g, "").trim(); const r = t.getField(e.collection, s) || ((_ = e.fields) == null ? void 0 : _.find(F => F.field === s)); r && r.collection === "directus_files" && r.field === "$thumbnail" && (s = s.split(".").filter(F => F !== "$thumbnail").join(".")); const p = M.exports.get(e.item, s); return p === void 0 ? null : !r || (((y = r == null ? void 0 : r.meta) == null ? void 0 : y.display) || Ds(r.type)) === "raw" || !n.value.find(F => { var A; return F.id === ((A = r.meta) == null ? void 0 : A.display) }) ? p : { component: (g = r.meta) == null ? void 0 : g.display, options: (w = r.meta) == null ? void 0 : w.display_options, value: p, interface: (h = r.meta) == null ? void 0 : h.interface, interfaceOptions: (k = r.meta) == null ? void 0 : k.options, type: r.type, collection: r.collection, field: r.field } }).map(o => o != null ? o : null)), templateEl: l, translate: va } } }), G6 = e => (Qe("data-v-0b661b83"), e = e(), Xe(), e), J6 = { ref: "templateEl", class: "render-template" }, Q6 = G6(() => S("span", { class: "vertical-aligner" }, null, -1)), X6 = { key: 2 }, Z6 = { key: 3 }; function Y6(e, t, n, l, i, u) { const o = c("value-null"); return m(), I("div", J6, [Q6, (m(!0), I(se, null, he(e.parts, (s, r) => (m(), I(se, { key: r }, [s === null || typeof s == "object" && s.value === null ? (m(), C(o, { key: 0 })) : typeof s == "object" && s.component ? (m(), C(Ne(`display-${s.component}`), dt({ key: 1 }, s.options, { value: s.value, interface: s.interface, "interface-options": s.interfaceOptions, type: s.type, collection: s.collection, field: s.field }), null, 16, ["value", "interface", "interface-options", "type", "collection", "field"])) : typeof s == "string" ? (m(), I("span", X6, b(e.translate(s)), 1)) : (m(), I("span", Z6, b(s), 1))], 64))), 128))], 512) } var x6 = B(W6, [["render", Y6], ["__scopeId", "data-v-0b661b83"]]); function yn(e) { var p; const t = ht((e == null ? void 0 : e.group) || "item-group", null); if (qa(t)) return { active: E(!1), toggle: () => { }, activate: () => { }, deactivate: () => { } }; const { register: n, unregister: l, toggle: i, selection: u } = t; let o = !1; ((p = e == null ? void 0 : e.active) == null ? void 0 : p.value) === !0 && (o = !0), (e == null ? void 0 : e.value) && u.value.includes(e.value) && (o = !0); const s = E(o), r = { active: s, value: e == null ? void 0 : e.value }; return n(r), (e == null ? void 0 : e.active) !== void 0 && e.watch === !0 && _e(e.active, () => { e.active !== void 0 && (e.active.value === !0 && (s.value === !1 && i(r), s.value = !0), e.active.value === !1 && (s.value === !0 && i(r), s.value = !1)) }), Ul(() => l(r)), { active: s, toggle: () => { i(r) }, activate: () => { s.value === !1 && i(r) }, deactivate: () => { s.value === !0 && i(r) } } } function No(e = {}, t = {}, n = "item-group") { const l = Pt([]), i = E([]), u = V({ get() { return Ut(e.selection) && Ut(e.selection.value) ? e.selection.value : i.value }, set(y) { Ut(e.onSelectionChange) && e.onSelectionChange(y), i.value = [...y] } }); return Zt(n, { register: o, unregister: s, toggle: r, selection: u }), _e(u, _, { immediate: !0 }), dl().then(_), _e(() => { var y; return (y = t == null ? void 0 : t.mandatory) == null ? void 0 : y.value }, (y, g) => { var w; M.exports.isEqual(y, g) || (!u.value || u.value.length === 0 && ((w = t == null ? void 0 : t.mandatory) == null ? void 0 : w.value) === !0) && (u.value = [v(l.value[0])]) }), { items: l, selection: u, internalSelection: i, getValueForItem: v, updateChildren: _ }; function o(y) { var w; l.value = [...l.value, y]; const g = v(y); u.value.length === 0 && ((w = t == null ? void 0 : t.mandatory) == null ? void 0 : w.value) === !0 && l.value.length === 1 && (u.value = [g]), y.active.value && u.value.includes(g) === !1 && r(y) } function s(y) { l.value = l.value.filter(g => g !== y) } function r(y) { var g; ((g = t == null ? void 0 : t.multiple) == null ? void 0 : g.value) === !0 ? f(y) : p(y), Ut(e.onToggle) && e.onToggle(y) } function p(y) { var w; const g = v(y); if (u.value[0] === g && ((w = t == null ? void 0 : t.mandatory) == null ? void 0 : w.value) !== !0) { u.value = []; return } u.value[0] !== g && (u.value = [g]) } function f(y) { var w, h; const g = v(y); if (u.value.includes(g)) { if (((w = t == null ? void 0 : t.mandatory) == null ? void 0 : w.value) === !0 && u.value.length === 1) { _(); return } u.value = u.value.filter(k => k !== g); return } if (((h = t == null ? void 0 : t.max) == null ? void 0 : h.value) && t.max.value !== -1 && u.value.length >= t.max.value) { _(); return } u.value = [...u.value, g] } function v(y) { return y.value || l.value.findIndex(g => y === g) } function _() { l.value.forEach(y => { y.active.value = u.value.includes(v(y)) }) } } const eP = z({ props: { icon: { type: String, required: !0 }, title: { type: String, required: !0 }, badge: { type: [Boolean, String, Number], default: null }, close: { type: Boolean, default: !1 } }, setup(e) { const { active: t, toggle: n } = yn({ value: e.title, group: "sidebar-detail" }), l = wt(), { sidebarOpen: i } = je(l); return { active: t, toggle: n, sidebarOpen: i } } }), tP = { class: "icon" }, nP = { key: 0, class: "icon" }, lP = { class: "content" }; function oP(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-badge"), r = c("transition-expand"); return m(), I("div", { class: de(["sidebar-detail", { open: e.sidebarOpen }]) }, [S("button", { class: de(["toggle", { open: e.active }]), onClick: t[0] || (t[0] = (...p) => e.toggle && e.toggle(...p)) }, [S("div", tP, [a(s, { dot: e.badge === !0, bordered: "", value: e.badge, disabled: !e.badge }, { default: d(() => [a(o, { name: e.icon, outline: "" }, null, 8, ["name"])]), _: 1 }, 8, ["dot", "value", "disabled"])]), ee(S("div", { class: "title" }, b(e.title), 513), [[Et, e.sidebarOpen]]), e.close ? R("", !0) : (m(), I("div", nP, [a(o, { class: "expand-icon", name: e.active ? "expand_less" : "expand_more", outline: "" }, null, 8, ["name"])]))], 2), e.close ? ee((m(), I("div", { key: 0, class: "close", onClick: t[1] || (t[1] = p => e.sidebarOpen = !1) }, [a(o, { name: "close" })], 512)), [[Et, e.sidebarOpen]]) : R("", !0), a(r, { class: "scroll-container" }, { default: d(() => [ee(S("div", null, [S("div", lP, [ye(e.$slots, "default", {}, void 0, !0)])], 512), [[Et, e.active]])]), _: 3 })], 2) } var aP = B(eP, [["render", oP], ["__scopeId", "data-v-45689e02"]]); const iP = z({ props: { user: { type: String, required: !0 } }, setup(e) { const { t } = x(), n = tt(), l = E(!1), i = E(null), u = E(null), o = V(() => { var f; return u.value === null ? null : ((f = u.value.avatar) == null ? void 0 : f.id) ? st(`${Ye()}assets/${u.value.avatar.id}?key=system-medium-cover`) : null }), s = E(!1); return _e(s, () => { s.value === !0 && u.value === null && l.value === !1 && r() }), At(() => { l.value = !1, i.value = null, u.value = null }), { t, loading: l, error: i, data: u, active: s, avatarSrc: o, userName: yt, navigateToUser: p }; async function r() { l.value = !0, i.value = null; try { const f = await ue.get(`/users/${e.user}`, { params: { fields: ["id", "first_name", "last_name", "avatar.id", "role.name", "status", "email"] } }); u.value = f.data.data } catch (f) { i.value = f } finally { l.value = !1 } } function p() { u.value && n.push(`/users/${u.value.id}`) } } }), sP = { key: 0, class: "loading" }, rP = { key: 1, class: "error" }, dP = ["src", "alt"], uP = { class: "data" }, cP = { class: "name type-title" }, pP = { class: "email" }; function mP(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-icon"), r = c("v-avatar"), p = c("v-menu"); return m(), C(p, { modelValue: e.active, "onUpdate:modelValue": t[1] || (t[1] = f => e.active = f), "show-arrow": "", placement: "top", trigger: "hover", delay: 300 }, { activator: d(() => [ye(e.$slots, "default", {}, void 0, !0)]), default: d(() => [e.loading ? (m(), I("div", sP, [a(o, { class: "avatar" }), S("div", null, [a(o, { type: "text" }), a(o, { type: "text" }), a(o, { type: "text" })])])) : e.error ? (m(), I("div", rP, b(e.error), 1)) : e.data ? (m(), I("div", { key: 2, class: "user-box", onClick: t[0] || (t[0] = Ae((...f) => e.navigateToUser && e.navigateToUser(...f), ["stop"])) }, [a(r, { "x-large": "", class: "avatar" }, { default: d(() => [e.avatarSrc ? (m(), I("img", { key: 0, src: e.avatarSrc, alt: e.data.first_name }, null, 8, dP)) : (m(), C(s, { key: 1, name: "person", outline: "" }))]), _: 1 }), S("div", uP, [S("div", cP, b(e.userName(e.data)), 1), S("div", { class: de(["status-role", e.data.status]) }, b(e.t(e.data.status)) + " " + b(e.data.role.name), 3), S("div", pP, b(e.data.email), 1)])])) : R("", !0)]), _: 3 }, 8, ["modelValue"]) } var fP = B(iP, [["render", mP], ["__scopeId", "data-v-71abbf85"]]); const vP = z({ props: { frontmatter: { type: Object, required: !0 } }, emits: ["update:title", "update:modularExtension"], setup(e, { emit: t }) { const n = Yt(), l = ht("main-element"), i = V(() => { var u; return (u = e.frontmatter) == null ? void 0 : u.pageClass }); return _e(() => e.frontmatter, () => { t("update:title", e.frontmatter.title), t("update:modularExtension", e.frontmatter.modularExtension) }, { immediate: !0 }), at(() => { if (n.hash && (l == null ? void 0 : l.value)) { const u = document.querySelector(n.hash); u && l.value.scrollTo({ top: u.offsetTop - 100 }) } }), { pageClass: i } } }); function _P(e, t, n, l, i, u) { return m(), I("div", { class: de(["md", e.pageClass]) }, [ye(e.$slots, "default", {}, void 0, !0)], 2) } var yP = B(vP, [["render", _P], ["__scopeId", "data-v-2e43f355"]]); const gP = {}; function hP(e, t) { return m(), C(zl, dt({ name: "bounce", tag: "div" }, e.$attrs), { default: d(() => [ye(e.$slots, "default")]), _: 3 }, 16) } var bP = B(gP, [["render", hP]]); const $P = {}; function wP(e, t) { return m(), C(zl, dt({ name: "dialog", tag: "span" }, e.$attrs), { default: d(() => [ye(e.$slots, "default")]), _: 3 }, 16) } var kP = B($P, [["render", wP]]); function SP(e = "", t = !1, n) { const l = t ? "width" : "height", i = `offset${io(l)}`; return { beforeEnter(o) { n("beforeEnter"), o._parent = o.parentNode, o._initialStyle = { transition: o.style.transition, visibility: o.style.visibility, overflow: o.style.overflow, [l]: o.style[l] } }, enter(o) { n("enter"); const s = o._initialStyle; if (!s) return; const r = `${o[i]}px`; o.style.setProperty("transition", "none", "important"), o.style.visibility = "hidden", o.style.visibility = s.visibility, o.style.overflow = "hidden", o.style[l] = "0", o.offsetHeight, o.style.transition = s.transition !== "" ? s.transition : `${l} var(--medium) var(--transition)`, e && o._parent && o._parent.classList.add(e), requestAnimationFrame(() => { o.style[l] = r }) }, afterEnter(o) { n("afterEnter"), u(o) }, enterCancelled(o) { n("enterCancelled"), u(o) }, leave(o) { n("leave"), o._initialStyle = { transition: "", visibility: "", overflow: o.style.overflow, [l]: o.style[l] }, o.style.overflow = "hidden", o.style[l] = `${o[i]}px`, o.offsetHeight, requestAnimationFrame(() => o.style[l] = "0") }, afterLeave(o) { n("afterLeave"), e && o._parent && o._parent.classList.remove(e), u(o) }, leaveCancelled(o) { n("leaveCancelled"), e && o._parent && o._parent.classList.remove(e), u(o) } }; function u(o) { if (!o._initialStyle) return; const s = o._initialStyle[l]; o.style.overflow = o._initialStyle.overflow, s != null && (o.style[l] = s), delete o._initialStyle } } const CP = z({ props: { xAxis: { type: Boolean, default: !1 }, expandedParentClass: { type: String, default: "" } }, emits: ["beforeEnter", "enter", "afterEnter", "enterCancelled", "leave", "afterLeave", "leaveCancelled"], setup(e, { emit: t }) { return { methods: SP(e.expandedParentClass, e.xAxis, t) } } }); function VP(e, t, n, l, i, u) { return m(), C(Lt, dt({ name: "expand-transition", mode: "in-out" }, Kl(e.methods)), { default: d(() => [ye(e.$slots, "default")]), _: 3 }, 16) } var FP = B(CP, [["render", VP]]); const nl = { xSmall: { type: Boolean, default: !1 }, small: { type: Boolean, default: !1 }, large: { type: Boolean, default: !1 }, xLarge: { type: Boolean, default: !1 } }; function ll(e) { return V(() => e.xSmall ? "x-small" : e.small ? "small" : e.large ? "large" : e.xLarge ? "x-large" : null) } const AP = z({ props: re({ size: { type: Number, default: null }, tile: { type: Boolean, default: !1 } }, nl), setup(e) { return { sizeClass: ll(e) } } }); function IP(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-avatar", [{ tile: e.tile }, e.sizeClass]]) }, [ye(e.$slots, "default")], 2) } var EP = B(AP, [["render", IP], ["__scopeId", "data-v-fee7284a"]]); const DP = z({ props: { value: { type: [Boolean, String, Number], default: null }, dot: { type: Boolean, default: !1 }, left: { type: Boolean, default: !1 }, bottom: { type: Boolean, default: !1 }, icon: { type: String, default: null }, bordered: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 } } }), TP = { key: 1 }; function PP(e, t, n, l, i, u) { const o = c("v-icon"); return m(), I("div", { class: de(["v-badge", { dot: e.dot, bordered: e.bordered }]) }, [e.disabled ? R("", !0) : (m(), I("span", { key: 0, class: de(["badge", { dot: e.dot, bordered: e.bordered, left: e.left, bottom: e.bottom }]) }, [e.icon ? (m(), C(o, { key: 0, name: e.icon, color: e.color, "x-small": "" }, null, 8, ["name", "color"])) : (m(), I("span", TP, b(e.value), 1))], 2)), ye(e.$slots, "default", {}, void 0, !0)], 2) } var OP = B(DP, [["render", PP], ["__scopeId", "data-v-5d3df5d4"]]); const LP = z({ props: { items: { type: Array, default: () => [] } }, setup() { return {} } }), jP = { class: "v-breadcrumb" }, RP = { key: 2, class: "section-link" }; function MP(e, t, n, l, i, u) { const o = c("v-icon"), s = c("router-link"); return m(), I("span", jP, [(m(!0), I(se, null, he(e.items, (r, p) => (m(), I("span", { key: r.name, class: de(["section", { disabled: r.disabled }]) }, [p > 0 ? (m(), C(o, { key: 0, name: "chevron_right", small: "" })) : R("", !0), r.disabled ? (m(), I("span", RP, [r.icon ? (m(), C(o, { key: 0, name: r.icon }, null, 8, ["name"])) : R("", !0), D(" " + b(r.name), 1)])) : (m(), C(s, { key: 1, to: r.to, class: "section-link" }, { default: d(() => [r.icon ? (m(), C(o, { key: 0, name: r.icon, small: "" }, null, 8, ["name"])) : R("", !0), D(" " + b(r.name), 1)]), _: 2 }, 1032, ["to"]))], 2))), 128))]) } var UP = B(LP, [["render", MP], ["__scopeId", "data-v-884352f6"]]); const NP = z({ props: re({ autofocus: { type: Boolean, default: !1 }, kind: { type: String, default: "normal" }, fullWidth: { type: Boolean, default: !1 }, rounded: { type: Boolean, default: !1 }, outlined: { type: Boolean, default: !1 }, icon: { type: Boolean, default: !1 }, type: { type: String, default: "button" }, disabled: { type: Boolean, default: !1 }, loading: { type: Boolean, default: !1 }, to: { type: [String, Object], default: "" }, href: { type: String, default: void 0 }, active: { type: Boolean, default: void 0 }, exact: { type: Boolean, default: !1 }, query: { type: Boolean, default: !1 }, secondary: { type: Boolean, default: !1 }, warning: { type: Boolean, default: !1 }, danger: { type: Boolean, default: !1 }, value: { type: [Number, String], default: void 0 }, dashed: { type: Boolean, default: !1 }, tile: { type: Boolean, default: !1 }, align: { type: String, default: "center", validator: e => ["left", "center", "right"].includes(e) }, download: { type: String, default: void 0 } }, nl), emits: ["click"], setup(e, { emit: t }) { const n = Yt(), { route: l, isActive: i, isExactActive: u } = ia(e), o = ll(e), s = V(() => e.disabled ? "button" : Ut(e.href) ? "a" : e.to ? "router-link" : "button"), { active: r, toggle: p } = yn({ value: e.value, group: "item-group" }), f = V(() => { if (e.active !== void 0) return e.active; if (e.to) { const _ = !e.query || M.exports.isEqual(n.query, l.value.query); return e.exact ? u.value && _ || r.value : i.value && _ || r.value } return !1 }); return { sizeClass: o, onClick: v, component: s, isActiveRoute: f, toggle: p }; function v(_) { e.loading !== !0 && (p(), t("click", _)) } } }), BP = { class: "spinner" }; function qP(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = we("focus"); return m(), I("div", { class: de(["v-button", { secondary: e.secondary, warning: e.warning, danger: e.danger, "full-width": e.fullWidth }]) }, [ye(e.$slots, "prepend-outer", {}, void 0, !0), ee((m(), C(Ne(e.component), { download: e.download, class: de(["button", [e.sizeClass, `align-${e.align}`, { active: e.isActiveRoute, rounded: e.rounded, icon: e.icon, outlined: e.outlined, loading: e.loading, dashed: e.dashed, tile: e.tile, "full-width": e.fullWidth }, e.kind]]), type: e.type, disabled: e.disabled, to: e.to !== "" ? e.to : void 0, href: e.href, target: e.component === "a" ? "_blank" : void 0, rel: e.component === "a" ? "noopener noreferrer" : void 0, onClick: e.onClick }, { default: d(() => [S("span", { class: de(["content", { invisible: e.loading }]) }, [ye(e.$slots, "default", Je(xe({ active: e.active, toggle: e.toggle })), void 0, !0)], 2), S("div", BP, [e.loading ? ye(e.$slots, "loading", { key: 0 }, () => [a(o, { "x-small": e.xSmall, small: e.small, indeterminate: "" }, null, 8, ["x-small", "small"])], !0) : R("", !0)])]), _: 3 }, 8, ["download", "class", "type", "disabled", "to", "href", "target", "rel", "onClick"])), [[s, e.autofocus]]), ye(e.$slots, "append-outer", {}, void 0, !0)], 2) } var zP = B(NP, [["render", qP], ["__scopeId", "data-v-55816638"]]); const KP = {}, HP = { class: "v-card-actions" }; function WP(e, t) { return m(), I("div", HP, [ye(e.$slots, "default")]) } var GP = B(KP, [["render", WP], ["__scopeId", "data-v-1c0af2d8"]]); const JP = {}, QP = { class: "v-card-subtitle" }; function XP(e, t) { return m(), I("div", QP, [ye(e.$slots, "default", {}, void 0, !0)]) } var ZP = B(JP, [["render", XP], ["__scopeId", "data-v-61d074a0"]]); const YP = {}, xP = { class: "v-card-text" }; function eO(e, t) { return m(), I("div", xP, [ye(e.$slots, "default", {}, void 0, !0)]) } var tO = B(YP, [["render", eO], ["__scopeId", "data-v-641303f3"]]); const nO = {}, lO = { class: "v-card-title type-label" }; function oO(e, t) { return m(), I("div", lO, [ye(e.$slots, "default", {}, void 0, !0)]) } var aO = B(nO, [["render", oO], ["__scopeId", "data-v-4ef4d67b"]]); const iO = z({ props: { disabled: { type: Boolean, default: !1 }, tile: { type: Boolean, default: !1 } }, setup() { return {} } }); function sO(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-card", { disabled: e.disabled, tile: e.tile }]) }, [ye(e.$slots, "default", {}, void 0, !0)], 2) } var rO = B(iO, [["render", sO], ["__scopeId", "data-v-7bf2718c"]]); const dO = z({ props: { value: { type: String, default: null }, modelValue: { type: [Boolean, Array], default: null }, label: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, indeterminate: { type: Boolean, default: !1 }, iconOn: { type: String, default: "check_box" }, iconOff: { type: String, default: "check_box_outline_blank" }, iconIndeterminate: { type: String, default: "indeterminate_check_box" }, block: { type: Boolean, default: !1 }, customValue: { type: Boolean, default: !1 }, checked: { type: Boolean, default: null } }, emits: ["update:indeterminate", "update:modelValue", "update:value"], setup(e, { emit: t }) { const n = Re(e, "value", t), l = V(() => e.checked !== null ? e.checked : e.modelValue instanceof Array ? e.modelValue.includes(e.value) : e.modelValue === !0), i = V(() => e.indeterminate === !0 || e.checked === null && e.modelValue === null ? e.iconIndeterminate : l.value ? e.iconOn : e.iconOff); return { isChecked: l, toggleInput: u, icon: i, internalValue: n }; function u() { if (e.indeterminate === !0 && t("update:indeterminate", !1), e.modelValue instanceof Array) { const o = [...e.modelValue]; e.modelValue.includes(e.value) === !1 ? o.push(e.value) : o.splice(o.indexOf(e.value), 1), t("update:modelValue", o) } else t("update:modelValue", !e.modelValue) } } }), uO = { key: 0, class: "prepend" }, cO = { class: "label type-text" }, pO = { key: 1, class: "append" }; function mO(e, t, n, l, i, u) { const o = c("v-icon"); return m(), C(Ne(e.customValue ? "div" : "button"), { class: de(["v-checkbox", { checked: e.isChecked, indeterminate: e.indeterminate, block: e.block }]), type: "button", role: "checkbox", "aria-pressed": e.isChecked ? "true" : "false", disabled: e.disabled, onClick: Ae(e.toggleInput, ["stop"]) }, { default: d(() => [e.$slots.prepend ? (m(), I("div", uO, [ye(e.$slots, "prepend", {}, void 0, !0)])) : R("", !0), a(o, { class: "checkbox", name: e.icon, disabled: e.disabled }, null, 8, ["name", "disabled"]), S("span", cO, [e.customValue === !1 ? ye(e.$slots, "default", { key: 0 }, () => [D(b(e.label), 1)], !0) : ee((m(), I("input", { key: 1, "onUpdate:modelValue": t[0] || (t[0] = s => e.internalValue = s), class: "custom-input" }, null, 512)), [[Hl, e.internalValue]])]), e.$slots.append ? (m(), I("div", pO, [ye(e.$slots, "append", {}, void 0, !0)])) : R("", !0)]), _: 3 }, 8, ["aria-pressed", "disabled", "class", "onClick"]) } var fO = B(dO, [["render", mO], ["__scopeId", "data-v-1bdd02de"]]); const vO = z({ name: "VCheckboxTreeCheckbox", props: { text: { type: String, required: !0 }, value: { type: [String, Number], required: !0 }, children: { type: Array, default: null }, modelValue: { type: Array, default: () => [] }, valueCombining: { type: String, required: !0 }, checked: { type: Boolean, default: null }, search: { type: String, default: null }, hidden: { type: Boolean, default: !1 }, itemText: { type: String, default: "text" }, itemValue: { type: String, default: "value" }, itemChildren: { type: String, default: "children" }, disabled: { type: Boolean, default: !1 }, showSelectionOnly: { type: Boolean, default: !1 }, parentValue: { type: [String, Number], default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => { let k = e.children || []; return e.search && (k = k.filter(P => P[e.itemText].toLowerCase().includes(e.search.toLowerCase()) || F(P[e.itemChildren]))), e.showSelectionOnly && (k = k.filter(P => e.modelValue.includes(P[e.itemValue]) || A(P[e.itemChildren]) || e.modelValue.includes(e.parentValue) || e.modelValue.includes(e.value))), k.map(P => P[e.itemValue]); function F(P) { return P ? P.some(L => L[e.itemText].toLowerCase().includes(e.search.toLowerCase()) || F(L[e.itemChildren])) : !1 } function A(P) { return P ? P.some(L => e.modelValue.includes(L[e.itemValue]) || A(L[e.itemChildren])) : !1 } }), l = V(() => e.showSelectionOnly === !0 && e.modelValue.includes(e.value) ? !0 : n.value.length > 0), i = V(() => typeof e.search == "string" && e.search.length > 0), u = V(() => { var k; return ((k = e.children) == null ? void 0 : k.map(F => F[e.itemValue])) || [] }), o = V({ get() { return e.modelValue || [] }, set(k) { const F = M.exports.difference(k, e.modelValue), A = M.exports.difference(e.modelValue, k); if (e.children) switch (e.valueCombining) { case "all": return f(k, { added: F, removed: A }); case "branch": return v(k, { added: F, removed: A }); case "leaf": return _(k, { added: F, removed: A }); case "indeterminate": return y(k, { added: F, removed: A }); case "exclusive": return g(k, { added: F, removed: A }); default: return w(k) }w(k) } }), s = V(() => e.checked !== null ? e.checked : e.valueCombining === "all" ? null : e.valueCombining === "leaf" ? h("leaf").every(F => e.modelValue.includes(F)) : null), r = V(() => { const k = h("all"); if (e.valueCombining === "all" || e.valueCombining === "branch") return k.some(F => e.modelValue.includes(F)) && e.modelValue.includes(e.value) === !1; if (e.valueCombining === "indeterminate") return k.some(F => e.modelValue.includes(F)) && k.every(F => e.modelValue.includes(F)) === !1; if (e.valueCombining === "leaf") { const F = h("leaf"); return F.some(A => e.modelValue.includes(A)) && F.every(A => e.modelValue.includes(A)) === !1 } return e.valueCombining === "exclusive" ? k.some(F => e.modelValue.includes(F)) : null }), p = V(() => e.checked !== null ? e.checked : e.valueCombining === "all" ? null : e.valueCombining === "branch" && e.modelValue.includes(e.value) ? !0 : null); return { groupCheckedStateOverride: s, childrenCheckedStateOverride: p, treeValue: o, groupIndeterminateState: r, visibleChildrenValues: n, groupShown: l, groupOpen: i }; function f(k, { added: F, removed: A }) { const P = h("all"); if ((F == null ? void 0 : F[0]) === e.value) { const T = [...k.filter(N => N !== e.value && u.value.includes(N) === !1), ...P, e.value]; return w(T) } if ((A == null ? void 0 : A[0]) === e.value) { const T = k.filter(N => N !== e.value && P.includes(N) === !1); return w(T) } if (u.value.every(T => k.includes(T))) { const T = [...k.filter(N => N !== e.value && P.includes(N) === !1), ...P, e.value]; return w(T) } const L = k.filter(T => T !== e.value); return w(L) } function v(k, { added: F, removed: A }) { var L; const P = h("all"); if ((e.modelValue.includes(e.value) || e.checked === !0) && F && F.length === 1 && u.value.includes(F[0])) { const T = [...k.filter(N => N !== e.value && N !== F[0]), ...u.value.filter(N => N !== F[0])]; return w(T) } if (e.modelValue.includes(e.value) && P.some(T => k.includes(T))) { const T = e.children.find(O => { const U = h("all", O[e.itemChildren]); return k.some(q => U.includes(q)) === !0 }), N = [...k.filter(O => O !== e.value), ...(e.children || []).filter(O => O[e.itemChildren] ? O[e.itemValue] !== (T == null ? void 0 : T[e.itemValue]) : !0).map(O => O[e.itemValue]), ...((L = T == null ? void 0 : T[e.itemChildren]) != null ? L : []).filter(O => { const U = h("all", O[e.itemChildren]); return k.some(q => U.includes(q)) === !1 }).map(O => O[e.itemValue])]; return w(N) } if (F == null ? void 0 : F.includes(e.value)) { const T = [...k.filter(N => N !== e.value && P.includes(N) === !1), e.value]; return w(T) } if (A == null ? void 0 : A.includes(e.value)) { const T = k.filter(N => N !== e.value && P.includes(N) === !1); return w(T) } if (u.value.every(T => k.includes(T))) { const T = [...k.filter(N => N !== e.value && P.includes(N) === !1), e.value]; return w(T) } return w(k) } function _(k, { added: F }) { const A = h("all"), P = h("leaf"); if (F == null ? void 0 : F.includes(e.value)) if (P.every(L => k.includes(L))) { const L = k.filter(T => T !== e.value && A.includes(T) === !1); return w(L) } else { const L = [...k.filter(T => T !== e.value && A.includes(T) === !1), ...P]; return w(L) } return w(k) } function y(k, { added: F, removed: A }) { const P = h("all"); if ((F == null ? void 0 : F[0]) === e.value) { const L = [...k.filter(T => T !== e.value && u.value.includes(T) === !1), ...P, e.value]; return w(L) } if ((A == null ? void 0 : A[0]) === e.value) { const L = k.filter(T => T !== e.value && P.includes(T) === !1); return w(L) } if (u.value.some(L => k.includes(L))) { const L = [...k.filter(T => T !== e.value), e.value]; return w(L) } return u.value.every(L => k.includes(L) === !1) ? w(k.filter(L => L !== e.value)) : w(k) } function g(k, { added: F }) { const A = h("all"); if ((F == null ? void 0 : F[0]) === e.value) { const P = [...k.filter(L => L !== e.value && A.includes(L) === !1), e.value]; return w(P) } if (A.some(P => k.includes(P))) { const P = [...k.filter(L => L !== e.value)]; return w(P) } return w(k) } function w(k) { t("update:modelValue", k) } function h(k, F = e.children) { const A = []; return P(F), A; function P(L) { if (!!L) for (const T of L) k === "all" && A.push(T[e.itemValue]), k === "branch" && T[e.itemChildren] && A.push(T[e.itemValue]), k === "leaf" && !T[e.itemChildren] && A.push(T[e.itemValue]), T[e.itemChildren] && P(T[e.itemChildren]) } } } }); function _O(e, t, n, l, i, u) { const o = c("v-highlight"), s = c("v-checkbox"), r = c("v-checkbox-tree-checkbox", !0), p = c("v-list-group"), f = c("v-list-item"); return e.children ? ee((m(), C(p, { key: 0, value: e.value, open: e.groupOpen, "arrow-placement": "before" }, { activator: d(() => [a(s, { modelValue: e.treeValue, "onUpdate:modelValue": t[0] || (t[0] = v => e.treeValue = v), indeterminate: e.groupIndeterminateState, checked: e.groupCheckedStateOverride, label: e.text, value: e.value, disabled: e.disabled }, { default: d(() => [a(o, { text: e.text, query: e.search }, null, 8, ["text", "query"])]), _: 1 }, 8, ["modelValue", "indeterminate", "checked", "label", "value", "disabled"])]), default: d(() => [(m(!0), I(se, null, he(e.children, v => (m(), C(r, { key: v[e.itemValue], modelValue: e.treeValue, "onUpdate:modelValue": t[1] || (t[1] = _ => e.treeValue = _), "value-combining": e.valueCombining, checked: e.childrenCheckedStateOverride, hidden: e.visibleChildrenValues.includes(v[e.itemValue]) === !1, search: e.search, "item-text": e.itemText, "item-value": e.itemValue, "item-children": e.itemChildren, text: v[e.itemText], value: v[e.itemValue], children: v[e.itemChildren], disabled: e.disabled, "show-selection-only": e.showSelectionOnly, "parent-value": e.value }, null, 8, ["modelValue", "value-combining", "checked", "hidden", "search", "item-text", "item-value", "item-children", "text", "value", "children", "disabled", "show-selection-only", "parent-value"]))), 128))]), _: 1 }, 8, ["value", "open"])), [[Et, e.groupShown]]) : e.children ? R("", !0) : ee((m(), C(f, { key: 1, class: "item" }, { default: d(() => [a(s, { modelValue: e.treeValue, "onUpdate:modelValue": t[2] || (t[2] = v => e.treeValue = v), disabled: e.disabled, checked: e.checked, label: e.text, value: e.value }, { default: d(() => [a(o, { text: e.text, query: e.search }, null, 8, ["text", "query"])]), _: 1 }, 8, ["modelValue", "disabled", "checked", "label", "value"])]), _: 1 }, 512)), [[Et, !e.hidden]]) } var yO = B(vO, [["render", _O], ["__scopeId", "data-v-113b2a91"]]); const gO = z({ name: "VCheckboxTree", components: { VCheckboxTreeCheckbox: yO }, props: { choices: { type: Array, default: () => [] }, modelValue: { type: Array, default: null }, valueCombining: { type: String, default: "all" }, search: { type: String, default: null }, itemText: { type: String, default: "text" }, itemValue: { type: String, default: "value" }, itemChildren: { type: String, default: "children" }, disabled: { type: Boolean, default: !1 }, showSelectionOnly: { type: Boolean, default: !1 } }, emits: ["update:modelValue", "group-toggle"], setup(e, { emit: t }) { const n = V({ get() { return e.modelValue || [] }, set(i) { t("update:modelValue", i) } }), l = E([]); return { value: n, openSelection: l } } }); function hO(e, t, n, l, i, u) { const o = c("v-checkbox-tree-checkbox"), s = c("v-list"); return m(), C(s, { modelValue: e.openSelection, "onUpdate:modelValue": t[1] || (t[1] = r => e.openSelection = r), mandatory: !1, onToggle: t[2] || (t[2] = r => e.$emit("group-toggle", r)) }, { default: d(() => [(m(!0), I(se, null, he(e.choices, r => (m(), C(o, { key: r[e.itemValue], modelValue: e.value, "onUpdate:modelValue": t[0] || (t[0] = p => e.value = p), "value-combining": e.valueCombining, search: e.search, "item-text": e.itemText, "item-value": e.itemValue, "item-children": e.itemChildren, text: r[e.itemText], value: r[e.itemValue], children: r[e.itemChildren], disabled: e.disabled, "show-selection-only": e.showSelectionOnly }, null, 8, ["modelValue", "value-combining", "search", "item-text", "item-value", "item-children", "text", "value", "children", "disabled", "show-selection-only"]))), 128))]), _: 1 }, 8, ["modelValue"]) } var bO = B(gO, [["render", hO]]); const $O = z({ props: re({ active: { type: Boolean, default: null }, close: { type: Boolean, default: !1 }, closeIcon: { type: String, default: "close" }, outlined: { type: Boolean, default: !1 }, label: { type: Boolean, default: !0 }, disabled: { type: Boolean, default: !1 } }, nl), emits: ["update:active", "click", "close"], setup(e, { emit: t }) { const n = E(!0), l = V({ get: () => e.active !== null ? e.active : n.value, set: s => { t("update:active", s), n.value = s } }); return { sizeClass: ll(e), internalActive: l, onClick: u, onCloseClick: o }; function u(s) { e.disabled || t("click", s) } function o(s) { e.disabled || (l.value = !l.value, t("close", s)) } } }), wO = { class: "chip-content" }; function kO(e, t, n, l, i, u) { const o = c("v-icon"); return e.internalActive ? (m(), I("span", { key: 0, class: de(["v-chip", [e.sizeClass, { outlined: e.outlined, label: e.label, disabled: e.disabled, close: e.close }]]), onClick: t[1] || (t[1] = (...s) => e.onClick && e.onClick(...s)) }, [S("span", wO, [ye(e.$slots, "default", {}, void 0, !0), e.close ? (m(), I("span", { key: 0, class: de(["close-outline", { disabled: e.disabled }]), onClick: t[0] || (t[0] = Ae((...s) => e.onCloseClick && e.onCloseClick(...s), ["stop"])) }, [a(o, { class: "close", name: e.closeIcon, "x-small": "" }, null, 8, ["name"])], 2)) : R("", !0)])], 2)) : R("", !0) } var SO = B($O, [["render", kO], ["__scopeId", "data-v-d55b27c0"]]); const CO = z({ props: { modelValue: { type: Boolean, default: void 0 }, label: { type: String, default: ze.global.t("toggle") }, startOpen: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = E(e.startOpen), l = V({ get() { return e.modelValue !== void 0 ? e.modelValue : n.value }, set(s) { n.value = s, t("update:modelValue", s) } }); return { internalActive: l, enable: i, disable: u, toggle: o }; function i() { l.value = !0 } function u() { l.value = !1 } function o() { l.value = !l.value } } }), VO = { key: 0 }; function FO(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-divider"), r = c("transition-expand"); return m(), I("div", { class: de(["v-detail", { disabled: e.disabled }]) }, [ye(e.$slots, "activator", Je(xe({ active: e.internalActive, enable: e.enable, disable: e.disable, toggle: e.toggle })), () => [a(s, { onClick: t[0] || (t[0] = p => e.internalActive = !e.internalActive) }, { default: d(() => [e.disabled ? R("", !0) : (m(), C(o, { key: 0, name: e.internalActive ? "expand_more" : "chevron_right", small: "" }, null, 8, ["name"])), ye(e.$slots, "title", {}, () => [D(b(e.label), 1)], !0)]), _: 3 })], !0), a(r, null, { default: d(() => [e.internalActive ? (m(), I("div", VO, [ye(e.$slots, "default", {}, void 0, !0)])) : R("", !0)]), _: 3 })], 2) } var AO = B(CO, [["render", FO], ["__scopeId", "data-v-e0ddb8ec"]]); const IO = z({ props: { modelValue: { type: Boolean, default: void 0 }, persistent: { type: Boolean, default: !1 }, placement: { type: String, default: "center", validator: e => ["center", "right"].includes(e) } }, emits: ["esc", "update:modelValue"], setup(e, { emit: t }) { nt("escape", (p, f) => { u.value && (t("esc"), f()) }); const n = E(!1), l = E(null), i = V(() => bt()), u = V({ get() { return e.modelValue !== void 0 ? e.modelValue : n.value }, set(p) { n.value = p, t("update:modelValue", p) } }), o = Q$(); return { emitToggle: s, className: l, nudge: r, leave: o, id: i, internalActive: u }; function s() { e.persistent === !1 ? t("update:modelValue", !e.modelValue) : r() } function r() { l.value = "nudge", setTimeout(() => { l.value = null }, 200) } } }), EO = { class: "v-dialog" }; function DO(e, t, n, l, i, u) { const o = c("v-overlay"), s = c("transition-dialog"); return m(), I("div", EO, [ye(e.$slots, "activator", Je(xe({ on: () => e.internalActive = !0 }))), (m(), C(ql, { to: "#dialog-outlet" }, [a(s, { onAfterLeave: e.leave }, { default: d(() => [e.internalActive ? (m(), I("div", { key: 0, class: de(["container", [e.className, e.placement]]) }, [a(o, { active: "", absolute: "", onClick: e.emitToggle }, null, 8, ["onClick"]), ye(e.$slots, "default")], 2)) : R("", !0)]), _: 3 }, 8, ["onAfterLeave"])]))]) } var TO = B(IO, [["render", DO], ["__scopeId", "data-v-370b296e"]]); const PO = z({ props: { vertical: { type: Boolean, default: !1 }, inlineTitle: { type: Boolean, default: !0 }, large: { type: Boolean, default: !1 } } }), OO = { key: 0, class: "wrapper" }, LO = { key: 0, class: "type-text" }, jO = ["aria-orientation"]; function RO(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-divider", { vertical: e.vertical, inlineTitle: e.inlineTitle, large: e.large }]) }, [e.$slots.icon || e.$slots.default ? (m(), I("span", OO, [ye(e.$slots, "icon", { class: "icon" }), !e.vertical && e.$slots.default ? (m(), I("span", LO, [ye(e.$slots, "default")])) : R("", !0)])) : R("", !0), S("hr", { role: "separator", "aria-orientation": e.vertical ? "vertical" : "horizontal" }, null, 8, jO)], 2) } var MO = B(PO, [["render", RO], ["__scopeId", "data-v-70aa2cf8"]]); const UO = z({ props: { showSidebarToggle: { type: Boolean, default: !1 } }, emits: ["toggle:sidebar"], setup() { return { active: E(!1) } } }), NO = { class: "action-buttons" }; function BO(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"); return m(), I("div", { class: de(["actions", { active: e.active }]) }, [a(s, { class: "expand", icon: "", rounded: "", secondary: "", outlined: "", onClick: t[0] || (t[0] = r => e.active = !e.active) }, { default: d(() => [a(o, { name: "arrow_left" })]), _: 1 }), S("div", NO, [e.showSidebarToggle ? (m(), C(s, { key: 0, class: "sidebar-toggle", icon: "", rounded: "", secondary: "", outlined: "", onClick: t[1] || (t[1] = r => e.$emit("toggle:sidebar")) }, { default: d(() => [a(o, { name: "info", outline: "" })]), _: 1 })) : R("", !0), ye(e.$slots, "default", {}, void 0, !0)])], 2) } var qO = B(UO, [["render", BO], ["__scopeId", "data-v-352239c0"]]); const zO = z({ components: { HeaderBarActions: qO }, props: { title: { type: String, default: null }, showSidebarToggle: { type: Boolean, default: !1 }, primaryActionIcon: { type: String, default: "menu" }, small: { type: Boolean, default: !1 } }, emits: ["primary", "toggle:sidebar"], setup() { const e = E(), t = E(!1), n = new IntersectionObserver(([l]) => { t.value = l.boundingClientRect.y === -1 }, { threshold: [1] }); return at(() => { n.observe(e.value) }), At(() => { n.disconnect() }), { headerEl: e, collapsed: t } } }), KO = e => (Qe("data-v-c54480fe"), e = e(), Xe(), e), HO = { key: 0, class: "title-outer-prepend" }, WO = { class: "headline" }, GO = { class: "title" }, JO = { class: "type-title" }, QO = KO(() => S("div", { class: "spacer" }, null, -1)); function XO(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("header-bar-actions"); return m(), I("header", { ref: "headerEl", class: de(["header-bar", { collapsed: e.collapsed, small: e.small }]) }, [a(s, { secondary: "", class: "nav-toggle", icon: "", rounded: "", onClick: t[0] || (t[0] = p => e.$emit("primary")) }, { default: d(() => [a(o, { name: e.primaryActionIcon }, null, 8, ["name"])]), _: 1 }), e.$slots["title-outer:prepend"] ? (m(), I("div", HO, [ye(e.$slots, "title-outer:prepend", {}, void 0, !0)])) : R("", !0), S("div", { class: de(["title-container", { full: !e.$slots["title-outer:append"] }]) }, [S("div", WO, [ye(e.$slots, "headline", {}, void 0, !0)]), S("div", GO, [ye(e.$slots, "title", {}, () => [ye(e.$slots, "title:prepend", {}, void 0, !0), S("h1", JO, b(e.title), 1), ye(e.$slots, "title:append", {}, void 0, !0)], !0)]), ye(e.$slots, "title-outer:append", {}, void 0, !0)], 2), QO, ye(e.$slots, "actions:prepend", {}, void 0, !0), a(r, { "show-sidebar-toggle": e.showSidebarToggle, "onToggle:sidebar": t[1] || (t[1] = p => e.$emit("toggle:sidebar")) }, { default: d(() => [ye(e.$slots, "actions", {}, void 0, !0)]), _: 3 }, 8, ["show-sidebar-toggle"]), ye(e.$slots, "actions:append", {}, void 0, !0)], 2) } var ZO = B(zO, [["render", XO], ["__scopeId", "data-v-c54480fe"]]); const YO = z({ components: { HeaderBar: ZO }, props: { title: { type: String, required: !0 }, subtitle: { type: String, default: null }, modelValue: { type: Boolean, default: void 0 }, persistent: { type: Boolean, default: !1 }, icon: { type: String, default: "box" }, sidebarLabel: { type: String, default: ze.global.t("sidebar") }, cancelable: { type: Boolean, default: !0 } }, emits: ["cancel", "update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = E(!1), i = E(); Zt("main-element", i); const u = V({ get() { return e.modelValue === void 0 ? l.value : e.modelValue }, set(o) { l.value = o, t("update:modelValue", o) } }); return { t: n, internalActive: u, mainEl: i } } }), xO = { class: "v-drawer" }, eL = { class: "content" }, tL = { key: 1, class: "sidebar" }, nL = { ref: "mainEl", class: "main" }, lL = { key: 0, class: "subtitle" }; function oL(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-overlay"), p = c("header-bar"), f = c("v-detail"), v = c("v-dialog"), _ = we("tooltip"); return m(), C(v, { modelValue: e.internalActive, "onUpdate:modelValue": t[3] || (t[3] = y => e.internalActive = y), persistent: e.persistent, placement: "right", onEsc: t[4] || (t[4] = y => e.$emit("cancel")) }, { activator: d(({ on: y }) => [ye(e.$slots, "activator", Je(xe({ on: y })), void 0, !0)]), default: d(() => [S("article", xO, [e.cancelable ? ee((m(), C(s, { key: 0, class: "cancel", icon: "", rounded: "", secondary: "", onClick: t[0] || (t[0] = y => e.$emit("cancel")) }, { default: d(() => [a(o, { name: "close" })]), _: 1 }, 512)), [[_, e.t("cancel"), void 0, { bottom: !0 }]]) : R("", !0), S("div", eL, [e.$slots.sidebar ? (m(), C(r, { key: 0, absolute: "", onClick: t[1] || (t[1] = y => e.sidebarActive = !1) })) : R("", !0), e.$slots.sidebar ? (m(), I("nav", tL, [ye(e.$slots, "sidebar", {}, void 0, !0)])) : R("", !0), S("main", nL, [a(p, { title: e.title, "primary-action-icon": "close", onPrimary: t[2] || (t[2] = y => e.$emit("cancel")) }, { title: d(() => [ye(e.$slots, "title", {}, void 0, !0)]), headline: d(() => [ye(e.$slots, "subtitle", {}, () => [e.subtitle ? (m(), I("p", lL, b(e.subtitle), 1)) : R("", !0)], !0)]), "title-outer:prepend": d(() => [ye(e.$slots, "title-outer:prepend", {}, () => [a(s, { class: "header-icon", rounded: "", icon: "", secondary: "", disabled: "" }, { default: d(() => [a(o, { name: e.icon }, null, 8, ["name"])]), _: 1 })], !0)]), "actions:prepend": d(() => [ye(e.$slots, "actions:prepend", {}, void 0, !0)]), actions: d(() => [ye(e.$slots, "actions", {}, void 0, !0)]), "title:append": d(() => [ye(e.$slots, "header:append", {}, void 0, !0)]), _: 3 }, 8, ["title"]), e.$slots.sidebar ? (m(), C(f, { key: 0, class: "mobile-sidebar", label: e.sidebarLabel }, { default: d(() => [S("nav", null, [ye(e.$slots, "sidebar", {}, void 0, !0)])]), _: 3 }, 8, ["label"])) : R("", !0), ye(e.$slots, "default", {}, void 0, !0)], 512)])])]), _: 3 }, 8, ["modelValue", "persistent"]) } var aL = B(YO, [["render", oL], ["__scopeId", "data-v-4ea29c7f"]]); const iL = z({ props: { error: { type: [Object, Error], required: !0 } }, setup(e) { const { t } = x(), n = V(() => { var s, r, p, f, v, _, y, g; return ((_ = (v = (f = (p = (r = (s = e.error) == null ? void 0 : s.response) == null ? void 0 : r.data) == null ? void 0 : p.errors) == null ? void 0 : f[0]) == null ? void 0 : v.extensions) == null ? void 0 : _.code) || ((g = (y = e.error) == null ? void 0 : y.extensions) == null ? void 0 : g.code) || "UNKNOWN" }), l = V(() => { var r, p, f, v, _, y; let s = ((_ = (v = (f = (p = (r = e.error) == null ? void 0 : r.response) == null ? void 0 : p.data) == null ? void 0 : f.errors) == null ? void 0 : v[0]) == null ? void 0 : _.message) || ((y = e.error) == null ? void 0 : y.message); return s.length > 200 && (s = s.substring(0, 197) + "..."), s }), i = E(!1), u = V(() => { var s; return !!((s = navigator.clipboard) == null ? void 0 : s.writeText) }); return { t, code: n, copyError: o, showCopy: u, copied: i, message: l }; async function o() { var r, p; const s = ((p = (r = e.error) == null ? void 0 : r.response) == null ? void 0 : p.data) || e.error; await navigator.clipboard.writeText(JSON.stringify(s, M.exports.isPlainObject(s) ? null : Object.getOwnPropertyNames(s), 2)), i.value = !0 } } }), sL = { class: "v-error selectable" }; function rL(e, t, n, l, i, u) { const o = c("v-icon"), s = we("tooltip"); return m(), I("div", sL, [S("output", null, "[" + b(e.code) + "] " + b(e.message), 1), e.showCopy ? ee((m(), C(o, { key: 0, small: "", class: "copy-error", name: e.copied ? "check" : "content_copy", clickable: "", onClick: e.copyError }, null, 8, ["name", "onClick"])), [[s, e.t("copy_details")]]) : R("", !0)]) } var dL = B(iL, [["render", rL], ["__scopeId", "data-v-7ea421c6"]]); const uL = z({ props: { items: { type: Array, required: !0 }, modelValue: { type: [String, Number], default: null }, disabled: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => e.modelValue === null ? e.items : e.items.filter(i => i.value === e.modelValue)); return { toggle: l, visibleItems: n }; function l(i) { e.disabled !== !0 && (e.modelValue === i.value ? t("update:modelValue", null) : t("update:modelValue", i.value)) } } }), cL = { class: "v-fancy-select" }, pL = ["onClick"], mL = { class: "icon" }, fL = { class: "content" }, vL = { class: "text" }, _L = { class: "description" }; function yL(e, t, n, l, i, u) { const o = c("v-divider"), s = c("v-icon"); return m(), I("div", cL, [a(zl, { tag: "div", name: "option" }, { default: d(() => [(m(!0), I(se, null, he(e.visibleItems, (r, p) => (m(), I(se, { key: p }, [r.divider === !0 ? (m(), C(o, { key: 0 })) : (m(), I("div", { key: 1, class: de(["v-fancy-select-option", { active: r.value === e.modelValue, disabled: e.disabled }]), style: Ke({ "--index": p }), onClick: f => e.toggle(r) }, [S("div", mL, [a(s, { name: r.icon }, null, 8, ["name"])]), S("div", fL, [S("div", vL, b(r.text), 1), S("div", _L, b(r.description), 1)]), e.modelValue === r.value && e.disabled === !1 ? (m(), C(s, { key: 0, name: "cancel", onClick: Ae(f => e.toggle(r), ["stop"]) }, null, 8, ["onClick"])) : r.iconRight ? (m(), C(s, { key: 1, class: "icon-right", name: r.iconRight }, null, 8, ["name"])) : R("", !0)], 14, pL))], 64))), 128))]), _: 1 })]) } var gL = B(uL, [["render", yL], ["__scopeId", "data-v-70a5597b"]]); const hL = z({ name: "FieldListItem", props: { field: { type: Object, required: !0 }, depth: { type: Number, default: void 0 } }, emits: ["add"], setup() { return { formatTitle: Vt } } }); function bL(e, t, n, l, i, u) { const o = c("v-list-item-content"), s = c("v-list-item"), r = c("field-list-item", !0), p = c("v-list-group"); return e.field.children === void 0 || e.depth === 0 ? (m(), C(s, { key: 0, disabled: e.field.disabled, clickable: "", onClick: t[0] || (t[0] = f => e.$emit("add", e.field.key)) }, { default: d(() => [a(o, null, { default: d(() => [D(b(e.field.name || e.formatTitle(e.field.field)), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])) : (m(), C(p, { key: 1, value: e.field.key, clickable: "", onClick: t[2] || (t[2] = f => e.$emit("add", e.field.key)) }, { activator: d(() => [D(b(e.field.name || e.formatTitle(e.field.field)), 1)]), default: d(() => [(m(!0), I(se, null, he(e.field.children, f => (m(), C(r, { key: f.key, field: f, depth: e.depth - 1, onAdd: t[1] || (t[1] = v => e.$emit("add", v)) }, null, 8, ["field", "depth"]))), 128))]), _: 1 }, 8, ["value"])) } var Ts = B(hL, [["render", bL]]); function ol(e, t, n = () => !0) { const l = Pe(), i = ut(), u = E([]), o = E(new Set); return _e(() => e.value, s, { immediate: !0 }), { treeList: u, loadFieldRelations: y }; function s(g) { var w; o.value = new Set, u.value = (w = r(g)) != null ? w : []; for (const h of u.value) h.children = r(h.relatedCollection, h) } function r(g, w) { var F; const h = (F = t == null ? void 0 : t.value) == null ? void 0 : F.fields.filter(A => A.collection === g), k = l.getFieldsForCollection(g).concat(h || []).filter(A => { var P, L, T, N; return !((L = (P = A.meta) == null ? void 0 : P.special) == null ? void 0 : L.includes("alias")) && !((N = (T = A.meta) == null ? void 0 : T.special) == null ? void 0 : N.includes("no-data")) }).filter(n).flatMap(A => f(A, w)); return k.length ? k : void 0 } function p(g) { const w = v(g); if (!(w == null ? void 0 : w.meta)) return []; switch (Bd({ relation: w, collection: g.collection, field: g.field })) { case "o2m": return [w.meta.many_collection]; case "m2o": return [w.meta.one_collection]; case "m2a": return w.meta.one_allowed_collections; default: return [] } } function f(g, w) { const h = p(g), k = w ? w.key + "." : ""; return h.length <= 1 ? { name: g.name, field: g.field, collection: g.collection, relatedCollection: h[0], key: k + g.field } : h.map(F => ({ name: `${g.name} (${F})`, field: `${g.field}:${F}`, collection: g.collection, relatedCollection: F, key: k + `${g.field}:${F}` })) } function v(g) { var h; return [...i.getRelationsForField(g.collection, g.field), ...((h = t == null ? void 0 : t.value) == null ? void 0 : h.relations) || []].find(k => { var F; return k.collection === g.collection && k.field === g.field || k.related_collection === g.collection && ((F = k.meta) == null ? void 0 : F.one_field) === g.field }) } function _(g, w) { const [h, ...k] = g.split("."); for (const F of w || []) if (F.field === h) return k.length ? _(k.join("."), F.children) : F } function y(g) { if (!o.value.has(g)) { o.value.add(g); const w = _(g, u.value); for (const h of (w == null ? void 0 : w.children) || []) h.children = r(h.relatedCollection, h) } } } const $L = z({ components: { FieldListItem: Ts, Draggable: kt }, props: { disabled: { type: Boolean, default: !1 }, modelValue: { type: Array, default: null }, collection: { type: String, required: !0 }, depth: { type: Number, default: void 0 }, inject: { type: Object, default: () => ({ fields: [], collections: [], relations: [] }) } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = E(!1), { collection: i, inject: u } = je(e), { info: o } = ot(i), { treeList: s, loadFieldRelations: r } = ol(i, u), p = V({ get() { return e.modelValue || [] }, set(h) { t("update:modelValue", h) } }), f = V({ get() { return p.value.map(h => { var k; return { field: h, name: (k = _(s.value, h.split("."))) == null ? void 0 : k.name } }) }, set(h) { p.value = h.map(k => k.field) } }), v = V(() => y(s.value)); return { t: n, menuActive: l, addField: w, removeField: g, availableFields: v, selectedFields: f, hideDragImage: Nt, treeList: s, loadFieldRelations: r, collectionInfo: o }; function _(h, k) { if (h === void 0) return; const F = h.find(A => A.field === k[0]); if (F !== void 0) return k.length === 1 ? F : _(F.children, k.slice(1)) } function y(h, k = "") { if (h === void 0) return; const F = h.map(A => ({ name: A.name, field: A.field, key: A.key, disabled: p.value.includes(k + A.field), children: y(A.children, k + A.field + ".") })); return F.length === 0 ? void 0 : F } function g(h) { p.value = p.value.filter(k => k !== h) } function w(h) { const k = p.value; k.push(h), p.value = [...new Set(k)] } } }); function wL(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-chip"), r = c("v-icon"), p = c("v-button"), f = c("field-list-item"), v = c("v-list"), _ = c("v-menu"), y = c("draggable"), g = we("tooltip"); return !e.availableFields || e.availableFields.length === 0 ? (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("no_fields_in_collection", { collection: e.collectionInfo && e.collectionInfo.name || e.collection })), 1)]), _: 1 })) : (m(), C(y, { key: 1, modelValue: e.selectedFields, "onUpdate:modelValue": t[2] || (t[2] = w => e.selectedFields = w), "force-fallback": !0, "item-key": "field", draggable: ".draggable", "set-data": e.hideDragImage, class: "v-field-select" }, { item: d(({ element: w }) => [ee(a(s, { clickable: "", class: "field draggable", onClick: h => e.removeField(w.field) }, { default: d(() => [D(b(w.name), 1)]), _: 2 }, 1032, ["onClick"]), [[g, w.field]])]), footer: d(() => [a(_, { modelValue: e.menuActive, "onUpdate:modelValue": t[1] || (t[1] = w => e.menuActive = w), "show-arrow": "", class: "add", placement: "bottom" }, { activator: d(({ toggle: w }) => [a(p, { small: "", onClick: w }, { default: d(() => [D(b(e.t("add_field")) + " ", 1), a(r, { small: "", name: "add" })]), _: 2 }, 1032, ["onClick"])]), default: d(() => [a(v, { mandatory: !1, onToggle: t[0] || (t[0] = w => e.loadFieldRelations(w.value)) }, { default: d(() => [(m(!0), I(se, null, he(e.availableFields, w => (m(), C(f, { key: w.key, field: w, depth: e.depth, onAdd: e.addField }, null, 8, ["field", "depth", "onAdd"]))), 128))]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), _: 1 }, 8, ["modelValue", "set-data"])) } var kL = B($L, [["render", wL], ["__scopeId", "data-v-21e81fb0"]]); const SL = z({ components: { FieldListItem: Ts }, props: { disabled: { type: Boolean, default: !1 }, modelValue: { type: String, default: null }, nullable: { type: Boolean, default: !0 }, collection: { type: String, default: null }, depth: { type: Number, default: void 0 }, placeholder: { type: String, default: null }, inject: { type: Object, default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = E(null), l = E(!1), { collection: i, inject: u } = je(e), { treeList: o, loadFieldRelations: s } = ol(i, u); return _e(() => e.modelValue, k, { immediate: !0 }), at(() => { n.value && (n.value.addEventListener("selectstart", v), k()) }), At(() => { n.value && n.value.removeEventListener("selectstart", v) }), { menuActive: l, treeList: o, addField: _, onInput: r, contentEl: n, onClick: p, loadFieldRelations: s, onKeyDown: f }; function r() { if (!n.value) return; const F = h(); t("update:modelValue", F) } function p(F) { var N; const A = F.target; if (A.tagName.toLowerCase() !== "button") return; const P = A.dataset.field; t("update:modelValue", e.modelValue.replace(`{{${P}}}`, "")); const L = A.previousElementSibling, T = A.nextElementSibling; !L || !T || !(L instanceof HTMLElement) || !(T instanceof HTMLElement) || (A.remove(), g(L, T), (N = window.getSelection()) == null || N.removeAllRanges(), r()) } function f(F) { var A; (F.key === "{" || F.key === "}") && (F.preventDefault(), l.value = !0), ((A = n.value) == null ? void 0 : A.innerHTML) === "" && (n.value.innerHTML = '<span class="text"></span>') } function v() { var L; if (!n.value) return; const F = window.getSelection(); if (!F || F.rangeCount <= 0) return; const A = F.getRangeAt(0); if (!A) return; const P = A.startContainer; if (!(P instanceof HTMLElement && P.classList.contains("text")) && !((L = P.parentElement) == null ? void 0 : L.classList.contains("text"))) { F.removeAllRanges(); const T = new Range; let N = null; for (let O = 0; O < n.value.childNodes.length || !N; O++) { const U = n.value.children[O]; U.classList.contains("text") && (N = U) } N || (N = document.createElement("span"), N.classList.add("text"), n.value.appendChild(N)), T.setStart(N, 0), F.addRange(T) } } function _(F) { var N, O, U, q; if (!n.value) return; const A = y(o.value, F.split(".")); if (!A) return; const P = document.createElement("button"); if (P.dataset.field = F, P.setAttribute("contenteditable", "false"), P.innerText = String(A.name), ((N = window.getSelection()) == null ? void 0 : N.rangeCount) == 0) { const K = document.createRange(); K.selectNodeContents(n.value.children[0]), (O = window.getSelection()) == null || O.addRange(K) } const L = (U = window.getSelection()) == null ? void 0 : U.getRangeAt(0); if (!L) return; L.deleteContents(); const T = w(); if (T) n.value.insertBefore(P, T), (q = window.getSelection()) == null || q.removeAllRanges(); else { n.value.appendChild(P); const K = document.createElement("span"); K.classList.add("text"), n.value.appendChild(K) } r() } function y(F, A) { if (F === void 0) return; const P = F.find(L => L.field === A[0]); if (P !== void 0) return A.length === 1 ? P : y(P.children, A.slice(1)) } function g(F, A) { F.innerText += A.innerText, A.remove() } function w() { var U, q, K, W; const F = (U = window.getSelection()) == null ? void 0 : U.getRangeAt(0); if (!F) return; const A = F.startContainer; if (A.nodeType !== Node.TEXT_NODE) return; const P = A.parentElement; if (!P || !(P instanceof HTMLSpanElement) || !P.classList.contains("text")) return; const L = F.startOffset, T = ((q = P.textContent) == null ? void 0 : q.substr(0, L)) || "", N = ((K = P.textContent) == null ? void 0 : K.substr(L)) || ""; P.innerText = T; const O = document.createElement("span"); return O.classList.add("text"), O.innerText = N, (W = n.value) == null || W.insertBefore(O, P.nextSibling), O } function h() { if (!n.value) return null; const F = Array.from(n.value.childNodes).reduce((A, P) => { const L = P, T = L.tagName; return T && T.toLowerCase() === "button" ? A += `{{${L.dataset.field}}}` : "textContent" in L ? A += L.textContent : A += "" }, ""); return e.nullable === !0 && F === "" ? null : F } function k() { if (!!n.value) { if (e.modelValue === null || e.modelValue === "") { n.value.innerHTML = '<span class="text"></span>'; return } if (e.modelValue !== h()) { const F = /({{.*?}})/g, A = e.modelValue.split(F).map(P => { if (P.startsWith("{{") === !1) return `<span class="text">${P}</span>`; const L = P.replace(/({|})/g, "").trim(), T = L.split("."); for (let O = 0; O < T.length; O++)s(T.slice(0, O).join(".")); const N = y(o.value, T); return N ? `<button contenteditable="false" data-field="${L}" disabled="${e.disabled}">${N.name}</button>` : "" }).join(""); n.value.innerHTML = A } } } } }), CL = e => (Qe("data-v-56ccf414"), e = e(), Xe(), e), VL = ["contenteditable"], FL = CL(() => S("span", { class: "text" }, null, -1)), AL = [FL], IL = { key: 0, class: "placeholder" }; function EL(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("field-list-item"), p = c("v-list"), f = c("v-menu"); return m(), C(f, { modelValue: e.menuActive, "onUpdate:modelValue": t[4] || (t[4] = v => e.menuActive = v), attached: "" }, { activator: d(({ toggle: v }) => [a(s, { disabled: e.disabled }, { input: d(() => [S("span", { ref: "contentEl", class: "content", contenteditable: !e.disabled, onKeydown: t[0] || (t[0] = (..._) => e.onKeyDown && e.onKeyDown(..._)), onInput: t[1] || (t[1] = (..._) => e.onInput && e.onInput(..._)), onClick: t[2] || (t[2] = (..._) => e.onClick && e.onClick(..._)) }, AL, 40, VL), e.placeholder && !e.modelValue ? (m(), I("span", IL, b(e.placeholder), 1)) : R("", !0)]), append: d(() => [a(o, { name: "add_box", outline: "", clickable: "", disabled: e.disabled, onClick: v }, null, 8, ["disabled", "onClick"])]), _: 2 }, 1032, ["disabled"])]), default: d(() => [e.disabled ? R("", !0) : (m(), C(p, { key: 0, mandatory: !1, onToggle: t[3] || (t[3] = v => e.loadFieldRelations(v.value)) }, { default: d(() => [(m(!0), I(se, null, he(e.treeList, v => (m(), C(r, { key: v.field, field: v, depth: e.depth, onAdd: e.addField }, null, 8, ["field", "depth", "onAdd"]))), 128))]), _: 1 }))]), _: 1 }, 8, ["modelValue"]) } var DL = B(SL, [["render", EL], ["__scopeId", "data-v-56ccf414"]]); const TL = z({ props: { batchMode: { type: Boolean, default: !1 }, batchActive: { type: Boolean, default: !1 }, field: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, toggle: { type: Function, required: !0 }, active: { type: Boolean, default: !1 }, edited: { type: Boolean, default: !1 }, hasError: { type: Boolean, default: !1 }, badge: { type: String, default: null }, loading: { type: Boolean, default: !1 } }, emits: ["toggle-batch"], setup() { const { t: e } = x(); return { t: e } } }); function PL(e, t, n, l, i, u) { var f; const o = c("v-checkbox"), s = c("v-icon"), r = c("v-chip"), p = we("tooltip"); return m(), I("div", { class: de(["label type-label", { disabled: e.disabled, edited: e.edited && !e.batchMode && !e.hasError && !e.loading }]) }, [e.batchMode ? (m(), C(o, { key: 0, "model-value": e.batchActive, value: e.field.field, "onUpdate:modelValue": t[0] || (t[0] = v => e.$emit("toggle-batch", e.field)) }, null, 8, ["model-value", "value"])) : R("", !0), ee(S("span", { class: "field-name", onClick: t[1] || (t[1] = (...v) => e.toggle && e.toggle(...v)) }, [D(b(e.field.name) + " ", 1), ((f = e.field.meta) == null ? void 0 : f.required) === !0 ? (m(), C(s, { key: 0, class: "required", sup: "", name: "star" })) : R("", !0), e.disabled ? R("", !0) : (m(), C(s, { key: 1, class: de(["ctx-arrow", { active: e.active }]), name: "arrow_drop_down" }, null, 8, ["class"]))], 512), [[p, e.edited ? e.t("edited") : null]]), e.badge ? (m(), C(r, { key: 1, "x-small": "" }, { default: d(() => [D(b(e.badge), 1)]), _: 1 })) : R("", !0)], 2) } var OL = B(TL, [["render", PL], ["__scopeId", "data-v-792c5ca7"]]); const LL = z({ props: { field: { type: Object, required: !0 }, modelValue: { type: [String, Number, Object, Array, Boolean], default: null }, initialValue: { type: [String, Number, Object, Array, Boolean], default: null } }, emits: ["update:modelValue", "unset", "edit-raw"], setup(e) { const { t } = x(), n = V(() => { var u, o; const i = (o = (u = e.field) == null ? void 0 : u.schema) == null ? void 0 : o.default_value; return i !== void 0 ? i : null }), l = V(() => { var i, u; return ((u = (i = e.field) == null ? void 0 : i.schema) == null ? void 0 : u.is_nullable) === !1 }); return { t, defaultValue: n, isRequired: l } } }); function jL(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("v-list"); return m(), C(f, null, { default: d(() => [e.defaultValue === null || !e.isRequired ? (m(), C(p, { key: 0, disabled: e.modelValue === null, clickable: "", onClick: t[0] || (t[0] = v => e.$emit("update:modelValue", null)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "delete_outline" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("clear_value")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])) : R("", !0), e.defaultValue !== null ? (m(), C(p, { key: 1, disabled: e.modelValue === e.defaultValue, clickable: "", onClick: t[1] || (t[1] = v => e.$emit("update:modelValue", e.defaultValue)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "settings_backup_restore" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("reset_to_default")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])) : R("", !0), e.initialValue ? (m(), C(p, { key: 2, disabled: e.initialValue === void 0 || e.modelValue === e.initialValue, clickable: "", onClick: t[2] || (t[2] = v => e.$emit("unset", e.field)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "undo" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("undo_changes")), 1)]), _: 1 })]), _: 1 }, 8, ["disabled"])) : R("", !0), a(p, { clickable: "", onClick: t[3] || (t[3] = v => e.$emit("edit-raw")) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: "code" })]), _: 1 }), a(r, null, { default: d(() => [D(b(e.t("raw_value")), 1)]), _: 1 })]), _: 1 })]), _: 1 }) } var RL = B(LL, [["render", jL]]); const ML = z({ props: { field: { type: Object, required: !0 }, batchMode: { type: Boolean, default: !1 }, batchActive: { type: Boolean, default: !1 }, primaryKey: { type: [Number, String], default: null }, modelValue: { type: [String, Number, Object, Array, Boolean], default: void 0 }, loading: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, autofocus: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e) { const { t } = x(), { interfaces: n } = St(), l = V(() => !!n.value.find(i => { var u, o; return i.id === ((o = (u = e.field) == null ? void 0 : u.meta) == null ? void 0 : o.interface) || "input" })); return { t, interfaceExists: l, getDefaultInterfaceForType: vs } } }); function UL(e, t, n, l, i, u) { var r; const o = c("v-skeleton-loader"), s = c("v-notice"); return m(), I("div", { class: de(["interface", { subdued: e.batchMode && e.batchActive === !1 }]) }, [e.loading && e.field.hideLoader !== !0 ? (m(), C(o, { key: 0 })) : R("", !0), e.interfaceExists ? (m(), C(Ne(e.field.meta && e.field.meta.interface ? `interface-${e.field.meta.interface}` : `interface-${e.getDefaultInterfaceForType(e.field.type)}`), dt({ key: 1 }, e.field.meta && e.field.meta.options || {}, { autofocus: e.disabled !== !0 && e.autofocus, disabled: e.disabled, loading: e.loading, value: e.modelValue === void 0 ? (r = e.field.schema) == null ? void 0 : r.default_value : e.modelValue, width: e.field.meta && e.field.meta.width || "full", type: e.field.type, collection: e.field.collection, field: e.field.field, "field-data": e.field, "primary-key": e.primaryKey, length: e.field.schema && e.field.schema.max_length, onInput: t[0] || (t[0] = p => e.$emit("update:modelValue", p)) }), null, 16, ["autofocus", "disabled", "loading", "value", "width", "type", "collection", "field", "field-data", "primary-key", "length"])) : (m(), C(s, { key: 2, type: "warning" }, { default: d(() => [D(b(e.t("interface_not_found", { interface: e.field.meta && e.field.meta.interface })), 1)]), _: 1 }))], 2) } var NL = B(ML, [["render", UL], ["__scopeId", "data-v-175a2f1a"]]); function BL(e) { return ["bigInteger", "integer", "float", "decimal"].includes(e) ? "number" : ["string", "text", "uuid", "hash"].includes(e) ? "string" : ["boolean"].includes(e) ? "boolean" : ["time", "timestamp", "date", "dateTime"].includes(e) ? "string" : ["json", "csv"].includes(e) ? "object" : "undefined" } const qL = z({ components: { FormFieldLabel: OL, FormFieldMenu: RL, FormFieldInterface: NL }, props: { field: { type: Object, required: !0 }, batchMode: { type: Boolean, default: !1 }, batchActive: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, modelValue: { type: [String, Number, Object, Array, Boolean], default: void 0 }, initialValue: { type: [String, Number, Object, Array, Boolean], default: void 0 }, primaryKey: { type: [String, Number], default: null }, loading: { type: Boolean, default: !1 }, validationError: { type: Object, default: null }, autofocus: { type: Boolean, default: !1 }, badge: { type: String, default: null } }, emits: ["toggle-batch", "unset", "update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = V(() => { var _, y; return !!(e.disabled || ((y = (_ = e.field) == null ? void 0 : _.meta) == null ? void 0 : y.readonly) === !0 || e.batchMode && e.batchActive === !1) }), i = V(() => { var y, g; const _ = (g = (y = e.field) == null ? void 0 : y.schema) == null ? void 0 : g.default_value; if (_ !== void 0) return _ }), u = V(() => e.modelValue !== void 0 ? e.modelValue : e.initialValue !== void 0 ? e.initialValue : i.value), o = V(() => e.modelValue !== void 0 && M.exports.isEqual(e.modelValue, e.initialValue) === !1), { showRaw: s, rawValue: r } = v(), p = V(() => e.validationError ? e.validationError.code === "RECORD_NOT_UNIQUE" ? n("validationError.unique") : n(`validationError.${e.validationError.type}`, e.validationError) : null); return { t: n, isDisabled: l, internalValue: u, emitValue: f, showRaw: s, rawValue: r, validationMessage: p, isEdited: o }; function f(_) { (M.exports.isEqual(_, e.initialValue) || e.initialValue === void 0 && M.exports.isEqual(_, i.value)) && e.batchMode === !1 ? t("unset", e.field) : t("update:modelValue", _) } function v() { const _ = E(!1), y = V(() => BL(e.field.type)), g = V({ get() { switch (y.value) { case "object": return JSON.stringify(u.value, null, "	"); case "string": case "number": case "boolean": default: return u.value } }, set(w) { switch (y.value) { case "string": t("update:modelValue", w); break; case "number": t("update:modelValue", Number(w)); break; case "boolean": t("update:modelValue", w === "true"); break; case "object": t("update:modelValue", JSON.parse(w)); break; default: t("update:modelValue", w); break } } }); return { showRaw: _, rawValue: g } } } }), zL = { key: 1, class: "label-spacer" }, KL = { key: 2, class: "type-note" }, HL = { key: 3, class: "validation-error" }; function WL(e, t, n, l, i, u) { var F; const o = c("form-field-label"), s = c("form-field-menu"), r = c("v-menu"), p = c("form-field-interface"), f = c("v-card-title"), v = c("v-textarea"), _ = c("v-card-text"), y = c("v-button"), g = c("v-card-actions"), w = c("v-card"), h = c("v-dialog"), k = we("md"); return m(), I("div", { key: e.field.field, class: de(["field", [((F = e.field.meta) == null ? void 0 : F.width) || "full", { invalid: e.validationError }]]) }, [e.field.hideLabel !== !0 ? (m(), C(r, { key: 0, placement: "bottom-start", "show-arrow": "", disabled: e.isDisabled }, { activator: d(({ toggle: A, active: P }) => [a(o, { field: e.field, toggle: A, active: P, disabled: e.isDisabled, "batch-mode": e.batchMode, "batch-active": e.batchActive, edited: e.isEdited, "has-error": !!e.validationError, badge: e.badge, loading: e.loading, onToggleBatch: t[0] || (t[0] = L => e.$emit("toggle-batch", L)) }, null, 8, ["field", "toggle", "active", "disabled", "batch-mode", "batch-active", "edited", "has-error", "badge", "loading"])]), default: d(() => [a(s, { field: e.field, "model-value": e.internalValue, "initial-value": e.initialValue, "onUpdate:modelValue": t[1] || (t[1] = A => e.emitValue(A)), onUnset: t[2] || (t[2] = A => e.$emit("unset", A)), onEditRaw: t[3] || (t[3] = A => e.showRaw = !0) }, null, 8, ["field", "model-value", "initial-value"])]), _: 1 }, 8, ["disabled"])) : ["full", "fill"].includes(e.field.meta && e.field.meta.width) === !1 ? (m(), I("div", zL)) : R("", !0), a(p, { autofocus: e.autofocus, "model-value": e.internalValue, field: e.field, loading: e.loading, "batch-mode": e.batchMode, "batch-active": e.batchActive, disabled: e.isDisabled, "primary-key": e.primaryKey, "onUpdate:modelValue": t[4] || (t[4] = A => e.emitValue(A)) }, null, 8, ["autofocus", "model-value", "field", "loading", "batch-mode", "batch-active", "disabled", "primary-key"]), a(h, { modelValue: e.showRaw, "onUpdate:modelValue": t[7] || (t[7] = A => e.showRaw = A), onEsc: t[8] || (t[8] = A => e.showRaw = !1) }, { default: d(() => [a(w, null, { default: d(() => [a(f, null, { default: d(() => [D(b(e.t("edit_raw_value")), 1)]), _: 1 }), a(_, null, { default: d(() => [a(v, { modelValue: e.rawValue, "onUpdate:modelValue": t[5] || (t[5] = A => e.rawValue = A), class: "raw-value", placeholder: e.t("enter_raw_value") }, null, 8, ["modelValue", "placeholder"])]), _: 1 }), a(g, null, { default: d(() => [a(y, { onClick: t[6] || (t[6] = A => e.showRaw = !1) }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]), e.field.meta && e.field.meta.note ? ee((m(), I("small", KL, null, 512)), [[k, e.field.meta.note]]) : R("", !0), e.validationError ? (m(), I("small", HL, b(e.validationMessage), 1)) : R("", !0)], 2) } var GL = B(qL, [["render", WL], ["__scopeId", "data-v-5157b788"]]); const JL = z({ name: "VForm", components: { FormField: GL }, props: { collection: { type: String, default: void 0 }, fields: { type: Array, default: void 0 }, initialValues: { type: Object, default: null }, modelValue: { type: Object, default: null }, loading: { type: Boolean, default: !1 }, batchMode: { type: Boolean, default: !1 }, primaryKey: { type: [String, Number], default: null }, disabled: { type: Boolean, default: !1 }, validationErrors: { type: Array, default: () => [] }, autofocus: { type: Boolean, default: !1 }, group: { type: String, default: null }, badge: { type: String, default: null } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { t: n } = x(), l = Pe(), i = V(() => Object.assign({}, e.initialValues, e.modelValue)), u = E(), { width: o } = Qn(u), s = V(() => u.value === null ? null : o.value > 792 ? "grid with-fill" : "grid"), { formFields: r, getFieldsForGroup: p, fieldsForGroup: f, isDisabled: v } = h(), { toggleBatchField: _, batchActiveFields: y } = P(), g = V(() => { var L; for (let T = 0; T < r.value.length; T++)if (r.value[T].meta && !((L = r.value[T].meta) == null ? void 0 : L.readonly)) return T; return null }), w = V(() => { const L = p(e.group), T = L.map(O => O.field), N = r.value.map(O => O.field); return e.validationErrors.filter(O => { var q, K; let U = N.includes(O.field) === !1 && T.includes(O.field); return e.group === null && (U = U && ((K = (q = L.find(W => W.field === O.field)) == null ? void 0 : q.meta) == null ? void 0 : K.group) === null), U }) }); return Zt("values", i), { t: n, formFields: r, values: i, setValue: k, batchActiveFields: y, toggleBatchField: _, unsetValue: A, unknownValidationErrors: w, firstEditableFieldIndex: g, isNil: M.exports.isNil, apply: F, el: u, gridClass: s, omit: M.exports.omit, getFieldsForGroup: p, fieldsForGroup: f, isDisabled: v }; function h() { const L = V(() => { if (e.collection) return l.getFieldsForCollection(e.collection); if (e.fields) return e.fields; throw new Error("[v-form]: You need to pass either the collection or fields prop.") }), T = V(() => L.value.reduce(function (te, G) { var X, ve; return ((X = G.schema) == null ? void 0 : X.default_value) !== void 0 && !(G.schema.is_primary_key && G.schema.data_type === "integer" && typeof G.schema.default_value == "string") && (te[G.field] = (ve = G.schema) == null ? void 0 : ve.default_value), te }, {})), N = V(() => { if (e.group !== null) return L.value; const te = X => { var ve, ae; if (((ve = X.schema) == null ? void 0 : ve.has_auto_increment) === !0 || ((ae = X.schema) == null ? void 0 : ae.is_primary_key) === !0 && e.primaryKey !== "+") { const ne = M.exports.cloneDeep(X); return ne.meta || (ne.meta = {}), ne.meta.readonly = !0, ne } return X }, G = Object.assign({}, T.value, i.value); return L.value.map(X => Ia(G, te(X))) }), O = V(() => N.value.filter(te => { var G, X; return ((G = te.meta) == null ? void 0 : G.group) === e.group || e.group === null && M.exports.isNil((X = te.meta) == null ? void 0 : X.group) })), { formFields: U } = _s(O), q = V(() => U.value.map(te => W(te.meta.field))); return { formFields: U, isDisabled: K, getFieldsForGroup: W, fieldsForGroup: q }; function K(te) { var G, X; return e.loading || e.disabled === !0 || ((G = te.meta) == null ? void 0 : G.readonly) === !0 || ((X = te.schema) == null ? void 0 : X.is_generated) === !0 || e.batchMode && y.value.includes(te.field) === !1 } function W(te) { var X, ve; const G = N.value.filter(ae => { var ne; return ((ne = ae.meta) == null ? void 0 : ne.group) === te || te === null && M.exports.isNil(ae.meta) }); for (const ae of G) ((ve = (X = ae.meta) == null ? void 0 : X.special) == null ? void 0 : ve.includes("group")) && G.push(...W(ae.meta.field)); return G } } function k(L, T) { const N = e.modelValue ? M.exports.cloneDeep(e.modelValue) : {}; N[L.field] = T, t("update:modelValue", N) } function F(L) { t("update:modelValue", M.exports.pick(M.exports.assign({}, e.modelValue, L), Object.keys(L))) } function A(L) { if (L.field in (e.modelValue || {})) { const T = re({}, e.modelValue); delete T[L.field], t("update:modelValue", T) } } function P() { const L = E([]); return { batchActiveFields: L, toggleBatchField: T }; function T(N) { var O; L.value.includes(N.field) ? (L.value = L.value.filter(U => U !== N.field), A(N)) : (L.value = [...L.value, N.field], k(N, (O = N.schema) == null ? void 0 : O.default_value)) } } } }), QL = { key: 0 }; function XL(e, t, n, l, i, u) { const o = c("v-notice"), s = c("form-field"); return m(), I("div", { ref: "el", class: de(["v-form", e.gridClass]) }, [e.unknownValidationErrors.length > 0 ? (m(), C(o, { key: 0, type: "danger", class: "full" }, { default: d(() => [S("div", null, [S("p", null, b(e.t("unknown_validation_errors")), 1), S("ul", null, [(m(!0), I(se, null, he(e.unknownValidationErrors, (r, p) => (m(), I("li", { key: p }, [r.field ? (m(), I("strong", QL, b(r.field) + ":", 1)) : R("", !0), r.code === "RECORD_NOT_UNIQUE" ? (m(), I(se, { key: 1 }, [D(b(e.t("validationError.unique", r)), 1)], 64)) : (m(), I(se, { key: 2 }, [D(b(e.t(`validationError.${r.code}`, r)), 1)], 64))]))), 128))])])]), _: 1 })) : R("", !0), (m(!0), I(se, null, he(e.formFields, (r, p) => { var f, v, _, y, g, w, h; return m(), I(se, null, [((v = (f = r.meta) == null ? void 0 : f.special) == null ? void 0 : v.includes("group")) ? ee((m(), C(Ne(`interface-${((_ = r.meta) == null ? void 0 : _.interface) || "group-standard"}`), dt({ key: 0, key: r.field, class: ((y = r.meta) == null ? void 0 : y.width) || "full", field: r, fields: e.fieldsForGroup[p], values: e.modelValue || {}, "initial-values": e.initialValues || {}, disabled: e.disabled, "batch-mode": e.batchMode, "batch-active-fields": e.batchActiveFields, "primary-key": e.primaryKey, loading: e.loading, "validation-errors": e.validationErrors }, ((g = r.meta) == null ? void 0 : g.options) || {}, { onApply: e.apply }), null, 16, ["class", "field", "fields", "values", "initial-values", "disabled", "batch-mode", "batch-active-fields", "primary-key", "loading", "validation-errors", "onApply"])), [[Et, !((w = r.meta) == null ? void 0 : w.hidden)]]) : ee((m(), C(s, { key: r.field, field: r, autofocus: p === e.firstEditableFieldIndex && e.autofocus, "model-value": (e.values || {})[r.field], "initial-value": (e.initialValues || {})[r.field], disabled: e.isDisabled(r), "batch-mode": e.batchMode, "batch-active": e.batchActiveFields.includes(r.field), "primary-key": e.primaryKey, loading: e.loading, "validation-error": e.validationErrors.find(k => k.field === r.field), badge: e.badge, "onUpdate:modelValue": k => e.setValue(r, k), onUnset: k => e.unsetValue(r), onToggleBatch: k => e.toggleBatchField(r) }, null, 8, ["field", "autofocus", "model-value", "initial-value", "disabled", "batch-mode", "batch-active", "primary-key", "loading", "validation-error", "badge", "onUpdate:modelValue", "onUnset", "onToggleBatch"])), [[Et, !((h = r.meta) == null ? void 0 : h.hidden)]])], 64) }), 256))], 2) } var ZL = B(JL, [["render", XL], ["__scopeId", "data-v-5c8cff5d"]]); const YL = z({ props: { closeDelay: { type: Number, default: 0 }, openDelay: { type: Number, default: 0 }, disabled: { type: Boolean, default: !1 }, tag: { type: String, default: "div" } }, setup(e) { const t = E(!1); return { hover: t, onMouseEnter: n, onMouseLeave: l }; function n() { e.disabled !== !0 && setTimeout(() => { t.value = !0 }, e.openDelay) } function l() { e.disabled !== !0 && setTimeout(() => { t.value = !1 }, e.closeDelay) } } }); function xL(e, t, n, l, i, u) { return m(), C(Ne(e.tag), { onMouseenter: e.onMouseEnter, onMouseleave: e.onMouseLeave }, { default: d(() => [ye(e.$slots, "default", Je(xe({ hover: e.hover })))]), _: 3 }, 8, ["onMouseenter", "onMouseleave"]) } var ej = B(YL, [["render", xL]]); const tj = z({ name: "VHighlight", props: { query: { type: [String, Array], default: null }, text: { type: String, default: "" } }, setup(e) { return { parts: V(() => { let n = sa(e.text.toLowerCase()); const l = vl(e.query); if (l.length === 0) return [{ highlighted: !1, text: e.text }]; const i = M.exports.flatten(l.filter(f => f).map(f => { f = sa(f.toLowerCase()); const v = []; let _ = 0, y = n.indexOf(f, _); for (; y > -1;)_ = y + f.length, v.push([y, _]), y = n.indexOf(f, y + 1); return v })); if (i.sort((f, v) => f[0] !== v[0] ? f[0] - v[0] : f[1] - v[1]), i.length === 0) return [{ highlighted: !1, text: e.text }]; const u = []; let o = i[0][0], s = i[0][1]; i.shift(); for (const [f, v] of i) f >= s ? (u.push([o, s]), o = f, s = v) : v > s && (s = v); u.push([o, s]); let r = 0; const p = []; for (const [f, v] of u) r !== f && p.push({ highlighted: !1, text: e.text.slice(r, f) }), p.push({ highlighted: !0, text: e.text.slice(f, v) }), r = v; return r !== n.length && p.push({ highlighted: !1, text: e.text.slice(r) }), p }) } } }); function nj(e, t, n, l, i, u) { return m(!0), I(se, null, he(e.parts, ({ highlighted: o, text: s }, r) => (m(), I(se, null, [o ? (m(), I("mark", { key: r, class: "highlight" }, b(s), 1)) : (m(), I(se, { key: 1 }, [D(b(s), 1)], 64))], 64))), 256) } var lj = B(tj, [["render", nj], ["__scopeId", "data-v-40e82be6"]]); const oj = {}, aj = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, ij = S("path", { "fill-rule": "evenodd", "clip-rule": "evenodd", d: "M19.2 14.15a1.8 1.8 0 01-.35-.12c-.1-.05-.14-.18-.13-.3.02-.41-.01-.78.03-1.2.18-1.85 1.38-1.26 2.46-1.57.58-.16 1.17-.47 1.42-1.06.07-.16.02-.35-.1-.48a13.66 13.66 0 00-2.27-1.98 14.25 14.25 0 00-9.85-2.31.2.2 0 00-.15.32A5.17 5.17 0 0011.93 7c.1.06.06.2-.06.18-.3-.06-.68-.18-1.06-.4a.43.43 0 00-.38-.05l-.44.18a.2.2 0 00-.05.34 5.32 5.32 0 006.14.42c.1-.06.25.07.22.18-.07.21-.15.52-.23.95-.48 2.37-1.87 2.18-3.58 1.59-3.36-1.19-5.3-.22-7-2.1-.19-.21-.5-.29-.7-.09a1.55 1.55 0 00.1 2.29c.15.12.36.07.5-.06.07-.06.13-.1.21-.14.1-.04.16.11.07.18-.4.33-.51.7-.76 1.48-.38 1.16-.22 2.36-1.98 2.67-.93.04-.91.66-1.25 1.58A5.2 5.2 0 01.3 18.27c-.4.41-.44 1.18.14 1.23.18 0 .36-.03.55-.1.99-.4 1.75-1.65 2.47-2.46.8-.9 2.72-.51 4.17-1.4.82-.48 1.3-1.1 1.08-2.07-.02-.12.12-.2.18-.09.1.2.18.41.23.63.05.22.25.39.47.4 1.36.1 3.02 1.3 4.63 1.88.32.11.56-.26.43-.57-.1-.24-.18-.48-.23-.7-.02-.13.16-.16.22-.05a3.5 3.5 0 002.88 1.88c.46.03.97-.02 1.5-.18.63-.18 1.22-.42 1.91-.3.52.1 1 .36 1.3.79.36.5 1.04.7 1.54.38.28-.19.29-.58.13-.87-1.14-2.08-3.61-2.25-4.7-2.52z" }, null, -1), sj = [ij]; function rj(e, t, n, l, i, u) { return m(), I("svg", aj, sj) } var dj = B(oj, [["render", rj]]); const uj = {}, cj = { viewBox: "0 0 24 24", width: "24", height: "24", fill: "none", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2", xmlns: "http://www.w3.org/2000/svg" }, pj = S("path", { d: "M18.38 3.6c-.38-.4-.83-.6-1.36-.6H6.98c-.53 0-1 .2-1.4.6-.38.42-.56.88-.56 1.42V21L12 18l6.98 3V5.02c0-.54-.2-1-.6-1.41zm-8.05 11.5l6.7-6.7-1.4-1.4-5.3 5.3-1.92-1.93L7 11.79l3.33 3.33z" }, null, -1), mj = [pj]; function fj(e, t, n, l, i, u) { return m(), I("svg", cj, mj) } var vj = B(uj, [["render", fj]]); const _j = {}, yj = { viewBox: "0 0 22 22", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, gj = S("path", { d: "M2.036 16.961l8.578 3.944a.886.886 0 00.772 0l8.576-3.944c.357-.164.536-.443.536-.836V5.875a.924.924 0 00-.016-.166v-.048a.95.95 0 00-.037-.118l-.014-.039a.91.91 0 00-.073-.138l-.021-.03a1.067 1.067 0 00-.081-.097l-.043-.03a.901.901 0 00-.102-.083l-.025-.018a1.003 1.003 0 00-.124-.069l-8.578-3.944a.886.886 0 00-.772 0L2.036 5.039a.935.935 0 00-.124.069l-.025.018a.901.901 0 00-.102.083l-.03.032a.915.915 0 00-.08.097l-.021.03a.916.916 0 00-.074.138l-.025.037a1.006 1.006 0 00-.037.118v.048a.924.924 0 00-.016.166v10.25c0 .393.178.671.534.836zm1.306-9.646l6.735 3.102v8.223l-6.735-3.104V7.315zm8.578 11.323v-8.221l6.735-3.102v8.223l-6.735 3.1zm-.921-15.7l6.376 2.937-6.376 2.937-6.376-2.937 6.376-2.937z" }, null, -1), hj = [gj]; function bj(e, t, n, l, i, u) { return m(), I("svg", yj, hj) } var $j = B(_j, [["render", bj]]); const wj = {}, kj = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, Sj = S("path", { d: "M10.588 13.412c.408.408.879.611 1.412.611.533 0 1.004-.203 1.412-.611.408-.408.611-.879.611-1.412 0-.533-.203-1.004-.611-1.412-.408-.408-.879-.612-1.412-.612-.533 0-1.004.204-1.412.612-.408.408-.612.879-.612 1.412 0 .533.204 1.004.612 1.412zM9.176 9.176C9.961 8.392 10.902 8 12 8c1.098 0 2.04.392 2.823 1.176C15.608 9.961 16 10.902 16 12c0 1.098-.392 2.04-1.177 2.823C14.04 15.608 13.098 16 12 16c-1.098 0-2.04-.392-2.824-1.177C8.392 14.04 8 13.098 8 12c0-1.098.392-2.04 1.176-2.824z" }, null, -1), Cj = S("path", { d: "M13 3v6h-2V3h2zM13 15v6h-2v-6h2z" }, null, -1), Vj = [Sj, Cj]; function Fj(e, t, n, l, i, u) { return m(), I("svg", kj, Vj) } var Aj = B(wj, [["render", Fj]]); const Ij = {}, Ej = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, Dj = S("path", { d: "M3 3h18v18H3z" }, null, -1), Tj = [Dj]; function Pj(e, t, n, l, i, u) { return m(), I("svg", Ej, Tj) } var Oj = B(Ij, [["render", Pj]]); const Lj = {}, jj = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, Rj = S("path", { d: "M11 2H2v9h9V2zm0 11H2v9h9v-9zm2-11h9v9h-9V2zm9 11h-9v9h9v-9z" }, null, -1), Mj = [Rj]; function Uj(e, t, n, l, i, u) { return m(), I("svg", jj, Mj) } var Nj = B(Lj, [["render", Uj]]); const Bj = {}, qj = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, zj = S("path", { d: "M1 1h6v6H1V1zm0 8h6v6H1V9zm6 8H1v6h6v-6zM9 1h6v6H9V1zm6 8H9v6h6V9zm-6 8h6v6H9v-6zM23 1h-6v6h6V1zm-6 8h6v6h-6V9zm6 8h-6v6h6v-6z" }, null, -1), Kj = [zj]; function Hj(e, t, n, l, i, u) { return m(), I("svg", qj, Kj) } var Wj = B(Bj, [["render", Hj]]); const Gj = {}, Jj = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, Qj = S("path", { d: "M6 3H3v3h3V3zm0 5H3v3h3V8zm-3 5h3v3H3v-3zm3 5H3v3h3v-3zM8 3h3v3H8V3zm3 5H8v3h3V8zm-3 5h3v3H8v-3zm3 5H8v3h3v-3zm2-15h3v3h-3V3zm3 5h-3v3h3V8zm-3 5h3v3h-3v-3zm3 5h-3v3h3v-3zm2-15h3v3h-3V3zm3 5h-3v3h3V8zm-3 5h3v3h-3v-3zm3 5h-3v3h3v-3z" }, null, -1), Xj = [Qj]; function Zj(e, t, n, l, i, u) { return m(), I("svg", Jj, Xj) } var Yj = B(Gj, [["render", Zj]]); const xj = {}, eR = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, tR = S("path", { d: "M3 3h2v2H3V3zm4 0h2v2H7V3zm0 4h2v2H7V7zm2 4H7v2h2v-2zm-2 4h2v2H7v-2zm2 4H7v2h2v-2zM5 7H3v2h2V7zm-2 4h2v2H3v-2zm2 4H3v2h2v-2zm-2 4h2v2H3v-2zM13 3h-2v2h2V3zm-2 4h2v2h-2V7zm2 4h-2v2h2v-2zm-2 4h2v2h-2v-2zm2 4h-2v2h2v-2zm2-16h2v2h-2V3zm2 4h-2v2h2V7zm-2 4h2v2h-2v-2zm2 4h-2v2h2v-2zm-2 4h2v2h-2v-2zm6-16h-2v2h2V3zm-2 4h2v2h-2V7zm2 4h-2v2h2v-2zm-2 4h2v2h-2v-2zm2 4h-2v2h2v-2z" }, null, -1), nR = [tR]; function lR(e, t, n, l, i, u) { return m(), I("svg", eR, nR) } var oR = B(xj, [["render", lR]]); const aR = {}, iR = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, sR = S("path", { d: "M5 4H4v1h1V4zm0 6H4v1h1v-1zm-1 6h1v1H4v-1zm1-9H4v1h1V7zm-1 6h1v1H4v-1zm1 6H4v1h1v-1zM7 4h1v1H7V4zm1 6H7v1h1v-1zm-1 6h1v1H7v-1zm1-9H7v1h1V7zm-1 6h1v1H7v-1zm1 6H7v1h1v-1zm2-15h1v1h-1V4zm1 6h-1v1h1v-1zm-1 6h1v1h-1v-1zm1-9h-1v1h1V7zm-1 6h1v1h-1v-1zm1 6h-1v1h1v-1zm2-15h1v1h-1V4zm1 6h-1v1h1v-1zm-1 6h1v1h-1v-1zm1-9h-1v1h1V7zm-1 6h1v1h-1v-1zm1 6h-1v1h1v-1zm2-15h1v1h-1V4zm1 6h-1v1h1v-1zm-1 6h1v1h-1v-1zm1-9h-1v1h1V7zm-1 6h1v1h-1v-1zm1 6h-1v1h1v-1zm2-15h1v1h-1V4zm1 6h-1v1h1v-1zm-1 6h1v1h-1v-1zm1-9h-1v1h1V7zm-1 6h1v1h-1v-1zm1 6h-1v1h1v-1z" }, null, -1), rR = [sR]; function dR(e, t, n, l, i, u) { return m(), I("svg", iR, rR) } var uR = B(aR, [["render", dR]]); const cR = {}, pR = { viewBox: "0 0 48 48", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, mR = S("path", { "fill-opacity": ".3", d: "M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z" }, null, -1), fR = S("path", { d: "M0 0h48v48H0z", fill: "none" }, null, -1), vR = S("path", { d: "M13.34 29.72l10.65 13.27.01.01.01-.01 10.65-13.27C34.13 29.31 30.06 26 24 26s-10.13 3.31-10.66 3.72z" }, null, -1), _R = [mR, fR, vR]; function yR(e, t, n, l, i, u) { return m(), I("svg", pR, _R) } var gR = B(cR, [["render", yR]]); const hR = {}, bR = { viewBox: "0 0 48 48", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, $R = S("path", { "fill-opacity": ".3", d: "M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z" }, null, -1), wR = S("path", { d: "M0 0h48v48H0z", fill: "none" }, null, -1), kR = S("path", { d: "M7.07 21.91l16.92 21.07.01.02.02-.02 16.92-21.07C40.08 21.25 33.62 16 24 16c-9.63 0-16.08 5.25-16.93 5.91z" }, null, -1), SR = [$R, wR, kR]; function CR(e, t, n, l, i, u) { return m(), I("svg", bR, SR) } var VR = B(hR, [["render", CR]]); const FR = {}, AR = { viewBox: "0 0 48 48", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, IR = S("path", { "fill-opacity": ".3", d: "M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z" }, null, -1), ER = S("path", { d: "M0 0h48v48H0z", fill: "none" }, null, -1), DR = S("path", { d: "M9.58 25.03l14.41 17.95.01.02.01-.02 14.41-17.95C37.7 24.47 32.2 20 24 20s-13.7 4.47-14.42 5.03z" }, null, -1), TR = [IR, ER, DR]; function PR(e, t, n, l, i, u) { return m(), I("svg", AR, TR) } var OR = B(FR, [["render", PR]]); const LR = {}, jR = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, RR = S("path", { d: "M 3 2 L 3 11 L 21 11 L 3 2 z M 5 5.2363281 L 12.527344 9 L 5 9 L 5 5.2363281 z M 3 13 L 3 22 L 21 13 L 3 13 z" }, null, -1), MR = [RR]; function UR(e, t, n, l, i, u) { return m(), I("svg", jR, MR) } var NR = B(LR, [["render", UR]]); const BR = {}, qR = { viewBox: "0 0 24 24", xmlns: "http://www.w3.org/2000/svg", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2" }, zR = S("path", { d: "M3,2 L3,11 L21,11 L3,2 Z M5,5.2363281 L12.527344,9 L5,9 L5,5.2363281 Z M3,13 L3,22 L21,13 L3,13 Z", transform: "translate(12.000000, 12.000000) rotate(-90.000000) translate(-12.000000, -12.000000) " }, null, -1), KR = [zR]; function HR(e, t, n, l, i, u) { return m(), I("svg", qR, KR) } var WR = B(BR, [["render", HR]]); const GR = {}, JR = { viewBox: "0 0 24 24", width: "24", height: "24", fill: "none", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2", xmlns: "http://www.w3.org/2000/svg" }, QR = S("path", { d: "M11.17 8l-2-2H4v12h16V8h-8.83zM4 4h6l2 2h8a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2l.01-12A2 2 0 014 4zm10.44 5l4 4-4 4v-3H11v-2h3.44V9z" }, null, -1), XR = [QR]; function ZR(e, t, n, l, i, u) { return m(), I("svg", JR, XR) } var YR = B(GR, [["render", ZR]]); const xR = {}, e7 = { viewBox: "0 0 24 24", width: "24", height: "24", fill: "none", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2", xmlns: "http://www.w3.org/2000/svg" }, t7 = Wr('<path d="M9.1875 6L11.1562 8.01562H20.0156V18H3.98438V6H9.1875ZM9.98438 3.98438H3.98438C2.90625 3.98438 2.01562 4.92188 2.01562 6V18C2.01562 19.0781 2.90625 20.0156 3.98438 20.0156H20.0156C21.0938 20.0156 21.9844 19.0781 21.9844 18V8.01562C21.9844 6.89062 21.0938 6 20.0156 6H12L9.98438 3.98438Z"></path><rect x="13" y="12" width="6" height="5" rx="1"></rect><rect x="17" y="11" width="1" height="1"></rect><rect x="14" y="11" width="1" height="1"></rect><path d="M17 11H18C18 9.89543 17.1046 9 16 9C14.8954 9 14 9.89543 14 11H15C15 10.4477 15.4477 10 16 10C16.5523 10 17 10.4477 17 11Z"></path>', 5), n7 = [t7]; function l7(e, t, n, l, i, u) { return m(), I("svg", e7, n7) } var o7 = B(xR, [["render", l7]]); const a7 = {}, i7 = { viewBox: "0 0 24 24", width: "24", height: "24", fill: "none", "fill-rule": "evenodd", "clip-rule": "evenodd", "stroke-linejoin": "round", "stroke-miterlimit": "2", xmlns: "http://www.w3.org/2000/svg" }, s7 = S("path", { d: "M0 0h24v24H0z", fill: "none" }, null, -1), r7 = S("path", { d: "M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4a2 2 0 00-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" }, null, -1), d7 = [s7, r7]; function u7(e, t, n, l, i, u) { return m(), I("svg", i7, d7) } var c7 = B(a7, [["render", u7]]); const p7 = z({ props: { name: { type: String, required: !0 } }, render() { const e = Gr(Jr({ prefix: "fab", iconName: this.name })); return Zo({ template: e == null ? void 0 : e.html[0] }) } }); Qr.add(Xr); const m7 = ["directus", "bookmark_save", "box", "commit_node", "grid_1", "grid_2", "grid_3", "grid_4", "grid_5", "grid_6", "signal_wifi_1_bar", "signal_wifi_2_bar", "signal_wifi_3_bar", "flip_horizontal", "flip_vertical", "folder_move", "folder_lock", "logout"], f7 = ["500px", "accessible_icon", "accusoft", "acquisitions_incorporated", "adn", "adversal", "affiliatetheme", "airbnb", "algolia", "alipay", "amazon", "amazon_pay", "amilia", "android", "angellist", "angrycreative", "angular", "app_store", "app_store_ios", "apper", "apple", "apple_pay", "artstation", "asymmetrik", "atlassian", "audible", "autoprefixer", "avianex", "aviato", "aws", "bandcamp", "battle_net", "behance", "behance_square", "bimobject", "bitbucket", "bitcoin", "bity", "black_tie", "blackberry", "blogger", "blogger_b", "bluetooth", "bluetooth_b", "bootstrap", "btc", "buffer", "buromobelexperte", "buy_n_large", "buysellads", "canadian_maple_leaf", "cc_amazon_pay", "cc_amex", "cc_apple_pay", "cc_diners_club", "cc_discover", "cc_jcb", "cc_mastercard", "cc_paypal", "cc_stripe", "cc_visa", "centercode", "centos", "chrome", "chromecast", "cloudflare", "cloudscale", "cloudsmith", "cloudversify", "codepen", "codiepie", "confluence", "connectdevelop", "contao", "cotton_bureau", "cpanel", "creative_commons", "creative_commons_by", "creative_commons_nc", "creative_commons_nc_eu", "creative_commons_nc_jp", "creative_commons_nd", "creative_commons_pd", "creative_commons_pd_alt", "creative_commons_remix", "creative_commons_sa", "creative_commons_sampling", "creative_commons_sampling_plus", "creative_commons_share", "creative_commons_zero", "critical_role", "css3", "css3_alt", "cuttlefish", "d_and_d", "d_and_d_beyond", "dailymotion", "dashcube", "deezer", "delicious", "deploydog", "deskpro", "dev", "deviantart", "dhl", "diaspora", "digg", "digital_ocean", "discord", "discourse", "dochub", "docker", "draft2digital", "dribbble", "dribbble_square", "dropbox", "drupal", "dyalog", "earlybirds", "ebay", "edge", "edge_legacy", "elementor", "ello", "ember", "empire", "envira", "erlang", "ethereum", "etsy", "evernote", "expeditedssl", "facebook", "facebook_f", "facebook_messenger", "facebook_square", "fantasy_flight_games", "fedex", "fedora", "figma", "firefox", "firefox_browser", "first_order", "first_order_alt", "firstdraft", "flickr", "flipboard", "fly", "font_awesome", "font_awesome_alt", "font_awesome_flag", "fonticons", "fonticons_fi", "fort_awesome", "fort_awesome_alt", "forumbee", "foursquare", "free_code_camp", "freebsd", "fulcrum", "galactic_republic", "galactic_senate", "get_pocket", "gg", "gg_circle", "git", "git_alt", "git_square", "github", "github_alt", "github_square", "gitkraken", "gitlab", "gitter", "glide", "glide_g", "gofore", "goodreads", "goodreads_g", "google", "google_drive", "google_pay", "google_play", "google_plus", "google_plus_g", "google_plus_square", "google_wallet", "gratipay", "grav", "gripfire", "grunt", "guilded", "gulp", "hacker_news", "hacker_news_square", "hackerrank", "hips", "hire_a_helper", "hive", "hooli", "hornbill", "hotjar", "houzz", "html5", "hubspot", "ideal", "imdb", "innosoft", "instagram", "instagram_square", "instalod", "intercom", "internet_explorer", "invision", "ioxhost", "itch_io", "itunes", "itunes_note", "java", "jedi_order", "jenkins", "jira", "joget", "joomla", "js", "js_square", "jsfiddle", "kaggle", "keybase", "keycdn", "kickstarter", "kickstarter_k", "korvue", "laravel", "lastfm", "lastfm_square", "leanpub", "less", "line", "linkedin", "linkedin_in", "linode", "linux", "lyft", "magento", "mailchimp", "mandalorian", "markdown", "mastodon", "maxcdn", "mdb", "medapps", "medium", "medium_m", "medrt", "meetup", "megaport", "mendeley", "microblog", "microsoft", "mix", "mixcloud", "mixer", "mizuni", "modx", "monero", "napster", "neos", "nimblr", "node", "node_js", "npm", "ns8", "nutritionix", "octopus_deploy", "odnoklassniki", "odnoklassniki_square", "old_republic", "opencart", "openid", "opera", "optin_monster", "orcid", "osi", "page4", "pagelines", "palfed", "patreon", "paypal", "penny_arcade", "perbyte", "periscope", "phabricator", "phoenix_framework", "phoenix_squadron", "php", "pied_piper", "pied_piper_alt", "pied_piper_hat", "pied_piper_pp", "pied_piper_square", "pinterest", "pinterest_p", "pinterest_square", "playstation", "product_hunt", "pushed", "python", "qq", "quinscape", "quora", "r_project", "raspberry_pi", "ravelry", "react", "reacteurope", "readme", "rebel", "red_river", "reddit", "reddit_alien", "reddit_square", "redhat", "renren", "replyd", "researchgate", "resolving", "rev", "rocketchat", "rockrms", "rust", "safari", "salesforce", "sass", "schlix", "scribd", "searchengin", "sellcast", "sellsy", "servicestack", "shirtsinbulk", "shopify", "shopware", "simplybuilt", "sistrix", "sith", "sketch", "skyatlas", "skype", "slack", "slack_hash", "slideshare", "snapchat", "snapchat_ghost", "snapchat_square", "soundcloud", "sourcetree", "speakap", "speaker_deck", "spotify", "squarespace", "stack_exchange", "stack_overflow", "stackpath", "staylinked", "steam", "steam_square", "steam_symbol", "sticker_mule", "strava", "stripe", "stripe_s", "studiovinari", "stumbleupon", "stumbleupon_circle", "superpowers", "supple", "suse", "swift", "symfony", "teamspeak", "telegram", "telegram_plane", "tencent_weibo", "the_red_yeti", "themeco", "themeisle", "think_peaks", "tiktok", "trade_federation", "trello", "tumblr", "tumblr_square", "twitch", "twitter", "twitter_square", "typo3", "uber", "ubuntu", "uikit", "umbraco", "uncharted", "uniregistry", "unity", "unsplash", "untappd", "ups", "usb", "usps", "ussunnah", "vaadin", "viacoin", "viadeo", "viadeo_square", "viber", "vimeo", "vimeo_square", "vimeo_v", "vine", "vk", "vnv", "vuejs", "watchman_monitoring", "waze", "weebly", "weibo", "weixin", "whatsapp", "whatsapp_square", "whmcs", "wikipedia_w", "windows", "wix", "wizards_of_the_coast", "wodu", "wolf_pack_battalion", "wordpress", "wordpress_simple", "wpbeginner", "wpexplorer", "wpforms", "wpressr", "xbox", "xing", "xing_square", "y_combinator", "yahoo", "yammer", "yandex", "yandex_international", "yarn", "yelp", "yoast", "youtube", "youtube_square", "zhihu"], v7 = z({ components: { CustomIconDirectus: dj, CustomIconBookmarkSave: vj, CustomIconBox: $j, CustomIconCommitNode: Aj, CustomIconGrid1: Oj, CustomIconGrid2: Nj, CustomIconGrid3: Wj, CustomIconGrid4: Yj, CustomIconGrid5: oR, CustomIconGrid6: uR, CustomIconSignalWifi1Bar: gR, CustomIconSignalWifi2Bar: VR, CustomIconSignalWifi3Bar: OR, CustomIconFlipHorizontal: NR, CustomIconFlipVertical: WR, CustomIconFolderMove: YR, CustomIconFolderLock: o7, CustomIconLogout: c7, SocialIcon: p7 }, props: re({ name: { type: String, required: !0 }, filled: { type: Boolean, default: !1 }, sup: { type: Boolean, default: !1 }, left: { type: Boolean, default: !1 }, right: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !1 }, color: { type: String, default: null } }, nl), emits: ["click"], setup(e, { emit: t }) { const n = V(() => e.sup ? "sup" : ll(e).value), l = V(() => m7.includes(e.name) ? `custom-icon-${e.name}`.replace(/_/g, "-") : null), i = V(() => f7.includes(e.name) ? e.name.replace(/_/g, "-") : null); return { sizeClass: n, customIconName: l, socialIconName: i, emitClick: u }; function u(o) { e.disabled || t("click", o) } } }), _7 = ["role", "tabindex"]; function y7(e, t, n, l, i, u) { const o = c("socialIcon"); return m(), I("span", { class: de(["v-icon", [e.sizeClass, { "has-click": !e.disabled && e.clickable, left: e.left, right: e.right }]]), role: e.clickable ? "button" : null, tabindex: e.clickable ? 0 : null, style: Ke({ "--v-icon-color": e.color }), onClick: t[0] || (t[0] = (...s) => e.emitClick && e.emitClick(...s)) }, [e.customIconName ? (m(), C(Ne(e.customIconName), { key: 0 })) : e.socialIconName ? (m(), C(o, { key: 1, name: e.socialIconName }, null, 8, ["name"])) : (m(), I("i", { key: 2, class: de({ filled: e.filled }) }, b(e.name), 3))], 14, _7) } var g7 = B(v7, [["render", y7], ["__scopeId", "data-v-73a3c90f"]]); const h7 = z({ props: { icon: { type: String, default: "box" }, title: { type: String, required: !0 }, type: { type: String, default: "info" }, center: { type: Boolean, default: !1 } } }), b7 = { class: "icon" }, $7 = { class: "title type-title" }, w7 = { class: "content" }; function k7(e, t, n, l, i, u) { const o = c("v-icon"); return m(), I("div", { class: de(["v-info", [e.type, { center: e.center }]]) }, [S("div", b7, [a(o, { large: "", name: e.icon, outline: "" }, null, 8, ["name"])]), S("h2", $7, b(e.title), 1), S("p", w7, [ye(e.$slots, "default", {}, void 0, !0)]), ye(e.$slots, "append", {}, void 0, !0)], 2) } var S7 = B(h7, [["render", k7], ["__scopeId", "data-v-0b8e46a0"]]); const C7 = z({ inheritAttrs: !1, props: { autofocus: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !1 }, prefix: { type: String, default: null }, suffix: { type: String, default: null }, fullWidth: { type: Boolean, default: !0 }, placeholder: { type: [String, Number], default: null }, modelValue: { type: [String, Number], default: null }, nullable: { type: Boolean, default: !0 }, slug: { type: Boolean, default: !1 }, slugSeparator: { type: String, default: "-" }, type: { type: String, default: "text" }, hideArrows: { type: Boolean, default: !1 }, max: { type: Number, default: null }, min: { type: Number, default: null }, step: { type: Number, default: 1 }, active: { type: Boolean, default: !1 }, dbSafe: { type: Boolean, default: !1 }, trim: { type: Boolean, default: !1 }, autocomplete: { type: String, default: "off" } }, emits: ["click", "keydown", "update:modelValue", "focus"], setup(e, { emit: t, attrs: n }) { const l = E(null), i = V(() => ({ input: v, keydown: p, blur: g => { f(), typeof n.onBlur == "function" && n.onBlur(g) }, focus: g => t("focus", g) })), u = V(() => M.exports.omit(n, ["class"])), o = V(() => [{ "full-width": e.fullWidth, "has-click": e.clickable, disabled: e.disabled }, ...(n.class || "").split(" ")]), s = V(() => e.disabled === !1 && (e.max === null || parseInt(String(e.modelValue), 10) < e.max)), r = V(() => e.disabled === !1 && (e.min === null || parseInt(String(e.modelValue), 10) > e.min)); return { listeners: i, attributes: u, classes: o, stepUp: _, stepDown: y, isStepUpAllowed: s, isStepDownAllowed: r, input: l }; function p(g) { if (!g.key) return; const w = g.key.toLowerCase(), h = ["meta", "shift", "alt", "backspace", "tab", "arrowup", "arrowdown", "arrowleft", "arrowright"], k = g.target.value; e.slug === !0 && (("abcdefghijklmnopqrstuvwxyz01234567890-_~ ".split("").includes(w) || h.includes(w)) === !1 && g.preventDefault(), w === " " && k.endsWith(e.slugSeparator) && g.preventDefault()), e.dbSafe === !0 && (("abcdefghijklmnopqrstuvwxyz01234567890_ ".split("").includes(w) || h.includes(w) || w.startsWith("arrow")) === !1 && g.preventDefault(), k.length === 0 && "0123456789".split("").includes(w) && g.preventDefault()), t("keydown", g) } function f() { e.modelValue && e.trim && ["string", "text"].includes(e.type) && t("update:modelValue", String(e.modelValue).trim()) } function v(g) { let w = g.target.value; if (e.nullable === !0 && w === "") { t("update:modelValue", null); return } if (e.type === "number") t("update:modelValue", Number(w)); else { if (e.slug === !0) { const h = w.endsWith(" "); w = Zr(w, { separator: e.slugSeparator, preserveTrailingDash: !0 }), h && (w += e.slugSeparator) } e.dbSafe === !0 && (w = w.replace(/\s/g, "_"), w = w.normalize("NFD").replace(/[\u0300-\u036f]/g, "")), t("update:modelValue", w) } } function _() { if (!!l.value && s.value !== !1 && (l.value.stepUp(), l.value.value != null)) return t("update:modelValue", Number(l.value.value)) } function y() { if (!!l.value && r.value !== !1) return l.value.stepDown(), l.value.value ? t("update:modelValue", Number(l.value.value)) : t("update:modelValue", e.min || 0) } } }), V7 = { key: 0, class: "prepend-outer" }, F7 = { key: 0, class: "prepend" }, A7 = { key: 1, class: "prefix" }, I7 = ["placeholder", "autocomplete", "type", "min", "max", "step", "disabled", "value"], E7 = { key: 2, class: "suffix" }, D7 = { key: 3 }, T7 = { key: 4, class: "append" }, P7 = { key: 1, class: "append-outer" }; function O7(e, t, n, l, i, u) { const o = c("v-icon"), s = we("focus"); return m(), I("div", { class: de(["v-input", e.classes]), onClick: t[0] || (t[0] = r => e.$emit("click", r)) }, [e.$slots["prepend-outer"] ? (m(), I("div", V7, [ye(e.$slots, "prepend-outer", { value: e.modelValue, disabled: e.disabled }, void 0, !0)])) : R("", !0), S("div", { class: de(["input", { disabled: e.disabled, active: e.active }]) }, [e.$slots.prepend ? (m(), I("div", F7, [ye(e.$slots, "prepend", { value: e.modelValue, disabled: e.disabled }, void 0, !0)])) : R("", !0), e.prefix ? (m(), I("span", A7, b(e.prefix), 1)) : R("", !0), ye(e.$slots, "input", {}, () => [ee(S("input", dt({ ref: "input" }, e.attributes, { placeholder: e.placeholder, autocomplete: e.autocomplete, type: e.type, min: e.min, max: e.max, step: e.step, disabled: e.disabled, value: e.modelValue === null ? "" : String(e.modelValue) }, Kl(e.listeners)), null, 16, I7), [[s, e.autofocus]])], !0), e.suffix ? (m(), I("span", E7, b(e.suffix), 1)) : R("", !0), e.type === "number" && !e.hideArrows ? (m(), I("span", D7, [a(o, { class: de([{ disabled: !e.isStepUpAllowed }, "step-up"]), name: "keyboard_arrow_up", clickable: "", disabled: !e.isStepUpAllowed, onClick: e.stepUp }, null, 8, ["class", "disabled", "onClick"]), a(o, { class: de([{ disabled: !e.isStepDownAllowed }, "step-down"]), name: "keyboard_arrow_down", clickable: "", disabled: !e.isStepDownAllowed, onClick: e.stepDown }, null, 8, ["class", "disabled", "onClick"])])) : R("", !0), e.$slots.append ? (m(), I("div", T7, [ye(e.$slots, "append", { value: e.modelValue, disabled: e.disabled }, void 0, !0)])) : R("", !0)], 2), e.$slots["append-outer"] ? (m(), I("div", P7, [ye(e.$slots, "append-outer", { value: e.modelValue, disabled: e.disabled }, void 0, !0)])) : R("", !0)], 2) } var L7 = B(C7, [["render", O7], ["__scopeId", "data-v-498949c4"]]); const j7 = z({ props: { mandatory: { type: Boolean, default: !1 }, max: { type: Number, default: -1 }, multiple: { type: Boolean, default: !1 }, modelValue: { type: Array, default: void 0 }, scope: { type: String, default: "item-group" } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { modelValue: n, multiple: l, max: i, mandatory: u } = je(e); return No({ selection: n, onSelectionChange: o => t("update:modelValue", o) }, { multiple: l, max: i, mandatory: u }, e.scope), {} } }), R7 = { class: "v-item-group" }; function M7(e, t, n, l, i, u) { return m(), I("div", R7, [ye(e.$slots, "default")]) } var U7 = B(j7, [["render", M7]]); const N7 = z({ props: { value: { type: String, default: null }, scope: { type: String, default: "item-group" }, active: { type: Boolean, default: void 0 }, watch: { type: Boolean, default: !0 } }, setup(e) { const { active: t } = je(e), { active: n, toggle: l } = yn({ value: e.value, group: e.scope, watch: e.watch, active: t }); return { isActive: n, toggle: l } } }), B7 = { class: "v-item" }; function q7(e, t, n, l, i, u) { return m(), I("div", B7, [ye(e.$slots, "default", Je(xe({ active: e.isActive, toggle: e.toggle })))]) } var z7 = B(N7, [["render", q7]]); const K7 = z({ props: { multiple: { type: Boolean, default: !0 }, to: { type: String, default: "" }, active: { type: Boolean, default: void 0 }, exact: { type: Boolean, default: !1 }, query: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !1 }, scope: { type: String, default: "v-list" }, value: { type: [String, Number], default: void 0 }, dense: { type: Boolean, default: !1 }, open: { type: Boolean, default: !1 }, arrowPlacement: { type: [String, Boolean], default: "after", validator: e => ["before", "after", !1].includes(e) } }, emits: ["click"], setup(e, { emit: t }) { const { active: n, toggle: l } = yn({ group: e.scope, value: e.value }); return { groupActive: V(() => n.value || e.open), toggle: l, onClick: u }; function u(o) { if (e.to) return null; if (e.clickable) return t("click", o); o.stopPropagation(), l() } } }), H7 = { class: "v-list-group" }, W7 = { key: 0, class: "items" }; function G7(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item"); return m(), I("li", H7, [a(r, { class: "activator", active: e.active, to: e.to, exact: e.exact, query: e.query, disabled: e.disabled, dense: e.dense, clickable: "", onClick: e.onClick }, { default: d(() => [e.$slots.default && e.arrowPlacement && e.arrowPlacement === "before" ? (m(), C(s, { key: 0, class: de(["activator-icon", { active: e.groupActive }]) }, { default: d(() => [a(o, { name: "chevron_right", disabled: e.disabled, onClick: Ae(e.toggle, ["stop", "prevent"]) }, null, 8, ["disabled", "onClick"])]), _: 1 }, 8, ["class"])) : R("", !0), ye(e.$slots, "activator", { active: e.groupActive }, void 0, !0), e.$slots.default && e.arrowPlacement && e.arrowPlacement === "after" ? (m(), C(s, { key: 1, class: de(["activator-icon", { active: e.groupActive }]) }, { default: d(() => [a(o, { name: "chevron_right", disabled: e.disabled, onClick: Ae(e.toggle, ["stop", "prevent"]) }, null, 8, ["disabled", "onClick"])]), _: 1 }, 8, ["class"])) : R("", !0)]), _: 3 }, 8, ["active", "to", "exact", "query", "disabled", "dense", "onClick"]), e.groupActive ? (m(), I("ul", W7, [ye(e.$slots, "default", {}, void 0, !0)])) : R("", !0)]) } var J7 = B(K7, [["render", G7], ["__scopeId", "data-v-2419d436"]]); const Q7 = {}, X7 = { class: "v-list-item-content" }; function Z7(e, t) { return m(), I("div", X7, [ye(e.$slots, "default")]) } var Y7 = B(Q7, [["render", Z7], ["__scopeId", "data-v-275e8d1e"]]); const x7 = z({ props: { center: { type: Boolean, default: !1 } } }); function eM(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-list-item-hint", { center: e.center }]) }, [ye(e.$slots, "default", {}, void 0, !0)], 2) } var tM = B(x7, [["render", eM], ["__scopeId", "data-v-13faae5b"]]); const nM = z({ props: { center: { type: Boolean, default: !1 } } }); function lM(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-list-item-icon", { center: e.center }]) }, [ye(e.$slots, "default")], 2) } var oM = B(nM, [["render", lM], ["__scopeId", "data-v-3a2c81de"]]); const aM = z({ props: { block: { type: Boolean, default: !1 }, dense: { type: Boolean, default: !1 }, to: { type: [String, Object], default: "" }, href: { type: String, default: void 0 }, disabled: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !1 }, active: { type: Boolean, default: void 0 }, dashed: { type: Boolean, default: !1 }, exact: { type: Boolean, default: !1 }, query: { type: Boolean, default: !1 }, download: { type: String, default: void 0 }, value: { type: [String, Number], default: void 0 }, nav: { type: Boolean, default: !1 }, scope: { type: String, default: "v-list" } }, emits: ["click"], setup(e, { emit: t }) { const n = Yt(), { route: l, isActive: i, isExactActive: u } = ia(e), o = V(() => e.to ? "router-link" : e.href ? "a" : "li"); yn({ value: e.value, group: e.scope }); const s = V(() => Boolean(e.to || e.href || e.clickable)), r = V(() => { if (e.active !== void 0) return e.active; if (e.to) { const f = !e.query || M.exports.isEqual(n.query, l.value.query); return e.exact ? u.value && f : i.value && f } return !1 }); return { component: o, isLink: s, isActiveRoute: r, onClick: p }; function p(f) { e.disabled !== !0 && t("click", f) } } }); function iM(e, t, n, l, i, u) { return m(), C(Ne(e.component), { class: de(["v-list-item", { active: e.isActiveRoute, dense: e.dense, link: e.isLink, disabled: e.disabled, dashed: e.dashed, block: e.block, nav: e.nav, clickable: e.clickable }]), to: e.to !== "" ? e.to : void 0, href: e.href, download: e.download, target: e.component === "a" ? "_blank" : void 0, onClick: e.onClick }, { default: d(() => [ye(e.$slots, "default")]), _: 3 }, 8, ["to", "class", "href", "download", "target", "onClick"]) } var sM = B(aM, [["render", iM], ["__scopeId", "data-v-0c4fd7f4"]]); const rM = z({ props: { modelValue: { type: Array, default: null }, nav: { type: Boolean, default: !1 }, dense: { type: Boolean, default: !1 }, multiple: { type: Boolean, default: !0 }, mandatory: { type: Boolean, default: !0 }, scope: { type: String, default: "v-list" } }, emits: ["update:modelValue", "toggle"], setup(e, { emit: t }) { const { modelValue: n, multiple: l, mandatory: i } = je(e); return No({ selection: n, onSelectionChange: u => { t("update:modelValue", u) }, onToggle: u => { t("toggle", u) } }, { mandatory: i, multiple: l }, e.scope), {} } }); function dM(e, t, n, l, i, u) { return m(), I("ul", { class: de(["v-list", { nav: e.nav, dense: e.dense }]) }, [ye(e.$slots, "default")], 2) } var uM = B(rM, [["render", dM], ["__scopeId", "data-v-b97aaa68"]]); function cM(e, t, n) { const l = E(null), i = E({}), u = E({}), o = E(n.value.placement); At(() => { p() }), _e(n, () => { var v; (v = l.value) == null || v.setOptions({ placement: n.value.attached ? "bottom-start" : n.value.placement, modifiers: f() }) }, { immediate: !0 }); const s = new MutationObserver(() => { var v; (v = l.value) == null || v.forceUpdate() }); return { popperInstance: l, placement: o, start: r, stop: p, styles: i, arrowStyles: u }; function r() { return new Promise(v => { l.value = Yr(e.value, t.value, { placement: n.value.attached ? "bottom-start" : n.value.placement, modifiers: f(v), strategy: "fixed" }), l.value.forceUpdate(), s.observe(t.value, { attributes: !1, childList: !0, characterData: !0, subtree: !0 }) }) } function p() { var v; (v = l.value) == null || v.destroy(), s.disconnect() } function f(v = () => { }) { var y, g; const _ = [xr, Ce(re({}, ed), { options: { offset: n.value.attached ? [0, 0] : [(y = n.value.offsetX) != null ? y : 0, (g = n.value.offsetY) != null ? g : 8] } }), Ce(re({}, td), { options: { padding: 8 } }), nd, ld, od, { name: "placementUpdater", enabled: !0, phase: "afterWrite", fn({ state: w }) { o.value = w.placement } }, { name: "applyStyles", enabled: !0, phase: "write", fn({ state: w }) { i.value = w.styles.popper, u.value = w.styles.arrow, v() } }]; return n.value.arrow === !0 && _.push(Ce(re({}, ad), { options: { padding: 6 } })), n.value.attached === !0 && _.push({ name: "sameWidth", enabled: !0, fn: ({ state: w }) => { w.styles.popper.width = `${w.rects.reference.width}px` }, phase: "beforeWrite", requires: ["computeStyles"] }), _ } } const pM = z({ props: { placement: { type: String, default: "bottom" }, modelValue: { type: Boolean, default: void 0 }, closeOnClick: { type: Boolean, default: !0 }, closeOnContentClick: { type: Boolean, default: !0 }, attached: { type: Boolean, default: !1 }, showArrow: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, trigger: { type: String, default: null, validator: e => ["hover", "click", "keyDown"].includes(e) }, delay: { type: Number, default: 0 }, offsetY: { type: Number, default: 8 }, offsetX: { type: Number, default: 0 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = E(null), l = E(null), i = E({ getBoundingClientRect() { return { top: 0, left: 0, bottom: 0, right: 0, width: 0, height: 0 } } }), u = V(() => bt()), o = E(null), { start: s, stop: r, styles: p, arrowStyles: f, placement: v } = cM(l, o, V(() => ({ placement: e.placement, attached: e.attached, arrow: e.showArrow, offsetY: e.offsetY, offsetX: e.offsetX }))), { isActive: _, activate: y, deactivate: g, toggle: w } = P(); _e(_, O => { var U; O === !0 && (l.value = ((U = n.value) == null ? void 0 : U.children[0]) || i.value, dl(() => { o.value = document.getElementById(u.value) })) }); const { onClick: h, onPointerEnter: k, onPointerLeave: F } = N(), A = E(!1); return { id: u, activator: n, popper: o, reference: l, isActive: _, toggle: w, deactivate: g, onContentClick: T, onClickOutsideMiddleware: L, styles: p, arrowStyles: f, popperPlacement: v, activate: y, onClick: h, onPointerLeave: F, onPointerEnter: k, hoveringOnPopperContent: A }; function P() { const O = E(!1), U = V({ get() { return e.modelValue !== void 0 ? e.modelValue : O.value }, async set(te) { O.value = te, t("update:modelValue", te) } }); return _e(o, async () => { o.value !== null ? await s() : r() }, { immediate: !0 }), { isActive: U, activate: q, deactivate: K, toggle: W }; function q(te) { te && (i.value = { getBoundingClientRect() { return { top: te.clientY, left: te.clientX, bottom: 0, right: 0, width: 0, height: 0 } } }), U.value = !0 } function K() { U.value = !1 } function W() { e.disabled !== !0 && (U.value = !U.value) } } function L(O) { var U; return !((U = n.value) == null ? void 0 : U.contains(O.target)) } function T(O) { e.closeOnContentClick === !0 && O.target !== O.currentTarget && g() } function N() { const O = E(!1); return _e(O, M.exports.debounce(W => { W ? _.value || y() : g() }, e.delay)), { onClick: U, onPointerLeave: K, onPointerEnter: q }; function U() { e.trigger === "click" && w() } function q() { e.trigger === "hover" && (O.value = !0) } function K() { e.trigger === "hover" && (O.value = !1) } } } }), mM = ["id", "data-placement"]; function fM(e, t, n, l, i, u) { const o = c("transition-bounce"), s = we("click-outside"); return m(), I("div", { class: "v-menu", onClick: t[5] || (t[5] = (...r) => e.onClick && e.onClick(...r)) }, [S("div", { ref: "activator", class: de(["v-menu-activator", { attached: e.attached }]), onPointerenter: t[0] || (t[0] = Ae((...r) => e.onPointerEnter && e.onPointerEnter(...r), ["stop"])), onPointerleave: t[1] || (t[1] = Ae((...r) => e.onPointerLeave && e.onPointerLeave(...r), ["stop"])) }, [ye(e.$slots, "activator", Je(xe({ toggle: e.toggle, active: e.isActive, activate: e.activate, deactivate: e.deactivate })), void 0, !0)], 34), (m(), C(ql, { to: "#menu-outlet" }, [a(o, null, { default: d(() => [e.isActive ? ee((m(), I("div", { id: e.id, key: e.id, class: de(["v-menu-popper", { active: e.isActive, attached: e.attached }]), "data-placement": e.popperPlacement, style: Ke(e.styles) }, [S("div", { class: de(["arrow", { active: e.showArrow && e.isActive }]), style: Ke(e.arrowStyles), "data-popper-arrow": "" }, null, 6), S("div", { class: "v-menu-content", onClick: t[2] || (t[2] = Ae((...r) => e.onContentClick && e.onContentClick(...r), ["stop"])), onPointerenter: t[3] || (t[3] = Ae((...r) => e.onPointerEnter && e.onPointerEnter(...r), ["stop"])), onPointerleave: t[4] || (t[4] = Ae((...r) => e.onPointerLeave && e.onPointerLeave(...r), ["stop"])) }, [ye(e.$slots, "default", Je(xe({ toggle: e.toggle, active: e.isActive, activate: e.activate, deactivate: e.deactivate })), void 0, !0)], 32)], 14, mM)), [[s, { handler: e.deactivate, middleware: e.onClickOutsideMiddleware, disabled: e.isActive === !1 || e.closeOnClick === !1, events: ["click"] }]]) : R("", !0)]), _: 3 })]))]) } var vM = B(pM, [["render", fM], ["__scopeId", "data-v-6bb45c39"]]); const _M = z({ props: { type: { type: String, default: "normal" }, icon: { type: [String, Boolean], default: null }, center: { type: Boolean, default: !1 } }, setup(e) { return { iconName: V(() => e.icon !== !1 && typeof e.icon == "string" ? e.icon : e.type == "info" ? "info" : e.type == "success" ? "check_circle" : e.type == "warning" ? "warning" : e.type == "danger" ? "error" : "info") } } }); function yM(e, t, n, l, i, u) { const o = c("v-icon"); return m(), I("div", { class: de(["v-notice", [e.type, { center: e.center }]]) }, [e.icon !== !1 ? (m(), C(o, { key: 0, name: e.iconName, left: "" }, null, 8, ["name"])) : R("", !0), ye(e.$slots, "default")], 2) } var gM = B(_M, [["render", yM], ["__scopeId", "data-v-2d5b0a1b"]]); const hM = z({ props: { active: { type: Boolean, default: !1 }, absolute: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !0 } }, emits: ["click"], setup(e, { emit: t }) { return { onClick: n }; function n(l) { t("click", l) } } }), bM = e => (Qe("data-v-3e74acbb"), e = e(), Xe(), e), $M = bM(() => S("div", { class: "overlay" }, null, -1)), wM = { key: 0, class: "content" }; function kM(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-overlay", { active: e.active, absolute: e.absolute, "has-click": e.clickable }]), onClick: t[0] || (t[0] = (...o) => e.onClick && e.onClick(...o)) }, [$M, e.active ? (m(), I("div", wM, [ye(e.$slots, "default", {}, void 0, !0)])) : R("", !0)], 2) } var SM = B(hM, [["render", kM], ["__scopeId", "data-v-3e74acbb"]]); const CM = z({ props: { disabled: { type: Boolean, default: !1 }, length: { type: Number, default: null, required: !0, validator: e => e % 1 == 0 }, totalVisible: { type: Number, default: void 0, validator: e => e >= 0 }, modelValue: { type: Number, default: null }, showFirstLast: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => { if (e.totalVisible === void 0) return []; let o, s; if (qa(e.totalVisible) || e.length <= e.totalVisible) o = 1, s = e.length; else { const r = Math.floor(e.totalVisible / 2), p = Math.ceil(e.totalVisible / 2) - 1; e.modelValue <= r ? (o = 1, s = e.totalVisible) : e.modelValue + p >= e.length ? (o = e.length - e.totalVisible + 1, s = e.length) : (o = e.modelValue - r, s = e.modelValue + p) } return Array.from(Array(s + 1 - o).keys()).map(r => o + r) }); return { toPage: u, toPrev: l, toNext: i, visiblePages: n }; function l() { u(e.modelValue - 1) } function i() { u(e.modelValue + 1) } function u(o) { t("update:modelValue", o) } } }), VM = { class: "v-pagination" }, FM = D(" 1 "), AM = { key: 1, class: "gap" }, IM = { key: 2, class: "gap" }; function EM(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"); return m(), I("div", VM, [a(s, { class: "previous", disabled: e.disabled || e.modelValue === 1, secondary: "", icon: "", small: "", onClick: e.toPrev }, { default: d(() => [a(o, { name: "chevron_left" })]), _: 1 }, 8, ["disabled", "onClick"]), e.showFirstLast && e.modelValue > Math.ceil(e.totalVisible / 2) + 1 && e.length > e.totalVisible ? (m(), C(s, { key: 0, class: "page", secondary: "", small: "", disabled: e.disabled, onClick: t[0] || (t[0] = r => e.toPage(1)) }, { default: d(() => [FM]), _: 1 }, 8, ["disabled"])) : R("", !0), e.showFirstLast && e.modelValue > Math.ceil(e.totalVisible / 2) + 1 && e.length > e.totalVisible + 1 ? (m(), I("span", AM, " ... ")) : R("", !0), (m(!0), I(se, null, he(e.visiblePages, r => (m(), C(s, { key: r, class: de([{ active: e.modelValue === r }, "page"]), secondary: "", small: "", disabled: e.disabled, onClick: p => e.toPage(r) }, { default: d(() => [D(b(r), 1)]), _: 2 }, 1032, ["class", "disabled", "onClick"]))), 128)), e.showFirstLast && e.modelValue < e.length - Math.ceil(e.totalVisible / 2) && e.length > e.totalVisible + 1 ? (m(), I("span", IM, " ... ")) : R("", !0), e.showFirstLast && e.modelValue <= e.length - Math.ceil(e.totalVisible / 2) && e.length > e.totalVisible ? (m(), C(s, { key: 3, class: de([{ active: e.modelValue === e.length }, "page"]), secondary: "", small: "", disabled: e.disabled, onClick: t[1] || (t[1] = r => e.toPage(e.length)) }, { default: d(() => [D(b(e.length), 1)]), _: 1 }, 8, ["class", "disabled"])) : R("", !0), a(s, { class: "next", disabled: e.disabled || e.modelValue === e.length, secondary: "", icon: "", small: "", onClick: e.toNext }, { default: d(() => [a(o, { name: "chevron_right" })]), _: 1 }, 8, ["disabled", "onClick"])]) } var DM = B(CM, [["render", EM], ["__scopeId", "data-v-7c59d706"]]); const TM = z({ props: re({ indeterminate: { type: Boolean, default: !1 }, value: { type: Number, default: 0 } }, nl), emits: ["animationiteration"], setup(e) { const t = ll(e), n = V(() => ({ "stroke-dasharray": e.value / 100 * 78.5 + ", 78.5" })); return { sizeClass: t, circleStyle: n } } }), PM = e => (Qe("data-v-a75ea6ac"), e = e(), Xe(), e), OM = PM(() => S("path", { class: "circle-background", d: "M12.5,0A12.5,12.5,0,1,1,0,12.5,12.5,12.5,0,0,1,12.5,0Z", transform: "translate(2.5 2.5)" }, null, -1)); function LM(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-progress-circular", e.sizeClass]) }, [(m(), I("svg", { class: de(["circle", { indeterminate: e.indeterminate }]), viewBox: "0 0 30 30", onAnimationiteration: t[0] || (t[0] = o => e.$emit("animationiteration")) }, [OM, S("path", { class: "circle-path", style: Ke(e.circleStyle), d: "M12.5,0A12.5,12.5,0,1,1,0,12.5,12.5,12.5,0,0,1,12.5,0Z", transform: "translate(2.5 2.5)" }, null, 4)], 34)), ye(e.$slots, "default", {}, void 0, !0)], 2) } var jM = B(TM, [["render", LM], ["__scopeId", "data-v-a75ea6ac"]]); const RM = z({ props: { absolute: { type: Boolean, default: !1 }, bottom: { type: Boolean, default: !1 }, fixed: { type: Boolean, default: !1 }, indeterminate: { type: Boolean, default: !1 }, rounded: { type: Boolean, default: !1 }, top: { type: Boolean, default: !1 }, value: { type: Number, default: 0 }, colorful: { type: Boolean, default: !1 } }, emits: ["animationiteration"], setup(e) { return { color: V(() => e.value <= 33 ? "danger" : e.value <= 66 ? "warning" : "success") } } }); function MM(e, t, n, l, i, u) { return m(), I("div", { class: de(["v-progress-linear", [{ absolute: e.absolute, bottom: e.bottom, fixed: e.fixed, indeterminate: e.indeterminate, rounded: e.rounded, top: e.top, colorful: e.colorful }, e.color]]), onAnimationiteration: t[0] || (t[0] = o => e.$emit("animationiteration")) }, [S("div", { class: "inner", style: Ke({ width: e.value + "%" }) }, null, 4), ye(e.$slots, "default", { value: e.value }, void 0, !0)], 34) } var UM = B(RM, [["render", MM], ["__scopeId", "data-v-4aeb976a"]]); const NM = z({ props: { value: { type: String, required: !0 }, modelValue: { type: String, default: null }, label: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, iconOn: { type: String, default: "radio_button_checked" }, iconOff: { type: String, default: "radio_button_unchecked" }, block: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => e.modelValue === e.value), l = V(() => n.value ? e.iconOn : e.iconOff); return { isChecked: n, emitValue: i, icon: l }; function i() { t("update:modelValue", e.value) } } }), BM = ["aria-pressed", "disabled"], qM = { class: "label type-text" }; function zM(e, t, n, l, i, u) { const o = c("v-icon"); return m(), I("button", { class: de(["v-radio", { checked: e.isChecked, block: e.block }]), type: "button", "aria-pressed": e.isChecked ? "true" : "false", disabled: e.disabled, onClick: t[0] || (t[0] = (...s) => e.emitValue && e.emitValue(...s)) }, [a(o, { name: e.icon }, null, 8, ["name"]), S("span", qM, [ye(e.$slots, "label", {}, () => [D(b(e.label), 1)], !0)])], 10, BM) } var KM = B(NM, [["render", zM], ["__scopeId", "data-v-36e4a678"]]); function Ps(e, t, n) { const l = E(""), i = V({ get() { return l.value || (u.value ? e.value : "") }, set(o) { o === null ? (l.value = "", n(null)) : (l.value = o, n(o)) } }), u = V(() => { if (t.value === null) return !1; const o = t.value.map(s => s.value); return e.value !== null && e.value.length > 0 && o.includes(e.value) === !1 }); return { otherValue: i, usesOtherValue: u } } function Os(e, t, n) { const l = E([]); return _e(e, o => { o !== null && Array.isArray(o) !== !1 && t.value !== null && o.forEach(s => { if (t.value === null) return; t.value.map(f => f.value).includes(s) === !0 === !1 && l.value.map(_ => _.value).includes(s) === !0 === !1 && i(s) }) }), { otherValues: l, addOtherValue: i, setOtherValue: u }; function i(o = "") { l.value = [...l.value, { key: bt(), value: o }] } function u(o, s) { const r = l.value.find(f => f.key === o), p = (e.value || []).filter(f => f !== (r == null ? void 0 : r.value)); if (s === null) l.value = l.value.filter(f => f.key !== o), p.length === 0 ? n(null) : n(p); else { l.value = l.value.map(v => (v.key === o && (v.value = s), v)); const f = [...p, s]; n(f) } } } const HM = z({ name: "SelectListItem", props: { item: { type: Object, required: !0 }, modelValue: { type: [String, Number, Array], default: null }, multiple: { type: Boolean, required: !0 }, allowOther: { type: Boolean, required: !0 } }, emits: ["update:modelValue"] }), WM = { key: 0, class: "item-text" }; function GM(e, t, n, l, i, u) { const o = c("v-divider"), s = c("v-icon"), r = c("v-list-item-icon"), p = c("v-checkbox"), f = c("v-list-item-content"), v = c("v-list-item"); return e.item.divider === !0 ? (m(), C(o, { key: 0 })) : (m(), C(v, { key: 1, active: e.multiple ? (e.modelValue || []).includes(e.item.value) : e.modelValue === e.item.value, disabled: e.item.disabled, clickable: "", value: e.item.value, onClick: t[1] || (t[1] = _ => e.multiple ? null : e.$emit("update:modelValue", e.item.value)) }, { default: d(() => [e.multiple === !1 && e.allowOther === !1 && e.item.icon ? (m(), C(r, { key: 0 }, { default: d(() => [a(s, { name: e.item.icon }, null, 8, ["name"])]), _: 1 })) : R("", !0), a(f, null, { default: d(() => [e.multiple === !1 || e.item.selectable === !1 ? (m(), I("span", WM, b(e.item.text), 1)) : (m(), C(p, { key: 1, "model-value": e.modelValue || [], label: e.item.text, value: e.item.value, disabled: e.item.disabled, "onUpdate:modelValue": t[0] || (t[0] = _ => e.$emit("update:modelValue", _.length > 0 ? _ : null)) }, null, 8, ["model-value", "label", "value", "disabled"]))]), _: 1 })]), _: 1 }, 8, ["active", "disabled", "value"])) } var Ls = B(HM, [["render", GM]]); const JM = z({ name: "SelectListItemGroup", components: { SelectListItem: Ls }, props: { item: { type: Object, required: !0 }, modelValue: { type: [String, Number, Array], default: null }, multiple: { type: Boolean, required: !0 }, allowOther: { type: Boolean, required: !0 } }, emits: ["update:modelValue"] }), QM = { key: 0, class: "item-text" }; function XM(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-checkbox"), p = c("v-list-item-content"), f = c("select-list-item-group", !0), v = c("select-list-item"), _ = c("v-list-group"); return m(), C(_, { clickable: e.item.selectable, value: e.item.value }, { activator: d(() => [e.multiple === !1 && e.allowOther === !1 && e.item.icon ? (m(), C(s, { key: 0 }, { default: d(() => [a(o, { name: e.item.icon }, null, 8, ["name"])]), _: 1 })) : R("", !0), a(p, null, { default: d(() => [e.multiple === !1 || e.item.selectable === !1 ? (m(), I("span", QM, b(e.item.text), 1)) : (m(), C(r, { key: 1, "model-value": e.modelValue || [], label: e.item.text, value: e.item.value, disabled: e.item.disabled, "onUpdate:modelValue": t[0] || (t[0] = y => e.$emit("update:modelValue", y.length > 0 ? y : null)) }, null, 8, ["model-value", "label", "value", "disabled"]))]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.item.children, (y, g) => (m(), I(se, { key: g }, [y.children ? (m(), C(f, { key: 0, item: y, "model-value": e.modelValue, multiple: e.multiple, "allow-other": e.allowOther, "onUpdate:modelValue": t[1] || (t[1] = w => e.$emit("update:modelValue", w)) }, null, 8, ["item", "model-value", "multiple", "allow-other"])) : (m(), C(v, { key: 1, "model-value": e.modelValue, item: y, multiple: e.multiple, "allow-other": e.allowOther, "onUpdate:modelValue": t[2] || (t[2] = w => e.$emit("update:modelValue", w)) }, null, 8, ["model-value", "item", "multiple", "allow-other"]))], 64))), 128))]), _: 1 }, 8, ["clickable", "value"]) } var ZM = B(JM, [["render", XM]]); const YM = z({ components: { SelectListItemGroup: ZM, SelectListItem: Ls }, props: { items: { type: Array, required: !0 }, itemText: { type: String, default: "text" }, itemValue: { type: String, default: "value" }, itemIcon: { type: String, default: null }, itemDisabled: { type: String, default: "disabled" }, itemSelectable: { type: String, default: "selectable" }, itemChildren: { type: String, default: "children" }, modelValue: { type: [Array, String, Number, Boolean], default: null }, multiple: { type: Boolean, default: !1 }, mandatory: { type: Boolean, default: !0 }, placeholder: { type: String, default: null }, fullWidth: { type: Boolean, default: !0 }, disabled: { type: Boolean, default: !1 }, showDeselect: { type: Boolean, default: !1 }, allowOther: { type: Boolean, default: !1 }, closeOnContentClick: { type: Boolean, default: !0 }, inline: { type: Boolean, default: !1 }, label: { type: Boolean, default: !1 }, multiplePreviewThreshold: { type: Number, default: 3 }, placement: { type: String, default: "bottom" } }, emits: ["update:modelValue", "group-toggle"], setup(e, { emit: t }) { const { t: n } = x(), { internalItems: l } = v(), { displayValue: i } = _(), { modelValue: u } = je(e), { otherValue: o, usesOtherValue: s } = Ps(u, l, y => t("update:modelValue", y)), { otherValues: r, addOtherValue: p, setOtherValue: f } = Os(u, l, y => t("update:modelValue", y)); return { t: n, internalItems: l, displayValue: i, otherValue: o, usesOtherValue: s, otherValues: r, addOtherValue: p, setOtherValue: f }; function v() { return { internalItems: V(() => { const g = h => { if (typeof h == "string") return { text: h, value: h }; if (h.divider === !0) return { value: null, divider: !0 }; const k = M.exports.get(h, e.itemChildren) ? M.exports.get(h, e.itemChildren).map(g) : null; return { text: M.exports.get(h, e.itemText), value: M.exports.get(h, e.itemValue), icon: M.exports.get(h, e.itemIcon), disabled: M.exports.get(h, e.itemDisabled), selectable: M.exports.get(h, e.itemSelectable), children: k } }; return e.items.map(g) }) } } function _() { return { displayValue: V(() => { if (Array.isArray(e.modelValue)) { if (e.modelValue.length < e.multiplePreviewThreshold) return e.modelValue.map(w => g(w) || w).join(", "); { const w = l.value.length + r.value.length, h = e.modelValue.length; return w === h ? n("all_items") : n("item_count", h) } } return g(e.modelValue) || e.modelValue }) }; function g(w) { return h(l.value); function h(k) { var A; let F = (A = k.find(P => P.value === w)) == null ? void 0 : A.text; for (const P of k) F || P.children && (F = h(P.children)); return F } } } } }), xM = ["onClick"], e9 = ["placeholder"], t9 = ["value", "placeholder", "onInput", "onBlur"]; function n9(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-list-item-icon"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-divider"), _ = c("select-list-item-group"), y = c("select-list-item"), g = c("v-checkbox"), w = c("v-list"), h = c("v-menu"), k = we("focus"); return m(), C(h, { class: "v-select", disabled: e.disabled, attached: e.inline === !1, "show-arrow": e.inline === !0, "close-on-content-click": e.closeOnContentClick, placement: e.placement }, { activator: d(({ toggle: F, active: A }) => [e.inline ? (m(), I("div", { key: 0, class: de(["inline-display", { placeholder: !e.displayValue, label: e.label, active: A }]), onClick: F }, [ye(e.$slots, "preview", {}, () => [D(b(e.displayValue || e.placeholder), 1)], !0), a(o, { name: "expand_more", class: de({ active: A }) }, null, 8, ["class"])], 10, xM)) : ye(e.$slots, "preview", { key: 1 }, () => [a(s, { "full-width": e.fullWidth, readonly: "", "model-value": e.displayValue, clickable: "", placeholder: e.placeholder, disabled: e.disabled, active: A, onClick: F }, et({ append: d(() => [a(o, { name: "expand_more", class: de({ active: A }) }, null, 8, ["class"]), ye(e.$slots, "append", {}, void 0, !0)]), _: 2 }, [e.$slots.prepend ? { name: "prepend", fn: d(() => [ye(e.$slots, "prepend", {}, void 0, !0)]) } : void 0]), 1032, ["full-width", "model-value", "placeholder", "disabled", "active", "onClick"])], !0)]), default: d(() => [a(w, { class: "list", mandatory: e.mandatory, onToggle: t[9] || (t[9] = F => e.$emit("group-toggle", F)) }, { default: d(() => [e.showDeselect ? (m(), I(se, { key: 0 }, [a(f, { clickable: "", disabled: e.modelValue === null, onClick: t[0] || (t[0] = F => e.$emit("update:modelValue", null)) }, { default: d(() => [e.multiple === !0 ? (m(), C(r, { key: 0 }, { default: d(() => [a(o, { name: "close" })]), _: 1 })) : R("", !0), a(p, null, { default: d(() => [D(b(e.multiple ? e.t("deselect_all") : e.t("deselect")), 1)]), _: 1 }), e.multiple === !1 ? (m(), C(r, { key: 1 }, { default: d(() => [a(o, { name: "close" })]), _: 1 })) : R("", !0)]), _: 1 }, 8, ["disabled"]), a(v)], 64)) : R("", !0), (m(!0), I(se, null, he(e.internalItems, (F, A) => (m(), I(se, { key: A }, [F.children ? (m(), C(_, { key: 0, item: F, "model-value": e.modelValue, multiple: e.multiple, "allow-other": e.allowOther, "onUpdate:modelValue": t[1] || (t[1] = P => e.$emit("update:modelValue", P)) }, null, 8, ["item", "model-value", "multiple", "allow-other"])) : (m(), C(y, { key: 1, "model-value": e.modelValue, item: F, multiple: e.multiple, "allow-other": e.allowOther, "onUpdate:modelValue": t[2] || (t[2] = P => e.$emit("update:modelValue", P)) }, null, 8, ["model-value", "item", "multiple", "allow-other"]))], 64))), 128)), e.allowOther && e.multiple === !1 ? (m(), C(f, { key: 1, active: e.usesOtherValue, onClick: t[5] || (t[5] = Ae(() => { }, ["stop"])) }, { default: d(() => [a(p, null, { default: d(() => [ee(S("input", { "onUpdate:modelValue": t[3] || (t[3] = F => e.otherValue = F), class: "other-input", placeholder: e.t("other"), onFocus: t[4] || (t[4] = F => e.otherValue ? e.$emit("update:modelValue", e.otherValue) : null) }, null, 40, e9), [[Hl, e.otherValue]])]), _: 1 })]), _: 1 }, 8, ["active"])) : R("", !0), e.allowOther && e.multiple === !0 ? (m(), I(se, { key: 2 }, [(m(!0), I(se, null, he(e.otherValues, F => (m(), C(f, { key: F.key, active: (e.modelValue || []).includes(F.value), onClick: t[7] || (t[7] = Ae(() => { }, ["stop"])) }, { default: d(() => [a(r, null, { default: d(() => [a(g, { "model-value": e.modelValue || [], value: F.value, "onUpdate:modelValue": t[6] || (t[6] = A => e.$emit("update:modelValue", A.length > 0 ? A : null)) }, null, 8, ["model-value", "value"])]), _: 2 }, 1024), a(p, null, { default: d(() => [ee(S("input", { class: "other-input", value: F.value, placeholder: e.t("other"), onInput: A => e.setOtherValue(F.key, A.target.value), onBlur: A => F.value.length === 0 && e.setOtherValue(F.key, null) }, null, 40, t9), [[k]])]), _: 2 }, 1024), a(r, null, { default: d(() => [a(o, { name: "close", clickable: "", onClick: A => e.setOtherValue(F.key, null) }, null, 8, ["onClick"])]), _: 2 }, 1024)]), _: 2 }, 1032, ["active"]))), 128)), a(f, { onClick: t[8] || (t[8] = Ae(F => e.addOtherValue(), ["stop"])) }, { default: d(() => [a(r, null, { default: d(() => [a(o, { name: "add" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("other")), 1)]), _: 1 })]), _: 1 })], 64)) : R("", !0)]), _: 1 }, 8, ["mandatory"])]), _: 3 }, 8, ["disabled", "attached", "show-arrow", "close-on-content-click", "placement"]) } var l9 = B(YM, [["render", n9], ["__scopeId", "data-v-a0800880"]]); const o9 = z({ props: {}, setup() { return {} } }), a9 = { class: "v-sheet" }; function i9(e, t, n, l, i, u) { return m(), I("div", a9, [ye(e.$slots, "default", {}, void 0, !0)]) } var s9 = B(o9, [["render", i9], ["__scopeId", "data-v-714b5c50"]]); const r9 = z({ props: { type: { type: String, default: "input" } } }), js = e => (Qe("data-v-9bf1f4de"), e = e(), Xe(), e), d9 = js(() => S("div", { class: "icon" }, null, -1)), u9 = js(() => S("div", { class: "text" }, null, -1)); function c9(e, t, n, l, i, u) { return m(), I("div", { class: de([e.type, "v-skeleton-loader"]) }, [e.type === "list-item-icon" ? (m(), I(se, { key: 0 }, [d9, u9], 64)) : R("", !0)], 2) } var p9 = B(r9, [["render", c9], ["__scopeId", "data-v-9bf1f4de"]]); const m9 = z({ props: { disabled: { type: Boolean, default: !1 }, showThumbLabel: { type: Boolean, default: !1 }, max: { type: Number, default: 100 }, min: { type: Number, default: 0 }, step: { type: Number, default: 1 }, showTicks: { type: Boolean, default: !1 }, alwaysShowValue: { type: Boolean, default: !1 }, modelValue: { type: Number, default: 0 } }, emits: ["change", "update:modelValue"], setup(e, { emit: t }) { return { styles: V(() => { if (e.modelValue === null) return { "--_v-slider-percentage": 50 }; let u = (e.modelValue - e.min) / (e.max - e.min) * 100; return isNaN(u) && (u = 0), { "--_v-slider-percentage": u } }), onChange: l, onInput: i }; function l(u) { const o = u.target; t("change", Number(o.value)) } function i(u) { const o = u.target; t("update:modelValue", Number(o.value)) } } }), f9 = e => (Qe("data-v-266ebe68"), e = e(), Xe(), e), v9 = { key: 0, class: "prepend" }, _9 = ["disabled", "value", "max", "min", "step"], y9 = f9(() => S("div", { class: "fill" }, null, -1)), g9 = { key: 0, class: "ticks" }, h9 = { key: 1, class: "thumb-label-wrapper" }, b9 = { key: 1, class: "append" }; function $9(e, t, n, l, i, u) { return m(), I("div", { class: "v-slider", style: Ke(e.styles) }, [e.$slots.prepend ? (m(), I("div", v9, [ye(e.$slots, "prepend", { value: e.modelValue }, void 0, !0)])) : R("", !0), S("div", { class: de(["slider", { disabled: e.disabled }]) }, [S("input", { disabled: e.disabled, type: "range", value: e.modelValue, max: e.max, min: e.min, step: e.step, onChange: t[0] || (t[0] = (...o) => e.onChange && e.onChange(...o)), onInput: t[1] || (t[1] = (...o) => e.onInput && e.onInput(...o)) }, null, 40, _9), y9, e.showTicks ? (m(), I("div", g9, [(m(!0), I(se, null, he((e.max - e.min) / e.step + 1, o => (m(), I("span", { key: o, class: "tick" }))), 128))])) : R("", !0), e.showThumbLabel ? (m(), I("div", h9, [S("div", { class: de(["thumb-label", { visible: e.alwaysShowValue }]) }, [ye(e.$slots, "thumb-label type-text", { value: e.modelValue }, () => [D(b(e.modelValue), 1)], !0)], 2)])) : R("", !0)], 2), e.$slots.append ? (m(), I("div", b9, [ye(e.$slots, "append", { value: e.modelValue }, void 0, !0)])) : R("", !0)], 4) } var w9 = B(m9, [["render", $9], ["__scopeId", "data-v-266ebe68"]]); const k9 = z({ props: { value: { type: String, default: null }, modelValue: { type: [Boolean, Array], default: !1 }, label: { type: String, default: null }, disabled: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => e.modelValue instanceof Array ? e.modelValue.includes(e.value) : e.modelValue === !0); return { isChecked: n, toggleInput: l }; function l() { if (e.modelValue instanceof Array) { const i = [...e.modelValue]; n.value === !1 ? i.push(e.value) : i.splice(i.indexOf(e.value), 1), t("update:modelValue", i) } else t("update:modelValue", !n.value) } } }), S9 = e => (Qe("data-v-9eb85040"), e = e(), Xe(), e), C9 = ["aria-pressed", "disabled"], V9 = S9(() => S("span", { class: "switch" }, null, -1)), F9 = { class: "label type-label" }; function A9(e, t, n, l, i, u) { return m(), I("button", { class: "v-switch", type: "button", role: "switch", "aria-pressed": e.isChecked ? "true" : "false", disabled: e.disabled, onClick: t[0] || (t[0] = (...o) => e.toggleInput && e.toggleInput(...o)) }, [V9, S("span", F9, [ye(e.$slots, "label", {}, () => [D(b(e.label), 1)], !0)])], 8, C9) } var I9 = B(k9, [["render", A9], ["__scopeId", "data-v-9eb85040"]]); const E9 = z({ props: { headers: { type: Array, required: !0 }, sort: { type: Object, required: !0 }, showSelect: { type: Boolean, default: !1 }, showResize: { type: Boolean, default: !1 }, showManualSort: { type: Boolean, default: !1 }, someItemsSelected: { type: Boolean, default: !1 }, allItemsSelected: { type: Boolean, default: !1 }, fixed: { type: Boolean, default: !1 }, mustSort: { type: Boolean, default: !1 }, hasItemAppendSlot: { type: Boolean, default: !1 }, manualSortKey: { type: String, default: null } }, emits: ["update:sort", "toggle-select-all", "update:headers"], setup(e, { emit: t }) { const { t: n } = x(), l = E(!1), i = E(0), u = E(0), o = E(null); return Cn(window, "pointermove", M.exports.throttle(_, 40)), Cn(window, "pointerup", y), { t: n, changeSort: p, dragging: l, dragHeader: o, dragStartWidth: u, dragStartX: i, getClassesForHeader: s, onMouseMove: _, onResizeHandleMouseDown: v, toggleManualSort: g, toggleSelectAll: f, getTooltipForSortIcon: r }; function s(w) { const h = []; return w.align && h.push(`align-${w.align}`), w.sortable && h.push("sortable"), e.sort.by === w.value && (e.sort.desc === !1 ? h.push("sort-asc") : h.push("sort-desc")), h } function r(w) { return e.sort.by === w.value && e.sort.desc === !1 ? "sort_desc" : "sort_asc" } function p(w) { if (w.sortable !== !1 && l.value !== !0) return w.value === e.sort.by ? e.mustSort ? t("update:sort", { by: e.sort.by, desc: !e.sort.desc }) : e.sort.desc === !1 ? t("update:sort", { by: e.sort.by, desc: !0 }) : t("update:sort", { by: null, desc: !1 }) : t("update:sort", { by: w.value, desc: !1 }) } function f() { t("toggle-select-all", !e.allItemsSelected) } function v(w, h) { const F = h.target.parentElement; l.value = !0, i.value = h.pageX, u.value = F.offsetWidth, o.value = w } function _(w) { if (l.value === !0) { const h = u.value + (w.pageX - i.value), F = M.exports.clone(e.headers).map(A => { var P; return A.value === ((P = o.value) == null ? void 0 : P.value) ? Ce(re({}, A), { width: Math.max(32, h) }) : A }); t("update:headers", F) } } function y() { l.value === !0 && (l.value = !1) } function g() { e.sort.by === e.manualSortKey ? t("update:sort", { by: null, desc: !1 }) : t("update:sort", { by: e.manualSortKey, desc: !1 }) } } }), D9 = e => (Qe("data-v-35ccb000"), e = e(), Xe(), e), T9 = { key: 1, class: "select cell", scope: "col" }, P9 = ["onClick"], O9 = ["onPointerdown"], L9 = D9(() => S("th", { class: "spacer cell", scope: "col" }, null, -1)), j9 = { key: 2, class: "spacer cell", scope: "col" }; function R9(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-checkbox"), r = we("tooltip"); return m(), I("thead", { class: de(["table-header", { dragging: e.dragging }]) }, [S("tr", { class: de({ fixed: e.fixed }) }, [e.showManualSort ? (m(), I("th", { key: 0, class: de(["manual cell", { "sorted-manually": e.sort.by === e.manualSortKey }]), scope: "col", onClick: t[0] || (t[0] = (...p) => e.toggleManualSort && e.toggleManualSort(...p)) }, [ee(a(o, { name: "sort", small: "" }, null, 512), [[r, e.t("toggle_manual_sorting")]])], 2)) : R("", !0), e.showSelect ? (m(), I("th", T9, [a(s, { "model-value": e.allItemsSelected, indeterminate: e.someItemsSelected, "onUpdate:modelValue": e.toggleSelectAll }, null, 8, ["model-value", "indeterminate", "onUpdate:modelValue"])])) : R("", !0), (m(!0), I(se, null, he(e.headers, p => (m(), I("th", { key: p.value, class: de([e.getClassesForHeader(p), "cell"]), scope: "col" }, [S("div", { class: "content", onClick: f => e.changeSort(p) }, [ee(S("span", null, [ye(e.$slots, `header.${p.value}`, { header: p }, () => [D(b(p.text), 1)], !0)], 512), [[Et, p.width > 90 || p.width === null]]), p.sortable ? ee((m(), C(o, { key: 0, name: "sort", class: "sort-icon", small: "" }, null, 512)), [[r, e.t(e.getTooltipForSortIcon(p)), void 0, { top: !0 }]]) : R("", !0)], 8, P9), e.showResize ? (m(), I("span", { key: 0, class: "resize-handle", onClick: t[1] || (t[1] = Ae(() => { }, ["stop"])), onPointerdown: f => e.onResizeHandleMouseDown(p, f) }, null, 40, O9)) : R("", !0)], 2))), 128)), L9, e.hasItemAppendSlot ? (m(), I("th", j9)) : R("", !0)], 2)], 2) } var M9 = B(E9, [["render", R9], ["__scopeId", "data-v-35ccb000"]]); const U9 = z({ props: { headers: { type: Array, required: !0 }, item: { type: Object, required: !0 }, showSelect: { type: Boolean, default: !1 }, showManualSort: { type: Boolean, default: !1 }, isSelected: { type: Boolean, default: !1 }, subdued: { type: Boolean, default: !1 }, sortedManually: { type: Boolean, default: !1 }, hasClickListener: { type: Boolean, default: !1 }, height: { type: Number, default: 48 } }, emits: ["click", "item-selected"] }), N9 = e => (Qe("data-v-2479fb68"), e = e(), Xe(), e), B9 = N9(() => S("td", { class: "spacer cell" }, null, -1)); function q9(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-checkbox"), r = c("v-text-overflow"), p = c("value-null"); return m(), I("tr", { class: de(["table-row", { subdued: e.subdued, clickable: e.hasClickListener }]), style: Ke({ "--table-row-height": e.height + 2 + "px", "--table-row-line-height": 1 }), onClick: t[4] || (t[4] = f => e.$emit("click", f)) }, [e.showManualSort ? (m(), I("td", { key: 0, class: "manual cell", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) }, [a(o, { name: "drag_handle", class: de(["drag-handle", { "sorted-manually": e.sortedManually }]) }, null, 8, ["class"])])) : R("", !0), e.showSelect ? (m(), I("td", { key: 1, class: "select cell", onClick: t[2] || (t[2] = Ae(() => { }, ["stop"])) }, [a(s, { "model-value": e.isSelected, "onUpdate:modelValue": t[1] || (t[1] = f => e.$emit("item-selected", f)) }, null, 8, ["model-value"])])) : R("", !0), (m(!0), I(se, null, he(e.headers, f => (m(), I("td", { key: f.value, class: de(["cell", `align-${f.align}`]) }, [ye(e.$slots, `item.${f.value}`, { item: e.item }, () => [f.value.split(".").reduce((v, _) => v[_], e.item) ? (m(), C(r, { key: 0, text: f.value.split(".").reduce((v, _) => v[_], e.item) }, null, 8, ["text"])) : (m(), C(p, { key: 1 }))], !0)], 2))), 128)), B9, e.$slots["item-append"] ? (m(), I("td", { key: 2, class: "append cell", onClick: t[3] || (t[3] = Ae(() => { }, ["stop"])) }, [ye(e.$slots, "item-append", {}, void 0, !0)])) : R("", !0)], 6) } var z9 = B(U9, [["render", q9], ["__scopeId", "data-v-2479fb68"]]); const Rs = { text: "", value: "", align: "left", sortable: !0, width: null }, K9 = z({ components: { TableHeader: M9, TableRow: z9, Draggable: kt }, props: { headers: { type: Array, required: !0 }, items: { type: Array, required: !0 }, itemKey: { type: String, default: "id" }, sort: { type: Object, default: null }, mustSort: { type: Boolean, default: !1 }, showSelect: { type: Boolean, default: !1 }, showResize: { type: Boolean, default: !1 }, showManualSort: { type: Boolean, default: !1 }, manualSortKey: { type: String, default: null }, modelValue: { type: Array, default: () => [] }, fixedHeader: { type: Boolean, default: !1 }, loading: { type: Boolean, default: !1 }, loadingText: { type: String, default: ze.global.t("loading") }, noItemsText: { type: String, default: ze.global.t("no_items") }, serverSort: { type: Boolean, default: !1 }, rowHeight: { type: Number, default: 48 }, selectionUseKeys: { type: Boolean, default: !1 }, inline: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, clickable: { type: Boolean, default: !0 } }, emits: ["click:row", "update:sort", "update:items", "item-selected", "update:modelValue", "manual-sort", "update:headers"], setup(e, { emit: t, slots: n }) { const l = V({ get: () => e.headers.map(h => re(re({}, Rs), h)).map(h => (h.width && h.width < 24 && (h.width = 24), h)), set: h => { t("update:headers", h.map(k => { const F = []; return M.exports.forEach(k, (A, P) => { A !== Rs[P] && F.push(P) }), M.exports.pick(k, F) })) } }), i = E({ by: null, desc: !1 }), u = V({ get: () => e.sort || i.value, set: h => { t("update:sort", h), i.value = h } }), o = V(() => n["item-append"] !== void 0), s = V(() => { let h = l.value.length + 1; return e.showSelect && h++, e.showManualSort && h++, o.value && h++, `1 / span ${h}` }), r = V({ get: () => { if (e.serverSort === !0 || u.value.by === e.manualSortKey || u.value.by === null) return e.items; const h = M.exports.sortBy(e.items, [u.value.by]); return u.value.desc === !0 ? h.reverse() : h }, set: h => { t("update:items", h) } }), p = V(() => e.loading === !1 && e.modelValue.length === e.items.length), f = V(() => e.modelValue.length > 0 && p.value === !1), v = V(() => { let h = l.value.map(k => k.width ? `${k.width}px` : "160px").reduce((k, F) => k += " " + F, ""); return e.showSelect && (h = "36px " + h), e.showManualSort && (h = "36px " + h), h = h + " 1fr", o.value && (h += " auto"), h }); return { internalHeaders: l, internalItems: r, internalSort: u, allItemsSelected: p, getSelectedState: y, onItemSelected: _, onToggleSelectAll: g, someItemsSelected: f, onSortChange: w, fullColSpan: s, columnStyle: v, hasItemAppendSlot: o, hideDragImage: Nt }; function _(h) { if (e.disabled) return; t("item-selected", h); let k = M.exports.clone(e.modelValue); h.value === !0 ? e.selectionUseKeys ? k.push(h.item[e.itemKey]) : k.push(h.item) : k = k.filter(F => e.selectionUseKeys ? F !== h.item[e.itemKey] : F[e.itemKey] !== h.item[e.itemKey]), t("update:modelValue", k) } function y(h) { return (e.selectionUseKeys ? e.modelValue : e.modelValue.map(F => F[e.itemKey])).includes(h[e.itemKey]) } function g(h) { e.disabled || (h === !0 ? e.selectionUseKeys ? t("update:modelValue", M.exports.clone(e.items).map(k => k[e.itemKey])) : t("update:modelValue", M.exports.clone(e.items)) : t("update:modelValue", [])) } function w(h) { if (e.disabled) return; const k = r.value[h.oldIndex][e.itemKey], F = r.value[h.newIndex][e.itemKey]; t("manual-sort", { item: k, to: F }) } } }), H9 = ["summary"], W9 = { key: 1 }, G9 = { class: "loading-text" }, J9 = { key: 2 }, Q9 = { class: "no-items-text" }; function X9(e, t, n, l, i, u) { const o = c("table-header"), s = c("v-progress-linear"), r = c("table-row"), p = c("draggable"); return m(), I("div", { class: de(["v-table", { loading: e.loading, inline: e.inline, disabled: e.disabled }]) }, [S("table", { summary: e.internalHeaders.map(f => f.text).join(", "), style: Ke({ "--grid-columns": e.columnStyle }) }, [a(o, { headers: e.internalHeaders, "onUpdate:headers": t[0] || (t[0] = f => e.internalHeaders = f), sort: e.internalSort, "onUpdate:sort": t[1] || (t[1] = f => e.internalSort = f), "show-select": e.showSelect, "show-resize": e.showResize, "some-items-selected": e.someItemsSelected, "all-items-selected": e.allItemsSelected, fixed: e.fixedHeader, "show-manual-sort": e.showManualSort, "must-sort": e.mustSort, "has-item-append-slot": e.hasItemAppendSlot, "manual-sort-key": e.manualSortKey, onToggleSelectAll: e.onToggleSelectAll }, et({ _: 2 }, [he(e.internalHeaders, f => ({ name: `header.${f.value}`, fn: d(() => [ye(e.$slots, `header.${f.value}`, { header: f }, void 0, !0)]) }))]), 1032, ["headers", "sort", "show-select", "show-resize", "some-items-selected", "all-items-selected", "fixed", "show-manual-sort", "must-sort", "has-item-append-slot", "manual-sort-key", "onToggleSelectAll"]), e.loading ? (m(), I("thead", { key: 0, class: de(["loading-indicator", { sticky: e.fixedHeader }]) }, [S("th", { scope: "colgroup", style: Ke({ gridColumn: e.fullColSpan }) }, [e.loading ? (m(), C(s, { key: 0, indeterminate: "" })) : R("", !0)], 4)], 2)) : R("", !0), e.loading && e.items.length === 0 ? (m(), I("tbody", W9, [S("tr", G9, [S("td", { style: Ke({ gridColumn: e.fullColSpan }) }, b(e.loadingText), 5)])])) : R("", !0), !e.loading && e.items.length === 0 ? (m(), I("tbody", J9, [S("tr", Q9, [S("td", { style: Ke({ gridColumn: e.fullColSpan }) }, b(e.noItemsText), 5)])])) : (m(), C(p, { key: 3, modelValue: e.internalItems, "onUpdate:modelValue": t[2] || (t[2] = f => e.internalItems = f), "force-fallback": !0, "item-key": e.itemKey, tag: "tbody", handle: ".drag-handle", disabled: e.disabled || e.internalSort.by !== e.manualSortKey, "set-data": e.hideDragImage, onEnd: e.onSortChange }, { item: d(({ element: f }) => [a(r, { headers: e.internalHeaders, item: f, "show-select": !e.disabled && e.showSelect, "show-manual-sort": !e.disabled && e.showManualSort, "is-selected": e.getSelectedState(f), subdued: e.loading, "sorted-manually": e.internalSort.by === e.manualSortKey, "has-click-listener": !e.disabled && e.clickable, height: e.rowHeight, onClick: v => e.clickable ? e.$emit("click:row", { item: f, event: v }) : null, onItemSelected: v => e.onItemSelected({ item: f, value: !e.getSelectedState(f) }) }, et({ _: 2 }, [he(e.internalHeaders, v => ({ name: `item.${v.value}`, fn: d(() => [ye(e.$slots, `item.${v.value}`, { item: f }, void 0, !0)]) })), e.hasItemAppendSlot ? { name: "item-append", fn: d(() => [ye(e.$slots, "item-append", { item: f }, void 0, !0)]) } : void 0]), 1032, ["headers", "item", "show-select", "show-manual-sort", "is-selected", "subdued", "sorted-manually", "has-click-listener", "height", "onClick", "onItemSelected"])]), _: 3 }, 8, ["modelValue", "item-key", "disabled", "set-data", "onEnd"]))], 12, H9), ye(e.$slots, "footer", {}, void 0, !0)], 2) } var Z9 = B(K9, [["render", X9], ["__scopeId", "data-v-707ca9dc"]]); const Y9 = z({ props: { value: { type: String, default: null } }, setup(e) { const { active: t, toggle: n } = yn({ value: e.value, group: "v-tabs-items" }); return { active: t, toggle: n } } }), x9 = { key: 0, class: "v-tab-item" }; function eU(e, t, n, l, i, u) { return e.active ? (m(), I("div", x9, [ye(e.$slots, "default", Je(xe({ active: e.active, toggle: e.toggle })))])) : R("", !0) } var tU = B(Y9, [["render", eU]]); const nU = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null } }, setup(e) { const { active: t, toggle: n } = yn({ value: e.value, group: "v-tabs" }), l = ht("v-tabs-vertical", E(!1)); return { active: t, toggle: n, onClick: i, vertical: l }; function i() { e.disabled === !1 && n() } } }); function lU(e, t, n, l, i, u) { const o = c("v-list-item"); return e.vertical ? (m(), C(o, { key: 0, class: "v-tab vertical", active: e.active, disabled: e.disabled, clickable: "", onClick: e.onClick }, { default: d(() => [ye(e.$slots, "default", Je(xe({ active: e.active, toggle: e.toggle })), void 0, !0)]), _: 3 }, 8, ["active", "disabled", "onClick"])) : (m(), I("div", { key: 1, class: de(["v-tab horizontal", { active: e.active, disabled: e.disabled }]), onClick: t[0] || (t[0] = (...s) => e.onClick && e.onClick(...s)) }, [ye(e.$slots, "default", Je(xe({ active: e.active, toggle: e.toggle })), void 0, !0)], 2)) } var oU = B(nU, [["render", lU], ["__scopeId", "data-v-2c97bb1b"]]); const aU = z({ props: { modelValue: { type: Array, default: void 0 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { function n(l) { t("update:modelValue", l) } return { update: n } } }); function iU(e, t, n, l, i, u) { const o = c("v-item-group"); return m(), C(o, { class: "v-tabs-items", "model-value": e.modelValue, scope: "v-tabs-items", "onUpdate:modelValue": e.update }, { default: d(() => [ye(e.$slots, "default")]), _: 3 }, 8, ["model-value", "onUpdate:modelValue"]) } var sU = B(aU, [["render", iU]]); const rU = z({ props: { vertical: { type: Boolean, default: !1 }, modelValue: { type: Array, default: void 0 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const { modelValue: n, vertical: l } = je(e); Zt("v-tabs-vertical", l); const { items: i } = No({ selection: n, onSelectionChange: u }, { multiple: E(!1), mandatory: E(!0) }, "v-tabs"); function u(o) { t("update:modelValue", o) } return { update: u, items: i } } }), dU = { key: 1, class: "v-tabs horizontal" }; function uU(e, t, n, l, i, u) { const o = c("v-list"); return e.vertical ? (m(), C(o, { key: 0, class: "v-tabs vertical alt-colors", nav: "" }, { default: d(() => [ye(e.$slots, "default")]), _: 3 })) : (m(), I("div", dU, [ye(e.$slots, "default")])) } var cU = B(rU, [["render", uU], ["__scopeId", "data-v-c201e160"]]); const pU = z({ props: { text: { type: [String, Number, Array, Object, Boolean], required: !0 }, highlight: { type: String, default: null } }, setup() { const e = E(), t = E(!1), { width: n } = Qn(e); return _e(n, () => { !e.value || (t.value = e.value.offsetWidth < e.value.scrollWidth) }, { immediate: !0 }), { el: e, hasEllipsis: t } } }), mU = { ref: "el", class: "v-text-overflow" }; function fU(e, t, n, l, i, u) { const o = c("v-highlight"), s = we("tooltip"); return ee((m(), I("div", mU, [e.highlight ? (m(), C(o, { key: 0, query: e.highlight, text: e.text }, null, 8, ["query", "text"])) : (m(), I(se, { key: 1 }, [D(b(e.text), 1)], 64))], 512)), [[s, e.hasEllipsis && e.text]]) } var vU = B(pU, [["render", fU], ["__scopeId", "data-v-2955c167"]]); const _U = z({ props: { disabled: { type: Boolean, default: !1 }, autofocus: { type: Boolean, default: !1 }, fullWidth: { type: Boolean, default: !0 }, modelValue: { type: String, default: null }, nullable: { type: Boolean, default: !0 }, expandOnFocus: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, trim: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = V(() => ({ input: i, blur: u })), l = V(() => e.modelValue && e.modelValue.length > 0); return { listeners: n, hasContent: l }; function i(o) { const s = o.target.value; e.nullable === !0 && s === "" ? t("update:modelValue", null) : t("update:modelValue", s) } function u() { e.modelValue && e.trim && t("update:modelValue", e.modelValue.trim()) } } }), yU = { key: 0, class: "prepend" }, gU = ["placeholder", "disabled", "value"], hU = { key: 1, class: "append" }; function bU(e, t, n, l, i, u) { const o = we("focus"); return m(), I("div", { class: de(["v-textarea", { disabled: e.disabled, "expand-on-focus": e.expandOnFocus, "full-width": e.fullWidth, "has-content": e.hasContent }]) }, [e.$slots.prepend ? (m(), I("div", yU, [ye(e.$slots, "prepend", {}, void 0, !0)])) : R("", !0), ee(S("textarea", dt(e.$attrs, { placeholder: e.placeholder, disabled: e.disabled, value: e.modelValue }, Kl(e.listeners)), null, 16, gU), [[o, e.autofocus]]), e.$slots.append ? (m(), I("div", hU, [ye(e.$slots, "append", {}, void 0, !0)])) : R("", !0)], 2) } var $U = B(_U, [["render", bU], ["__scopeId", "data-v-12e4b7cd"]]); const wU = z({ components: { SearchInput: $n }, props: { active: { type: Boolean, default: !1 }, selection: { type: Array, default: () => [] }, collection: { type: String, required: !0 }, multiple: { type: Boolean, default: !1 }, filter: { type: Object, default: null } }, emits: ["update:active", "input"], setup(e, { emit: t }) { const { t: n } = x(), { save: l, cancel: i } = N(), { internalActive: u } = L(), { internalSelection: o, onSelect: s } = T(), { collection: r } = je(e), { info: p } = ot(r), { layout: f, layoutOptions: v, layoutQuery: _, search: y, filter: g } = bn(r, E(null), !0), w = E(f.value || "tabular"), h = E(v.value), k = E(_.value), F = V({ get() { return o.value }, set(O) { s(O) } }), { layoutWrapper: A } = un(f), P = V({ get() { return e.filter ? g.value ? { _and: [e.filter, g.value] } : e.filter : g.value }, set(O) { g.value = O } }); return { t: n, save: l, cancel: i, internalActive: u, layoutWrapper: A, layoutSelection: F, layoutFilter: P, localLayout: w, localOptions: h, localQuery: k, collectionInfo: p, search: y, presetFilter: g }; function L() { const O = E(!1); return { internalActive: V({ get() { return e.active === void 0 ? O.value : e.active }, set(q) { O.value = q, t("update:active", q) } }) } } function T() { const O = E(null), U = V({ get() { return O.value === null ? e.selection : O.value }, set(K) { O.value = K } }); return _e(() => e.active, () => { O.value = null }), { internalSelection: U, onSelect: q }; function q(K) { if (K.length === 0) { O.value = []; return } e.multiple === !0 ? O.value = K : O.value = [K[K.length - 1]] } } function N() { return { save: O, cancel: U }; function O() { t("input", o.value), u.value = !1 } function U() { u.value = !1 } } } }); function kU(e, t, n, l, i, u) { const o = c("v-breadcrumb"), s = c("v-icon"), r = c("v-button"), p = c("search-input"), f = c("v-info"), v = c("v-drawer"), _ = we("tooltip"); return m(), C(Ne(e.layoutWrapper), { selection: e.layoutSelection, "onUpdate:selection": t[3] || (t[3] = y => e.layoutSelection = y), "layout-options": e.localOptions, "onUpdate:layout-options": t[4] || (t[4] = y => e.localOptions = y), "layout-query": e.localQuery, "onUpdate:layout-query": t[5] || (t[5] = y => e.localQuery = y), filter: e.layoutFilter, search: e.search, collection: e.collection, "select-mode": "" }, { default: d(({ layoutState: y }) => [a(v, { modelValue: e.internalActive, "onUpdate:modelValue": t[2] || (t[2] = g => e.internalActive = g), title: e.t("select_item"), onCancel: e.cancel }, { subtitle: d(() => [a(o, { items: [{ name: e.collectionInfo.name, disabled: !0 }] }, null, 8, ["items"])]), "title-outer:prepend": d(() => [a(r, { class: "header-icon", rounded: "", icon: "", secondary: "", disabled: "" }, { default: d(() => [a(s, { name: e.collectionInfo.icon, color: e.collectionInfo.color }, null, 8, ["name", "color"])]), _: 1 })]), "actions:prepend": d(() => [(m(), C(Ne(`layout-actions-${e.localLayout}`), Je(xe(y)), null, 16))]), actions: d(() => [a(p, { modelValue: e.search, "onUpdate:modelValue": t[0] || (t[0] = g => e.search = g), filter: e.presetFilter, "onUpdate:filter": t[1] || (t[1] = g => e.presetFilter = g), collection: e.collection }, null, 8, ["modelValue", "filter", "collection"]), ee(a(r, { icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 8, ["onClick"]), [[_, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [(m(), C(Ne(`layout-${e.localLayout}`), dt({ class: "layout" }, y), { "no-results": d(() => [a(f, { title: e.t("item_count", 0), icon: e.collectionInfo.icon, center: "" }, null, 8, ["title", "icon"])]), "no-items": d(() => [a(f, { title: e.t("item_count", 0), icon: e.collectionInfo.icon, center: "" }, null, 8, ["title", "icon"])]), _: 2 }, 1040))]), _: 2 }, 1032, ["modelValue", "title", "onCancel"])]), _: 1 }, 8, ["selection", "layout-options", "layout-query", "filter", "search", "collection"]) } var Jt = B(wU, [["render", kU], ["__scopeId", "data-v-1f94c5ba"]]); const SU = z({ components: { DrawerCollection: Jt }, props: { multiple: { type: Boolean, default: !1 }, preset: { type: Object, default: () => ({}) }, fileId: { type: String, default: null }, fromUrl: { type: Boolean, default: !1 }, fromLibrary: { type: Boolean, default: !1 }, folder: { type: String, default: void 0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { uploading: l, progress: i, upload: u, onBrowseSelect: o, done: s, numberOfFiles: r } = P(), { onDragEnter: p, onDragLeave: f, onDrop: v, dragging: _ } = L(), { url: y, isValidURL: g, loading: w, importFromURL: h } = N(), { setSelection: k } = T(), F = E(null), A = V(() => e.folder ? { folder: { id: { _eq: e.folder } } } : null); return { t: n, uploading: l, progress: i, onDragEnter: p, onDragLeave: f, onDrop: v, dragging: _, onBrowseSelect: o, done: s, numberOfFiles: r, activeDialog: F, filterByFolder: A, url: y, isValidURL: g, urlLoading: w, importFromURL: h, setSelection: k }; function P() { const O = E(!1), U = E(0), q = E(0), K = E(0); return { uploading: O, progress: U, upload: W, onBrowseSelect: te, numberOfFiles: q, done: K }; async function W(G) { O.value = !0, U.value = 0; const X = {}; e.folder && (X.folder = e.folder); try { if (q.value = G.length, e.multiple === !0) { const ve = await Ua(Array.from(G), { onProgressChange: ae => { U.value = Math.round(ae.reduce((ne, Y) => ne += Y) / G.length), K.value = ae.filter(ne => ne === 100).length }, preset: re(re({}, e.preset), X) }); ve && t("input", ve) } else { const ve = await Ma(Array.from(G)[0], { onProgressChange: ae => { U.value = ae, K.value = ae === 100 ? 1 : 0 }, fileId: e.fileId, preset: re(re({}, e.preset), X) }); ve && t("input", ve) } } catch (ve) { Ve(ve) } finally { O.value = !1, K.value = 0, q.value = 0 } } function te(G) { var ve; const X = (ve = G.target) == null ? void 0 : ve.files; X && W(X) } } function L() { const O = E(!1); let U = 0; return { onDragEnter: q, onDragLeave: K, onDrop: W, dragging: O }; function q() { U++, U === 1 && (O.value = !0) } function K() { U--, U === 0 && (O.value = !1) } function W(te) { var X; U = 0, O.value = !1; const G = (X = te.dataTransfer) == null ? void 0 : X.files; G && u(G) } } function T() { return { setSelection: O }; async function O(U) { if (U[0]) { const q = U[0], K = await ue.get(`/files/${q}`); t("input", K.data.data) } else t("input", null) } } function N() { const O = E(""), U = E(!1), q = V(() => { try { return new URL(O.value), !0 } catch { return !1 } }); return { url: O, loading: U, isValidURL: q, importFromURL: K }; async function K() { U.value = !0; try { const W = await ue.post("/files/import", { url: O.value, data: { folder: e.folder } }); Wn.emit(vn.upload), e.multiple ? t("input", [W.data.data]) : t("input", W.data.data), F.value = null, O.value = "" } catch (W) { Ve(W) } finally { U.value = !1 } } } } }), CU = { class: "type-label" }, VU = { class: "type-text" }, FU = { class: "type-label" }, AU = { class: "type-text" }, IU = { class: "type-label" }, EU = { class: "type-text" }, DU = ["multiple"]; function TU(e, t, n, l, i, u) { const o = c("v-progress-linear"), s = c("v-icon"), r = c("v-list-item-icon"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-list"), _ = c("v-menu"), y = c("drawer-collection"), g = c("v-card-title"), w = c("v-input"), h = c("v-card-text"), k = c("v-button"), F = c("v-card-actions"), A = c("v-card"), P = c("v-dialog"); return m(), I("div", { "data-dropzone": "", class: de(["v-upload", { dragging: e.dragging, uploading: e.uploading }]), onDragenter: t[8] || (t[8] = Ae((...L) => e.onDragEnter && e.onDragEnter(...L), ["prevent"])), onDragover: t[9] || (t[9] = Ae(() => { }, ["prevent"])), onDragleave: t[10] || (t[10] = Ae((...L) => e.onDragLeave && e.onDragLeave(...L), ["prevent"])), onDrop: t[11] || (t[11] = Ae((...L) => e.onDrop && e.onDrop(...L), ["stop", "prevent"])) }, [e.dragging ? (m(), I(se, { key: 0 }, [S("p", CU, b(e.t("drop_to_upload")), 1), S("p", VU, b(e.t("upload_pending")), 1)], 64)) : e.uploading ? (m(), I(se, { key: 1 }, [S("p", FU, b(e.progress) + "%", 1), S("p", AU, b(e.multiple && e.numberOfFiles > 1 ? e.t("upload_files_indeterminate", { done: e.done, total: e.numberOfFiles }) : e.t("upload_file_indeterminate")), 1), a(o, { value: e.progress, rounded: "" }, null, 8, ["value"])], 64)) : (m(), I(se, { key: 2 }, [S("p", IU, b(e.t("drag_file_here")), 1), S("p", EU, b(e.t("click_to_browse")), 1), S("input", { class: "browse", type: "file", multiple: e.multiple, onInput: t[0] || (t[0] = (...L) => e.onBrowseSelect && e.onBrowseSelect(...L)) }, null, 40, DU), e.fromUrl !== !1 || e.fromLibrary !== !1 ? (m(), I(se, { key: 0 }, [a(_, { "show-arrow": "", placement: "bottom-end" }, { activator: d(({ toggle: L }) => [a(s, { clickable: "", class: "options", name: "more_vert", onClick: L }, null, 8, ["onClick"])]), default: d(() => [a(v, null, { default: d(() => [e.fromLibrary ? (m(), C(f, { key: 0, clickable: "", onClick: t[1] || (t[1] = L => e.activeDialog = "choose") }, { default: d(() => [a(r, null, { default: d(() => [a(s, { name: "folder_open" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("choose_from_library")), 1)]), _: 1 })]), _: 1 })) : R("", !0), e.fromUrl ? (m(), C(f, { key: 1, clickable: "", onClick: t[2] || (t[2] = L => e.activeDialog = "url") }, { default: d(() => [a(r, null, { default: d(() => [a(s, { name: "link" })]), _: 1 }), a(p, null, { default: d(() => [D(b(e.t("import_from_url")), 1)]), _: 1 })]), _: 1 })) : R("", !0)]), _: 1 })]), _: 1 }), a(y, { collection: "directus_files", active: e.activeDialog === "choose", filter: e.filterByFolder, "onUpdate:active": t[3] || (t[3] = L => e.activeDialog = null), onInput: e.setSelection }, null, 8, ["active", "filter", "onInput"]), a(P, { "model-value": e.activeDialog === "url", persistent: e.urlLoading, onEsc: t[6] || (t[6] = L => e.activeDialog = null), "onUpdate:modelValue": t[7] || (t[7] = L => e.activeDialog = null) }, { default: d(() => [a(A, null, { default: d(() => [a(g, null, { default: d(() => [D(b(e.t("import_from_url")), 1)]), _: 1 }), a(h, null, { default: d(() => [a(w, { modelValue: e.url, "onUpdate:modelValue": t[4] || (t[4] = L => e.url = L), autofocus: "", placeholder: e.t("url"), nullable: !1, disabled: e.urlLoading }, null, 8, ["modelValue", "placeholder", "disabled"])]), _: 1 }), a(F, null, { default: d(() => [a(k, { disabled: e.urlLoading, secondary: "", onClick: t[5] || (t[5] = L => e.activeDialog = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["disabled"]), a(k, { loading: e.urlLoading, disabled: e.isValidURL === !1, onClick: e.importFromURL }, { default: d(() => [D(b(e.t("import_label")), 1)]), _: 1 }, 8, ["loading", "disabled", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value", "persistent"])], 64)) : R("", !0)], 64))], 34) } var PU = B(SU, [["render", TU], ["__scopeId", "data-v-f6bc0158"]]); function OU(e) { e.component("VAvatar", EP), e.component("VBadge", OP), e.component("VBreadcrumb", UP), e.component("VButton", zP), e.component("VCardActions", GP), e.component("VCardSubtitle", ZP), e.component("VCardText", tO), e.component("VCardTitle", aO), e.component("VCard", rO), e.component("VCheckbox", fO), e.component("VCheckboxTree", bO), e.component("VChip", SO), e.component("VDetail", AO), e.component("VDialog", TO), e.component("VDivider", MO), e.component("VError", dL), e.component("VFancySelect", gL), e.component("VFieldTemplate", DL), e.component("VFieldSelect", kL), e.component("VForm", ZL), e.component("VHover", ej), e.component("VHighlight", lj), e.component("VIcon", g7), e.component("VInfo", S7), e.component("VInput", L7), e.component("VItemGroup", U7), e.component("VItem", z7), e.component("VListGroup", J7), e.component("VListItemContent", Y7), e.component("VListItemHint", tM), e.component("VListItemIcon", oM), e.component("VListItem", sM), e.component("VList", uM), e.component("VMenu", vM), e.component("VDrawer", aL), e.component("VNotice", gM), e.component("VOverlay", SM), e.component("VPagination", DM), e.component("VProgressCircular", jM), e.component("VProgressLinear", UM), e.component("VRadio", KM), e.component("VSelect", l9), e.component("VSheet", s9), e.component("VSkeletonLoader", p9), e.component("VSlider", w9), e.component("VSwitch", I9), e.component("VTabItem", tU), e.component("VTab", oU), e.component("VTable", Z9), e.component("VTabsItems", sU), e.component("VTabs", cU), e.component("VTemplateInput", Fa), e.component("VTextarea", $U), e.component("VTextOverflow", vU), e.component("VUpload", PU), e.component("TransitionBounce", bP), e.component("TransitionDialog", kP), e.component("TransitionExpand", FP), e.component("RenderDisplay", K6), e.component("RenderTemplate", x6), e.component("ExportSidebarDetail", B6), e.component("SidebarDetail", aP), e.component("UserPopover", fP), e.component("ValueNull", tn), e.component("DocsWrapper", yP) } const Ms = (e, { value: t }) => { const { handler: n, middleware: l, events: i, disabled: u } = jU(t); _e(() => t, o => { JSON.stringify(o) !== JSON.stringify(t) && Ns(e, { value: o, oldValue: null }) }), u !== !0 && (e.$clickOutsideHandlers = i.map(o => ({ event: o, handler: s => RU({ event: s, el: e, handler: n, middleware: l }) })), e.$clickOutsideHandlers.forEach(({ event: o, handler: s }) => { setTimeout(() => { !e.$clickOutsideHandlers || document.documentElement.addEventListener(o, s, !1) }) })) }, Us = e => { (e.$clickOutsideHandlers || []).forEach(({ event: n, handler: l }) => { document.documentElement.removeEventListener(n, l, !1) }) }, Ns = (e, { value: t, oldValue: n }) => { JSON.stringify(t) !== JSON.stringify(n) && (Us(e), Ms(e, { value: t })) }, LU = { beforeMount: Ms, unmounted: Us, updated: Ns }; function jU(e) { const t = typeof e == "function"; let n; if (t) n = { handler: e, middleware: () => !0, events: ["pointerdown"], disabled: !1 }; else { const l = e; n = { handler: l.handler || (() => { }), middleware: l.middleware || (() => !0), events: l.events || ["pointerdown"], disabled: l.disabled !== void 0 ? !!l.disabled : !1 } } return n } function RU({ el: e, event: t, handler: n, middleware: l }) { t.stopPropagation(); const i = t.composedPath(); (i ? i.indexOf(e) < 0 : e.contains(t.target) === !1) !== !1 && l(t) && n(t) } function MU(e, t) { var l; const n = (l = t.instance) == null ? void 0 : l.$refs[t.value]; e.addEventListener("contextmenu", Bs(n)), e.addEventListener("focusout", qs(n)) } function UU(e, t) { var l; const n = (l = t.instance) == null ? void 0 : l.$refs[t.value]; e.removeEventListener("contextmenu", Bs(n)), e.removeEventListener("focusout", qs(n)) } const NU = { mounted: MU, unmounted: UU }; function Bs(e) { return t => { t.stopPropagation(), t.preventDefault(), e && e.activate(t) } } function qs(e) { return t => { e && e.deactivate(t) } } const BU = { mounted(e, t) { t.value ? e.focus() : e.blur() } }, qU = 300, El = {}; function Bo(e, t) { t.value && (e.dataset.tooltip = bt(), El[e.dataset.tooltip] = KU(e, t), e.addEventListener("mouseenter", El[e.dataset.tooltip]), e.addEventListener("mouseleave", zs)) } function qo(e) { e.removeEventListener("mouseenter", El[e.dataset.tooltip]), e.removeEventListener("mouseleave", zs), clearTimeout(Dl), zo().classList.remove("visible"), delete El[e.dataset.tooltip] } const zU = { beforeMount: Bo, unmounted: qo, updated(e, t) { t.value && !t.oldValue ? Bo(e, t) : !t.value && t.oldValue ? qo(e) : (qo(e), Bo(e, t)) } }; let Dl; function KU(e, t) { return () => { const n = zo(); t.modifiers.instant ? (Hs(n), Ks(e, t, n)) : (clearTimeout(Dl), Dl = window.setTimeout(() => { Hs(n), Ks(e, t, n) }, qU)) } } function zs() { const e = zo(); clearTimeout(Dl), HU(e) } function Ks(e, t, n) { const l = 10, i = 20, u = e.getBoundingClientRect(); let o = u.top + pageYOffset, s = u.left + pageXOffset, r; n.innerText = t.value, n.classList.remove("top", "bottom", "left", "right", "start", "end"), t.modifiers.inverted ? n.classList.add("inverted") : n.classList.remove("inverted"), t.modifiers.monospace && n.classList.add("monospace"), t.modifiers.bottom ? (t.modifiers.start ? (s += i, r = 100, n.classList.add("start")) : t.modifiers.end ? (s += u.width - i, r = 0, n.classList.add("end")) : (s += u.width / 2, r = 50), o += u.height + l, n.style.transform = `translate(calc(${s}px - ${r}%), ${o}px)`, n.classList.add("bottom")) : t.modifiers.left ? (t.modifiers.start ? (o += i, r = 100, n.classList.add("start")) : t.modifiers.end ? (o += u.height - i, r = 0, n.classList.add("end")) : (o += u.height / 2, r = 50), s -= l, n.style.transform = `translate(calc(${s}px - 100%), calc(${o}px - ${r}%))`, n.classList.add("left")) : t.modifiers.right ? (t.modifiers.start ? (o += i, r = 100, n.classList.add("start")) : t.modifiers.end ? (o += u.height - i, r = 0, n.classList.add("end")) : (o += u.height / 2, r = 50), s += u.width + l, n.style.transform = `translate(${s}px, calc(${o}px - ${r}%))`, n.classList.add("right")) : (t.modifiers.start ? (s += i, r = 100, n.classList.add("start")) : t.modifiers.end ? (s += u.width - i, r = 0, n.classList.add("end")) : (s += u.width / 2, r = 50), o -= l, n.style.transform = `translate(calc(${s}px - ${r}%), calc(${o}px - 100%))`, n.classList.add("top")) } function Hs(e) { e.classList.add("visible", "enter"), e.classList.remove("leave", "leave-active"), setTimeout(() => { e.classList.contains("enter") !== !1 && (e.classList.add("enter-active"), e.classList.remove("enter")) }, 1), setTimeout(() => { e.classList.remove("enter-active") }, 200) } function HU(e) { e.classList.contains("visible") !== !1 && (e.classList.add("visible", "leave"), e.classList.remove("enter", "enter-active"), setTimeout(() => { e.classList.contains("leave") !== !1 && (e.classList.add("leave-active"), e.classList.remove("leave")) }, 1), setTimeout(() => { e.classList.contains("leave-active") !== !1 && (e.classList.remove("leave-active"), e.classList.remove("visible")) }, 200)) } function zo() { let e = document.getElementById("tooltip"); return e instanceof HTMLElement || (e = document.createElement("div"), e.id = "tooltip", document.body.appendChild(e)), e } const WU = { beforeMount(e, t) { var n; e.innerHTML = Cl((n = t.value) != null ? n : "") }, updated(e, t) { var n; e.innerHTML = Cl((n = t.value) != null ? n : "") } }; function GU(e) { e.directive("click-outside", LU), e.directive("context-menu", NU), e.directive("focus", BU), e.directive("tooltip", zU), e.directive("md", WU) } const JU = z({ props: { showHeader: { type: Boolean, default: !1 }, text: { type: String, default: "" }, color: { type: String, default: void 0 } } }); function QU(e, t, n, l, i, u) { return m(), I("div", { class: de(["label type-title selectable", { "has-header": e.showHeader }]), style: Ke({ color: e.color }) }, b(e.text), 7) } var XU = B(JU, [["render", QU], ["__scopeId", "data-v-b5689fe6"]]), ZU = ul({ id: "label", name: "$t:panels.label.name", description: "$t:panels.label.description", icon: "title", component: XU, options: [{ field: "text", name: "$t:label", type: "string", meta: { interface: "input", width: "half" } }, { field: "color", name: "$t:color", type: "string", meta: { interface: "select-color", width: "half", options: { placeholder: "$t:automatic" } } }], minWidth: 12, minHeight: 8 }), YU = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: ZU }); const xU = z({ components: { FilePreview: po }, props: { active: { type: Boolean, default: !1 }, collection: { type: String, required: !0 }, primaryKey: { type: [String, Number], required: !0 }, edits: { type: Object, default: void 0 }, junctionField: { type: String, default: null }, relatedPrimaryKey: { type: [String, Number], default: "+" }, circularField: { type: String, default: null } }, emits: ["update:active", "input"], setup(e, { emit: t }) { const { t: n, te: l } = x(), i = Pe(), u = ut(), { internalActive: o } = X(), { junctionFieldInfo: s, junctionRelatedCollection: r, junctionRelatedCollectionInfo: p, setJunctionEdits: f } = ae(), { internalEdits: v, loading: _, item: y } = ve(), { save: g, cancel: w } = ne(), { collection: h } = je(e), { info: k } = ot(h), F = V(() => { const Y = (p == null ? void 0 : p.value) || k.value, ce = e.primaryKey === "+"; return l(`collection_names_singular.${Y.collection}`) ? ce ? n("creating_unit", { unit: n(`collection_names_singular.${Y.collection}`) }) : n("editing_unit", { unit: n(`collection_names_singular.${Y.collection}`) }) : ce ? n("creating_in", { collection: Y.name }) : n("editing_in", { collection: Y.name }) }), A = V(() => i.getFieldsForCollection(e.collection).filter(Y => { var ce; return ((ce = Y.meta) == null ? void 0 : ce.hidden) !== !0 }).length > 0), { fields: P } = qn(r, V(() => y.value && y.value[e.junctionField]), V(() => e.primaryKey === "+")), { fields: L } = qn(h, y, V(() => e.primaryKey === "+")), T = V(() => e.circularField ? L.value.filter(Y => Y.field !== e.circularField) : L.value), N = V(() => s.value ? String(e.relatedPrimaryKey) : String(e.primaryKey)), O = V(() => p.value || k.value), { templateData: U, loading: q } = Ta(O, N), K = V(() => { var Y, ce, pe, H; return ((ce = (Y = p.value) == null ? void 0 : Y.meta) == null ? void 0 : ce.display_template) || ((H = (pe = k.value) == null ? void 0 : pe.meta) == null ? void 0 : H.display_template) || null }), { file: W, isDirectusFiles: te } = G(); return { t: n, internalActive: o, internalEdits: v, loading: _, item: y, save: g, cancel: w, title: F, junctionFieldInfo: s, junctionRelatedCollection: r, setJunctionEdits: f, showDivider: A, junctionRelatedCollectionFields: P, fields: T, template: K, templateCollection: O, templatePrimaryKey: N, templateData: U, templateDataLoading: q, collectionInfo: k, file: W, isDirectusFiles: te }; function G() { const Y = V(() => r.value === "directus_files"); return { file: V(() => { var Q; if (Y.value === !1 || !y.value) return null; const pe = (Q = y.value) == null ? void 0 : Q[e.junctionField]; if (!pe) return null; const H = st(Ye() + `assets/${pe.id}?key=system-large-contain`); return Ce(re({}, pe), { src: H }) }), isDirectusFiles: Y } } function X() { const Y = E(!1); return { internalActive: V({ get() { return e.active === void 0 ? Y.value : e.active }, set(pe) { Y.value = pe, t("update:active", pe) } }) } } function ve() { const Y = E({}), ce = V({ get() { return e.edits !== void 0 ? re(re({}, e.edits), Y.value) : Y.value }, set(le) { Y.value = le } }), pe = E(!1), H = E(null); return _e(() => e.active, le => { le === !0 ? (e.primaryKey !== "+" && Q(), e.relatedPrimaryKey !== "+" && Z()) : (pe.value = !1, H.value = null, Y.value = {}) }, { immediate: !0 }), { internalEdits: ce, loading: pe, item: H, fetchItem: Q }; async function Q() { pe.value = !0; const le = e.collection.startsWith("directus_") ? `/${e.collection.substring(9)}/${e.primaryKey}` : `/items/${e.collection}/${encodeURIComponent(e.primaryKey)}`; let fe = "*"; e.junctionField && (fe = `*,${e.junctionField}.*`); try { const J = await ue.get(le, { params: { fields: fe } }); H.value = J.data.data } catch (J) { Ve(J) } finally { pe.value = !1 } } async function Z() { pe.value = !0; const le = r.value, fe = le.startsWith("directus_") ? `/${le.substring(9)}/${e.relatedPrimaryKey}` : `/items/${le}/${encodeURIComponent(e.relatedPrimaryKey)}`; try { const J = await ue.get(fe); H.value = Ce(re({}, H.value || {}), { [s.value.field]: J.data.data }) } catch (J) { Ve(J) } finally { pe.value = !1 } } } function ae() { const Y = V(() => e.junctionField ? i.getField(e.collection, e.junctionField) : null), ce = V(() => { var le, fe; if (!e.junctionField) return null; const Z = u.getRelationsForField(e.collection, e.junctionField).find(J => J.collection === e.collection && J.field === e.junctionField); return Z.related_collection ? Z.related_collection : ((le = Z.meta) == null ? void 0 : le.one_collection_field) ? e.edits[Z.meta.one_collection_field] || ((fe = y.value) == null ? void 0 : fe[Z.meta.one_collection_field]) : null }), { info: pe } = ot(ce); return { junctionFieldInfo: Y, junctionRelatedCollection: ce, junctionRelatedCollectionInfo: pe, setJunctionEdits: H }; function H(Q) { !e.junctionField || (v.value = Ce(re({}, v.value), { [e.junctionField]: Q })) } } function ne() { return { save: Y, cancel: ce }; function Y() { t("input", v.value), o.value = !1, v.value = {} } function ce() { o.value = !1, v.value = {} } } } }), eN = { key: 1, class: "type-title" }, tN = { class: "drawer-item-content" }; function nN(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("render-template"), r = c("v-breadcrumb"), p = c("v-icon"), f = c("v-button"), v = c("file-preview"), _ = c("v-form"), y = c("v-divider"), g = c("v-drawer"), w = we("tooltip"); return m(), C(g, { modelValue: e.internalActive, "onUpdate:modelValue": t[1] || (t[1] = h => e.internalActive = h), title: e.title, persistent: "", onCancel: e.cancel }, et({ subtitle: d(() => [a(r, { items: [{ name: e.collectionInfo.name, disabled: !0 }] }, null, 8, ["items"])]), actions: d(() => [ye(e.$slots, "actions", {}, void 0, !0), ee(a(f, { icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(p, { name: "check" })]), _: 1 }, 8, ["onClick"]), [[w, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", tN, [e.junctionField ? (m(), I(se, { key: 0 }, [e.file ? (m(), C(v, { key: 0, src: e.file.src, mime: e.file.type, width: e.file.width, height: e.file.height, title: e.file.title, "in-modal": !0 }, null, 8, ["src", "mime", "width", "height", "title"])) : R("", !0), a(_, { loading: e.loading, "initial-values": e.item && e.item[e.junctionField], "primary-key": e.relatedPrimaryKey, "model-value": e.internalEdits[e.junctionField], fields: e.junctionRelatedCollectionFields, autofocus: "", "onUpdate:modelValue": e.setJunctionEdits }, null, 8, ["loading", "initial-values", "primary-key", "model-value", "fields", "onUpdate:modelValue"]), e.showDivider ? (m(), C(y, { key: 1 })) : R("", !0)], 64)) : R("", !0), a(_, { modelValue: e.internalEdits, "onUpdate:modelValue": t[0] || (t[0] = h => e.internalEdits = h), loading: e.loading, "initial-values": e.item, "primary-key": e.primaryKey, fields: e.fields }, null, 8, ["modelValue", "loading", "initial-values", "primary-key", "fields"])])]), _: 2 }, [e.template !== null && e.templateData && e.primaryKey !== "+" ? { name: "title", fn: d(() => [e.loading || e.templateDataLoading ? (m(), C(o, { key: 0, class: "title-loader", type: "text" })) : (m(), I("h1", eN, [a(s, { collection: e.templateCollection.collection, item: e.templateData, template: e.template }, null, 8, ["collection", "item", "template"])]))]) } : void 0]), 1032, ["modelValue", "title", "onCancel"]) } var Bt = B(xU, [["render", nN], ["__scopeId", "data-v-13e1ca41"]]); function Qt(e, t) { const n = Pe(), { displays: l } = xt(); return e.map(u => { var p, f; const o = n.getField(t, u); if (!o || ((p = o.meta) == null ? void 0 : p.display) === null) return u; const s = l.value.find(v => { var _; return v.id === ((_ = o.meta) == null ? void 0 : _.display) }); if (!s || !(s == null ? void 0 : s.fields)) return u; let r = null; return Array.isArray(s.fields) && (r = s.fields.map(v => `${u}.${v}`)), typeof s.fields == "function" && (r = s.fields((f = o.meta) == null ? void 0 : f.display_options, { collection: o.collection, field: o.field, type: o.type }).map(v => `${u}.${v}`)), r ? r.map(v => v.includes("$thumbnail") && o.collection === "directus_files" ? v.split(".").filter(_ => _ !== "$thumbnail").join(".") : v) : u }).flat() } const lN = z({ components: { DrawerItem: Bt }, props: { showHeader: { type: Boolean, default: !1 }, displayTemplate: { type: String, default: "" }, sortField: { type: String, default: void 0 }, sortDirection: { type: String, default: "desc" }, collection: { type: String, required: !0 }, limit: { type: Number, default: 5 }, filter: { type: Object, default: () => ({}) } }, setup(e) { const { t } = x(), n = E(), l = E(), i = Pe(), u = E([]), o = E(!1), s = E(), r = V(() => u.value && u.value.length > 0), p = V(() => e.displayTemplate), f = V(() => i.getPrimaryKeyFieldForCollection(e.collection)); return v(), _e(() => e, (w, h) => { M.exports.isEqual(w, h) || v() }, { deep: !0, immediate: !0 }), { list: u, loading: o, renderTemplate: p, primaryKeyField: f, startEditing: _, saveEdits: y, cancelEdit: g, currentlyEditing: n, editsAtStart: l, hasData: r, t }; async function v() { var w; if (!!e) { o.value = !0; try { const h = e.sortField, k = await ue.get(Wt(e.collection), { params: { fields: [f.value.field, ...Qt(vt(p.value), e.collection)], filter: e.filter, sort: e.sortDirection === "desc" ? `-${h}` : h, limit: (w = e.limit) != null ? w : 5 } }); u.value = k.data.data } catch (h) { s.value = h, Ve(h) } finally { o.value = !1 } } } function _(w) { n.value = w[f.value.field], l.value = w } async function y(w) { try { await ue.patch(`/items/${e.collection}/${n.value}`, w) } catch (h) { Ve(h) } await v() } function g() { l.value = void 0, n.value = void 0 } } }), oN = e => (Qe("data-v-55018d78"), e = e(), Xe(), e), aN = { key: 1, class: "type-note" }, iN = { key: 2 }, sN = oN(() => S("div", { class: "spacer" }, null, -1)); function rN(e, t, n, l, i, u) { var v; const o = c("v-progress-circular"), s = c("render-template"), r = c("v-list-item"), p = c("v-list"), f = c("drawer-item"); return m(), I("div", { class: de(["list", { "has-header": e.showHeader, loading: e.loading, "no-data": !e.hasData }]) }, [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : e.hasData ? (m(), I("div", iN, [a(p, null, { default: d(() => [(m(!0), I(se, null, he(e.list, _ => (m(), C(r, { key: _[e.primaryKeyField.field], class: "selectable", clickable: "", onClick: y => e.startEditing(_) }, { default: d(() => [a(s, { item: _, collection: e.collection, template: e.renderTemplate }, null, 8, ["item", "collection", "template"]), sN]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })])) : (m(), I("span", aN, b(e.t("no_data")), 1)), a(f, { active: !!e.currentlyEditing, collection: e.collection, "primary-key": (v = e.currentlyEditing) != null ? v : "+", edits: e.editsAtStart, onInput: e.saveEdits, "onUpdate:active": e.cancelEdit }, null, 8, ["active", "collection", "primary-key", "edits", "onInput", "onUpdate:active"])], 2) } var dN = B(lN, [["render", rN], ["__scopeId", "data-v-55018d78"]]), uN = ul({ id: "list", name: "$t:panels.list.name", description: "$t:panels.list.description", icon: "list", component: dN, options: [{ field: "collection", type: "string", name: "$t:collection", meta: { interface: "system-collection", options: { includeSystem: !0 }, width: "half" } }, { field: "limit", type: "integer", name: "$t:limit", schema: { default_value: 5 }, meta: { interface: "input", width: "half" } }, { field: "sortField", type: "string", name: "$t:sort_field", meta: { interface: "system-field", options: { collectionField: "collection", allowPrimaryKey: !0, placeholder: "$t:primary_key" }, width: "half" } }, { field: "sortDirection", type: "string", name: "$t:sort_direction", schema: { default_value: "desc" }, meta: { interface: "select-dropdown", options: { choices: [{ text: "$t:sort_asc", value: "asc" }, { text: "$t:sort_desc", value: "desc" }] }, width: "half" } }, { field: "displayTemplate", name: "$t:display_template", type: "string", meta: { interface: "system-display-template", width: "full", options: { collectionField: "collection", placeholder: "{{ field }}" } } }, { field: "filter", type: "json", name: "$t:filter", meta: { interface: "system-filter", options: { collectionField: "collection" } } }], minWidth: 16, minHeight: 12 }), cN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: uN }); const pN = z({ props: { showHeader: { type: Boolean, default: !1 }, abbreviate: { type: Boolean, default: !1 }, sortField: { type: String, default: void 0 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, function: { type: String, required: !0 }, filter: { type: Object, default: () => ({}) }, decimals: { type: Number, default: 0 }, conditionalFormatting: { type: Array, default: () => [] }, prefix: { type: String, default: null }, suffix: { type: String, default: null } }, setup(e) { const { n: t } = x(), n = E(), l = E(!1); o(), _e(() => e, (s, r) => { M.exports.isEqual(s, r) || o() }, { deep: !0 }); const i = V(() => { var s, r, p; return M.exports.isNil(n.value) ? null : e.abbreviate ? lo(n.value, (s = e.decimals) != null ? s : 0) : t(Number(n.value), "decimal", { minimumFractionDigits: (r = e.decimals) != null ? r : 0, maximumFractionDigits: (p = e.decimals) != null ? p : 0 }) }), u = V(() => { if (M.exports.isNil(n.value)) return null; let s = null; for (const p of e.conditionalFormatting || []) r(p) && (s = p); return s ? s.color || "#00C897" : null; function r(p) { var _; const f = Number(n.value), v = Number((_ = p.value) != null ? _ : 0); switch (p.operator || ">=") { case "=": return f === v; case "!=": return f !== v; case ">": return f > v; case ">=": return f >= v; case "<": return f < v; case "<=": return f < v } } }); return { metric: n, loading: l, displayValue: i, color: u }; async function o() { if (!e) return; const s = ["first", "last"].includes(e.function); l.value = !0; try { const r = e.sortField && `${e.function === "last" ? "-" : ""}${e.sortField}`, p = s ? void 0 : { [e.function]: [e.field || "*"] }, f = await ue.get(Wt(e.collection), { params: { aggregate: p, filter: e.filter, sort: r, limit: 1, fields: [e.field] } }); e.field ? e.function === "first" || e.function === "last" ? n.value = Number(f.data.data[0][e.field]) : n.value = Number(f.data.data[0][e.function][e.field]) : n.value = Number(f.data.data[0][e.function]) } catch { } finally { l.value = !1 } } } }), mN = { class: "prefix" }, fN = { class: "value" }, vN = { class: "suffix" }; function _N(e, t, n, l, i, u) { const o = c("v-progress-circular"); return m(), I("div", { class: de(["metric type-title selectable", { "has-header": e.showHeader }]) }, [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : (m(), I("div", { key: 1, style: Ke({ color: e.color }) }, [S("span", mN, b(e.prefix), 1), S("span", fN, b(e.displayValue), 1), S("span", vN, b(e.suffix), 1)], 4))], 2) } var yN = B(pN, [["render", _N], ["__scopeId", "data-v-f27ebf0c"]]), gN = ul({ id: "metric", name: "$t:panels.metric.name", description: "$t:panels.metric.description", icon: "functions", component: yN, options: [{ field: "collection", type: "string", name: "$t:collection", meta: { interface: "system-collection", options: { includeSystem: !0 }, width: "half" } }, { field: "field", type: "string", name: "$t:panels.metric.field", meta: { interface: "system-field", options: { collectionField: "collection", typeAllowList: ["integer", "bigInteger", "float", "decimal"], allowPrimaryKey: !0, allowNone: !0 }, width: "half" } }, { field: "function", type: "string", name: "$t:aggregate_function", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "Count", value: "count" }, { text: "Count (Distinct)", value: "count_distinct" }, { text: "Average", value: "avg" }, { text: "Average (Distinct)", value: "avg_distinct" }, { text: "Sum", value: "sum" }, { text: "Sum (Distinct)", value: "sum_distinct" }, { text: "Minimum", value: "min" }, { text: "Maximum", value: "max" }, { text: "First", value: "first" }, { text: "Last", value: "last" }] } } }, { field: "sortField", type: "string", name: "$t:sort_field", meta: { interface: "system-field", options: { collectionField: "collection", allowPrimaryKey: !0, placeholder: "$t:primary_key" }, width: "half" } }, { field: "filter", type: "json", name: "$t:filter", meta: { interface: "system-filter", options: { collectionField: "collection" } } }, { field: "styleDivider", type: "alias", meta: { interface: "presentation-divider", options: { icon: "style", title: "Style & Format" }, special: ["alias", "no-data"] } }, { field: "abbreviate", type: "boolean", name: "$t:abbreviate_value", schema: { default_value: !1 }, meta: { interface: "boolean", width: "half" } }, { field: "decimals", type: "integer", name: "$t:decimals", meta: { interface: "input", width: "half", options: { placeholder: "$t:decimals_placeholder" } }, schema: { default_value: 0 } }, { field: "prefix", type: "string", name: "$t:prefix", meta: { interface: "input", width: "half", options: { placeholder: "$t:prefix_placeholder", trim: !1 } } }, { field: "suffix", type: "string", name: "$t:suffix", meta: { interface: "input", width: "half", options: { placeholder: "$t:suffix_placeholder", trim: !1 } } }, { field: "conditionalFormatting", type: "json", name: "$t:conditional_styles", meta: { interface: "list", width: "full", options: { template: "{{color}} {{operator}} {{value}}", fields: [{ field: "operator", name: "$t:operator", type: "string", schema: { default_value: ">=" }, meta: { interface: "select-dropdown", options: { choices: [{ text: "$t:operators.eq", value: "=" }, { text: "$t:operators.neq", value: "!=" }, { text: "$t:operators.gt", value: ">" }, { text: "$t:operators.gte", value: ">=" }, { text: "$t:operators.lt", value: "<" }, { text: "$t:operators.lte", value: "<=" }] }, width: "half" } }, { field: "value", name: "$t:value", type: "integer", schema: { default_value: 0 }, meta: { interface: "input", width: "half" } }, { field: "color", name: "$t:color", type: "string", schema: { default_value: "#00C897" }, meta: { interface: "select-color", display: "color" } }] } } }], minWidth: 8, minHeight: 6 }), hN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: gN }); function bN(e, t) { e = M.exports.clone(e); const n = t.startsWith("-"); (n || t.startsWith("+")) && (t = t.substring(1)); const l = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mth|mo|years?|yrs?|y)?$/i.exec(t); if (!l) return; const i = parseFloat(l[1]); switch ((l[2] || "days").toLowerCase()) { case "years": case "year": case "yrs": case "yr": case "y": return n ? gd(e, i) : hd(e, i); case "months": case "month": case "mth": case "mo": return n ? _d(e, i) : yd(e, i); case "weeks": case "week": case "w": return n ? vd(e, i) : ra(e, i); case "days": case "day": case "d": return n ? oa(e, i) : fd(e, i); case "hours": case "hour": case "hrs": case "hr": case "h": return n ? pd(e, i) : md(e, i); case "minutes": case "minute": case "mins": case "min": case "m": return n ? ud(e, i) : cd(e, i); case "seconds": case "second": case "secs": case "sec": case "s": return n ? rd(e, i) : dd(e, i); case "milliseconds": case "millisecond": case "msecs": case "msec": case "ms": return n ? id(e, i) : sd(e, i); default: return } } const $N = z({ props: { height: { type: Number, required: !0 }, showHeader: { type: Boolean, default: !1 }, id: { type: String, required: !0 }, dashboard: { type: String, required: !0 }, now: { type: Date, required: !0 }, collection: { type: String, required: !0 }, dateField: { type: String, required: !0 }, valueField: { type: String, required: !0 }, function: { type: String, required: !0 }, precision: { type: String, default: "hour" }, range: { type: String, default: "1 week" }, color: { type: String, default: "#00C897" }, decimals: { type: Number, default: 0 }, min: { type: Number, default: void 0 }, max: { type: Number, default: void 0 }, filter: { type: Object, default: () => ({}) }, showXAxis: { type: Boolean, default: !0 }, showYAxis: { type: Boolean, default: !0 } }, setup(e) { const { d: t, t: n, n: l } = x(), i = Pe(), u = E([]), o = E(!1), s = E(), r = E(), p = E(), f = V(() => { const y = i.getField(e.collection, e.valueField), g = n(e.function); return `${y.name} (${g})` }); return _e([() => e, () => e.showHeader, () => e.height], (y, g) => { var w; M.exports.isEqual(y, g) === !1 && (v(), (w = p.value) == null || w.destroy(), _()) }, { deep: !0 }), v(), at(_), At(() => { var y; (y = p.value) == null || y.destroy() }), { chartEl: r, metrics: u, loading: o, error: s }; async function v() { var w; o.value = !0; try { const h = await ue.get(Wt(e.collection), { params: { groupBy: g(), aggregate: { [e.function]: [e.valueField] }, filter: { _and: [{ [e.dateField]: { _gte: `$NOW(-${e.range || "1 week"})` } }, { [e.dateField]: { _lte: "$NOW" } }, e.filter || {}] }, limit: -1 } }); u.value = h.data.data, (w = p.value) == null || w.updateSeries([{ name: e.collection, data: u.value.map(k => { var F; return { x: y(k), y: Number(Number(k[e.function][e.valueField]).toFixed((F = e.decimals) != null ? F : 0)) } }) }]) } catch (h) { s.value = h } finally { o.value = !1 } function y(h) { var q, K, W, te, G; const k = h[`${e.dateField}_year`], F = O((q = h[`${e.dateField}_month`]) != null ? q : 1), A = h[`${e.dateField}_week`], P = O(A ? U(A, k) : (K = h[`${e.dateField}_day`]) != null ? K : 1), L = O((W = h[`${e.dateField}_hour`]) != null ? W : 0), T = O((te = h[`${e.dateField}_minute`]) != null ? te : 0), N = O((G = h[`${e.dateField}_second`]) != null ? G : 0); return `${k}-${F}-${P}T${L}:${T}:${N}`; function O(X) { return String(X).padStart(2, "0") } function U(X, ve) { return ra(new Date(ve, 0, 1), X).getDate() } } function g() { let h = []; switch (e.precision || "hour") { case "year": h = ["year"]; break; case "month": h = ["year", "month"]; break; case "week": h = ["year", "month", "week"]; break; case "day": h = ["year", "month", "day"]; break; case "hour": h = ["year", "month", "day", "hour"]; break; case "minute": h = ["year", "month", "day", "hour", "minute"]; break; case "second": h = ["year", "month", "day", "hour", "minute", "second"]; break; default: h = ["year", "month", "day", "hour"]; break }return h.map(k => `${k}(${e.dateField})`) } } function _() { var y, g; p.value = new bd(r.value, { colors: [e.color ? e.color : "#00C897"], chart: { type: "area", height: "100%", toolbar: { show: !1 }, selection: { enabled: !1 }, zoom: { enabled: !1 }, fontFamily: "var(--family-sans-serif)", foreColor: "var(--foreground-subdued)" }, series: [], stroke: { curve: "smooth", width: 2, lineCap: "round" }, markers: { hover: { size: void 0, sizeOffset: 4 } }, fill: { type: "gradient", gradient: { colorStops: [[{ offset: 0, color: e.color ? e.color : "#00C897", opacity: .25 }, { offset: 100, color: e.color ? e.color : "#00C897", opacity: 0 }]] } }, grid: { borderColor: "var(--border-subdued)", padding: { top: e.showHeader ? -20 : -4, bottom: 0, left: 8 } }, dataLabels: { enabled: !1 }, tooltip: { marker: { show: !1 }, x: { show: !0, formatter(w) { return t(new Date(w), "long") } }, y: { title: { formatter: () => f.value + ": " }, formatter(w) { return l(w) } } }, xaxis: { type: "datetime", tooltip: { enabled: !1 }, axisTicks: { show: !1 }, axisBorder: { show: !1 }, range: e.now.getTime() - bN(e.now, `-${e.range}`).getTime(), max: e.now.getTime(), labels: { show: (y = e.showXAxis) != null ? y : !0, offsetY: -4, style: { fontFamily: "var(--family-sans-serif)", foreColor: "var(--foreground-subdued)", fontWeight: 600, fontSize: "10px" } }, crosshairs: { stroke: { color: "var(--border-normal)" } } }, yaxis: { show: (g = e.showYAxis) != null ? g : !0, forceNiceScale: !0, min: M.exports.isNil(e.min) ? void 0 : Number(e.min), max: M.exports.isNil(e.max) ? void 0 : Number(e.max), tickAmount: e.height - 4, labels: { offsetY: 1, offsetX: -4, formatter: w => { var h, k; return w > 1e4 ? lo(w, 1) : l(w, "decimal", { minimumFractionDigits: (h = e.decimals) != null ? h : 0, maximumFractionDigits: (k = e.decimals) != null ? k : 0 }) }, style: { fontFamily: "var(--family-sans-serif)", foreColor: "var(--foreground-subdued)", fontWeight: 600, fontSize: "10px" } } } }), p.value.render() } } }), wN = { ref: "chartEl", class: "time-series" }; function kN(e, t, n, l, i, u) { return m(), I("div", wN, null, 512) } var SN = B($N, [["render", kN], ["__scopeId", "data-v-59e11d35"]]), CN = ul({ id: "time-series", name: "$t:panels.time_series.name", description: "$t:panels.time_series.description", icon: "show_chart", component: SN, options: [{ field: "collection", type: "string", name: "$t:collection", meta: { interface: "system-collection", options: { includeSystem: !0 }, width: "half" } }, { field: "color", name: "$t:color", type: "string", schema: { default_value: "#00C897" }, meta: { interface: "select-color", width: "half" } }, { field: "function", type: "string", name: "$t:group_aggregation", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "Count", value: "count" }, { text: "Count (Distinct)", value: "count_distinct" }, { text: "Average", value: "avg" }, { text: "Average (Distinct)", value: "avg_distinct" }, { text: "Sum", value: "sum" }, { text: "Sum (Distinct)", value: "sum_distinct" }, { text: "Minimum", value: "min" }, { text: "Maximum", value: "max" }] } } }, { field: "precision", type: "string", name: "$t:group_precision", meta: { interface: "select-dropdown", width: "half", options: { choices: [{ text: "Second", value: "second" }, { text: "Minute", value: "minute" }, { text: "Hour", value: "hour" }, { text: "Day", value: "day" }, { text: "Week", value: "week" }, { text: "Month", value: "month" }, { text: "Year", value: "year" }] } }, schema: { default_value: "hour" } }, { field: "dateField", type: "string", name: "$t:panels.time_series.date_field", meta: { interface: "system-field", options: { collectionField: "collection", typeAllowList: ["date", "dateTime", "timestamp"] }, width: "half" } }, { field: "range", type: "dropdown", name: "$t:date_range", schema: { default_value: "1 week" }, meta: { interface: "select-dropdown", width: "half", options: { choices: [{ text: "Past 5 Minutes", value: "5 minutes" }, { text: "Past 15 Minutes", value: "15 minutes" }, { text: "Past 30 Minutes", value: "30 minutes" }, { text: "Past 1 Hour", value: "1 hour" }, { text: "Past 4 Hours", value: "4 hours" }, { text: "Past 1 Day", value: "1 day" }, { text: "Past 2 Days", value: "2 days" }, { text: "Past 1 Week", value: "1 week" }, { text: "Past 1 Month", value: "1 month" }, { text: "Past 3 Months", value: "3 months" }], allowOther: !0 } } }, { field: "valueField", type: "string", name: "$t:panels.time_series.value_field", meta: { interface: "system-field", options: { collectionField: "collection", typeAllowList: ["integer", "bigInteger", "float", "decimal"] }, width: "half" } }, { field: "decimals", type: "integer", name: "$t:value_decimals", meta: { interface: "input", width: "half", options: { placeholder: "$t:decimals_placeholder" } }, schema: { default_value: 0 } }, { field: "min", type: "integer", name: "$t:min_value", meta: { interface: "input", width: "half", options: { placeholder: "$t:automatic" } } }, { field: "max", type: "integer", name: "$t:max_value", meta: { interface: "input", width: "half", options: { placeholder: "$t:automatic" } } }, { field: "filter", type: "json", name: "$t:filter", meta: { interface: "system-filter", options: { collectionField: "collection" } } }, { field: "showXAxis", type: "boolean", name: "$t:show_x_axis", meta: { interface: "boolean", width: "half" }, schema: { default_value: !0 } }, { field: "showYAxis", type: "boolean", name: "$t:show_y_axis", meta: { interface: "boolean", width: "half" }, schema: { default_value: !0 } }], minWidth: 16, minHeight: 8 }), VN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: CN }); const { panelsRaw: Ws } = ml(); async function FN(e) { const n = Object.values({ "./label/index.ts": YU, "./list/index.ts": cN, "./metric/index.ts": hN, "./time-series/index.ts": VN }).map(l => l.default); try { const l = await j(() => import(`${Ye()}extensions/panels/index.js`), []); n.push(...l.default) } catch (l) { console.warn("Couldn't load custom panels"), console.warn(l) } Ws.value = n, Ws.value.forEach(l => { e.component(`panel-${l.id}`, l.component), typeof l.options != "function" && Array.isArray(l.options) === !1 && l.options !== null && e.component(`panel-options-${l.id}`, l.options) }) } const AN = z({ props: { value: { type: Boolean, default: !1 }, labelOn: { type: String, default: null }, labelOff: { type: String, default: null }, iconOn: { type: String, default: "check" }, iconOff: { type: String, default: "close" }, colorOn: { type: String, default: "#00C897" }, colorOff: { type: String, default: "#B0BEC5" } }, setup(e) { return { styles: V(() => { const n = {}; return e.colorOn !== null && e.colorOff !== null && (n.color = e.value ? e.colorOn : e.colorOff, n["--v-icon-color"] = e.value ? e.colorOn : e.colorOff), n }) } } }), IN = { key: 1 }; function EN(e, t, n, l, i, u) { const o = c("value-null"), s = c("v-icon"); return m(), I("div", { class: "boolean", style: Ke(e.styles) }, [e.value === null ? (m(), C(o, { key: 0 })) : (m(), I(se, { key: 1 }, [e.iconOn !== null && e.iconOff !== null ? (m(), C(s, { key: 0, name: e.value ? e.iconOn : e.iconOff }, null, 8, ["name"])) : R("", !0), e.labelOn !== null && e.labelOff !== null ? (m(), I("span", IN, b(e.value ? e.labelOn : e.labelOff), 1)) : R("", !0)], 64))], 4) } var DN = B(AN, [["render", EN], ["__scopeId", "data-v-5a95796f"]]), TN = _t({ id: "boolean", name: "$t:displays.boolean.boolean", description: "$t:displays.boolean.description", types: ["boolean"], icon: "check_box", component: DN, options: [{ field: "labelOn", name: "$t:displays.boolean.label_on", type: "string", meta: { interface: "input", width: "half", options: { placeholder: "$t:displays.boolean.label_on_placeholder" } } }, { field: "labelOff", name: "$t:displays.boolean.label_off", type: "string", meta: { interface: "input", width: "half", options: { placeholder: "$t:displays.boolean.label_off_placeholder" } } }, { field: "iconOn", name: "$t:displays.boolean.icon_on", type: "string", meta: { interface: "select-icon", width: "half" }, schema: { default_value: "check" } }, { field: "iconOff", name: "$t:displays.boolean.icon_off", type: "string", meta: { interface: "select-icon", width: "half" }, schema: { default_value: "close" } }, { field: "colorOn", name: "$t:displays.boolean.color_on", type: "string", meta: { interface: "select-color", width: "half" }, schema: { default_value: "#00C897" } }, { field: "colorOff", name: "$t:displays.boolean.color_off", type: "string", meta: { interface: "select-color", width: "half" }, schema: { default_value: "#B0BEC5" } }] }), PN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: TN }); const ON = z({ props: { value: { type: String, default: null }, icon: { type: Boolean, default: !1 } }, setup(e) { const t = je(e).value, { info: n } = ot(t); return { info: n } } }), LN = { key: 1 }; function jN(e, t, n, l, i, u) { const o = c("value-null"), s = c("v-icon"); return e.value === null || !e.info ? (m(), C(o, { key: 0 })) : (m(), I("div", LN, [e.icon ? (m(), C(s, { key: 0, name: e.info.icon, left: "", small: "" }, null, 8, ["name"])) : R("", !0), D(" " + b(e.info.name), 1)])) } var RN = B(ON, [["render", jN]]), MN = _t({ id: "collection", name: "$t:displays.collection.collection", description: "$t:displays.collection.description", types: ["string"], icon: "label", component: RN, options: [{ field: "icon", name: "$t:icon", type: "boolean", meta: { interface: "boolean", options: { label: "$t:displays.collection.icon_label" } }, schema: { default_value: !1 } }] }), UN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: MN }); function Tl(e) { return /^#(([a-f\d]{2}){3,4})$/i.test(e) } const NN = z({ props: { value: { type: String, default: null }, defaultColor: { type: String, default: "#B0BEC5", validator: e => e === null || Tl(e) || e.startsWith("var(--") } }, setup(e) { const t = V(() => e.value), n = V(() => { var f, v; const i = ((f = e.defaultColor) == null ? void 0 : f.startsWith("var(")) ? l(e.defaultColor) : e.defaultColor, u = ((v = e.value) == null ? void 0 : v.startsWith("var(")) ? l(e.value) : e.value, o = { "background-color": i }; u !== null && (o["background-color"] = u); const s = l("var(--background-page)"), r = qt(s); return (u === null ? qt(i) : qt(u)).contrast(r) < 1.1 && (o.border = "1px solid var(--border-normal)"), o }); return { displayValue: t, styles: n }; function l(i) { return getComputedStyle(document.body).getPropertyValue(i.slice(4, -1)).trim() } } }), BN = { class: "color-dot" }; function qN(e, t, n, l, i, u) { const o = c("value-null"); return m(), I("div", BN, [e.value === null && e.defaultColor === null ? (m(), C(o, { key: 0 })) : R("", !0), S("div", { class: "dot", style: Ke(e.styles) }, null, 4)]) } var zN = B(NN, [["render", qN], ["__scopeId", "data-v-37c4bfe4"]]), KN = _t({ id: "color", name: "$t:displays.color.color", description: "$t:displays.color.description", types: ["string"], icon: "flag", component: zN, options: [{ field: "defaultColor", name: "$t:displays.color.default_color", type: "string", meta: { interface: "select-color", width: "half" }, schema: { default_value: "#B0BEC5" } }] }), HN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: KN }); const WN = async (e, t, n) => $d(e, t, Ce(re({}, n), { locale: await Ca() })); const GN = z({ props: { value: { type: String, required: !0 }, type: { type: String, required: !0, validator: e => ["dateTime", "date", "time", "timestamp"].includes(e) }, format: { type: String, default: "long" }, relative: { type: Boolean, default: !1 } }, setup(e) { const { t } = x(), n = V(() => e.value ? e.type === "timestamp" ? da(e.value) : e.type === "dateTime" ? sn(e.value, "yyyy-MM-dd'T'HH:mm:ss", new Date) : e.type === "date" ? sn(e.value, "yyyy-MM-dd", new Date) : e.type === "time" ? sn(e.value, "HH:mm:ss", new Date) : null : null), l = E(null); return _e(n, async i => { if (i === null) { l.value = null; return } if (e.relative) l.value = await WN(i, new Date, { addSuffix: !0 }); else { let u; e.format === "long" ? (u = `${t("date-fns_date")} ${t("date-fns_time")}`, e.type === "date" && (u = String(t("date-fns_date"))), e.type === "time" && (u = String(t("date-fns_time")))) : e.format === "short" ? (u = `${t("date-fns_date_short")} ${t("date-fns_time_short")}`, e.type === "date" && (u = String(t("date-fns_date_short"))), e.type === "time" && (u = String(t("date-fns_time_short")))) : u = e.format, l.value = await jt(i, u) } }, { immediate: !0 }), { displayValue: l } } }), JN = { class: "datetime" }; function QN(e, t, n, l, i, u) { return m(), I("span", JN, b(e.displayValue), 1) } var XN = B(GN, [["render", QN], ["__scopeId", "data-v-7df33e0f"]]), ZN = _t({ id: "datetime", name: "$t:displays.datetime.datetime", description: "$t:displays.datetime.description", icon: "query_builder", component: XN, options: [{ field: "format", name: "$t:displays.datetime.format", type: "string", meta: { interface: "select-dropdown", width: "half", options: { choices: [{ text: "$t:displays.datetime.long", value: "long" }, { text: "$t:displays.datetime.short", value: "short" }], allowOther: !0 }, note: "$t:displays.datetime.format_note" }, schema: { default_value: "long" } }, { field: "relative", name: "$t:displays.datetime.relative", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.datetime.relative_label" } }, schema: { default_value: !1 } }], types: ["dateTime", "date", "time", "timestamp"] }), YN = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: ZN }); const xN = z({ props: { value: { type: Object, default: null } }, setup(e) { const t = E(), n = E(!1), l = V(() => e.value ? Jn(e.value.type, !0) : null), i = V(() => e.value ? e.value.type.includes("svg") ? st(Ye() + `assets/${e.value.id}`) : e.value.type.includes("image") === !1 ? null : st(Ye() + `assets/${e.value.id}?key=system-small-cover`) : null), { height: u } = Qn(t); return { fileExtension: l, imageThumbnail: i, previewEl: t, height: u, imgError: n } } }), eB = ["src", "alt"], tB = { key: 1, ref: "previewEl", class: "preview" }, nB = { key: 0, class: "extension" }; function lB(e, t, n, l, i, u) { const o = c("v-icon"); return e.imageThumbnail && !e.imgError ? (m(), I("img", { key: 0, src: e.imageThumbnail, class: de({ "is-svg": e.value && e.value.type.includes("svg") }), alt: e.value.title, onError: t[0] || (t[0] = s => e.imgError = !0) }, null, 42, eB)) : (m(), I("div", tB, [e.fileExtension ? (m(), I("span", nB, b(e.fileExtension), 1)) : (m(), C(o, { key: 1, name: "folder_open" }))], 512)) } var oB = B(xN, [["render", lB], ["__scopeId", "data-v-3d2d9adb"]]), aB = _t({ id: "file", name: "$t:displays.file.file", description: "$t:displays.file.description", icon: "insert_drive_file", component: oB, types: ["uuid"], localTypes: ["file"], options: [], fields: ["id", "type", "title"] }), iB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: aB }), sB = _t({ id: "filesize", name: "$t:displays.filesize.filesize", description: "$t:displays.filesize.description", icon: "description", component: ({ value: e }) => Sl(e), options: [], types: ["integer", "bigInteger"] }), rB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: sB }); const dB = z({ props: { value: { type: [Object, Array], default: null }, format: { type: String, default: null } }, setup(e) { const { t } = x(); return { displayValue: V(() => { if (!e.value) return null; try { return Array.isArray(e.value) ? e.value.map(l => Mn(e.format || "", l)) : [Mn(e.format || "", e.value)] } catch { return null } }), t } } }), uB = ["onClick"], cB = { class: "label" }, pB = { key: 2 }; function mB(e, t, n, l, i, u) { const o = c("value-null"), s = c("v-list-item-content"), r = c("v-list-item"), p = c("v-list"), f = c("v-menu"); return e.displayValue ? e.displayValue.length > 1 ? (m(), C(f, { key: 1, "show-arrow": "" }, { activator: d(({ toggle: v }) => [S("span", { class: "toggle", onClick: Ae(v, ["stop"]) }, [S("span", cB, b(e.displayValue.length) + " " + b(e.t("items")), 1)], 8, uB)]), default: d(() => [a(p, { class: "links" }, { default: d(() => [(m(!0), I(se, null, he(e.displayValue, (v, _) => (m(), C(r, { key: _ }, { default: d(() => [a(s, null, { default: d(() => [D(b(v), 1)]), _: 2 }, 1024)]), _: 2 }, 1024))), 128))]), _: 1 })]), _: 1 })) : (m(), I("span", pB, b(e.displayValue[0]), 1)) : (m(), C(o, { key: 0 })) } var fB = B(dB, [["render", mB]]), vB = _t({ id: "formatted-json-value", name: "$t:displays.formatted-json-value.formatted-json-value", description: "$t:displays.formatted-json-value.description", types: ["json", "geometry"], icon: "settings_ethernet", component: fB, options: [{ field: "format", name: "$t:display_template", type: "string", meta: { width: "full", interface: "input", options: { placeholder: "{{ field }}" } } }] }), _B = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: vB }); const yB = z({ props: { value: { type: [String, Number], default: null }, formatTitle: { type: Boolean, default: !1 }, bold: { type: Boolean, default: !1 }, color: { type: String, default: null }, font: { type: String, default: "sans-serif", validator: e => ["sans-serif", "serif", "monospace"].includes(e) } }, setup(e) { const { n: t } = x(); return { displayValue: V(() => { if (M.exports.isNil(e.value) || e.value === "") return null; if (typeof e.value == "number") return t(e.value); let l = String(e.value); return l = l.replace(/(<([^>]+)>)/gi, ""), l = wd(l), e.formatTitle && (l = Vt(l)), l }) } } }); function gB(e, t, n, l, i, u) { const o = c("value-null"); return e.displayValue === null || e.displayValue === void 0 ? (m(), C(o, { key: 0 })) : (m(), I("span", { key: 1, class: de(["display-formatted-text", [{ bold: e.bold }, e.font]]), style: Ke({ color: e.color }) }, b(e.displayValue), 7)) } var hB = B(yB, [["render", gB], ["__scopeId", "data-v-416d4750"]]), bB = _t({ id: "formatted-value", name: "$t:displays.formatted-value.formatted-value", description: "$t:displays.formatted-value.description", types: ["string", "text", "integer", "float", "decimal", "bigInteger"], icon: "text_format", component: hB, options: [{ field: "formatTitle", name: "$t:displays.formatted-value.format_title", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.formatted-value.format_title_label" } }, schema: { default_value: !1 } }, { field: "bold", name: "$t:bold", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.formatted-value.bold_label" } }, schema: { default_value: !1 } }, { field: "color", name: "$t:color", meta: { width: "half", interface: "select-color" } }, { field: "font", name: "$t:font", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:serif", value: "serif" }, { text: "$t:monospace", value: "monospace" }] } }, schema: { default_value: "sans-serif" } }] }), $B = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: bB }); const wB = z({ name: "DisplayIcon", props: { value: { type: String, default: null }, color: { type: String, default: null }, filled: { type: Boolean, default: !1 } }, setup(e) { return { style: V(() => Tl(e.color) ? { "--v-icon-color": e.color } : {}) } } }); function kB(e, t, n, l, i, u) { const o = c("v-icon"); return m(), C(o, { small: "", name: e.value, style: Ke(e.style), filled: e.filled }, null, 8, ["name", "style", "filled"]) } var SB = B(wB, [["render", kB]]), CB = _t({ id: "icon", name: "$t:displays.icon.icon", description: "$t:displays.icon.description", icon: "insert_emoticon", component: SB, options: [{ field: "filled", name: "$t:displays.icon.filled", type: "boolean", meta: { interface: "boolean", width: "half", options: { label: "$t:displays.icon.filled_label" } }, schema: { default_value: !1 } }, { field: "color", name: "$t:color", type: "string", meta: { interface: "select-color", width: "half" } }], types: ["string"] }), VB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: CB }); const FB = z({ components: { ValueNull: tn }, props: { value: { type: Object, default: null }, circle: { type: Boolean, default: !1 } }, setup(e) { const t = E(!1); return { src: V(() => { if (e.value === null) return null; const l = Ye() + `assets/${e.value.id}?key=system-small-cover`; return st(l) }), imageError: t } } }), AB = ["src", "alt"]; function IB(e, t, n, l, i, u) { const o = c("v-icon"), s = c("value-null"); return e.imageError ? (m(), C(o, { key: 0, name: "image" })) : e.src ? (m(), I("img", { key: 1, src: e.src, role: "presentation", alt: e.value && e.value.title, class: de({ circle: e.circle }), onError: t[0] || (t[0] = r => e.imageError = !0) }, null, 42, AB)) : (m(), C(s, { key: 2 })) } var EB = B(FB, [["render", IB], ["__scopeId", "data-v-e3df0200"]]), DB = _t({ id: "image", name: "$t:displays.image.image", description: "$t:displays.image.description", types: ["uuid"], localTypes: ["file"], icon: "insert_photo", component: EB, options: [{ field: "circle", name: "$t:displays.image.circle", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.image.circle_label" } }, schema: { default_value: !1 } }], fields: ["id", "type", "title"] }), TB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: DB }); const PB = z({ props: { value: { type: [String, Array], required: !0 }, format: { type: Boolean, default: !0 }, showAsDot: { type: Boolean, default: !1 }, choices: { type: Array, default: () => [] }, type: { type: String, required: !0, validator: e => ["text", "string", "json", "csv"].includes(e) } }, setup(e) { return { items: V(() => { let n; return M.exports.isEmpty(e.value) ? n = [] : e.type === "string" ? n = [e.value] : n = e.value, n.map(l => { const i = (e.choices || []).find(o => o.value === l); let u; return typeof l == "object" ? u = JSON.stringify(l) : e.format ? u = Vt(l) : u = l, i === void 0 ? { value: l, text: u, foreground: "var(--foreground-normal)", background: "var(--background-normal)" } : Ct({ value: l, text: i.text || u, foreground: i.foreground || "var(--foreground-normal)", background: i.background || "var(--background-normal)" }) }) }) } } }), OB = { class: "display-labels" }; function LB(e, t, n, l, i, u) { const o = c("v-chip"), s = c("display-color"), r = we("tooltip"); return m(), I("div", OB, [e.showAsDot ? (m(!0), I(se, { key: 1 }, he(e.items, p => ee((m(), C(s, { key: p.value, value: p.background }, null, 8, ["value"])), [[r, p.text]])), 128)) : (m(!0), I(se, { key: 0 }, he(e.items, p => (m(), C(o, { key: p.value, style: Ke({ "--v-chip-color": p.foreground, "--v-chip-background-color": p.background }), small: "", disabled: "", label: "" }, { default: d(() => [D(b(p.text), 1)]), _: 2 }, 1032, ["style"]))), 128))]) } var jB = B(PB, [["render", LB], ["__scopeId", "data-v-4d34a4f3"]]), RB = _t({ id: "labels", name: "$t:displays.labels.labels", description: "$t:displays.labels.description", types: ["string", "json", "csv"], icon: "flag", component: jB, options: [{ field: "format", name: "$t:format_text", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.labels.format_label" } }, schema: { default_value: !0 } }, { field: "showAsDot", name: "$t:displays.labels.show_as_dot", type: "boolean", meta: { width: "half", interface: "boolean" }, schema: { default_value: !1 } }, { field: "choices", name: "$t:choices", type: "json", meta: { interface: "list", options: { template: "{{text}}", fields: [{ field: "text", name: "$t:text", type: "string", meta: { interface: "input", width: "half", options: { placeholder: "$t:displays.labels.choices_text_placeholder" } } }, { field: "value", name: "$t:value", type: "string", meta: { interface: "input", options: { font: "monospace", placeholder: "$t:displays.labels.choices_value_placeholder" }, width: "half" } }, { field: "foreground", name: "$t:foreground_color", type: "string", meta: { interface: "select-color", width: "half" } }, { field: "background", name: "$t:background_color", type: "string", meta: { interface: "select-color", width: "half" } }] } } }] }), MB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: RB }), UB = _t({ id: "mime-type", name: "$t:displays.mime-type.mime-type", description: "$t:displays.mime-type.description", icon: "picture_as_pdf", options: [{ field: "showAsExtension", name: "$t:displays.mime-type.extension_only", type: "boolean", meta: { interface: "boolean", options: { label: "$t:displays.mime-type.extension_only_label" } }, schema: { default_value: !1 } }], types: ["string"], component: ({ value: e, showAsExtension: t }) => t ? kd.getExtension(e) : Jn(e) }), NB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: UB }); const BB = z({ props: { value: { type: [String, Number], default: null }, simple: { type: Boolean, default: !1 }, interfaceOptions: { type: Object, default: null } }, setup(e) { const t = V(() => e.interfaceOptions === null ? 5 : Math.ceil(e.interfaceOptions.maxValue)), n = V(() => ({ width: Number(e.value) / t.value * 100 + "%" })); return { starCount: t, ratingPercentage: n } } }), qB = { key: 0, class: "rating simple" }, zB = { key: 1, class: "rating detailed" }, KB = { class: "inactive" }; function HB(e, t, n, l, i, u) { const o = c("v-icon"), s = we("tooltip"); return e.simple ? (m(), I("span", qB, [a(o, { small: "", name: "star" }), D(" " + b(e.value), 1)])) : ee((m(), I("div", zB, [S("div", { class: "active", style: Ke(e.ratingPercentage) }, [(m(!0), I(se, null, he(e.starCount, r => (m(), C(o, { key: r, small: "", name: "star" }))), 128))], 4), S("div", KB, [(m(!0), I(se, null, he(e.starCount, r => (m(), C(o, { key: r, small: "", name: "star" }))), 128))])], 512)), [[s, e.value, void 0, { bottom: !0, start: !0 }]]) } var WB = B(BB, [["render", HB], ["__scopeId", "data-v-7e2f8bb2"]]), GB = _t({ id: "rating", name: "$t:displays.rating.rating", description: "$t:displays.rating.description", icon: "star", component: WB, options: [{ field: "simple", name: "$t:displays.rating.simple", type: "boolean", meta: { interface: "boolean", width: "half", options: { label: "$t:displays.rating.simple_label" } }, schema: { default_value: !1 } }], types: ["integer", "decimal", "float"] }), JB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: GB }), QB = _t({ id: "raw", name: "$t:displays.raw.raw", icon: "code", component: ({ value: e }) => typeof e == "string" ? e : JSON.stringify(e), options: [], types: F$, localTypes: A$ }), XB = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: QB }); function Gs(e, t) { const l = ut().getRelationsForField(e, t), i = Xn(e, t); return i && ["o2m", "m2m", "m2a", "translations", "files"].includes(i) ? i == "m2m" && l.length > 1 ? { relatedCollection: l[1].related_collection, junctionCollection: l[0].collection, path: [l[1].field] } : { relatedCollection: l[0].collection } : { relatedCollection: l[0].related_collection } } const ZB = z({ components: { ValueNull: tn }, props: { collection: { type: String, required: !0 }, field: { type: String, required: !0 }, value: { type: [Array, Object], default: null }, template: { type: String, default: null } }, setup(e) { const { t, te: n } = x(), l = V(() => Gs(e.collection, e.field)), i = V(() => l.value.relatedCollection), u = V(() => l.value.junctionCollection), o = V(() => Xn(e.collection, e.field)), { primaryKeyField: s } = ot(i), r = V(() => { var _, y; return l.value.path ? [...l.value.path, (_ = s.value) == null ? void 0 : _.field].join(".") : (y = s.value) == null ? void 0 : y.field }), p = V(() => e.template || `{{ ${r.value} }}`), f = V(() => Array.isArray(e.value) ? e.value.length === 1 ? n(`collection_names_singular.${i.value}`) ? t(`collection_names_singular.${i.value}`) : t("item") : n(`collection_names_plural.${i.value}`) ? t(`collection_names_plural.${i.value}`) : t("items") : null); return { relatedCollection: i, junctionCollection: u, primaryKeyFieldPath: r, getLinkForItem: v, internalTemplate: p, unit: f, localType: o }; function v(_) { if (!l.value || !r.value) return null; const y = M.exports.get(_, r.value); return `/content/${i.value}/${encodeURIComponent(y)}` } } }), YB = ["onClick"], xB = { class: "label" }, eq = D("+"); function tq(e, t, n, l, i, u) { const o = c("value-null"), s = c("render-template"), r = c("v-list-item-content"), p = c("v-icon"), f = c("router-link"), v = c("v-list-item-icon"), _ = c("v-list-item"), y = c("v-list"), g = c("v-menu"); return e.relatedCollection ? ["o2m", "m2m", "m2a", "translations", "files"].includes(e.localType.toLowerCase()) ? (m(), C(g, { key: 1, "show-arrow": "", disabled: e.value.length === 0 }, { activator: d(({ toggle: w }) => [S("span", { class: de(["toggle", { subdued: e.value.length === 0 }]), onClick: Ae(w, ["stop"]) }, [S("span", xB, [D(b(e.value.length) + " ", 1), e.value.length >= 100 ? (m(), I(se, { key: 0 }, [eq], 64)) : R("", !0), D(" " + b(e.unit), 1)])], 10, YB)]), default: d(() => [a(y, { class: "links" }, { default: d(() => [(m(!0), I(se, null, he(e.value, w => (m(), C(_, { key: w[e.primaryKeyFieldPath] }, { default: d(() => [a(r, null, { default: d(() => { var h; return [a(s, { template: e.internalTemplate, item: w, collection: (h = e.junctionCollection) != null ? h : e.relatedCollection }, null, 8, ["template", "item", "collection"])] }), _: 2 }, 1024), a(v, null, { default: d(() => [a(f, { to: e.getLinkForItem(w) }, { default: d(() => [a(p, { name: "launch", small: "" })]), _: 2 }, 1032, ["to"])]), _: 2 }, 1024)]), _: 2 }, 1024))), 128))]), _: 1 })]), _: 1 }, 8, ["disabled"])) : (m(), C(s, { key: 2, template: e.internalTemplate, item: e.value, collection: e.relatedCollection }, null, 8, ["template", "item", "collection"])) : (m(), C(o, { key: 0 })) } var nq = B(ZB, [["render", tq], ["__scopeId", "data-v-4f1bc30a"]]), lq = _t({ id: "related-values", name: "$t:displays.related-values.related-values", description: "$t:displays.related-values.description", icon: "settings_ethernet", component: nq, options: ({ relations: e }) => { var n, l, i; const t = (i = (n = e.o2m) == null ? void 0 : n.collection) != null ? i : (l = e.m2o) == null ? void 0 : l.related_collection; return [{ field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: t }, width: "full" } }] }, types: ["alias", "string", "uuid", "integer", "bigInteger", "json"], localTypes: ["m2m", "m2o", "o2m", "translations", "m2a", "file", "files"], fields: (e, { field: t, collection: n }) => { const { relatedCollection: l, path: i } = Gs(n, t), o = Pe().getPrimaryKeyFieldForCollection(l); if (!l) return []; const s = (e == null ? void 0 : e.template) ? Qt(vt(e.template), l) : []; if (o) { const r = i ? [...i, o.field].join(".") : o.field; s.includes(r) || s.push(r) } return s } }), oq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: lq }); function Pl(e, t) { const n = ut(), l = He(), i = V(() => n.getRelationsForField(e.value, t.value)), u = V(() => i.value.find(g => { var w; return g.related_collection === e.value && ((w = g.meta) == null ? void 0 : w.one_field) === t.value })), o = V(() => i.value.find(g => { var w; return g.collection === u.value.collection && g.field === ((w = u.value.meta) == null ? void 0 : w.junction_field) })), s = V(() => l.getCollection(u.value.collection)), r = V(() => l.getCollection(o.value.related_collection)), { primaryKeyField: p, fields: f } = ot(s.value.collection), { primaryKeyField: v, fields: _ } = ot(r.value.collection), y = V(() => { var g, w, h, k; return { junctionPkField: (g = p.value) == null ? void 0 : g.field, relationPkField: (w = v.value) == null ? void 0 : w.field, junctionField: (h = u.value.meta) == null ? void 0 : h.junction_field, sortField: (k = u.value.meta) == null ? void 0 : k.sort_field, junctionCollection: s.value.collection, relationCollection: r.value.collection } }); return { junction: u, junctionCollection: s, relation: o, relationCollection: r, relationInfo: y, junctionPrimaryKeyField: p, relationPrimaryKeyField: v, junctionFields: f, relationFields: _ } } const aq = z({ components: { ValueNull: tn }, props: { collection: { type: String, required: !0 }, field: { type: String, required: !0 }, value: { type: [Array], default: null }, template: { type: String, default: null }, userLanguage: { type: Boolean, default: !1 }, defaultLanguage: { type: String, default: null }, languageField: { type: String, default: null }, type: { type: String, required: !0 } }, setup(e) { const { collection: t, field: n } = je(e), { junctionPrimaryKeyField: l, junctionCollection: i, relation: u, junctionFields: o, relationPrimaryKeyField: s } = Pl(t, n), r = V(() => { var _, y; return e.template || ((y = (_ = i.value) == null ? void 0 : _.meta) == null ? void 0 : y.display_template) || `{{ ${l.value.field} }}` }), p = V(() => { var g, w, h; const _ = (g = s.value) == null ? void 0 : g.field; if (!_) return {}; let y = (w = e.value.find(k => { var F; return ((F = k == null ? void 0 : k[u.value.field]) == null ? void 0 : F[_]) === e.defaultLanguage })) != null ? w : e.value[0]; if (e.userLanguage) { const k = Ze(); y = (h = e.value.find(F => { var A, P; return ((A = F == null ? void 0 : F[u.value.field]) == null ? void 0 : A[_]) === ((P = k.currentUser) == null ? void 0 : P.language) })) != null ? h : y } return y != null ? y : {} }), f = V(() => o.value.filter(_ => { var y; return _.type !== "alias" && ((y = _.meta) == null ? void 0 : y.hidden) === !1 && _.meta.readonly === !1 })), v = V(() => e.value.map(_ => { var g, w, h, k, F; const y = f.value.filter(A => A.field in _ && Ut(_ == null ? void 0 : _[A.field])).length; return { id: _ == null ? void 0 : _[(w = (g = l.value) == null ? void 0 : g.field) != null ? w : "id"], lang: (F = _ == null ? void 0 : _[u.value.field]) == null ? void 0 : F[(k = e.languageField) != null ? k : (h = s.value) == null ? void 0 : h.field], progress: Math.round(y / f.value.length * 100), item: _ } })); return { primaryKeyField: l, internalTemplate: r, junctionCollection: i, displayItem: p, translations: v } } }), iq = { class: "header" }, sq = { class: "lang" }; function rq(e, t, n, l, i, u) { const o = c("value-null"), s = c("render-template"), r = c("v-icon"), p = c("v-progress-linear"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-list"), y = c("v-menu"), g = we("tooltip"); return e.junctionCollection.collection ? (m(), C(y, { key: 1, "show-arrow": "", disabled: e.value.length === 0 }, { activator: d(({ toggle: w }) => [a(s, { template: e.internalTemplate, item: e.displayItem, collection: e.junctionCollection.collection, onClick: Ae(w, ["stop"]) }, null, 8, ["template", "item", "collection", "onClick"])]), default: d(() => [a(_, { class: "links" }, { default: d(() => [(m(!0), I(se, null, he(e.translations, w => (m(), C(v, { key: w.id }, { default: d(() => [a(f, null, { default: d(() => [S("div", iq, [S("div", sq, [a(r, { name: "translate", small: "" }), D(" " + b(w.lang), 1)]), ee(a(p, { value: w.progress, colorful: "" }, null, 8, ["value"]), [[g, `${w.progress}%`]])]), a(s, { template: e.internalTemplate, item: w.item, collection: e.junctionCollection.collection }, null, 8, ["template", "item", "collection"])]), _: 2 }, 1024)]), _: 2 }, 1024))), 128))]), _: 1 })]), _: 1 }, 8, ["disabled"])) : (m(), C(o, { key: 0 })) } var dq = B(aq, [["render", rq], ["__scopeId", "data-v-6056eccc"]]), uq = _t({ id: "translations", name: "$t:displays.translations.translations", description: "$t:displays.translations.description", icon: "translate", component: dq, options: ({ relations: e }) => { var u, o; const t = Pe(), n = (u = e.o2m) == null ? void 0 : u.collection, l = (o = e.m2o) == null ? void 0 : o.related_collection, i = l ? t.getFieldsForCollection(l) : []; return [{ field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: n }, width: "half" } }, { field: "languageField", name: "$t:displays.translations.language_field", meta: { interface: "select-dropdown", options: { choices: i.map(({ field: s, name: r }) => ({ text: r, value: s })) }, width: "half" } }, { field: "defaultLanguage", name: "$t:displays.translations.default_language", meta: { interface: "input", width: "half", options: { placeholder: "$t:primary_key" } } }, { field: "userLanguage", name: "$t:displays.translations.user_language", type: "string", schema: { default_value: !1 }, meta: { interface: "boolean", options: { label: "$t:displays.translations.enable" }, width: "half" } }] }, types: ["alias"], localTypes: ["translations"], fields: (e, { field: t, collection: n }) => { const l = Pe(), u = ut().getRelationsForField(n, t), o = u.find(y => { var g; return y.related_collection === n && ((g = y.meta) == null ? void 0 : g.one_field) === t }), s = u.find(y => y !== o), r = o == null ? void 0 : o.related_collection, p = s == null ? void 0 : s.related_collection; if (!r || !p) return []; const f = l.getPrimaryKeyFieldForCollection(r), v = l.getPrimaryKeyFieldForCollection(p), _ = (e == null ? void 0 : e.template) ? Qt(vt(e.template), r) : []; return f && !_.includes(f.field) && _.push(f.field), (s == null ? void 0 : s.field) && !_.includes(s.field) && (_.push(`${s.field}.${v.field}`), (e == null ? void 0 : e.languageField) && _.push(`${s.field}.${e.languageField}`)), _ } }), cq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: uq }), pq = "assets/avatar-placeholder.446bf113.svg"; const mq = z({ props: { value: { type: Object, default: null }, display: { type: String, default: "both" }, circle: { type: Boolean, default: !1 } }, setup(e) { return { src: V(() => { var n; if (e.value === null) return null; if ((n = e.value.avatar) == null ? void 0 : n.id) { const l = `${Ye()}assets/${e.value.avatar.id}?key=system-small-cover`; return st(l) } return null }), userName: yt } } }), fq = ["src", "alt"], vq = ["alt"], _q = { key: 2 }; function yq(e, t, n, l, i, u) { const o = c("user-popover"); return e.value ? (m(), C(o, { key: 0, user: e.value.id }, { default: d(() => [S("div", { class: de(["user", e.display]) }, [(e.display === "avatar" || e.display === "both") && e.src ? (m(), I("img", { key: 0, src: e.src, role: "presentation", alt: e.value && e.userName(e.value), class: de({ circle: e.circle }) }, null, 10, fq)) : (e.display === "avatar" || e.display === "both") && e.src === null ? (m(), I("img", { key: 1, src: pq, role: "presentation", alt: e.value && e.userName(e.value), class: de({ circle: e.circle }) }, null, 10, vq)) : R("", !0), e.display === "name" || e.display === "both" ? (m(), I("span", _q, b(e.userName(e.value)), 1)) : R("", !0)], 2)]), _: 1 }, 8, ["user"])) : R("", !0) } var gq = B(mq, [["render", yq], ["__scopeId", "data-v-1e6e7370"]]), hq = _t({ id: "user", name: "$t:displays.user.user", description: "$t:displays.user.description", types: ["uuid"], icon: "person", component: gq, options: [{ field: "display", name: "$t:display", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:displays.user.avatar", value: "avatar" }, { text: "$t:displays.user.name", value: "name" }, { text: "$t:displays.user.both", value: "both" }] } }, schema: { default_value: "both" } }, { field: "circle", name: "$t:circle", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:displays.user.circle_label" } }, schema: { default_value: !1 } }], fields: ["id", "avatar.id", "email", "first_name", "last_name"] }), bq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: hq }); const { displaysRaw: Js } = xt(); async function $q(e) { const n = Object.values({ "./boolean/index.ts": PN, "./collection/index.ts": UN, "./color/index.ts": HN, "./datetime/index.ts": YN, "./file/index.ts": iB, "./filesize/index.ts": rB, "./formatted-json-value/index.ts": _B, "./formatted-value/index.ts": $B, "./icon/index.ts": VB, "./image/index.ts": TB, "./labels/index.ts": MB, "./mime-type/index.ts": NB, "./rating/index.ts": JB, "./raw/index.ts": XB, "./related-values/index.ts": oq, "./translations/index.ts": cq, "./user/index.ts": bq }).map(l => l.default); try { const l = await j(() => import(`${Ye()}extensions/displays/index.js`), []); n.push(...l.default) } catch (l) { console.warn("Couldn't load custom displays"), console.warn(l) } Js.value = n, Js.value.forEach(l => { e.component(`display-${l.id}`, l.component), typeof l.options != "function" && Array.isArray(l.options) === !1 && l.options !== null && e.component(`display-options-${l.id}`, l.options) }) } const wq = z({ props: { value: { type: Boolean, default: null }, disabled: { type: Boolean, default: !1 }, label: { type: String, default: () => ze.global.t("enabled") }, iconOn: { type: String, default: "check_box" }, iconOff: { type: String, default: "check_box_outline_blank" }, color: { type: String, default: "#00C897" } }, emits: ["input"] }); function kq(e, t, n, l, i, u) { const o = c("v-checkbox"); return m(), C(o, { block: "", "icon-on": e.iconOn, "icon-off": e.iconOff, label: e.label, "model-value": e.value, indeterminate: e.value === null, disabled: e.disabled, style: Ke({ "--v-checkbox-color": e.color }), "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("input", s)) }, null, 8, ["icon-on", "icon-off", "label", "model-value", "indeterminate", "disabled", "style"]) } var Sq = B(wq, [["render", kq]]), Cq = Me({ id: "boolean", name: "$t:interfaces.boolean.toggle", description: "$t:interfaces.boolean.description", icon: "check_box", component: Sq, types: ["boolean"], group: "selection", recommendedDisplays: ["boolean"], options: [{ field: "iconOn", name: "$t:icon_on", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "check_box" } }, { field: "iconOff", name: "$t:icon_off", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "check_box_outline_blank" } }, { field: "label", name: "$t:label", type: "string", meta: { width: "half", interface: "input", options: { placeholder: "$t:interfaces.boolean.label_placeholder" } }, schema: { default_value: "$t:interfaces.boolean.label_default" } }, { field: "color", name: "$t:color", type: "string", meta: { width: "half", interface: "select-color" }, schema: { default_value: "#00C897" } }] }), Vq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Cq }); const Fq = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null }, type: { type: String, required: !0, validator: e => ["dateTime", "date", "time", "timestamp"].includes(e) }, includeSeconds: { type: Boolean, default: !1 }, use24: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { internalValue: l, year: i, month: u, date: o, hours: s, minutes: r, seconds: p, period: f } = F(), { yearItems: v, monthItems: _, dateItems: y, hourItems: g, minutesSecondItems: w } = L(), { displayValue: h } = P(); return { t: n, year: i, month: u, date: o, hours: s, minutes: r, seconds: p, period: f, setToNow: A, yearItems: v, monthItems: _, dateItems: y, hourItems: g, minutesSecondItems: w, displayValue: h, unsetValue: k }; function k() { t("input", null) } function F() { const T = V({ get() { return e.value ? e.type === "timestamp" ? da(e.value) : e.type === "dateTime" ? sn(e.value, "yyyy-MM-dd'T'HH:mm:ss", new Date) : e.type === "date" ? sn(e.value, "yyyy-MM-dd", new Date) : e.type === "time" ? sn(e.value, "HH:mm:ss", new Date) : null : null }, set(G) { if (G === null) return t("input", null); e.type === "timestamp" ? t("input", Un(G)) : e.type === "dateTime" ? t("input", an(G, "yyyy-MM-dd'T'HH:mm:ss")) : e.type === "date" ? t("input", an(G, "yyyy-MM-dd")) : e.type === "time" && t("input", an(G, "HH:mm:ss")) } }), N = V({ get() { return T.value ? T.value.getFullYear() : null }, set(G) { const X = T.value ? new Date(T.value) : new Date(0); X.setFullYear(G || 0), T.value = X } }), O = V({ get() { return T.value ? T.value.getMonth() : null }, set(G) { const X = T.value ? new Date(T.value) : new Date; X.setMonth(G || 0), T.value = X } }), U = V({ get() { return T.value ? T.value.getDate() : null }, set(G) { const X = T.value ? new Date(T.value) : new Date; X.setDate(G || 1), T.value = X } }), q = V({ get() { if (!T.value) return null; const G = T.value.getHours(); return e.use24 === !1 ? G % 12 : G }, set(G) { const X = T.value ? new Date(T.value) : new Date; X.setHours(G || 0), T.value = X } }), K = V({ get() { return T.value ? T.value.getMinutes() : null }, set(G) { const X = T.value ? new Date(T.value) : new Date; X.setMinutes(G || 0), T.value = X } }), W = V({ get() { return T.value ? T.value.getSeconds() : null }, set(G) { const X = T.value ? new Date(T.value) : new Date; X.setSeconds(G || 0), T.value = X } }), te = V({ get() { return T.value ? T.value.getHours() >= 12 ? "pm" : "am" : null }, set(G) { const X = T.value ? new Date(T.value) : new Date; (X.getHours() >= 12 ? "pm" : "am") !== G && (G === "am" ? X.setHours(X.getHours() - 12) : X.setHours(X.getHours() + 12)), T.value = X } }); return { internalValue: T, year: N, month: O, date: U, hours: q, minutes: K, seconds: W, period: te } } function A() { l.value = e.includeSeconds ? new Date : Sd(new Date, 0) } function P() { const T = E(null); return _e(l, N, { immediate: !0 }), { displayValue: T }; async function N() { if (!e.value || !l.value) { T.value = null; return } const O = e.includeSeconds ? "date-fns_time" : "date-fns_time_no_seconds"; let U = `${n("date-fns_date")} ${n(O)}`; e.type === "date" && (U = String(n("date-fns_date"))), e.type === "time" && (U = String(n(O))), T.value = await jt(l.value, U) } } function L() { const T = V(() => { var te; const K = ((te = l.value) == null ? void 0 : te.getFullYear()) || new Date().getFullYear(), W = []; for (let G = K - 5; G <= K + 5; G++)W.push({ text: String(G), value: G }); return W }), N = V(() => [n("months.january"), n("months.february"), n("months.march"), n("months.april"), n("months.may"), n("months.june"), n("months.july"), n("months.august"), n("months.september"), n("months.october"), n("months.november"), n("months.december")].map((K, W) => ({ text: K, value: W }))), O = V(() => { const K = []; for (let W = 1; W <= 31; W++)K.push(`${W}`); return K }), U = V(() => { const K = [], W = e.use24 ? 24 : 12; for (let te = 0; te < W; te++) { let G = String(te); G.length === 1 && (G = "0" + G), K.push({ text: G, value: te }) } return K }), q = V(() => { const K = []; for (let W = 0; W < 60; W++) { let te = String(W); te.length === 1 && (te = "0" + te), K.push({ text: te, value: W }) } return K }); return { yearItems: T, monthItems: N, dateItems: O, hourItems: U, minutesSecondItems: q } } } }), Aq = { key: 0, class: "date-selects" }, Iq = { class: "month" }, Eq = { class: "date" }, Dq = { class: "year" }, Tq = { class: "hour" }, Pq = { class: "minutes" }, Oq = { key: 0, class: "seconds" }, Lq = { key: 1, class: "period" }; function jq(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-select"), p = c("v-divider"), f = c("v-menu"); return m(), C(f, { "close-on-content-click": !1, attached: "", disabled: e.disabled }, { activator: d(({ toggle: v, active: _ }) => [a(s, { active: _, clickable: "", readonly: "", "model-value": e.displayValue, disabled: e.disabled, placeholder: e.t("enter_a_value"), onClick: v }, et({ _: 2 }, [e.disabled ? void 0 : { name: "append", fn: d(() => [a(o, { name: e.value ? "close" : "today", class: de({ active: _ }), onClick: Ae(e.unsetValue, ["stop"]) }, null, 8, ["name", "class", "onClick"])]) }]), 1032, ["active", "model-value", "disabled", "placeholder", "onClick"])]), default: d(() => [e.type === "timestamp" || e.type === "dateTime" || e.type === "date" ? (m(), I("div", Aq, [S("div", Iq, [a(r, { modelValue: e.month, "onUpdate:modelValue": t[0] || (t[0] = v => e.month = v), placeholder: e.t("month"), items: e.monthItems }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", Eq, [a(r, { modelValue: e.date, "onUpdate:modelValue": t[1] || (t[1] = v => e.date = v), placeholder: e.t("date"), items: e.dateItems }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", Dq, [a(r, { modelValue: e.year, "onUpdate:modelValue": t[2] || (t[2] = v => e.year = v), placeholder: e.t("year"), items: e.yearItems, "allow-other": "" }, null, 8, ["modelValue", "placeholder", "items"])])])) : R("", !0), e.type === "timestamp" || e.type === "dateTime" ? (m(), C(p, { key: 1 })) : R("", !0), e.type === "timestamp" || e.type === "dateTime" || e.type === "time" ? (m(), I("div", { key: 2, class: de(["time-selects", { seconds: e.includeSeconds, "use-24": e.use24 }]) }, [S("div", Tq, [a(r, { modelValue: e.hours, "onUpdate:modelValue": t[3] || (t[3] = v => e.hours = v), placeholder: e.t("hours"), items: e.hourItems }, null, 8, ["modelValue", "placeholder", "items"])]), S("div", Pq, [a(r, { modelValue: e.minutes, "onUpdate:modelValue": t[4] || (t[4] = v => e.minutes = v), placeholder: e.t("minutes"), items: e.minutesSecondItems }, null, 8, ["modelValue", "placeholder", "items"])]), e.includeSeconds ? (m(), I("div", Oq, [a(r, { modelValue: e.seconds, "onUpdate:modelValue": t[5] || (t[5] = v => e.seconds = v), items: e.minutesSecondItems }, null, 8, ["modelValue", "items"])])) : R("", !0), e.use24 === !1 ? (m(), I("div", Lq, [a(r, { modelValue: e.period, "onUpdate:modelValue": t[6] || (t[6] = v => e.period = v), items: ["am", "pm"] }, null, 8, ["modelValue"])])) : R("", !0)], 2)) : R("", !0), a(p), S("button", { class: "to-now", onClick: t[7] || (t[7] = (...v) => e.setToNow && e.setToNow(...v)) }, b(e.t("interfaces.datetime.set_to_now")), 1)]), _: 1 }, 8, ["disabled"]) } var Rq = B(Fq, [["render", jq], ["__scopeId", "data-v-2fb57ac6"]]), Mq = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="29" y="10" width="98" height="77" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="30" y="11" width="96" height="75" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="39" y="20" width="30" height="5.03704" rx="2" fill="var(--primary)" />
	<rect x="39" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="39" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="39" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="39" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="51" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="51" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="51" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="87" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.1" />
	<rect x="63" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="39" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.1" />
	<rect x="63" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="63" y="51" width="6" height="6" rx="2" fill="var(--primary)" />
	<rect x="63" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="63" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="99" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.1" />
	<rect x="75" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="51" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.1" />
	<rect x="75" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="75" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="75" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="75" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="111" y="71" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.1" />
	<rect x="87" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="87" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="87" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="87" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="99" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="99" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="99" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="99" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="111" y="31" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="111" y="41" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="111" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="111" y="61" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="51" y="51" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
</svg>
`, Uq = Me({ id: "datetime", name: "$t:interfaces.datetime.datetime", description: "$t:interfaces.datetime.description", icon: "today", component: Rq, types: ["dateTime", "date", "time", "timestamp"], group: "selection", options: [{ field: "includeSeconds", name: "$t:interfaces.datetime.include_seconds", type: "boolean", meta: { width: "half", interface: "boolean" }, schema: { default_value: !1 } }, { field: "use24", name: "$t:interfaces.datetime.use_24", type: "boolean", meta: { width: "half", interface: "boolean" }, schema: { default_value: !0 } }], recommendedDisplays: ["datetime"], preview: Mq }), Nq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Uq }); const Bq = z({ components: { DrawerCollection: Jt, DrawerItem: Bt }, props: { value: { type: [String, Object], default: null }, disabled: { type: Boolean, default: !1 }, folder: { type: String, default: void 0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null), { loading: i, file: u, fetchFile: o } = k(); _e(() => e.value, o, { immediate: !0 }); const s = V(() => u.value === null ? null : Jn(u.value.type, !0)), r = V(() => { var N; const T = typeof e.value == "string" ? e.value : (N = e.value) == null ? void 0 : N.id; return st(Ye() + `assets/${T}`) }), p = V(() => u.value === null || e.value === null ? null : u.value.type.includes("svg") ? r.value : u.value.type.includes("image") === !1 ? null : Zl(r.value, { key: "system-small-cover" })), { edits: f, stageEdits: v } = L(), { url: _, isValidURL: y, loading: g, importFromURL: w } = P(), h = E(!1); return { t: n, activeDialog: l, setSelection: F, loading: i, file: u, fileExtension: s, imageThumbnail: p, onUpload: A, url: _, urlLoading: g, importFromURL: w, isValidURL: y, assetURL: r, editDrawerActive: h, edits: f, stageEdits: v }; function k() { const T = E(!1), N = E(null); return { loading: T, file: N, fetchFile: O }; async function O() { var U; if (e.value === null) { N.value = null, T.value = !1; return } T.value = !0; try { const q = typeof e.value == "string" ? e.value : (U = e.value) == null ? void 0 : U.id, K = await ue.get(`/files/${q}`, { params: { fields: ["id", "title", "type", "filename_download"] } }); e.value !== null && typeof e.value == "object" ? N.value = re(re({}, K.data.data), e.value) : N.value = K.data.data } catch (q) { Ve(q) } finally { T.value = !1 } } } function F(T) { T[0] ? t("input", T[0]) : t("input", null) } function A(T) { u.value = T, l.value = null, t("input", T.id) } function P() { const T = E(""), N = E(!1), O = V(() => { try { return new URL(T.value), !0 } catch { return !1 } }); return { url: T, loading: N, isValidURL: O, importFromURL: U }; async function U() { var q; N.value = !0; try { const K = await ue.post("/files/import", { url: T.value, data: { folder: e.folder } }); u.value = K.data.data, l.value = null, T.value = "", t("input", (q = u.value) == null ? void 0 : q.id) } catch (K) { Ve(K) } finally { N.value = !1 } } } function L() { return { edits: V(() => e.value && typeof e.value == "object" ? e.value : {}), stageEdits: N }; function N(O) { !u.value || t("input", re({ id: u.value.id }, O)) } } } }), qq = { class: "file" }, zq = ["src", "alt"], Kq = { key: 1, class: "extension" }; function Hq(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-icon"), r = c("v-input"), p = c("v-list-item-icon"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-divider"), y = c("v-list"), g = c("v-menu"), w = c("drawer-item"), h = c("v-card-title"), k = c("v-upload"), F = c("v-card-text"), A = c("v-button"), P = c("v-card-actions"), L = c("v-card"), T = c("v-dialog"), N = c("drawer-collection"), O = we("tooltip"); return m(), I("div", qq, [a(g, { attached: "", disabled: e.loading }, { activator: d(({ toggle: U }) => [S("div", null, [e.loading ? (m(), C(o, { key: 0, type: "input" })) : (m(), C(r, { key: 1, clickable: "", readonly: "", placeholder: e.t("no_file_selected"), "model-value": e.file && e.file.title, onClick: U }, { prepend: d(() => { var q, K; return [S("div", { class: de(["preview", { "has-file": e.file, "is-svg": (K = (q = e.file) == null ? void 0 : q.type) == null ? void 0 : K.includes("svg") }]) }, [e.imageThumbnail ? (m(), I("img", { key: 0, src: e.imageThumbnail, alt: e.file.title }, null, 8, zq)) : e.fileExtension ? (m(), I("span", Kq, b(e.fileExtension), 1)) : (m(), C(s, { key: 2, name: "folder_open" }))], 2)] }), append: d(() => [e.file ? (m(), I(se, { key: 0 }, [ee(a(s, { name: "open_in_new", class: "edit", onClick: t[0] || (t[0] = Ae(q => e.editDrawerActive = !0, ["stop"])) }, null, 512), [[O, e.t("edit")]]), e.disabled ? R("", !0) : ee((m(), C(s, { key: 0, class: "deselect", name: "close", onClick: t[1] || (t[1] = Ae(q => e.$emit("input", null), ["stop"])) }, null, 512)), [[O, e.t("deselect")]])], 64)) : (m(), C(s, { key: 1, name: "attach_file" }))]), _: 2 }, 1032, ["placeholder", "model-value", "onClick"]))])]), default: d(() => [a(y, null, { default: d(() => [e.file ? (m(), I(se, { key: 0 }, [a(v, { download: e.file.filename_download, href: e.assetURL }, { default: d(() => [a(p, null, { default: d(() => [a(s, { name: "get_app" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("download_file")), 1)]), _: 1 })]), _: 1 }, 8, ["download", "href"]), e.disabled ? R("", !0) : (m(), C(_, { key: 0 }))], 64)) : R("", !0), e.disabled ? R("", !0) : (m(), I(se, { key: 1 }, [a(v, { clickable: "", onClick: t[2] || (t[2] = U => e.activeDialog = "upload") }, { default: d(() => [a(p, null, { default: d(() => [a(s, { name: "phonelink" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t(e.file ? "replace_from_device" : "upload_from_device")), 1)]), _: 1 })]), _: 1 }), a(v, { clickable: "", onClick: t[3] || (t[3] = U => e.activeDialog = "choose") }, { default: d(() => [a(p, null, { default: d(() => [a(s, { name: "folder_open" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t(e.file ? "replace_from_library" : "choose_from_library")), 1)]), _: 1 })]), _: 1 }), a(v, { clickable: "", onClick: t[4] || (t[4] = U => e.activeDialog = "url") }, { default: d(() => [a(p, null, { default: d(() => [a(s, { name: "link" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t(e.file ? "replace_from_url" : "import_from_url")), 1)]), _: 1 })]), _: 1 })], 64))]), _: 1 })]), _: 1 }, 8, ["disabled"]), e.file ? (m(), C(w, { key: 0, active: e.editDrawerActive, "onUpdate:active": t[5] || (t[5] = U => e.editDrawerActive = U), collection: "directus_files", "primary-key": e.file.id, edits: e.edits, onInput: e.stageEdits }, null, 8, ["active", "primary-key", "edits", "onInput"])) : R("", !0), a(T, { "model-value": e.activeDialog === "upload", onEsc: t[7] || (t[7] = U => e.activeDialog = null), "onUpdate:modelValue": t[8] || (t[8] = U => e.activeDialog = null) }, { default: d(() => [a(L, null, { default: d(() => [a(h, null, { default: d(() => [D(b(e.t("upload_from_device")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(k, { "from-url": "", folder: e.folder, onInput: e.onUpload }, null, 8, ["folder", "onInput"])]), _: 1 }), a(P, null, { default: d(() => [a(A, { secondary: "", onClick: t[6] || (t[6] = U => e.activeDialog = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"]), e.activeDialog === "choose" ? (m(), C(N, { key: 1, collection: "directus_files", active: e.activeDialog === "choose", "onUpdate:active": t[9] || (t[9] = U => e.activeDialog = null), onInput: e.setSelection }, null, 8, ["active", "onInput"])) : R("", !0), a(T, { "model-value": e.activeDialog === "url", persistent: e.urlLoading, "onUpdate:modelValue": t[12] || (t[12] = U => e.activeDialog = null), onEsc: t[13] || (t[13] = U => e.activeDialog = null) }, { default: d(() => [a(L, null, { default: d(() => [a(h, null, { default: d(() => [D(b(e.t("import_from_url")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(r, { modelValue: e.url, "onUpdate:modelValue": t[10] || (t[10] = U => e.url = U), autofocus: "", placeholder: e.t("url"), nullable: !1, disabled: e.urlLoading }, null, 8, ["modelValue", "placeholder", "disabled"])]), _: 1 }), a(P, null, { default: d(() => [a(A, { disabled: e.urlLoading, secondary: "", onClick: t[11] || (t[11] = U => e.activeDialog = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["disabled"]), a(A, { loading: e.urlLoading, disabled: e.isValidURL === !1, onClick: e.importFromURL }, { default: d(() => [D(b(e.t("import_label")), 1)]), _: 1 }, 8, ["loading", "disabled", "onClick"])]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value", "persistent"])]) } var Wq = B(Bq, [["render", Hq], ["__scopeId", "data-v-169e8c9e"]]), Gq = Me({ id: "file", name: "$t:interfaces.file.file", description: "$t:interfaces.file.description", icon: "note_add", component: Wq, types: ["uuid"], localTypes: ["file"], group: "relational", relational: !0, options: [{ field: "folder", name: "$t:interfaces.system-folder.folder", type: "uuid", meta: { width: "full", interface: "system-folder", note: "$t:interfaces.system-folder.field_hint" }, schema: { default_value: void 0 } }], recommendedDisplays: ["file"] }), Jq = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Gq }); const Qq = z({ components: { FilePreview: po }, props: { id: { type: String, required: !0 }, modelValue: { type: Boolean, default: void 0 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = E(!1), l = V({ get() { return e.modelValue === void 0 ? n.value : e.modelValue }, set(p) { n.value = p, t("update:modelValue", p) } }), i = E(!1), u = E(null), o = E(bt()), s = V(() => st(Ye() + `assets/${e.id}?cache-buster=${o.value}`)); return _e(() => e.id, (p, f) => { p && p !== f && r() }, { immediate: !0 }), { internalActive: l, cacheBuster: o, loading: i, file: u, fileSrc: s }; async function r() { o.value = bt(), i.value = !0; try { const p = await ue.get(`/files/${e.id}`, { params: { fields: ["type", "width", "height", "title"] } }); u.value = p.data.data } catch (p) { Ve(p) } finally { i.value = !1 } } } }); function Xq(e, t, n, l, i, u) { const o = c("v-progress-circular"), s = c("file-preview"), r = c("v-icon"), p = c("v-button"), f = c("v-dialog"); return m(), C(f, { modelValue: e.internalActive, "onUpdate:modelValue": t[2] || (t[2] = v => e.internalActive = v), onEsc: t[3] || (t[3] = v => e.internalActive = !1) }, { activator: d(v => [ye(e.$slots, "activator", Je(xe(v)), void 0, !0)]), default: d(() => [e.loading ? (m(), C(o, { key: 0, indeterminate: "" })) : e.file ? (m(), C(s, { key: 1, src: e.fileSrc, mime: e.file.type, width: e.file.width, height: e.file.height, title: e.file.title, "in-modal": "", onClick: t[0] || (t[0] = v => e.internalActive = !1) }, null, 8, ["src", "mime", "width", "height", "title"])) : R("", !0), a(p, { class: "close", icon: "", rounded: "", onClick: t[1] || (t[1] = v => e.internalActive = !1) }, { default: d(() => [a(r, { name: "close" })]), _: 1 })]), _: 3 }, 8, ["modelValue"]) } var Zq = B(Qq, [["render", Xq], ["__scopeId", "data-v-57968292"]]); const Yq = z({ components: { FileLightbox: Zq, DrawerItem: Bt }, props: { value: { type: [String, Object], default: null }, disabled: { type: Boolean, default: !1 }, folder: { type: String, default: void 0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n, n: l, te: i } = x(), u = E(!1), o = E(null), s = E(!1), r = E(!1), p = E(null), f = E(bt()), v = V(() => { if (!o.value) return null; if (o.value.type.includes("svg")) return st(Ye() + `assets/${o.value.id}`); if (o.value.type.includes("image")) { const T = Ye() + `assets/${o.value.id}?key=system-large-cover&cache-buster=${f.value}`; return st(T) } return null }), _ = V(() => o.value ? st(Ye() + `assets/${o.value.id}`) : null), y = V(() => { if (!o.value) return null; const { filesize: T, width: N, height: O, type: U } = o.value; return N && O ? `${l(N)}x${l(O)} \u2022 ${Sl(T)} \u2022 ${U}` : `${Sl(T)} \u2022 ${U}` }); _e(() => e.value, (T, N) => { T !== N && (T && h(), N && T === null && P()) }, { immediate: !0 }); const { edits: g, stageEdits: w } = L(); return { t: n, loading: u, image: o, src: v, imageError: p, imageErrorHandler: k, meta: y, lightboxActive: s, editDrawerActive: r, changeCacheBuster: F, setImage: A, deselect: P, downloadSrc: _, edits: g, stageEdits: w }; async function h() { var T; u.value = !0; try { const N = typeof e.value == "string" ? e.value : (T = e.value) == null ? void 0 : T.id, O = await ue.get(`/files/${N}`, { params: { fields: ["id", "title", "width", "height", "filesize", "type", "filename_download"] } }); e.value !== null && typeof e.value == "object" ? o.value = re(re({}, O.data.data), e.value) : o.value = O.data.data } catch (N) { Ve(N) } finally { u.value = !1 } } async function k() { var T, N, O, U; if (!!v.value) try { await ue.get(v.value) } catch (q) { p.value = (U = (O = (N = (T = q.response) == null ? void 0 : T.data) == null ? void 0 : N.errors[0]) == null ? void 0 : O.extensions) == null ? void 0 : U.code, (!p.value || !i("errors." + p.value)) && (p.value = "UNKNOWN") } } function F() { f.value = bt() } function A(T) { o.value = T, t("input", T.id) } function P() { t("input", null), u.value = !1, o.value = null, s.value = !1, r.value = !1 } function L() { return { edits: V(() => e.value && typeof e.value == "object" ? e.value : {}), stageEdits: N }; function N(O) { !o.value || t("input", re({ id: o.value.id }, O)) } } } }), xq = e => (Qe("data-v-4eff06c7"), e = e(), Xe(), e), ez = { class: "image" }, tz = { key: 0, class: "image-error" }, nz = { class: "message" }, lz = ["src"], oz = xq(() => S("div", { class: "shadow" }, null, -1)), az = { key: 2, class: "actions" }, iz = { class: "info" }, sz = { class: "title" }, rz = { class: "meta" }; function dz(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-notice"), r = c("v-icon"), p = c("v-button"), f = c("drawer-item"), v = c("file-lightbox"), _ = c("v-upload"), y = we("tooltip"); return m(), I("div", ez, [e.loading ? (m(), C(o, { key: 0, type: "input-tall" })) : e.disabled && !e.image ? (m(), C(s, { key: 1, class: "disabled-placeholder", center: "", icon: "block" }, { default: d(() => [D(b(e.t("disabled")), 1)]), _: 1 })) : e.image ? (m(), I("div", { key: 2, class: de(["image-preview", { "is-svg": e.image.type && e.image.type.includes("svg") }]) }, [e.imageError ? (m(), I("div", tz, [a(r, { large: "", name: e.imageError === "UNKNOWN" ? "error_outline" : "info_outline" }, null, 8, ["name"]), S("span", nz, b(e.t(`errors.${e.imageError}`)), 1)])) : (m(), I("img", { key: 1, src: e.src, alt: "", role: "presentation", onError: t[0] || (t[0] = (...g) => e.imageErrorHandler && e.imageErrorHandler(...g)) }, null, 40, lz)), oz, e.disabled ? R("", !0) : (m(), I("div", az, [ee(a(p, { icon: "", rounded: "", onClick: t[1] || (t[1] = g => e.lightboxActive = !0) }, { default: d(() => [a(r, { name: "zoom_in" })]), _: 1 }, 512), [[y, e.t("zoom")]]), ee(a(p, { icon: "", rounded: "", href: e.downloadSrc, download: e.image.filename_download }, { default: d(() => [a(r, { name: "get_app" })]), _: 1 }, 8, ["href", "download"]), [[y, e.t("download")]]), ee(a(p, { icon: "", rounded: "", onClick: t[2] || (t[2] = g => e.editDrawerActive = !0) }, { default: d(() => [a(r, { name: "open_in_new" })]), _: 1 }, 512), [[y, e.t("edit")]]), ee(a(p, { icon: "", rounded: "", onClick: e.deselect }, { default: d(() => [a(r, { name: "close" })]), _: 1 }, 8, ["onClick"]), [[y, e.t("deselect")]])])), S("div", iz, [S("div", sz, b(e.image.title), 1), S("div", rz, b(e.meta), 1)]), !e.disabled && e.image ? (m(), C(f, { key: 3, active: e.editDrawerActive, "onUpdate:active": t[3] || (t[3] = g => e.editDrawerActive = g), collection: "directus_files", "primary-key": e.image.id, edits: e.edits, onInput: e.stageEdits }, null, 8, ["active", "primary-key", "edits", "onInput"])) : R("", !0), a(v, { id: e.image.id, modelValue: e.lightboxActive, "onUpdate:modelValue": t[4] || (t[4] = g => e.lightboxActive = g) }, null, 8, ["id", "modelValue"])], 2)) : (m(), C(_, { key: 3, "from-library": "", "from-url": "", folder: e.folder, onInput: e.setImage }, null, 8, ["folder", "onInput"]))]) } var uz = B(Yq, [["render", dz], ["__scopeId", "data-v-4eff06c7"]]), cz = Me({ id: "file-image", name: "$t:interfaces.file-image.image", description: "$t:interfaces.file-image.description", icon: "insert_photo", component: uz, types: ["uuid"], localTypes: ["file"], group: "relational", relational: !0, options: [{ field: "folder", name: "$t:interfaces.system-folder.folder", type: "uuid", meta: { width: "full", interface: "system-folder", note: "$t:interfaces.system-folder.field_hint" }, schema: { default_value: void 0 } }], recommendedDisplays: ["image"] }), pz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: cz }); function Qs(e, t, n) { function l(_) { const { junctionPkField: y } = t.value; return e.value === null ? null : e.value.find(g => M.exports.get(g, y) === _ || g === _) || null } function i() { const { junctionField: _ } = t.value; return e.value === null || _ === null ? [] : e.value.filter(y => typeof y == "object" && _ in y && typeof y[_] != "object") } function u() { const { junctionField: _, relationPkField: y } = t.value; return e.value === null || _ === null ? [] : e.value.filter(g => typeof M.exports.get(g, _) == "object" && M.exports.has(g, [_, y]) === !1) } function o() { const { junctionField: _, relationPkField: y } = t.value; return e.value === null || _ === null ? [] : e.value.filter(g => M.exports.has(g, [_, y])) } function s() { return e.value === null ? [] : e.value.filter(_ => ["string", "number"].includes(typeof _)) } function r() { const { junctionPkField: _ } = t.value; return e.value === null ? [] : e.value.reduce((y, g) => { const w = M.exports.get(g, [_]); return ["string", "number"].includes(typeof g) ? y.push(g) : w !== void 0 && y.push(w), y }, []) } function p() { if (e.value === null) return []; const { junctionField: _, relationPkField: y } = t.value; return e.value.reduce((g, w) => { const h = M.exports.get(w, _), k = M.exports.get(w, [_, y]); return h !== void 0 ? g.push(h) : k !== void 0 && g.push(k), g }, []) } function f(_, y) { const { relationPkField: g, junctionField: w } = t.value; return y.find(h => M.exports.get(h, [w, g]) === _) || null } function v(_) { if (e.value === null) return; const { junctionField: y, relationPkField: g, junctionPkField: w } = t.value, h = M.exports.get(_, w), k = M.exports.get(_, [y, g]), F = e.value.filter(A => { if (h !== void 0) return typeof A == "object" ? M.exports.get(A, [w]) !== h : A !== h; if (k !== void 0) { const P = M.exports.get(A, [y, g]); if (["string", "number"].includes(typeof P)) return P !== k; const L = M.exports.get(A, [y]); if (["string", "number"].includes(typeof L)) return L !== k } return M.exports.isEqual(A, _) === !1 }); n(F) } return { getJunctionItem: l, getNewSelectedItems: i, getNewItems: u, getUpdatedItems: o, getExistingItems: s, getPrimaryKeys: r, getRelatedPrimaryKeys: p, getJunctionFromRelatedId: f, deleteItem: v } } function Xs(e, t) { var i; if (!(t == null ? void 0 : t.length)) return []; const n = Pe(), l = []; for (const u of t) { if (l.push(u), !u.includes(".")) continue; const o = u.split("."), s = n.getField(e, u), r = n.getPrimaryKeyFieldForCollection((i = s == null ? void 0 : s.collection) != null ? i : ""), p = o.slice(0, -1).concat(r.field).join("."); l.includes(p) || l.push(p) } return l } function Zs(e, t, n, l, i, u, o) { const s = Pe(), r = E([]), p = E(!1), f = E([]), v = E([]), _ = E(null); return _e(() => e.value, async F => { if (F === null) { v.value = []; return } p.value = !0; const { junctionField: A, relationPkField: P, junctionPkField: L, relationCollection: T } = n.value; if (A === null) return; const N = await w(), O = N.reduce((q, K) => { const W = M.exports.get(K, A); return W !== null && q.push(W), q }, []), U = [...t.value.length > 0 ? y(t.value) : k()]; U.includes(P) === !1 && U.push(P); try { let q = []; O.length > 0 && (q = await h(T, U, P, O)), q = q.map(te => { const G = M.exports.get(te, P), X = N.find(ae => ae[A] === G); if (X === void 0 || G === void 0) return; const ve = M.exports.cloneDeep(X); return ve[A] = te, ve }); const K = i(), W = u(); q = q.map(te => { const G = K.find(X => M.exports.get(X, [A, L]) === M.exports.get(te, [A, L])); return G !== void 0 ? M.exports.merge(te, G) : te }).concat(...W), f.value.length || (f.value = q), v.value = q } catch (q) { _.value = q } finally { p.value = !1 } }, { immediate: !0 }), _e(() => t.value, () => { const { junctionField: F, junctionCollection: A } = n.value; r.value = (t.value.length > 0 ? t.value : k().map(P => `${F}.${P}`)).map(P => { var N, O, U, q; const L = s.getField(A, P); return L ? { text: L.name, value: P, align: "left", sortable: !0, width: null, field: { display: (N = L.meta) == null ? void 0 : N.display, displayOptions: (O = L.meta) == null ? void 0 : O.display_options, interface: (U = L.meta) == null ? void 0 : U.interface, interfaceOptions: (q = L.meta) == null ? void 0 : q.options, type: L.type, field: L.field } } : null }).filter(P => P) }, { immediate: !0 }), { tableHeaders: r, items: v, initialItems: f, loading: p, error: _ }; function y(F) { const { junctionField: A } = n.value; return F.reduce((P, L) => { const T = L.split("."); return A === T[0] && T.length >= 2 && P.push(T.slice(1).join(".")), P }, []) } function g() { return (t.value || []).filter(F => F.includes(".") === !1) } async function w() { const { junctionPkField: F, junctionField: A, relationPkField: P, junctionCollection: L } = n.value; try { let T = []; const N = o(); if (N.length > 0) { const U = g(); U.includes(F) === !1 && U.push(F), U.includes(A) === !1 && U.push(A), n.value.sortField !== null && U.includes(n.value.sortField) === !1 && U.push(n.value.sortField), T = await h(L, U, F, N) } const O = i().map(U => ({ [A]: U[A][P] })); return T.concat(...l(), ...O) } catch (T) { _.value = T } return [] } async function h(F, A, P, L) { if (A === null || A.length === 0 || L === null || L.length === 0) return []; const T = Xs(F, A), N = await ue.get(Wt(F), { params: { fields: T, [`filter[${P}][_in]`]: L.join(",") } }); return N == null ? void 0 : N.data.data } function k() { return s.getFieldsForCollection(n.value.relationCollection).slice(0, 3).map(A => A.field) } } function Ys(e, t, n) { const l = E(!1), i = E(null), u = E(null), o = E({}); function s(f) { const { relationPkField: v, junctionField: _, junctionPkField: y } = t.value; l.value = !0, o.value = f, i.value = M.exports.get(f, [y], null), u.value = M.exports.get(f, [_, v], null) } function r(f) { const { relationPkField: v, junctionField: _, junctionPkField: y } = t.value, g = (e.value || []).map(w => { if (i.value !== null) { const h = i.value; if (typeof w == "object" && y in w) { if (w[y] === h) return f } else if (["number", "string"].includes(typeof w) && w === h) return f } if (u.value != null) { const h = u.value; if (M.exports.get(w, [_], null) === h || M.exports.get(w, [_, v], null) === h) return f } return M.exports.isEqual(o.value, w) ? f : w }); u.value === null && i.value === null && g.includes(f) === !1 && g.push(f), g.length === 0 ? n(null) : n(g), p() } function p() { l.value = !1, o.value = {}, i.value = null, u.value = null } return { currentlyEditing: i, editItem: s, editsAtStart: o, stageEdits: r, cancelEdit: p, relatedPrimaryKey: u, editModalActive: l } } function xs(e, t, n, l) { const i = E(!1), u = V(() => { if (e.value === null) return []; const { relationPkField: s, junctionField: r } = n.value; return e.value.reduce((f, v) => { const _ = M.exports.get(v, [r, s]); return _ !== void 0 && f.push(_), f }, []) }); function o(s) { const { junctionField: r, junctionPkField: p } = n.value, f = s.map(v => { const _ = t.value.find(g => g[r][p] === v), y = e.value.find(g => g[r][p] === v); return Ce(re(re({}, _), y), { [r]: Ce(re(re({}, _ == null ? void 0 : _[p]), y == null ? void 0 : y[p]), { [p]: v }) }) }); f.length === 0 ? l(null) : l(f) } return { stageSelection: o, selectModalActive: i, selectedPrimaryKeys: u } } function er(e, t, n, l) { const i = E({ by: e.value.sortField || t.value[0], desc: !1 }), u = V(() => { const s = e.value.sortField; if (s === null || i.value.by !== s) return n.value; const r = i.value.desc, p = M.exports.sortBy(n.value, [s]); return r ? p.reverse() : p }); return { sort: i, sortItems: o, sortedItems: u }; function o(s) { const r = e.value.sortField; if (r === null) return; const p = s.map((f, v) => (f[r] = v, f)); l(p) } } function tr(e, t) { const n = Dt(), l = Ze(), i = V(() => { var p; if (((p = l.currentUser) == null ? void 0 : p.role.admin_access) === !0) return !0; const s = !!n.permissions.find(f => f.action === "create" && f.collection === e.value.collection), r = !!n.permissions.find(f => f.action === "create" && f.collection === t.value.collection); return s && r }), u = V(() => { var r; return ((r = l.currentUser) == null ? void 0 : r.role.admin_access) === !0 ? !0 : !!n.permissions.find(p => p.action === "create" && p.collection === e.value.collection) }); return { createAllowed: i, selectAllowed: u } } const mz = z({ components: { DrawerItem: Bt, DrawerCollection: Jt, Draggable: kt }, props: { value: { type: Array, default: null }, primaryKey: { type: [Number, String], required: !0 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, template: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, enableCreate: { type: Boolean, default: !0 }, enableSelect: { type: Boolean, default: !0 }, folder: { type: String, default: void 0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { value: l, collection: i, field: u } = je(e), { junction: o, junctionCollection: s, relation: r, relationCollection: p, relationInfo: f } = Pl(i, u), v = V(() => { var J, ie; if (e.template) return e.template; if ((J = s.value.meta) == null ? void 0 : J.display_template) return s.value.meta.display_template; let fe = (ie = p.value.meta) == null ? void 0 : ie.display_template; if (fe) { const oe = /({{.*?}})/g, me = fe.split(oe).filter(ge => ge); for (const ge of me) { if (ge.startsWith("{{") === !1) continue; const be = ge.replace(/{{/g, "").replace(/}}/g, "").trim(), ke = `{{${r.value.field}.${be}}}`; fe = fe.replace(ge, ke) } return fe } return `{{${r.value.field}.${f.value.relationPkField}}}` }), _ = V(() => Qt(vt(v.value), s.value.collection)), { deleteItem: y, getUpdatedItems: g, getNewItems: w, getPrimaryKeys: h, getNewSelectedItems: k } = Qs(l, f, Z), { tableHeaders: F, items: A, initialItems: P, loading: L } = Zs(l, _, f, k, g, w, h), { currentlyEditing: T, editItem: N, editsAtStart: O, stageEdits: U, cancelEdit: q, relatedPrimaryKey: K, editModalActive: W } = Ys(l, f, Z), { stageSelection: te, selectModalActive: G, selectedPrimaryKeys: X } = xs(A, P, f, Z), { sort: ve, sortItems: ae, sortedItems: ne } = er(f, _, A, Z), { createAllowed: Y, selectAllowed: ce } = tr(s, p), { showUpload: pe, onUpload: H } = le(), Q = V(() => { if (!(K.value === null || p.value.collection !== "directus_files")) return st(Ye() + `assets/${K.value}`) }); return { t: n, junction: o, relation: r, tableHeaders: F, loading: L, currentlyEditing: T, editItem: N, junctionCollection: s, relationCollection: p, editsAtStart: O, stageEdits: U, cancelEdit: q, stageSelection: te, selectModalActive: G, deleteItem: y, selectedPrimaryKeys: X, items: A, relationInfo: f, relatedPrimaryKey: K, get: M.exports.get, editModalActive: W, sort: ve, sortItems: ae, sortedItems: ne, templateWithDefaults: v, createAllowed: Y, selectAllowed: ce, onUpload: H, showUpload: pe, downloadUrl: Q }; function Z(fe) { t("input", fe) } function le() { const fe = E(!1); return { showUpload: fe, onUpload: J }; function J(ie) { if (fe.value = !1, ie.length === 0) return; const { junctionField: oe } = f.value, me = ie.map(ge => ({ [oe]: ge.id })); t("input", [...e.value || [], ...me]) } } } }), fz = e => (Qe("data-v-c43e7886"), e = e(), Xe(), e), vz = { key: 1, class: "many-to-many" }, _z = fz(() => S("div", { class: "spacer" }, null, -1)), yz = { key: 3, class: "actions" }; function gz(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-skeleton-loader"), r = c("v-icon"), p = c("render-template"), f = c("v-list-item"), v = c("draggable"), _ = c("v-list"), y = c("v-button"), g = c("drawer-item"), w = c("drawer-collection"), h = c("v-card-title"), k = c("v-upload"), F = c("v-card-text"), A = c("v-card-actions"), P = c("v-card"), L = c("v-dialog"); return !e.junction || !e.relation ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("relationship_not_setup")), 1)]), _: 1 })) : (m(), I("div", vz, [e.loading ? (m(!0), I(se, { key: 0 }, he((e.value || []).length || 3, T => (m(), C(s, { key: T, type: (e.value || []).length > 4 ? "block-list-item-dense" : "block-list-item" }, null, 8, ["type"]))), 128)) : e.sortedItems.length === 0 ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("no_items")), 1)]), _: 1 })) : (m(), C(_, { key: 2 }, { default: d(() => [a(v, { "force-fallback": !0, "model-value": e.sortedItems, "item-key": "id", handle: ".drag-handle", disabled: !e.junction.meta.sort_field, "onUpdate:modelValue": t[1] || (t[1] = T => e.sortItems(T)) }, { item: d(({ element: T }) => [a(f, { dense: e.sortedItems.length > 4, block: "", clickable: "", onClick: N => e.editItem(T) }, { default: d(() => [e.junction.meta.sort_field ? (m(), C(r, { key: 0, name: "drag_handle", class: "drag-handle", left: "", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) })) : R("", !0), a(p, { collection: e.junctionCollection.collection, item: T, template: e.templateWithDefaults }, null, 8, ["collection", "item", "template"]), _z, e.disabled ? R("", !0) : (m(), C(r, { key: 1, name: "close", onClick: Ae(N => e.deleteItem(T), ["stop"]) }, null, 8, ["onClick"]))]), _: 2 }, 1032, ["dense", "onClick"])]), _: 1 }, 8, ["model-value", "disabled"])]), _: 1 })), e.disabled ? R("", !0) : (m(), I("div", yz, [e.enableCreate && e.createAllowed ? (m(), C(y, { key: 0, onClick: t[2] || (t[2] = T => e.showUpload = !0) }, { default: d(() => [D(b(e.t("upload_file")), 1)]), _: 1 })) : R("", !0), e.enableSelect && e.selectAllowed ? (m(), C(y, { key: 1, onClick: t[3] || (t[3] = T => e.selectModalActive = !0) }, { default: d(() => [D(b(e.t("add_existing")), 1)]), _: 1 })) : R("", !0)])), e.disabled ? R("", !0) : (m(), C(g, { key: 4, active: e.editModalActive, collection: e.relationInfo.junctionCollection, "primary-key": e.currentlyEditing || "+", "related-primary-key": e.relatedPrimaryKey || "+", "junction-field": e.relationInfo.junctionField, edits: e.editsAtStart, "circular-field": e.junction.field, onInput: e.stageEdits, "onUpdate:active": e.cancelEdit }, { actions: d(() => [e.currentlyEditing !== "+" && e.relationCollection.collection === "directus_files" ? (m(), C(y, { key: 0, secondary: "", rounded: "", icon: "", download: "", href: e.downloadUrl }, { default: d(() => [a(r, { name: "download" })]), _: 1 }, 8, ["href"])) : R("", !0)]), _: 1 }, 8, ["active", "collection", "primary-key", "related-primary-key", "junction-field", "edits", "circular-field", "onInput", "onUpdate:active"])), e.disabled ? R("", !0) : (m(), C(w, { key: 5, active: e.selectModalActive, "onUpdate:active": t[4] || (t[4] = T => e.selectModalActive = T), collection: e.relationCollection.collection, selection: e.selectedPrimaryKeys, multiple: "", onInput: e.stageSelection }, null, 8, ["active", "collection", "selection", "onInput"])), e.disabled ? R("", !0) : (m(), C(L, { key: 6, modelValue: e.showUpload, "onUpdate:modelValue": t[6] || (t[6] = T => e.showUpload = T) }, { default: d(() => [a(P, null, { default: d(() => [a(h, null, { default: d(() => [D(b(e.t("upload_file")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(k, { multiple: "", "from-url": "", folder: e.folder, onInput: e.onUpload }, null, 8, ["folder", "onInput"])]), _: 1 }), a(A, null, { default: d(() => [a(y, { onClick: t[5] || (t[5] = T => e.showUpload = !1) }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"]))])) } var hz = B(mz, [["render", gz], ["__scopeId", "data-v-c43e7886"]]), bz = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="19" y="9" width="56" height="36" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="20" y="10" width="54" height="34" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="25" y="15" width="44" height="24" rx="4" fill="var(--primary)" fill-opacity=".25" />
	<path d="M36.695 27.2L45.39 35H28l8.695-7.8z" fill="var(--primary)" />
	<path d="M52.153 23L66 35H38.305l13.848-12z" fill="var(--primary)" />
	<rect x="81" y="9" width="56" height="36" rx="6" fill="var(--background-page)" />
	<rect x="82" y="10" width="54" height="34" rx="5" stroke="var(--primary)" stroke-opacity=".25" stroke-width="2" />
	<rect x="87" y="15" width="44" height="24" rx="4" fill="var(--primary)" fill-opacity=".25" />
	<path d="M98.695 27.2l8.695 7.8H90l8.695-7.8z" fill="var(--primary)" />
	<path d="M114.153 23L128 35h-27.695l13.848-12z" fill="var(--primary)" />
	<rect x="19" y="51" width="56" height="36" rx="6" fill="var(--background-page)" />
	<rect x="20" y="52" width="54" height="34" rx="5" stroke="var(--primary)" stroke-opacity=".25" stroke-width="2" />
	<rect x="25" y="57" width="44" height="24" rx="4" fill="var(--primary)" fill-opacity=".25" />
	<path d="M36.695 69.2L45.39 77H28l8.695-7.8z" fill="var(--primary)" />
	<path d="M52.153 65L66 77H38.305l13.848-12z" fill="var(--primary)" />
	<rect x="81" y="51" width="56" height="36" rx="6" fill="var(--background-page)" />
	<rect x="82" y="52" width="54" height="34" rx="5" stroke="var(--primary)" stroke-opacity=".25" stroke-width="2" />
	<rect x="87" y="57" width="44" height="24" rx="4" fill="var(--primary)" fill-opacity=".25" />
	<path d="M98.695 69.2l8.695 7.8H90l8.695-7.8z" fill="var(--primary)" />
	<path d="M114.153 65L128 77h-27.695l13.848-12z" fill="var(--primary)" />
</svg>
`, $z = Me({ id: "files", name: "$t:interfaces.files.files", description: "$t:interfaces.files.description", icon: "note_add", component: hz, relational: !0, types: ["alias"], localTypes: ["files"], group: "relational", options: ({ relations: e }) => { var t; return [{ field: "folder", name: "$t:interfaces.system-folder.folder", type: "uuid", meta: { width: "full", interface: "system-folder", note: "$t:interfaces.system-folder.field_hint" }, schema: { default_value: void 0 } }, { field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: (t = e.o2m) == null ? void 0 : t.collection } } }, { field: "enableCreate", name: "$t:creating_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_create_button" }, width: "half" } }, { field: "enableSelect", name: "$t:selecting_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_select_button" }, width: "half" } }] }, recommendedDisplays: ["related-values"], preview: bz }), wz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: $z }); const kz = z({ name: "AccordionSection", props: { field: { type: Object, required: !0 }, fields: { type: Array, required: !0 }, values: { type: Object, required: !0 }, initialValues: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, batchMode: { type: Boolean, default: !1 }, batchActiveFields: { type: Array, default: () => [] }, primaryKey: { type: [Number, String], required: !0 }, loading: { type: Boolean, default: !1 }, validationErrors: { type: Array, default: () => [] }, group: { type: String, required: !0 }, multiple: { type: Boolean, default: !1 } }, emits: ["apply", "toggleAll"], setup(e, { emit: t }) { const { t: n } = x(), l = V(() => e.fields.filter(o => { var s, r, p; return !(((s = o.meta) == null ? void 0 : s.group) === e.group && ((r = o.meta) == null ? void 0 : r.id) !== ((p = e.field.meta) == null ? void 0 : p.id)) }).map(o => { var s, r; return ((s = o.meta) == null ? void 0 : s.id) === ((r = e.field.meta) == null ? void 0 : r.id) ? M.exports.merge({}, o, { hideLabel: !0 }) : o })), i = V(() => { const o = e.validationErrors.find(s => s.field === e.field.field); if (o !== void 0) return o.code === "RECORD_NOT_UNIQUE" ? n("validationError.unique") : n(`validationError.${o.type}`, o) }); return { fieldsInSection: l, handleModifier: u, validationMessage: i }; function u(o, s) { if (e.multiple === !1) { s(); return } o.shiftKey ? t("toggleAll") : s() } } }), Sz = ["onClick"], Cz = { key: 0, class: "fields" }; function Vz(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-form"), r = c("transition-expand"), p = c("v-item"), f = we("tooltip"); return m(), C(p, { value: e.field.field, scope: "group-accordion", class: "accordion-section" }, { default: d(({ active: v, toggle: _ }) => [S("div", { class: de(["label type-title", { active: v }]), onClick: y => e.handleModifier(y, _) }, [a(o, { class: de(["icon", { active: v }]), name: "expand_more" }, null, 8, ["class"]), D(" " + b(e.field.name) + " ", 1), !v && e.validationMessage ? ee((m(), C(o, { key: 0, class: "warning", name: "error_outline", small: "" }, null, 512)), [[f, e.validationMessage]]) : R("", !0)], 10, Sz), a(r, null, { default: d(() => [v ? (m(), I("div", Cz, [a(s, { "initial-values": e.initialValues, fields: e.fieldsInSection, "model-value": e.values, "primary-key": e.primaryKey, group: e.group, "validation-errors": e.validationErrors, loading: e.loading, "batch-mode": e.batchMode, "onUpdate:modelValue": t[0] || (t[0] = y => e.$emit("apply", y)) }, null, 8, ["initial-values", "fields", "model-value", "primary-key", "group", "validation-errors", "loading", "batch-mode"])])) : R("", !0)]), _: 2 }, 1024)]), _: 1 }, 8, ["value"]) } var Fz = B(kz, [["render", Vz], ["__scopeId", "data-v-2ba1fbc5"]]); const Az = z({ name: "InterfaceGroupAccordion", components: { AccordionSection: Fz }, props: { field: { type: Object, required: !0 }, fields: { type: Array, required: !0 }, values: { type: Object, required: !0 }, initialValues: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, batchMode: { type: Boolean, default: !1 }, batchActiveFields: { type: Array, default: () => [] }, primaryKey: { type: [Number, String], required: !0 }, loading: { type: Boolean, default: !1 }, validationErrors: { type: Array, default: () => [] }, accordionMode: { type: Boolean, default: !0 }, start: { type: String, enum: ["opened", "closed", "first"], default: "closed" } }, emits: ["apply"], setup(e) { const t = V(() => e.fields.filter(i => { var u, o; return ((u = i.meta) == null ? void 0 : u.group) === ((o = e.field.meta) == null ? void 0 : o.field) })), n = E([]); return _e(() => e.start, i => { i === "opened" && (n.value = t.value.map(u => u.field)), i === "first" && (n.value = [t.value[0].field]) }, { immediate: !0 }), { rootFields: t, selection: n, toggleAll: l }; function l() { e.accordionMode !== !0 && (n.value.length === t.value.length ? n.value = [] : n.value = t.value.map(i => i.field)) } } }); function Iz(e, t, n, l, i, u) { const o = c("accordion-section"), s = c("v-item-group"); return m(), C(s, { modelValue: e.selection, "onUpdate:modelValue": t[1] || (t[1] = r => e.selection = r), scope: "group-accordion", class: "group-accordion", multiple: e.accordionMode === !1 }, { default: d(() => [(m(!0), I(se, null, he(e.rootFields, r => (m(), C(o, { key: r.field, field: r, fields: e.fields, values: e.values, "initial-values": e.initialValues, disabled: e.disabled, "batch-mode": e.batchMode, "batch-active-fields": e.batchActiveFields, "primary-key": e.primaryKey, loading: e.loading, "validation-errors": e.validationErrors, group: e.field.meta.field, multiple: e.accordionMode === !1, onApply: t[0] || (t[0] = p => e.$emit("apply", p)), onToggleAll: e.toggleAll }, null, 8, ["field", "fields", "values", "initial-values", "disabled", "batch-mode", "batch-active-fields", "primary-key", "loading", "validation-errors", "group", "multiple", "onToggleAll"]))), 128))]), _: 1 }, 8, ["modelValue", "multiple"]) } var Ez = B(Az, [["render", Iz]]), Dz = Me({ id: "group-accordion", name: "$t:interfaces.group-accordion.name", description: "$t:interfaces.group-accordion.description", icon: "horizontal_split", component: Ez, hideLabel: !0, hideLoader: !0, types: ["alias"], localTypes: ["group"], group: "group", options: [{ field: "accordionMode", type: "boolean", name: "$t:interfaces.group-accordion.accordion_mode", meta: { interface: "boolean", options: { label: "$t:interfaces.group-accordion.max_one_section_open" }, width: "half" }, schema: { default_value: !0 } }, { field: "start", type: "string", name: "$t:start", schema: { default_value: "closed" }, meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:interfaces.group-accordion.all_closed", value: "closed" }, { text: "$t:interfaces.group-accordion.first_opened", value: "first" }] }, conditions: [{ rule: { accordionMode: { _eq: !1 } }, options: { choices: [{ text: "$t:interfaces.group-accordion.all_closed", value: "closed" }, { text: "$t:interfaces.group-accordion.first_opened", value: "first" }, { text: "$t:interfaces.group-accordion.all_opened", value: "opened" }] } }] } }] }), Tz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Dz }); const Pz = z({
    name: "InterfaceGroupDetail", props: { field: { type: Object, required: !0 }, fields: { type: Array, required: !0 }, values: { type: Object, required: !0 }, initialValues: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, batchMode: { type: Boolean, default: !1 }, batchActiveFields: { type: Array, default: () => [] }, primaryKey: { type: [Number, String], required: !0 }, loading: { type: Boolean, default: !1 }, validationErrors: { type: Array, default: () => [] }, start: { type: String, enum: ["open", "closed"], default: "open" }, headerIcon: { type: String, default: null }, headerColor: { type: String, default: null } }, emits: ["apply"], setup(e) {
        const { t } = x(); return {
            validationMessages: V(() => {
                if (!e.validationErrors) return; const l = e.fields.map(u => u.field), i = e.validationErrors.reduce((u, o) => (l.includes(o.field) === !1 || (o.code === "RECORD_NOT_UNIQUE" ? u.push(`${Vt(o.field)} ${t("validationError.unique").toLowerCase()}`) : u.push(`${Vt(o.field)} ${t(`validationError.${o.type}`, o).toLowerCase()}`)), u), []); if (i.length !== 0) return i.join(`
`)
            })
        }
    }
}), Oz = { key: 0, class: "title" }; function Lz(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-divider"), r = c("v-form"), p = c("v-detail"), f = we("tooltip"); return m(), C(p, { "start-open": e.start === "open", class: "group-detail" }, { activator: d(({ toggle: v, active: _ }) => [a(s, { style: Ke({ "--v-divider-label-color": e.headerColor }), class: de({ active: _ }), "inline-title": !1, large: "", onClick: v }, et({ default: d(() => [e.field.name ? (m(), I("span", Oz, b(e.field.name), 1)) : R("", !0), !_ && e.validationMessages ? ee((m(), C(o, { key: 1, class: "warning", name: "error_outline", small: "" }, null, 512)), [[f, e.validationMessages]]) : R("", !0), a(o, { class: "expand-icon", name: "expand_more" })]), _: 2 }, [e.headerIcon ? { name: "icon", fn: d(() => [a(o, { name: e.headerIcon, class: "header-icon" }, null, 8, ["name"])]) } : void 0]), 1032, ["style", "class", "onClick"])]), default: d(() => [a(r, { "initial-values": e.initialValues, fields: e.fields, "model-value": e.values, "primary-key": e.primaryKey, group: e.field.meta.field, "validation-errors": e.validationErrors, loading: e.loading, "batch-mode": e.batchMode, "onUpdate:modelValue": t[0] || (t[0] = v => e.$emit("apply", v)) }, null, 8, ["initial-values", "fields", "model-value", "primary-key", "group", "validation-errors", "loading", "batch-mode"])]), _: 1 }, 8, ["start-open"]) } var jz = B(Pz, [["render", Lz], ["__scopeId", "data-v-2875ec12"]]), Rz = Me({ id: "group-detail", name: "$t:interfaces.group-detail.name", description: "$t:interfaces.group-detail.description", icon: "menu_open", component: jz, localTypes: ["group"], group: "group", types: ["alias"], options: [{ field: "start", name: "$t:start", type: "string", schema: { default_value: "open" }, meta: { interface: "select-dropdown", width: "full", options: { choices: [{ text: "$t:interfaces.group-detail.start_open", value: "open" }, { text: "$t:interfaces.group-detail.start_closed", value: "closed" }] } } }, { field: "headerIcon", name: "$t:interfaces.group-detail.header_icon", type: "string", meta: { interface: "select-icon", width: "half" } }, { field: "headerColor", name: "$t:interfaces.group-detail.header_color", type: "string", meta: { interface: "select-color", width: "half" } }] }), Mz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Rz }); const Uz = z({ name: "InterfaceGroupRaw", props: { field: { type: Object, required: !0 }, fields: { type: Array, required: !0 }, values: { type: Object, required: !0 }, initialValues: { type: Object, required: !0 }, disabled: { type: Boolean, default: !1 }, batchMode: { type: Boolean, default: !1 }, batchActiveFields: { type: Array, default: () => [] }, primaryKey: { type: [Number, String], required: !0 }, loading: { type: Boolean, default: !1 }, validationErrors: { type: Array, default: () => [] } }, emits: ["apply"] }), Nz = { class: "group-raw" }; function Bz(e, t, n, l, i, u) { const o = c("v-form"); return m(), I("div", Nz, [a(o, { "initial-values": e.initialValues, fields: e.fields, "model-value": e.values, "primary-key": e.primaryKey, group: e.field.meta.field, "validation-errors": e.validationErrors, loading: e.loading, "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("apply", s)) }, null, 8, ["initial-values", "fields", "model-value", "primary-key", "group", "validation-errors", "loading"])]) } var qz = B(Uz, [["render", Bz]]), zz = Me({ id: "group-raw", name: "$t:interfaces.group-raw.name", description: "$t:interfaces.group-raw.description", icon: "view_in_ar", component: qz, localTypes: ["group"], group: "group", types: ["alias"], options: [] }), Kz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: zz }); const Hz = z({ props: { value: { type: [String, Number], default: null }, type: { type: String, default: null }, clear: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, masked: { type: Boolean, default: !1 }, iconLeft: { type: String, default: null }, iconRight: { type: String, default: null }, trim: { type: Boolean, default: !0 }, font: { type: String, default: "sans-serif" }, length: { type: Number, default: null }, dbSafe: { type: Boolean, default: !1 }, autofocus: { type: Boolean, default: !1 }, slug: { type: Boolean, default: !1 }, min: { type: Number, default: null }, max: { type: Number, default: null }, step: { type: Number, default: 1 } }, emits: ["input"], setup(e) { const t = V(() => typeof e.value == "number" || !e.length || !e.value ? null : +e.length - e.value.length), n = V(() => typeof e.value == "number" || !e.length || !e.value ? null : 100 - e.value.length / +e.length * 100); return { inputType: V(() => e.masked ? "password" : ["bigInteger", "integer", "float", "decimal"].includes(e.type) ? "number" : "text"), charsRemaining: t, percentageRemaining: n } } }); function Wz(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"); return m(), C(s, { autofocus: e.autofocus, "model-value": e.value, nullable: !e.clear, placeholder: e.placeholder, disabled: e.disabled, trim: e.trim, type: e.inputType, class: de(e.font), "db-safe": e.dbSafe, slug: e.slug, min: e.min, max: e.max, step: e.step, "onUpdate:modelValue": t[0] || (t[0] = r => e.$emit("input", r)) }, et({ _: 2 }, [e.iconLeft ? { name: "prepend", fn: d(() => [a(o, { name: e.iconLeft }, null, 8, ["name"])]) } : void 0, e.percentageRemaining && e.percentageRemaining <= 20 || e.iconRight ? { name: "append", fn: d(() => [e.percentageRemaining && e.percentageRemaining <= 20 ? (m(), I("span", { key: 0, class: de(["remaining", { warning: e.percentageRemaining < 10, danger: e.percentageRemaining < 5 }]) }, b(e.charsRemaining), 3)) : R("", !0), e.iconRight ? (m(), C(o, { key: 1, class: de({ hide: e.percentageRemaining && e.percentageRemaining <= 20 }), name: e.iconRight }, null, 8, ["class", "name"])) : R("", !0)]) } : void 0]), 1032, ["autofocus", "model-value", "nullable", "placeholder", "disabled", "trim", "type", "class", "db-safe", "slug", "min", "max", "step"]) } var Gz = B(Hz, [["render", Wz], ["__scopeId", "data-v-2d088068"]]), Jz = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="35" width="120" height="26" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="36" width="118" height="24" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="45" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="82" y="45" width="20" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
</svg>
`, Qz = Me({ id: "input", name: "$t:interfaces.input.input", description: "$t:interfaces.input.description", icon: "text_fields", component: Gz, types: ["string", "uuid", "bigInteger", "integer", "float", "decimal", "text"], group: "standard", options: ({ field: e }) => { const t = { standard: [{ field: "placeholder", name: "$t:placeholder", meta: { width: "full", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "iconLeft", name: "$t:icon_left", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "iconRight", name: "$t:icon_right", type: "string", meta: { width: "half", interface: "select-icon" } }], advanced: [{ field: "font", name: "$t:font", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:monospace", value: "monospace" }, { text: "$t:serif", value: "serif" }] } }, schema: { default_value: "sans-serif" } }, { field: "trim", name: "$t:interfaces.input.trim", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.trim_label" } }, schema: { default_value: !1 } }, { field: "masked", name: "$t:interfaces.input.mask", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.mask_label" } }, schema: { default_value: !1 } }, { field: "clear", name: "$t:interfaces.input.clear", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.clear_label" } }, schema: { default_value: !1 } }, { field: "slug", name: "$t:interfaces.input.slug", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.slug_label" } }, schema: { default_value: !1 } }] }, n = [{ field: "min", name: "$t:interfaces.input.minimum_value", type: "integer", meta: { width: "half", interface: "input" } }, { field: "max", name: "$t:interfaces.input.maximum_value", type: "integer", meta: { width: "half", interface: "input" } }, { field: "step", name: "$t:interfaces.input.step_interval", type: "integer", meta: { width: "half", interface: "input" }, schema: { default_value: 1 } }, { field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "half", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "iconLeft", name: "$t:icon_left", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "iconRight", name: "$t:icon_right", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "font", name: "$t:font", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:monospace", value: "monospace" }, { text: "$t:serif", value: "serif" }] } }, schema: { default_value: "sans-serif" } }]; return e.type && ["bigInteger", "integer", "float", "decimal"].includes(e.type) ? n : t }, preview: Jz }), Xz = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: Qz }); const Zz = z({ props: { value: { type: [String, Number], default: null }, url: { type: String, default: null }, resultsPath: { type: String, default: null }, valuePath: { type: String, default: null }, trigger: { type: String, default: "throttle" }, rate: { type: [Number, String], default: 500 }, placeholder: { type: String, default: null }, iconLeft: { type: String, default: null }, iconRight: { type: String, default: null }, font: { type: String, default: "sans-serif" }, disabled: { type: Boolean, default: !1 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E([]), i = async r => { if (!r) { l.value = []; return } const p = Mn(e.url, { value: r }); try { const f = await Ml.get(p), v = e.resultsPath ? M.exports.get(f.data, e.resultsPath) : f.data; if (Array.isArray(v) === !1) { console.warn(`Expected results type of array, "${typeof v}" received`); return } else l.value = v.map(_ => e.valuePath ? M.exports.get(_, e.valuePath) : _).filter(_ => _) } catch (f) { console.warn(f) } }, u = e.trigger === "debounce" ? M.exports.debounce(i, Number(e.rate)) : M.exports.throttle(i, Number(e.rate)); return { t: n, results: l, onInput: o, emitValue: s }; function o(r) { s(r), u(r) } function s(r) { t("input", r) } } }), Yz = { key: 1 }; function xz(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-icon"), r = c("v-input"), p = c("v-list-item-content"), f = c("v-list-item"), v = c("v-list"), _ = c("v-menu"); return e.url ? (m(), I("div", Yz, [a(_, { attached: "", disabled: e.disabled }, { activator: d(({ activate: y, deactivate: g }) => [a(r, { placeholder: e.placeholder, disabled: e.disabled, class: de(e.font), "model-value": e.value, "onUpdate:modelValue": e.onInput, onFocus: y, onBlur: g }, et({ _: 2 }, [e.iconLeft ? { name: "prepend", fn: d(() => [a(s, { name: e.iconLeft }, null, 8, ["name"])]) } : void 0, e.iconRight ? { name: "append", fn: d(() => [a(s, { name: e.iconRight }, null, 8, ["name"])]) } : void 0]), 1032, ["placeholder", "disabled", "class", "model-value", "onUpdate:modelValue", "onFocus", "onBlur"])]), default: d(() => [e.results.length > 0 ? (m(), C(v, { key: 0 }, { default: d(() => [(m(!0), I(se, null, he(e.results, y => (m(), C(f, { key: y, onClick: () => e.emitValue(y) }, { default: d(() => [a(p, null, { default: d(() => [D(b(y), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })) : R("", !0)]), _: 1 }, 8, ["disabled"])])) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("one_or_more_options_are_missing")), 1)]), _: 1 })) } var eK = B(Zz, [["render", xz], ["__scopeId", "data-v-10e66f47"]]), tK = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="35" width="120" height="26" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="36" width="118" height="24" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="45" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="82" y="45" width="20" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
</svg>
`, nK = Me({ id: "input-autocomplete-api", name: "$t:interfaces.input-autocomplete-api.input-autocomplete-api", description: "$t:interfaces.input-autocomplete-api.description", icon: "find_in_page", component: eK, types: ["string", "text"], localTypes: ["standard"], group: "standard", recommendedDisplays: ["formatted-value"], options: [{ field: "url", name: "$t:url", type: "string", meta: { interface: "input", options: { placeholder: "https://example.com/search?q={{value}}", font: "monospace" }, width: "full" } }, { field: "resultsPath", name: "$t:interfaces.input-autocomplete-api.results_path", type: "string", meta: { interface: "input", options: { placeholder: "result.predictions", font: "monospace" }, width: "half" } }, { field: "valuePath", name: "$t:interfaces.input-autocomplete-api.value_path", type: "string", meta: { interface: "input", options: { placeholder: "structured_main_text", font: "monospace" }, width: "half" } }, { field: "trigger", name: "$t:interfaces.input-autocomplete-api.trigger", type: "string", schema: { default_value: "throttle" }, meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "Throttle", value: "throttle" }, { text: "Debounce", value: "debounce" }] } } }, { field: "rate", name: "$t:interfaces.input-autocomplete-api.rate", type: "integer", schema: { default_value: 500 }, meta: { width: "half", interface: "input" } }, { field: "placeholder", name: "$t:placeholder", meta: { width: "half", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "font", name: "$t:font", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:monospace", value: "monospace" }, { text: "$t:serif", value: "serif" }] } }, schema: { default_value: "sans-serif" } }, { field: "iconLeft", name: "$t:icon_left", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "iconRight", name: "$t:icon_right", type: "string", meta: { width: "half", interface: "select-icon" } }], preview: tK }), lK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: nK }); function nr(e) { switch (e) { case "apl": return j(() => import("./assets/apl.a63313b0.js").then(function (t) { return t.a }), ["assets/apl.a63313b0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "asciiarmor": return j(() => import("./assets/asciiarmor.3b1d0f31.js").then(function (t) { return t.a }), ["assets/asciiarmor.3b1d0f31.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "asn.1": return j(() => import("./assets/asn.1.87a170ea.js").then(function (t) { return t.a }), ["assets/asn.1.87a170ea.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "asterisk": return j(() => import("./assets/asterisk.2a94cb4c.js").then(function (t) { return t.a }), ["assets/asterisk.2a94cb4c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "brainfuck": return j(() => import("./assets/brainfuck.26d25aaf.js").then(function (t) { return t.b }), ["assets/brainfuck.26d25aaf.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "clike": return j(() => import("./assets/clike.edc5829c.js").then(function (t) { return t.c }), ["assets/clike.edc5829c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "clojure": return j(() => import("./assets/clojure.7a100302.js").then(function (t) { return t.c }), ["assets/clojure.7a100302.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "cmake": return j(() => import("./assets/cmake.380cdff4.js").then(function (t) { return t.c }), ["assets/cmake.380cdff4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "cobol": return j(() => import("./assets/cobol.f6d0d732.js").then(function (t) { return t.c }), ["assets/cobol.f6d0d732.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "coffeescript": return j(() => import("./assets/coffeescript.fa9a0562.js").then(function (t) { return t.c }), ["assets/coffeescript.fa9a0562.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "commonlisp": return j(() => import("./assets/commonlisp.02385e3e.js").then(function (t) { return t.c }), ["assets/commonlisp.02385e3e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "crystal": return j(() => import("./assets/crystal.b76a4aec.js").then(function (t) { return t.c }), ["assets/crystal.b76a4aec.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "css": return j(() => import("./assets/css.c89f439b.js").then(function (t) { return t.c }), ["assets/css.c89f439b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "cypher": return j(() => import("./assets/cypher.56b17de3.js").then(function (t) { return t.c }), ["assets/cypher.56b17de3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "d": return j(() => import("./assets/d.6d07e4dd.js").then(function (t) { return t.d }), ["assets/d.6d07e4dd.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "dart": return j(() => import("./assets/dart.c54df9d4.js").then(function (t) { return t.d }), ["assets/dart.c54df9d4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/clike.edc5829c.js"]); case "diff": return j(() => import("./assets/diff.e663c7d4.js").then(function (t) { return t.d }), ["assets/diff.e663c7d4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "django": return j(() => import("./assets/django.ad94c4f3.js").then(function (t) { return t.d }), ["assets/django.ad94c4f3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/overlay.17bcab08.js"]); case "dockerfile": return j(() => import("./assets/dockerfile.d3c851d0.js").then(function (t) { return t.d }), ["assets/dockerfile.d3c851d0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js"]); case "dtd": return j(() => import("./assets/dtd.a923df19.js").then(function (t) { return t.d }), ["assets/dtd.a923df19.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "dylan": return j(() => import("./assets/dylan.9d61b0d3.js").then(function (t) { return t.d }), ["assets/dylan.9d61b0d3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "ebnf": return j(() => import("./assets/ebnf.6bf95ce3.js").then(function (t) { return t.e }), ["assets/ebnf.6bf95ce3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "ecl": return j(() => import("./assets/ecl.02b879c9.js").then(function (t) { return t.e }), ["assets/ecl.02b879c9.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "eiffel": return j(() => import("./assets/eiffel.b441e9e0.js").then(function (t) { return t.e }), ["assets/eiffel.b441e9e0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "elm": return j(() => import("./assets/elm.b21b96c7.js").then(function (t) { return t.e }), ["assets/elm.b21b96c7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "erlang": return j(() => import("./assets/erlang.b3352f46.js").then(function (t) { return t.e }), ["assets/erlang.b3352f46.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "factor": return j(() => import("./assets/factor.6dde298e.js").then(function (t) { return t.f }), ["assets/factor.6dde298e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js"]); case "fcl": return j(() => import("./assets/fcl.3b6a0156.js").then(function (t) { return t.f }), ["assets/fcl.3b6a0156.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "forth": return j(() => import("./assets/forth.568b9e62.js").then(function (t) { return t.f }), ["assets/forth.568b9e62.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "fortran": return j(() => import("./assets/fortran.55e0d59b.js").then(function (t) { return t.f }), ["assets/fortran.55e0d59b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "gas": return j(() => import("./assets/gas.4db1f658.js").then(function (t) { return t.g }), ["assets/gas.4db1f658.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "gfm": return j(() => import("./assets/gfm.030ad601.js").then(function (t) { return t.g }), ["assets/gfm.030ad601.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/overlay.17bcab08.js"]); case "gherkin": return j(() => import("./assets/gherkin.ad583410.js").then(function (t) { return t.g }), ["assets/gherkin.ad583410.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "go": return j(() => import("./assets/go.93e3a800.js").then(function (t) { return t.g }), ["assets/go.93e3a800.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "groovy": return j(() => import("./assets/groovy.de590f33.js").then(function (t) { return t.g }), ["assets/groovy.de590f33.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "haml": return j(() => import("./assets/haml.5acd6ee4.js").then(function (t) { return t.h }), ["assets/haml.5acd6ee4.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/ruby.2944282c.js"]); case "handlebars": return j(() => import("./assets/handlebars.5cf29f35.js").then(function (t) { return t.h }), ["assets/handlebars.5cf29f35.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js", "assets/multiplex.bc708602.js"]); case "haskell": return j(() => import("./assets/haskell.0c3a5d85.js").then(function (t) { return t.h }), ["assets/haskell.0c3a5d85.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "haskell-literate": return j(() => import("./assets/haskell-literate.15d2f533.js").then(function (t) { return t.h }), ["assets/haskell-literate.15d2f533.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/haskell.0c3a5d85.js"]); case "haxe": return j(() => import("./assets/haxe.7d71b799.js").then(function (t) { return t.h }), ["assets/haxe.7d71b799.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "htmlembedded": return j(() => import("./assets/htmlembedded.24ede8c5.js").then(function (t) { return t.h }), ["assets/htmlembedded.24ede8c5.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/multiplex.bc708602.js"]); case "htmlmixed": return j(() => import("./assets/htmlmixed.0714fe9c.js").then(function (t) { return t.h }), ["assets/htmlmixed.0714fe9c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js"]); case "http": return j(() => import("./assets/http.d94924e1.js").then(function (t) { return t.h }), ["assets/http.d94924e1.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "idl": return j(() => import("./assets/idl.6d5cfb21.js").then(function (t) { return t.i }), ["assets/idl.6d5cfb21.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "javascript": return j(() => import("./assets/javascript.e1b08a7c.js").then(function (t) { return t.j }), ["assets/javascript.e1b08a7c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "jinja2": return j(() => import("./assets/jinja2.f8f38ccd.js").then(function (t) { return t.j }), ["assets/jinja2.f8f38ccd.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "jsx": return j(() => import("./assets/jsx.8aee4b64.js").then(function (t) { return t.j }), ["assets/jsx.8aee4b64.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/javascript.e1b08a7c.js"]); case "julia": return j(() => import("./assets/julia.4ab46b62.js").then(function (t) { return t.j }), ["assets/julia.4ab46b62.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "livescript": return j(() => import("./assets/livescript.eb145824.js").then(function (t) { return t.l }), ["assets/livescript.eb145824.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "lua": return j(() => import("./assets/lua.492ef6f8.js").then(function (t) { return t.l }), ["assets/lua.492ef6f8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "markdown": return j(() => import("./assets/vendor.c46e17d6.js").then(function (t) { return t.a }), ["assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mathematica": return j(() => import("./assets/mathematica.85e0e720.js").then(function (t) { return t.m }), ["assets/mathematica.85e0e720.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mbox": return j(() => import("./assets/mbox.bd76d0e3.js").then(function (t) { return t.m }), ["assets/mbox.bd76d0e3.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mirc": return j(() => import("./assets/mirc.ef885f9d.js").then(function (t) { return t.m }), ["assets/mirc.ef885f9d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mllike": return j(() => import("./assets/mllike.09bad057.js").then(function (t) { return t.m }), ["assets/mllike.09bad057.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "modelica": return j(() => import("./assets/modelica.705292e7.js").then(function (t) { return t.m }), ["assets/modelica.705292e7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mscgen": return j(() => import("./assets/mscgen.c905f040.js").then(function (t) { return t.m }), ["assets/mscgen.c905f040.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "mumps": return j(() => import("./assets/mumps.232bd3cf.js").then(function (t) { return t.m }), ["assets/mumps.232bd3cf.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "nginx": return j(() => import("./assets/nginx.53b1a1cc.js").then(function (t) { return t.n }), ["assets/nginx.53b1a1cc.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "nsis": return j(() => import("./assets/nsis.2e11a243.js").then(function (t) { return t.n }), ["assets/nsis.2e11a243.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js"]); case "ntriples": return j(() => import("./assets/ntriples.28c82a78.js").then(function (t) { return t.n }), ["assets/ntriples.28c82a78.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "octave": return j(() => import("./assets/octave.12f6af40.js").then(function (t) { return t.o }), ["assets/octave.12f6af40.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "oz": return j(() => import("./assets/oz.d739be50.js").then(function (t) { return t.o }), ["assets/oz.d739be50.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "pascal": return j(() => import("./assets/pascal.5b65f314.js").then(function (t) { return t.p }), ["assets/pascal.5b65f314.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "pegjs": return j(() => import("./assets/pegjs.0e1cb55b.js").then(function (t) { return t.p }), ["assets/pegjs.0e1cb55b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/javascript.e1b08a7c.js"]); case "perl": return j(() => import("./assets/perl.f5ebe96e.js").then(function (t) { return t.p }), ["assets/perl.f5ebe96e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "php": return j(() => import("./assets/php.1a84936c.js").then(function (t) { return t.p }), ["assets/php.1a84936c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/clike.edc5829c.js"]); case "pig": return j(() => import("./assets/pig.fe68742a.js").then(function (t) { return t.p }), ["assets/pig.fe68742a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "powershell": return j(() => import("./assets/powershell.914a1e33.js").then(function (t) { return t.p }), ["assets/powershell.914a1e33.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "properties": return j(() => import("./assets/properties.30175490.js").then(function (t) { return t.p }), ["assets/properties.30175490.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "protobuf": return j(() => import("./assets/protobuf.3cc05f5b.js").then(function (t) { return t.p }), ["assets/protobuf.3cc05f5b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "pug": return j(() => import("./assets/pug.cc504c53.js").then(function (t) { return t.p }), ["assets/pug.cc504c53.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/htmlmixed.0714fe9c.js"]); case "puppet": return j(() => import("./assets/puppet.1c9976ea.js").then(function (t) { return t.p }), ["assets/puppet.1c9976ea.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "python": return j(() => import("./assets/python.cd7c7d5e.js").then(function (t) { return t.p }), ["assets/python.cd7c7d5e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "q": return j(() => import("./assets/q.ca9aad64.js").then(function (t) { return t.q }), ["assets/q.ca9aad64.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "r": return j(() => import("./assets/r.4cd7d336.js").then(function (t) { return t.r }), ["assets/r.4cd7d336.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "rpm": return j(() => import("./assets/rpm.ba5fad62.js").then(function (t) { return t.r }), ["assets/rpm.ba5fad62.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "rst": return j(() => import("./assets/rst.6c6d4c2c.js").then(function (t) { return t.r }), ["assets/rst.6c6d4c2c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/python.cd7c7d5e.js", "assets/stex.e1a54633.js", "assets/overlay.17bcab08.js"]); case "ruby": return j(() => import("./assets/ruby.2944282c.js").then(function (t) { return t.r }), ["assets/ruby.2944282c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "rust": return j(() => import("./assets/rust.2c5788fa.js").then(function (t) { return t.r }), ["assets/rust.2c5788fa.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js"]); case "sas": return j(() => import("./assets/sas.a3f5d313.js").then(function (t) { return t.s }), ["assets/sas.a3f5d313.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "sass": return j(() => import("./assets/sass.986c56a5.js").then(function (t) { return t.s }), ["assets/sass.986c56a5.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/css.c89f439b.js"]); case "scheme": return j(() => import("./assets/scheme.54733295.js").then(function (t) { return t.s }), ["assets/scheme.54733295.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "shell": return j(() => import("./assets/shell.043f3329.js").then(function (t) { return t.s }), ["assets/shell.043f3329.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "sieve": return j(() => import("./assets/sieve.24282682.js").then(function (t) { return t.s }), ["assets/sieve.24282682.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "slim": return j(() => import("./assets/slim.f414fbd8.js").then(function (t) { return t.s }), ["assets/slim.f414fbd8.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/ruby.2944282c.js"]); case "smalltalk": return j(() => import("./assets/smalltalk.12047a6d.js").then(function (t) { return t.s }), ["assets/smalltalk.12047a6d.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "smarty": return j(() => import("./assets/smarty.e04e1453.js").then(function (t) { return t.s }), ["assets/smarty.e04e1453.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "solr": return j(() => import("./assets/solr.d6415c8b.js").then(function (t) { return t.s }), ["assets/solr.d6415c8b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "soy": return j(() => import("./assets/soy.66293c54.js").then(function (t) { return t.s }), ["assets/soy.66293c54.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js"]); case "sparql": return j(() => import("./assets/sparql.9a0f5fb0.js").then(function (t) { return t.s }), ["assets/sparql.9a0f5fb0.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "spreadsheet": return j(() => import("./assets/spreadsheet.a9745ff6.js").then(function (t) { return t.s }), ["assets/spreadsheet.a9745ff6.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "sql": return j(() => import("./assets/sql.aed3072b.js").then(function (t) { return t.s }), ["assets/sql.aed3072b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "stex": return j(() => import("./assets/stex.e1a54633.js").then(function (t) { return t.s }), ["assets/stex.e1a54633.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "stylus": return j(() => import("./assets/stylus.71e0fdc6.js").then(function (t) { return t.s }), ["assets/stylus.71e0fdc6.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "swift": return j(() => import("./assets/swift.e957a034.js").then(function (t) { return t.s }), ["assets/swift.e957a034.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "tcl": return j(() => import("./assets/tcl.aee8d35f.js").then(function (t) { return t.t }), ["assets/tcl.aee8d35f.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "textile": return j(() => import("./assets/textile.ae334d71.js").then(function (t) { return t.t }), ["assets/textile.ae334d71.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "tiddlywiki": return j(() => import("./assets/tiddlywiki.0922294b.js").then(function (t) { return t.t }), ["assets/tiddlywiki.0922294b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "tiki": return j(() => import("./assets/tiki.b9504243.js").then(function (t) { return t.t }), ["assets/tiki.b9504243.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "toml": return j(() => import("./assets/toml.d89c1075.js").then(function (t) { return t.t }), ["assets/toml.d89c1075.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "tornado": return j(() => import("./assets/tornado.9070fbf9.js").then(function (t) { return t.t }), ["assets/tornado.9070fbf9.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/htmlmixed.0714fe9c.js", "assets/javascript.e1b08a7c.js", "assets/css.c89f439b.js", "assets/overlay.17bcab08.js"]); case "troff": return j(() => import("./assets/troff.e70475ee.js").then(function (t) { return t.t }), ["assets/troff.e70475ee.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "ttcn": return j(() => import("./assets/ttcn.73d14f89.js").then(function (t) { return t.t }), ["assets/ttcn.73d14f89.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "ttcn-cfg": return j(() => import("./assets/ttcn-cfg.98c35417.js").then(function (t) { return t.t }), ["assets/ttcn-cfg.98c35417.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "turtle": return j(() => import("./assets/turtle.6725c84b.js").then(function (t) { return t.t }), ["assets/turtle.6725c84b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "twig": return j(() => import("./assets/twig.eeb6221b.js").then(function (t) { return t.t }), ["assets/twig.eeb6221b.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/multiplex.bc708602.js"]); case "vb": return j(() => import("./assets/vb.0680c963.js").then(function (t) { return t.v }), ["assets/vb.0680c963.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "vbscript": return j(() => import("./assets/vbscript.0bd9509a.js").then(function (t) { return t.v }), ["assets/vbscript.0bd9509a.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "velocity": return j(() => import("./assets/velocity.0c534db9.js").then(function (t) { return t.v }), ["assets/velocity.0c534db9.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "verilog": return j(() => import("./assets/verilog.2cdac09c.js").then(function (t) { return t.v }), ["assets/verilog.2cdac09c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "vhdl": return j(() => import("./assets/vhdl.94c45860.js").then(function (t) { return t.v }), ["assets/vhdl.94c45860.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "vue": return j(() => import("./assets/vue.594a0de9.js").then(function (t) { return t.v }), ["assets/vue.594a0de9.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/overlay.17bcab08.js", "assets/javascript.e1b08a7c.js", "assets/coffeescript.fa9a0562.js", "assets/css.c89f439b.js", "assets/sass.986c56a5.js", "assets/stylus.71e0fdc6.js", "assets/pug.cc504c53.js", "assets/htmlmixed.0714fe9c.js", "assets/handlebars.5cf29f35.js", "assets/simple.a61e3410.js", "assets/multiplex.bc708602.js"]); case "wast": return j(() => import("./assets/wast.0781628c.js").then(function (t) { return t.w }), ["assets/wast.0781628c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/simple.a61e3410.js"]); case "webidl": return j(() => import("./assets/webidl.cc5ea6f7.js").then(function (t) { return t.w }), ["assets/webidl.cc5ea6f7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "xml": return j(() => import("./assets/vendor.c46e17d6.js").then(function (t) { return t.x }), ["assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "xquery": return j(() => import("./assets/xquery.98800824.js").then(function (t) { return t.x }), ["assets/xquery.98800824.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "yacas": return j(() => import("./assets/yacas.c9a224a6.js").then(function (t) { return t.y }), ["assets/yacas.c9a224a6.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "yaml": return j(() => import("./assets/yaml.9997c2ba.js").then(function (t) { return t.y }), ["assets/yaml.9997c2ba.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); case "yaml-frontmatter": return j(() => import("./assets/yaml-frontmatter.4f8a599e.js").then(function (t) { return t.y }), ["assets/yaml-frontmatter.4f8a599e.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/yaml.9997c2ba.js"]); case "z80": return j(() => import("./assets/z80.7caf642c.js").then(function (t) { return t.z }), ["assets/z80.7caf642c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); default: return Promise.resolve() } } const oK = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: [String, Object, Array], default: null }, altOptions: { type: Object, default: null }, template: { type: String, default: null }, lineNumber: { type: Boolean, default: !0 }, placeholder: { type: String, default: null }, language: { type: String, default: "plaintext" }, type: { type: String, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null); let i; at(async () => { l.value && (await s(f.value), await nr(f.value.mode), i = hn(l.value, Ce(re({}, f.value), { value: u.value })), i.setOption("mode", { name: "javascript " }), await o(), i.on("change", (_, { origin: y }) => { if (y === "setValue") return; const g = _.getValue(); if (e.type === "json") { if (g.length === 0) return t("input", null); try { t("input", JSON.parse(g)) } catch { } } else t("input", g) })) }); const u = V(() => e.value === null ? "" : typeof e.value == "object" ? JSON.stringify(e.value, null, 4) : e.value); _e(() => e.language, () => { o() }), _e(u, () => { (i == null ? void 0 : i.getValue()) !== u.value && (i == null || i.setValue(u.value || "")) }); async function o() { if (i) { const _ = e.language.toLowerCase(); if (e.type === "json" || _ === "json") { await j(() => import("./assets/javascript.e1b08a7c.js").then(function (g) { return g.j }), ["assets/javascript.e1b08a7c.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]); const y = await j(() => import("./assets/jsonlint.09bf5bab.js").then(function (g) { return g.j }), []); i.setOption("mode", { name: "javascript", json: !0 }), hn.registerHelper("lint", "json", g => { const w = [], h = y.parser; if (h.parseError = (k, F) => { const A = F.loc; w.push({ from: hn.Pos(A.first_line - 1, A.first_column), to: hn.Pos(A.last_line - 1, A.last_column), message: k }) }, g.length > 0) try { y.parse(g) } catch { } return w }) } else _ === "plaintext" ? i.setOption("mode", { name: "plaintext" }) : (await nr(_), i.setOption("mode", { name: _ })) } } async function s(_) { const y = []; _ && _.size > 0 && (_.styleActiveLine && y.push(j(() => import("./assets/active-line.1fb45430.js").then(function (g) { return g.a }), ["assets/active-line.1fb45430.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), _.markSelection && y.push(j(() => import("./assets/mark-selection.2a69ad50.js").then(function (g) { return g.m }), ["assets/mark-selection.2a69ad50.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), _.highlightSelectionMatches && y.push(j(() => import("./assets/match-highlighter.748e90d7.js").then(function (g) { return g.m }), ["assets/match-highlighter.748e90d7.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), _.autoRefresh && y.push(j(() => import("./assets/autorefresh.6db972ff.js").then(function (g) { return g.a }), ["assets/autorefresh.6db972ff.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), _.matchBrackets && y.push(j(() => import("./assets/vendor.c46e17d6.js").then(function (g) { return g.m }), ["assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), (_.hintOptions || _.showHint) && (y.push(j(() => import("./assets/show-hint.4d9b5efb.js").then(function (g) { return g.s }), ["assets/show-hint.4d9b5efb.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"])), y.push(j(() => Promise.resolve({}), ["assets/show-hint.a1d6f238.css"])), y.push(j(() => import("./assets/javascript-hint.d4ef8031.js").then(function (g) { return g.j }), ["assets/javascript-hint.d4ef8031.js", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css"]))), await Promise.all(y)) } const r = V(() => i ? i.lineCount() : 0), p = { tabSize: 4, autoRefresh: !0, indentUnit: 4, styleActiveLine: !0, highlightSelectionMatches: { showToken: /\w/, annotateScrollbar: !0, delay: 100 }, hintOptions: { completeSingle: !0, hint: () => { } }, matchBrackets: !0, showCursorWhenSelecting: !0, theme: "default", extraKeys: { Ctrl: "autocomplete" }, lint: !0, gutters: ["CodeMirror-lint-markers"] }, f = V(() => Object.assign({}, p, { lineNumbers: e.lineNumber, readOnly: e.disabled ? "nocursor" : !1, mode: e.language, placeholder: e.placeholder }, e.altOptions ? e.altOptions : {})); return _e(() => e.disabled, _ => { i == null || i.setOption("readOnly", _ ? "nocursor" : !1) }, { immediate: !0 }), _e(() => e.altOptions, async _ => { if (!(!_ || _.size === 0)) { await s(_); for (const y in _) i == null || i.setOption(y, _[y]) } }), _e(() => e.lineNumber, _ => { i == null || i.setOption("lineNumbers", _) }), { t: n, cmOptions: f, lineCount: r, codemirrorEl: l, stringValue: u, fillTemplate: v, formatTitle: Vt }; function v() { if (e.type === "json") try { t("input", JSON.parse(e.template)) } finally { } else t("input", e.template) } } }), aK = { ref: "codemirrorEl" }; function iK(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = we("tooltip"); return m(), I("div", { class: de(["input-code codemirror-custom-styles", { disabled: e.disabled }]) }, [S("div", aK, null, 512), e.template ? ee((m(), C(s, { key: 0, small: "", icon: "", secondary: "", onClick: e.fillTemplate }, { default: d(() => [a(o, { name: "playlist_add" })]), _: 1 }, 8, ["onClick"])), [[r, e.t("fill_template"), void 0, { left: !0 }]]) : R("", !0)], 2) } var sK = B(oK, [["render", iK], ["__scopeId", "data-v-0ac16708"]]), rK = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="15" width="120" height="66" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="16" width="118" height="64" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="25" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="45.148" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="55.222" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="65.296" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="35.074" width="6" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="42" y="25" width="10" height="6" rx="2" fill="var(--primary)" />
	<rect x="46" y="35" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="46" y="45" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="46" y="55" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="42" y="65" width="10" height="6" rx="2" fill="var(--primary)" />
</svg>
`; const dK = hn.modeInfo.reduce((e, t) => ["JSON", "JSON-LD"].includes(t.name) ? (e.JSON = "JSON", e) : ((t.mode == null || t.mode == "null") && (t.mode = "plaintext"), t.mode in e ? e[t.mode] += " / " + t.name : e[t.mode] = t.name, e), {}), uK = Object.entries(dK).map(([e, t]) => ({ text: t, value: e })); var cK = Me({ id: "input-code", name: "$t:interfaces.input-code.code", description: "$t:interfaces.input-code.description", icon: "code", component: sK, types: ["string", "json", "text", "geometry"], group: "standard", preview: rK, options: ({ field: e }) => { const t = [{ field: "lineNumber", name: "$t:interfaces.input-code.line_number", type: "boolean", meta: { width: "half", interface: "boolean" }, schema: { default_value: !1 } }, { field: "template", name: "$t:template", type: "text", meta: { width: "full", interface: "input-code", options: { placeholder: "$t:interfaces.input-code.placeholder" } }, schema: { default_value: null } }], n = [{ field: "language", name: "$t:language", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: uK } } }, ...t], l = [...t]; return (e == null ? void 0 : e.type) === "json" ? l : n } }), pK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: cK }); const mK = z({ props: { value: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, masked: { type: Boolean, default: !1 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(!1), i = E(null), u = V(() => l.value ? n("value_hashed") : e.placeholder); return _e(() => e.value, () => { l.value = !!(e.value && e.value.length > 0) }, { immediate: !0 }), { internalPlaceholder: u, isHashed: l, localValue: i, emitValue: o }; function o(s) { t("input", s), i.value = s } } }); function fK(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"); return m(), C(s, { placeholder: e.internalPlaceholder, disabled: e.disabled, type: e.masked ? "password" : "text", "model-value": e.localValue, class: de({ hashed: e.isHashed && !e.localValue }), "onUpdate:modelValue": e.emitValue }, { append: d(() => [a(o, { class: "lock", name: e.isHashed && !e.localValue ? "lock" : "lock_open" }, null, 8, ["name"])]), _: 1 }, 8, ["placeholder", "disabled", "type", "model-value", "class", "onUpdate:modelValue"]) } var vK = B(mK, [["render", fK], ["__scopeId", "data-v-f5661292"]]), _K = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="35" width="120" height="26" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="36" width="118" height="24" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="45" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="82" y="45" width="20" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
</svg>
`, yK = Me({ id: "input-hash", name: "$t:interfaces.input-hash.hash", description: "$t:interfaces.input-hash.description", icon: "fingerprint", component: vK, types: ["hash"], group: "other", preview: _K, options: [{ field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "half", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "masked", name: "$t:interfaces.input-hash.masked", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input-hash.masked_label" } }, schema: { default_value: !1 } }] }), gK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: yK }); const hK = z({ props: { value: { type: String, default: null }, clear: { type: Boolean, default: !1 }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, trim: { type: Boolean, default: !0 }, font: { type: String, default: "sans-serif" } }, emits: ["input"] }); function bK(e, t, n, l, i, u) { const o = c("v-textarea"); return m(), C(o, dt({ placeholder: e.placeholder, trim: e.trim }, { "model-value": e.value, nullable: !e.clear, disabled: e.disabled, class: e.font, "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("input", s)) }), null, 16, ["model-value", "nullable", "disabled", "class"]) } var $K = B(hK, [["render", bK], ["__scopeId", "data-v-9aaedf94"]]), wK = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="18" width="120" height="60" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="19" width="118" height="58" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="28" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="48" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="38" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="92" y="28" width="30" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="72" y="38" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
</svg>
`, kK = Me({ id: "input-multiline", name: "$t:interfaces.input-multiline.textarea", description: "$t:interfaces.input-multiline.description", icon: "text_fields", component: $K, types: ["text"], group: "standard", options: [{ field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "full", interface: "input-multiline", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "trim", name: "$t:interfaces.input.trim", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.trim_label" } }, schema: { default_value: !1 } }, { field: "font", name: "$t:font", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:monospace", value: "monospace" }, { text: "$t:serif", value: "serif" }] } }, schema: { default_value: "sans-serif" } }, { field: "clear", name: "$t:interfaces.input.clear", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.input.clear_label" } }, schema: { default_value: !1 } }], preview: wK }), SK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: kK }), CK = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="15" width="120" height="66" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="16" width="118" height="64" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="42" y="25" width="8" height="8" rx="2" fill="var(--primary)" />
	<rect x="56" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="70" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="84" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="98" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="39" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="59" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="49" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="92" y="39" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="72" y="49" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
</svg>
`; const VK = ua(() => j(() => import("./assets/input-rich-text-html.44f8d056.js"), ["assets/input-rich-text-html.44f8d056.js", "assets/input-rich-text-html.7eb18fdf.css", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/use-sync.864aa3cf.js"])); var FK = Me({ id: "input-rich-text-html", name: "$t:interfaces.input-rich-text-html.wysiwyg", description: "$t:interfaces.input-rich-text-html.description", icon: "format_quote", component: VK, types: ["text"], group: "standard", preview: CK, options: [{ field: "toolbar", name: "$t:interfaces.input-rich-text-html.toolbar", type: "json", schema: { default_value: ["bold", "italic", "underline", "removeformat", "customLink", "bullist", "numlist", "blockquote", "h1", "h2", "h3", "customImage", "customMedia", "hr", "code", "fullscreen"] }, meta: { width: "half", interface: "select-multiple-dropdown", options: { choices: [{ value: "aligncenter", text: "$t:wysiwyg_options.aligncenter" }, { value: "alignjustify", text: "$t:wysiwyg_options.alignjustify" }, { value: "alignleft", text: "$t:wysiwyg_options.alignleft" }, { value: "alignnone", text: "$t:wysiwyg_options.alignnone" }, { value: "alignright", text: "$t:wysiwyg_options.alignright" }, { value: "forecolor", text: "$t:wysiwyg_options.forecolor" }, { value: "backcolor", text: "$t:wysiwyg_options.backcolor" }, { value: "bold", text: "$t:wysiwyg_options.bold" }, { value: "italic", text: "$t:wysiwyg_options.italic" }, { value: "underline", text: "$t:wysiwyg_options.underline" }, { value: "strikethrough", text: "$t:wysiwyg_options.strikethrough" }, { value: "subscript", text: "$t:wysiwyg_options.subscript" }, { value: "superscript", text: "$t:wysiwyg_options.superscript" }, { value: "blockquote", text: "$t:wysiwyg_options.blockquote" }, { value: "bullist", text: "$t:wysiwyg_options.bullist" }, { value: "numlist", text: "$t:wysiwyg_options.numlist" }, { value: "hr", text: "$t:wysiwyg_options.hr" }, { value: "customLink", text: "$t:wysiwyg_options.link" }, { value: "unlink", text: "$t:wysiwyg_options.unlink" }, { value: "customMedia", text: "$t:wysiwyg_options.media" }, { value: "customImage", text: "$t:wysiwyg_options.image" }, { value: "copy", text: "$t:wysiwyg_options.copy" }, { value: "cut", text: "$t:wysiwyg_options.cut" }, { value: "paste", text: "$t:wysiwyg_options.paste" }, { value: "h1", text: "$t:wysiwyg_options.h1" }, { value: "h2", text: "$t:wysiwyg_options.h2" }, { value: "h3", text: "$t:wysiwyg_options.h3" }, { value: "h4", text: "$t:wysiwyg_options.h4" }, { value: "h5", text: "$t:wysiwyg_options.h5" }, { value: "h6", text: "$t:wysiwyg_options.h6" }, { value: "fontselect", text: "$t:wysiwyg_options.fontselect" }, { value: "fontsizeselect", text: "$t:wysiwyg_options.fontsizeselect" }, { value: "indent", text: "$t:wysiwyg_options.indent" }, { value: "outdent", text: "$t:wysiwyg_options.outdent" }, { value: "undo", text: "$t:wysiwyg_options.undo" }, { value: "redo", text: "$t:wysiwyg_options.redo" }, { value: "remove", text: "$t:wysiwyg_options.remove" }, { value: "removeformat", text: "$t:wysiwyg_options.removeformat" }, { value: "selectall", text: "$t:wysiwyg_options.selectall" }, { value: "table", text: "$t:wysiwyg_options.table" }, { value: "visualaid", text: "$t:wysiwyg_options.visualaid" }, { value: "code", text: "$t:wysiwyg_options.source_code" }, { value: "fullscreen", text: "$t:wysiwyg_options.fullscreen" }, { value: "ltr rtl", text: "$t:wysiwyg_options.directionality" }] } } }, { field: "font", name: "$t:font", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:sans_serif", value: "sans-serif" }, { text: "$t:monospace", value: "monospace" }, { text: "$t:serif", value: "serif" }] } }, schema: { default_value: "sans-serif" } }, { field: "customFormats", name: "$t:interfaces.input-rich-text-html.custom_formats", type: "json", meta: { interface: "code", options: { language: "json", template: JSON.stringify([{ title: "My Custom Format", inline: "span", classes: "custom-wrapper", styles: { color: "#00ff00", "font-size": "20px" }, attributes: { title: "My Custom Wrapper" } }], null, 4) } } }, { field: "tinymceOverrides", name: "$t:interfaces.input-rich-text-html.options_override", type: "json", meta: { interface: "code", options: { language: "json" } } }, { field: "imageToken", name: "$t:interfaces.input-rich-text-md.imageToken", type: "string", meta: { note: "$t:interfaces.input-rich-text-md.imageToken_label", width: "full", interface: "input" } }] }), AK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: FK }); const IK = {
    heading(e, { cursorTo: t }, n) { const l = (n == null ? void 0 : n.level) || 3; let i = e; const u = t, o = "#".repeat(l) + " "; return e.startsWith(o) ? i = e.substring(o.length) : (i = `${o}${e}`, u.ch = u.ch + o.length), { newSelection: i, newCursor: u } }, bold(e, { cursorTo: t }) { let n = e; const l = t; return e.startsWith("**") && e.endsWith("**") ? n = e.substring(2, e.length - 2) : (n = `**${e}**`, l.ch = l.ch + 2), { newSelection: n, newCursor: l } }, italic(e, { cursorTo: t }) { let n = e; const l = t; return e.startsWith("*") && e.endsWith("*") ? n = e.substring(1, e.length - 1) : (n = `*${e}*`, l.ch = l.ch + 1), { newSelection: n, newCursor: l } }, strikethrough(e, { cursorTo: t }) { let n = e; const l = t; return e.startsWith("~~") && e.endsWith("~~") ? n = e.substring(2, e.length - 2) : (n = `~~${e}~~`, l.ch = l.ch + 2), { newSelection: n, newCursor: l } }, listBulleted(e, { cursorTo: t }) {
        let n = e; const l = t, i = e.split(`
`); return i.every(o => o.startsWith("- ")) ? n = i.map(o => o.substring(2)).join(`
`) : n = i.map(o => `- ${o}`).join(`
`), e || (l.ch = l.ch + 2), { newSelection: n, newCursor: l }
    }, listNumbered(e, { cursorTo: t }) {
        let n = e; const l = t, i = e.split(`
`); return i.every((o, s) => o.startsWith(`${s + 1}.`)) ? n = i.map(o => o.substring(3)).join(`
`) : n = i.map((o, s) => `${s + 1}. ${o}`).join(`
`), e || (l.ch = l.ch + 2), { newSelection: n, newCursor: l }
    }, blockquote(e, { cursorTo: t }) {
        let n = e; const l = t, i = e.split(`
`); return i.every(o => o.startsWith("> ")) ? n = i.map(o => o.substring(2)).join(`
`) : n = i.map(o => `> ${o}`).join(`
`), e || (l.ch = l.ch + 2), { newSelection: n, newCursor: l }
    }, code(e, { cursorTo: t }) {
        if (e.includes(`
`)) { let n = e; const l = t; return e.startsWith("```") && e.endsWith("```") ? n = e.substring(3, e.length - 3) : (n = "```\n" + n + "\n```", l.line = l.line + 1), { newSelection: n, newCursor: l } } else { let n = e; const l = t; return e.startsWith("`") && e.endsWith("`") ? n = e.substring(1, e.length - 1) : (n = `\`${e}\``, l.ch = l.ch + 1), { newSelection: n, newCursor: l } }
    }, link(e, { cursorFrom: t, cursorTo: n }) { let l = e; const i = n; let u; return e.endsWith("](url)") ? l = e.substring(1, e.length - 6) : e.startsWith("http") ? (l = `[](${e})`, i.ch = t.ch + 1) : (l = `[${e}](url)`, e ? u = { from: Ce(re({}, M.exports.cloneDeep(i)), { ch: i.ch + 3 }), to: Ce(re({}, M.exports.cloneDeep(i)), { ch: i.ch + 6 }) } : i.ch = t.ch + 1), { newSelection: l, newCursor: i, highlight: u } }, table(e, t, n) {
        if (!n) return { newSelection: e, newCursor: t.cursorFrom }; let l = ""; const i = []; for (let u = 0; u < n.columns; u++)i.push("Header"); l += `| ${i.join(" | ")} |`, l += `
| ${i.map(() => "------").join(" | ")} |`; for (let u = 0; u < n.rows; u++)l += `
| ${i.map(() => "Cell").join("   | ")}   |`; return { newSelection: l, newCursor: t.cursorFrom }
    }, custom(e, { cursorTo: t, cursorHead: n }, l) {
        if (!l) return { newSelection: e, newCursor: n }; if (l.box === "block") {
            let i = e; const u = t; return e.startsWith(l.prefix) && e.endsWith(l.suffix) ? i = e.substring(l.prefix.length, e.length - l.suffix.length) : (i = `${l.prefix}
${i}
${l.suffix}`, u.line = u.line + 1), { newSelection: i, newCursor: u }
        } else { let i = e; const u = t; return e.startsWith(l.prefix) && e.endsWith(l.suffix) ? i = e.substring(1, e.length - 1) : (i = `${l.prefix}${e}${l.suffix}`, u.ch = u.ch + 1), { newSelection: i, newCursor: u } }
    }
}; function EK(e, t, n) { if (e) { const l = e.getCursor("head"), i = e.getCursor("from"), u = e.getCursor("to"), o = e.findWordAt(l), s = e.getRange(o.anchor, o.head).trim(), r = e.getSelection(), { newSelection: p, newCursor: f, highlight: v } = IK[t](r || s, { cursorFrom: M.exports.cloneDeep(r ? i : o.anchor), cursorTo: M.exports.cloneDeep(r ? u : o.head), cursorHead: l }, n); s && !r ? e.replaceRange(p, o.anchor, o.head) : e.replaceSelection(p), e.setCursor(f), v && e.setSelection(v.from, v.to), e.focus() } } const DK = z({ props: { value: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, customSyntax: { type: Array, default: () => [] }, imageToken: { type: String, default: void 0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(), i = E(); let u = null; const o = E(["editor"]), s = E(!1); at(async () => { i.value && (u = hn(i.value, { mode: "markdown", configureMouse: () => ({ addNew: !1 }), lineWrapping: !0, placeholder: e.placeholder, value: e.value || "" }), u.on("change", (_, { origin: y }) => { if (y === "setValue") return; const g = _.getValue(); t("input", g) })) }), _e(() => e.value, _ => { if (!u) return; u.getValue() !== _ && (u.setValue(""), u.clearHistory(), u.setValue(_ != null ? _ : ""), u.refresh()) }); const r = V(() => { let _ = e.value || ""; if (!e.imageToken) { const y = Va() + "assets/", g = new RegExp(`\\]\\((${Cd(y)}[^\\s\\)]*)`, "gm"), w = Array.from(_.matchAll(g)); for (const h of w) _ = _.replace(h[1], st(h[1])) } return _ }), p = Xt({ rows: 4, columns: 4 }); return nt("meta+b", () => v("bold"), l), nt("meta+i", () => v("italic"), l), nt("meta+k", () => v("link"), l), nt("meta+alt+d", () => v("strikethrough"), l), nt("meta+alt+q", () => v("blockquote"), l), nt("meta+alt+c", () => v("code"), l), nt("meta+alt+1", () => v("heading", { level: 1 }), l), nt("meta+alt+2", () => v("heading", { level: 2 }), l), nt("meta+alt+3", () => v("heading", { level: 3 }), l), nt("meta+alt+4", () => v("heading", { level: 4 }), l), nt("meta+alt+5", () => v("heading", { level: 5 }), l), nt("meta+alt+6", () => v("heading", { level: 6 }), l), { t: n, codemirrorEl: i, edit: v, view: o, markdownString: r, table: p, onImageUpload: f, imageDialogOpen: s, useShortcut: nt, translateShortcut: Ea, markdownInterface: l }; function f(_) { if (!u) return; let y = Va() + "assets/" + _.id; e.imageToken && (y += "?access_token=" + e.imageToken), u.replaceSelection(`![](${y})`), s.value = !1 } function v(_, y) { u && EK(u, _, y) } } }), TK = e => (Qe("data-v-77b97e5e"), e = e(), Xe(), e), PK = { class: "toolbar" }, OK = { class: "table-options" }, LK = { class: "field half" }, jK = { class: "type-label" }, RK = { class: "field half" }, MK = { class: "type-label" }, UK = { class: "field full" }, NK = D(" Create "), BK = TK(() => S("div", { class: "spacer" }, null, -1)), qK = { ref: "codemirrorEl" }, zK = { key: 0, class: "preview-box" }; function KK(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"), r = c("v-text-overflow"), p = c("v-list-item-content"), f = c("v-list-item-hint"), v = c("v-list-item"), _ = c("v-list"), y = c("v-menu"), g = c("v-input"), w = c("v-item-group"), h = c("v-card-title"), k = c("v-upload"), F = c("v-card-text"), A = c("v-card-actions"), P = c("v-card"), L = c("v-dialog"), T = we("tooltip"), N = we("md"); return m(), I("div", { ref: "markdownInterface", class: de(["interface-input-rich-text-md", e.view[0]]) }, [S("div", PK, [a(y, { "show-arrow": "", placement: "bottom-start" }, { activator: d(({ toggle: O }) => [ee(a(s, { small: "", icon: "", onClick: O }, { default: d(() => [a(o, { name: "title" })]), _: 2 }, 1032, ["onClick"]), [[T, e.t("wysiwyg_options.heading")]])]), default: d(() => [a(_, null, { default: d(() => [(m(), I(se, null, he(6, O => a(v, { key: O, clickable: "", onClick: U => e.edit("heading", { level: O }) }, { default: d(() => [a(p, null, { default: d(() => [a(r, { text: e.t(`wysiwyg_options.h${O}`) }, null, 8, ["text"])]), _: 2 }, 1024), a(f, null, { default: d(() => [D(b(e.translateShortcut(["meta", "alt"])) + " " + b(O), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["onClick"])), 64))]), _: 1 })]), _: 1 }), ee(a(s, { small: "", icon: "", onClick: t[0] || (t[0] = O => e.edit("bold")) }, { default: d(() => [a(o, { name: "format_bold" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.bold") + " - " + e.translateShortcut(["meta", "b"])]]), ee(a(s, { small: "", icon: "", onClick: t[1] || (t[1] = O => e.edit("italic")) }, { default: d(() => [a(o, { name: "format_italic" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.italic") + " - " + e.translateShortcut(["meta", "i"])]]), ee(a(s, { small: "", icon: "", onClick: t[2] || (t[2] = O => e.edit("strikethrough")) }, { default: d(() => [a(o, { name: "format_strikethrough" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.strikethrough") + " - " + e.translateShortcut(["meta", "alt", "d"])]]), ee(a(s, { small: "", icon: "", onClick: t[3] || (t[3] = O => e.edit("listBulleted")) }, { default: d(() => [a(o, { name: "format_list_bulleted" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.bullist")]]), ee(a(s, { small: "", icon: "", onClick: t[4] || (t[4] = O => e.edit("listNumbered")) }, { default: d(() => [a(o, { name: "format_list_numbered" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.numlist")]]), ee(a(s, { small: "", icon: "", onClick: t[5] || (t[5] = O => e.edit("blockquote")) }, { default: d(() => [a(o, { name: "format_quote" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.blockquote") + " - " + e.translateShortcut(["meta", "alt", "q"])]]), ee(a(s, { small: "", icon: "", onClick: t[6] || (t[6] = O => e.edit("code")) }, { default: d(() => [a(o, { name: "code" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.codeblock") + " - " + e.translateShortcut(["meta", "alt", "c"])]]), ee(a(s, { small: "", icon: "", onClick: t[7] || (t[7] = O => e.edit("link")) }, { default: d(() => [a(o, { name: "insert_link" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.link") + " - " + e.translateShortcut(["meta", "k"])]]), a(y, { "show-arrow": "", "close-on-content-click": !1 }, { activator: d(({ toggle: O }) => [ee(a(s, { small: "", icon: "", onClick: O }, { default: d(() => [a(o, { name: "table_chart" })]), _: 2 }, 1032, ["onClick"]), [[T, e.t("wysiwyg_options.table")]])]), default: d(({ deactivate: O }) => [S("div", OK, [S("div", LK, [S("p", jK, b(e.t("rows")), 1), a(g, { modelValue: e.table.rows, "onUpdate:modelValue": t[8] || (t[8] = U => e.table.rows = U), min: 1, type: "number" }, null, 8, ["modelValue"])]), S("div", RK, [S("p", MK, b(e.t("columns")), 1), a(g, { modelValue: e.table.columns, "onUpdate:modelValue": t[9] || (t[9] = U => e.table.columns = U), min: 1, type: "number" }, null, 8, ["modelValue"])]), S("div", UK, [a(s, { "full-width": "", onClick: () => { e.edit("table", e.table), O() } }, { default: d(() => [NK]), _: 2 }, 1032, ["onClick"])])])]), _: 1 }), ee(a(s, { small: "", icon: "", onClick: t[10] || (t[10] = O => e.imageDialogOpen = !0) }, { default: d(() => [a(o, { name: "insert_photo" })]), _: 1 }, 512), [[T, e.t("wysiwyg_options.image")]]), (m(!0), I(se, null, he(e.customSyntax, O => ee((m(), C(s, { key: O.name, small: "", icon: "", onClick: U => e.edit("custom", O) }, { default: d(() => [a(o, { name: O.icon }, null, 8, ["name"])]), _: 2 }, 1032, ["onClick"])), [[T, O.name]])), 128)), BK, a(w, { modelValue: e.view, "onUpdate:modelValue": t[11] || (t[11] = O => e.view = O), class: "view", mandatory: "", rounded: "" }, { default: d(() => [a(s, { "x-small": "", value: "editor" }, { default: d(() => [D(b(e.t("interfaces.input-rich-text-md.editor")), 1)]), _: 1 }), a(s, { "x-small": "", value: "preview" }, { default: d(() => [D(b(e.t("interfaces.input-rich-text-md.preview")), 1)]), _: 1 })]), _: 1 }, 8, ["modelValue"])]), S("div", qK, null, 512), e.view[0] === "preview" ? ee((m(), I("div", zK, null, 512)), [[N, e.markdownString]]) : R("", !0), a(L, { "model-value": e.imageDialogOpen, onEsc: t[13] || (t[13] = O => e.imageDialogOpen = null), "onUpdate:modelValue": t[14] || (t[14] = O => e.imageDialogOpen = null) }, { default: d(() => [a(P, null, { default: d(() => [a(h, null, { default: d(() => [D(b(e.t("upload_from_device")), 1)]), _: 1 }), a(F, null, { default: d(() => [a(k, { "from-url": "", "from-library": "", onInput: e.onImageUpload }, null, 8, ["onInput"])]), _: 1 }), a(A, null, { default: d(() => [a(s, { secondary: "", onClick: t[12] || (t[12] = O => e.imageDialogOpen = null) }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["model-value"])], 2) } var HK = B(DK, [["render", KK], ["__scopeId", "data-v-77b97e5e"]]), WK = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="15" width="120" height="66" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="16" width="118" height="64" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="42" y="25" width="8" height="8" rx="2" fill="var(--primary)" />
	<rect x="56" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="70" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="84" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="98" y="25" width="8" height="8" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="39" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="59" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="49" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="92" y="39" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="72" y="49" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
</svg>
`, GK = Me({ id: "input-rich-text-md", name: "$t:interfaces.input-rich-text-md.markdown", description: "$t:interfaces.input-rich-text-md.description", icon: "functions", component: HK, types: ["text"], group: "standard", preview: WK, options: [{ field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "full", interface: "input-multiline", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "customSyntax", name: "$t:interfaces.input-rich-text-md.customSyntax", type: "json", meta: { note: "$t:interfaces.input-rich-text-md.customSyntax_label", width: "full", interface: "list", options: { addLabel: "$t:interfaces.input-rich-text-md.customSyntax_add", template: "{{ name }}", fields: [{ field: "name", type: "string", name: "$t:name", meta: { interface: "input", width: "half" } }, { field: "icon", type: "string", name: "$t:icon", meta: { interface: "select-icon", width: "half" } }, { field: "prefix", type: "string", name: "$t:prefix", meta: { interface: "input", width: "half" } }, { field: "suffix", type: "string", name: "$t:suffix", meta: { interface: "input", width: "half" } }, { field: "box", type: "string", name: "$t:interfaces.input-rich-text-md.box", meta: { interface: "select-radio", width: "half", options: { choices: [{ text: "$t:inline", value: "inline" }, { text: "$t:block", value: "block" }] } }, schema: { default_value: "inline" } }] } } }, { field: "imageToken", name: "$t:interfaces.input-rich-text-md.imageToken", type: "string", meta: { note: "$t:interfaces.input-rich-text-md.imageToken_label", width: "full", interface: "input" } }] }), JK = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: GK }); const QK = z({ components: { Draggable: kt }, props: { value: { type: Array, default: null }, fields: { type: Array, default: () => [] }, template: { type: String, default: null }, addLabel: { type: String, default: () => ze.global.t("create_new") }, limit: { type: Number, default: null }, disabled: { type: Boolean, default: !1 }, headerPlaceholder: { type: String, default: () => ze.global.t("empty_item") }, collection: { type: String, default: null }, placeholder: { type: String, default: () => ze.global.t("no_items") } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null), i = V(() => l.value !== null), { value: u } = je(e), o = V(() => { var q, K; return ((K = (q = e.fields) == null ? void 0 : q[0]) == null ? void 0 : K.field) ? e.template || `{{${e.fields[0].field}}}` : "" }), s = V(() => e.disabled ? !1 : !!(e.value === null || e.limit === null || Array.isArray(e.value) && e.value.length < e.limit)), r = V(() => l.value !== null ? y.value : null), { displayValue: p } = Da(o, r), f = V(() => { var K, W; const q = {}; for (const te of e.fields) ((K = te.schema) == null ? void 0 : K.default_value) !== void 0 && ((W = te.schema) == null ? void 0 : W.default_value) !== null && (q[te.field] = te.schema.default_value); return q }), v = V(() => { var q; return (q = e.fields) == null ? void 0 : q.map(K => { var W; return Ce(re({}, K), { name: Vt((W = K.name) != null ? W : K.field) }) }) }), _ = E(!1), y = E({}), g = E(!1); return { t: n, updateValues: P, removeItem: L, addNew: T, showAddNew: s, hideDragImage: Nt, active: l, drawerOpen: i, displayValue: p, activeItem: r, closeDrawer: U, onSort: O, templateWithDefaults: o, defaults: f, fieldsWithNames: v, isNewItem: _, edits: y, confirmDiscard: g, openItem: w, saveItem: h, trackEdits: k, checkDiscard: F, discardAndLeave: A }; function w(q) { _.value = !1, y.value = re({}, e.value[q]), l.value = q } function h(q) { _.value = !1, P(q, y.value), U() } function k(q) { Object.assign(y.value, q) } function F() { l.value !== null && !M.exports.isEqual(y.value, e.value[l.value]) ? g.value = !0 : U() } function A() { U(), g.value = !1 } function P(q, K) { N(e.value.map((W, te) => te === q ? K : W)) } function L(q) { u.value ? N(e.value.filter(K => K !== q)) : N(null) } function T() { _.value = !0; const q = {}; e.fields.forEach(K => { var W; q[K.field] = (W = K.schema) == null ? void 0 : W.default_value }), e.value !== null ? N([...e.value, q]) : N([q]), y.value = re({}, q), l.value = (e.value || []).length } function N(q) { return !q || q.length === 0 ? t("input", null) : t("input", q) } function O(q) { return q === null || q.length === 0 ? t("input", null) : t("input", q) } function U() { _.value && N(e.value.slice(0, -1)), l.value = null } } }), XK = e => (Qe("data-v-1069714c"), e = e(), Xe(), e), ZK = { class: "repeater" }, YK = XK(() => S("div", { class: "spacer" }, null, -1)), xK = { class: "type-title" }, eH = { class: "drawer-item-content" }; function tH(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-icon"), r = c("render-template"), p = c("v-list-item"), f = c("draggable"), v = c("v-list"), _ = c("v-button"), y = c("v-form"), g = c("v-drawer"), w = c("v-card-title"), h = c("v-card-text"), k = c("v-card-actions"), F = c("v-card"), A = c("v-dialog"), P = we("tooltip"); return m(), I("div", ZK, [!e.value || e.value.length === 0 ? (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.placeholder), 1)]), _: 1 })) : R("", !0), e.value && e.value.length > 0 ? (m(), C(v, { key: 1 }, { default: d(() => [a(f, { disabled: e.disabled, "force-fallback": !0, "model-value": e.value, "item-key": "id", handle: ".drag-handle", "onUpdate:modelValue": t[1] || (t[1] = L => e.$emit("input", L)) }, { item: d(({ element: L, index: T }) => [a(p, { dense: e.value.length > 4, block: "", onClick: N => e.openItem(T) }, { default: d(() => [e.disabled ? R("", !0) : (m(), C(s, { key: 0, name: "drag_handle", class: "drag-handle", left: "", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) })), a(r, { fields: e.fields, item: re(re({}, e.defaults), L), template: e.templateWithDefaults }, null, 8, ["fields", "item", "template"]), YK, e.disabled ? R("", !0) : (m(), C(s, { key: 1, name: "close", onClick: Ae(N => e.removeItem(L), ["stop"]) }, null, 8, ["onClick"]))]), _: 2 }, 1032, ["dense", "onClick"])]), _: 1 }, 8, ["disabled", "model-value"])]), _: 1 })) : R("", !0), e.showAddNew ? (m(), C(_, { key: 2, class: "add-new", onClick: e.addNew }, { default: d(() => [D(b(e.addLabel), 1)]), _: 1 }, 8, ["onClick"])) : R("", !0), a(g, { "model-value": e.drawerOpen, title: e.displayValue || e.headerPlaceholder, persistent: "", "onUpdate:modelValue": t[4] || (t[4] = L => e.checkDiscard()), onCancel: t[5] || (t[5] = L => e.checkDiscard()) }, { title: d(() => [S("h1", xK, [a(r, { fields: e.fields, item: e.activeItem, template: e.templateWithDefaults }, null, 8, ["fields", "item", "template"])])]), actions: d(() => [ee(a(_, { icon: "", rounded: "", onClick: t[2] || (t[2] = L => e.saveItem(e.active)) }, { default: d(() => [a(s, { name: "check" })]), _: 1 }, 512), [[P, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", eH, [a(y, { disabled: e.disabled, fields: e.fieldsWithNames, "model-value": e.activeItem, "primary-key": "+", "onUpdate:modelValue": t[3] || (t[3] = L => e.trackEdits(L)) }, null, 8, ["disabled", "fields", "model-value"])])]), _: 1 }, 8, ["model-value", "title"]), a(A, { modelValue: e.confirmDiscard, "onUpdate:modelValue": t[8] || (t[8] = L => e.confirmDiscard = L), onEsc: t[9] || (t[9] = L => e.confirmDiscard = !1) }, { default: d(() => [a(F, null, { default: d(() => [a(w, null, { default: d(() => [D(b(e.t("unsaved_changes")), 1)]), _: 1 }), a(h, null, { default: d(() => [D(b(e.t("unsaved_changes_copy")), 1)]), _: 1 }), a(k, null, { default: d(() => [a(_, { secondary: "", onClick: t[6] || (t[6] = L => e.discardAndLeave()) }, { default: d(() => [D(b(e.t("discard_changes")), 1)]), _: 1 }), a(_, { onClick: t[7] || (t[7] = L => e.confirmDiscard = !1) }, { default: d(() => [D(b(e.t("keep_editing")), 1)]), _: 1 })]), _: 1 })]), _: 1 })]), _: 1 }, 8, ["modelValue"])]) } var lr = B(QK, [["render", tH], ["__scopeId", "data-v-1069714c"]]); const nH = z({ components: { Repeater: lr }, props: { value: { type: Object, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = V({ get() { var s, r; return (r = (s = e.value) == null ? void 0 : s.fields) == null ? void 0 : r.map(p => p.meta) }, set(s) { const r = (s || []).map(p => ({ field: p.field, name: p.name || p.field, type: p.type, meta: p })); t("input", Ce(re({}, e.value || {}), { fields: r })) } }), i = [{ name: n("field", 1), field: "field", type: "string", meta: { interface: "input", width: "half", sort: 2, options: { dbSafe: !0, font: "monospace", placeholder: n("interfaces.list.field_name_placeholder") } }, schema: null }, { name: n("field_width"), field: "width", type: "string", meta: { interface: "select-dropdown", width: "half", sort: 3, options: { choices: [{ value: "half", text: n("half_width") }, { value: "full", text: n("full_width") }] } }, schema: null }, { name: n("type"), field: "type", type: "string", meta: { interface: "select-dropdown", width: "half", sort: 4, options: { choices: Ct(Nw) } }, schema: null }, { name: n("interface_label"), field: "interface", type: "string", meta: { interface: "system-interface", width: "half", sort: 5, options: { typeField: "type" } }, schema: null }, { name: n("note"), field: "note", type: "string", meta: { interface: "input", width: "full", sort: 6, options: { placeholder: n("interfaces.list.field_note_placeholder") } }, schema: null }, { name: n("options"), field: "options", type: "string", meta: { interface: "system-interface-options", width: "full", sort: 7, options: { interfaceField: "interface" } } }], u = V({ get() { var s; return (s = e.value) == null ? void 0 : s.template }, set(s) { t("input", Ce(re({}, e.value || {}), { template: s })) } }), o = V({ get() { var s; return (s = e.value) == null ? void 0 : s.addLabel }, set(s) { t("input", Ce(re({}, e.value || {}), { addLabel: s })) } }); return { t: n, repeaterValue: l, repeaterFields: i, template: u, addLabel: o } } }), lH = { class: "grid" }, oH = { class: "grid-element half" }, aH = { class: "type-label" }, iH = { class: "grid-element half" }, sH = { class: "type-label" }, rH = { class: "grid-element full" }, dH = { class: "type-label" }; function uH(e, t, n, l, i, u) { const o = c("v-input"), s = c("repeater"); return m(), I("div", lH, [S("div", oH, [S("p", aH, b(e.t("template")), 1), a(o, { modelValue: e.template, "onUpdate:modelValue": t[0] || (t[0] = r => e.template = r), class: "input", placeholder: "{{ field }}" }, null, 8, ["modelValue"])]), S("div", iH, [S("p", sH, b(e.t("interfaces.list.add_label")), 1), a(o, { modelValue: e.addLabel, "onUpdate:modelValue": t[1] || (t[1] = r => e.addLabel = r), class: "input", placeholder: e.t("create_new") }, null, 8, ["modelValue", "placeholder"])]), S("div", rH, [S("p", dH, b(e.t("interfaces.list.edit_fields")), 1), a(s, { value: e.repeaterValue, template: "{{ field }} \u2014 {{ interface }}", fields: e.repeaterFields, onInput: t[2] || (t[2] = r => e.repeaterValue = r) }, null, 8, ["value", "fields"])])]) } var cH = B(nH, [["render", uH], ["__scopeId", "data-v-5bedb58b"]]), pH = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18.4443" y="9" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19.4443" y="10" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25"
		stroke-width="2" />
	<rect x="46" y="17" width="10" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="60" y="17" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 18H28V19.2691H38V18ZM28 21.7778H38V20.5087H28V21.7778Z" fill="var(--primary)" />
	<rect x="18" y="65" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19" y="66" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25" stroke-width="2" />
	<rect x="46" y="73" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 74H28V75.2691H38V74ZM28 77.7778H38V76.5087H28V77.7778Z" fill="var(--primary)" />
	<rect x="18" y="37" width="120" height="22" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="38" width="118" height="20" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="46" y="45" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="80" y="45" width="10" height="6" rx="2" fill="var(--primary)" />
	<path d="M38 46H28V47.2691H38V46ZM28 49.7778H38V48.5087H28V49.7778Z" fill="var(--primary)" />
	<path
		d="M127.074 52.0742H118.926V43.9258H123V42.75H118.926C118.27 42.75 117.75 43.2695 117.75 43.9258V52.0742C117.75 52.7305 118.27 53.25 118.926 53.25H127.074C127.73 53.25 128.25 52.7305 128.25 52.0742V48H127.074V52.0742ZM124.176 42.75V43.9258H126.254L120.539 49.6406L121.359 50.4609L127.074 44.7461V46.8242H128.25V42.75H124.176Z"
		fill="var(--primary)" />
</svg>
`, mH = Me({ id: "list", name: "$t:interfaces.list.repeater", description: "$t:interfaces.list.description", icon: "replay", component: lr, types: ["json"], group: "selection", options: cH, preview: pH }), fH = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: mH }); const vH = z({ components: { DrawerCollection: Jt, DrawerItem: Bt, Draggable: kt }, props: { collection: { type: String, required: !0 }, field: { type: String, required: !0 }, value: { type: Array, default: null }, disabled: { type: Boolean, default: !1 }, primaryKey: { type: [String, Number], required: !0 }, enableCreate: { type: Boolean, default: !0 }, enableSelect: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = ut(), i = Pe(), u = He(), { o2mRelation: o, anyRelation: s, allowedCollections: r, o2mRelationPrimaryKeyField: p } = te(), { fetchValues: f, previewValues: v, loading: _, junctionRowMap: y, relatedItemValues: g } = X(), { collections: w, templates: h, primaryKeys: k } = G(), { selectingFrom: F, stageSelection: A, deselect: P } = ve(), { currentlyEditing: L, relatedPrimaryKey: T, editsAtStart: N, stageEdits: O, cancelEdit: U, editExisting: q, createNew: K } = ae(), { onSort: W } = ne(); return _e(e, f, { immediate: !0, deep: !0 }), { t: n, previewValues: v, collections: w, selectingFrom: F, stageSelection: A, templates: h, o2mRelation: o, anyRelation: s, currentlyEditing: L, relatedPrimaryKey: T, editsAtStart: N, stageEdits: O, cancelEdit: U, editExisting: q, createNew: K, previewLoading: _, deselect: P, relatedItemValues: g, hideDragImage: Nt, onSort: W, allowedCollections: r }; function te() { const Y = V(() => l.getRelationsForField(e.collection, e.field)), ce = V(() => Y.value.find(Z => Z.related_collection !== null)), pe = V(() => Y.value.find(Z => Z.related_collection === null)), H = V(() => i.getPrimaryKeyFieldForCollection(ce.value.collection).field), Q = V(() => pe.value.meta.one_allowed_collections); return { relationsForField: Y, o2mRelation: ce, anyRelation: pe, allowedCollections: Q, o2mRelationPrimaryKeyField: H } } function G() { const Y = V(() => { const H = {}, Q = r.value.map(Z => u.getCollection(Z)).filter(Z => Z); for (const Z of Q) H[Z.collection] = Z; return H }), ce = V(() => { const H = {}; for (const Q of Object.values(Y.value)) H[Q.collection] = i.getPrimaryKeyFieldForCollection(Q.collection).field; return H }), pe = V(() => { var Q; const H = {}; for (const Z of Object.values(Y.value)) { const le = i.getPrimaryKeyFieldForCollection(Z.collection); H[Z.collection] = ((Q = Z.meta) == null ? void 0 : Q.display_template) || `{{${le.field}}}` } return H }); return { collections: Y, primaryKeys: ce, templates: pe } } function X() { const Y = E(!1), ce = E({}), pe = E(), H = V(() => { var le, fe; if (pe.value === void 0) return []; const Z = M.exports.cloneDeep(e.value || []).map((J, ie) => { const oe = M.exports.isPlainObject(J) ? J[p.value] : J, me = (pe.value || []).find(ge => ge[p.value] === oe); return M.exports.isPlainObject(J) ? Ce(re(re({}, me), J), { $index: ie }) : me === void 0 ? null : Ce(re({}, me), { $index: ie }) }).filter(J => J).map(J => { var ge; const ie = J[s.value.meta.one_collection_field], oe = M.exports.isPlainObject(J[s.value.field]) ? J[s.value.field][k.value[ie]] : J[s.value.field], me = (ge = ce.value[ie]) == null ? void 0 : ge.find(be => be[k.value[ie]] == oe); return oe && me && (M.exports.isPlainObject(J[s.value.field]) ? J[s.value.field] = re(re({}, me), J[s.value.field]) : J[s.value.field] = M.exports.cloneDeep(me)), J }); return ((fe = (le = o.value) == null ? void 0 : le.meta) == null ? void 0 : fe.sort_field) ? [...Z.filter(J => o.value.meta.sort_field in J).sort((J, ie) => J[o.value.meta.sort_field] - ie[o.value.meta.sort_field]), ...Z.filter(J => !(o.value.meta.sort_field in J)).sort((J, ie) => J.$index - ie.$index)] : [...Z.sort((J, ie) => J.$index - ie.$index)] }); return { fetchValues: Q, previewValues: H, loading: Y, junctionRowMap: pe, relatedItemValues: ce }; async function Q() { var Z; if (e.value !== null) { Y.value = !0; try { const le = [], fe = {}; for (const ie of Object.values(w.value)) fe[ie.collection] = []; for (const ie of e.value || []) if (typeof ie == "string" || typeof ie == "number") le.push(ie); else if (!(s.value.meta.one_collection_field in ie)) le.push(ie[p.value]); else { const oe = ie[s.value.meta.one_collection_field], me = k.value[oe], ge = M.exports.isPlainObject(ie[s.value.field]) ? ie[s.value.field][me] : ie[s.value.field]; ge && fe[oe].push(ge) } if (le.length > 0) { const ie = await ue.get(`/items/${o.value.collection}`, { params: { filter: { [p.value]: { _in: le } }, fields: [p.value, s.value.field, s.value.meta.one_collection_field, (Z = o.value.meta) == null ? void 0 : Z.sort_field] } }); for (const oe of ie.data.data) { const me = oe[s.value.meta.one_collection_field]; me in fe && fe[me].push(oe[s.value.field]) } pe.value = ie.data.data } else pe.value = []; const J = await Promise.all(Object.entries(fe).map(([ie, oe]) => { if (oe.length === 0) return Promise.resolve({ data: { data: [] } }); const me = vt(h.value[ie]); return me.includes(k.value[ie]) === !1 && me.push(k.value[ie]), ue.get(Wt(ie), { params: { filter: { [k.value[ie]]: { _in: oe } }, fields: me } }) })); ce.value || (ce.value = {}); for (let ie = 0; ie < Object.keys(fe).length; ie++) { const oe = Object.keys(fe)[ie]; ce.value = Ce(re({}, ce.value), { [oe]: J[ie].data.data }) } } catch (le) { Ve(le) } finally { Y.value = !1 } } } } function ve() { const Y = E(null); return { selectingFrom: Y, stageSelection: ce, deselect: pe }; function ce(H) { const { field: Q } = s.value, Z = s.value.meta.one_collection_field, le = e.value || [], fe = H.map(J => ({ [Z]: Y.value, [Q]: J })); t("input", [...le, ...fe]) } function pe(H) { t("input", (e.value || []).filter(Q => Q !== H)) } } function ae() { const Y = E(null), ce = E(null), pe = E({}); return { currentlyEditing: Y, relatedPrimaryKey: ce, editsAtStart: pe, stageEdits: H, cancelEdit: Q, editExisting: Z, createNew: le }; function H(fe) { const J = e.value || [], ie = J.includes(pe.value) || J.includes(Y.value); Y.value === "+" && ce.value === "+" && ie === !1 ? t("input", [...J, fe]) : t("input", J.map(me => me === pe.value || me == Y.value ? fe : me)) } function Q() { Y.value = null, ce.value = null, pe.value = {} } function Z(fe) { var me, ge, be; if (typeof fe == "string" || typeof fe == "number") { const ke = (y.value || []).find(Be => Be[p.value] == fe), Ie = ke[s.value.meta.one_collection_field], De = M.exports.isPlainObject(ke[s.value.field]) ? ke[s.value.field][k.value[Ie]] : ke[s.value.field]; pe.value = { [p.value]: fe, [s.value.meta.one_collection_field]: Ie, [s.value.field]: { [k.value[Ie]]: De } }, ((me = o.value.meta) == null ? void 0 : me.sort_field) && (pe.value[(ge = o.value.meta) == null ? void 0 : ge.sort_field] = ke[(be = o.value.meta) == null ? void 0 : be.sort_field]), ce.value = De || "+", Y.value = fe; return } const J = fe[p.value], ie = fe[s.value.meta.one_collection_field]; let oe = fe[s.value.field]; M.exports.isPlainObject(oe) && (oe = fe[s.value.field][k.value[ie]]), pe.value = fe, ce.value = oe || "+", Y.value = J || "+" } function le(fe) { var ie, oe; const J = { [s.value.meta.one_collection_field]: fe, [s.value.field]: {} }; if (v.value && ((oe = (ie = o.value) == null ? void 0 : ie.meta) == null ? void 0 : oe.sort_field)) { const me = Math.max(-1, ...v.value.map(ge => ge[o.value.meta.sort_field])); J[o.value.meta.sort_field] = me + 1 } pe.value = J, ce.value = "+", Y.value = "+" } } function ne() { return { onSort: Y }; function Y(ce) { t("input", e.value.map((pe, H) => { var Z, le, fe; if (!((Z = o.value.meta) == null ? void 0 : Z.sort_field)) return pe; const Q = ce.findIndex(J => J.$index === H); return M.exports.isPlainObject(pe) ? Ce(re({}, pe), { [(le = o.value.meta) == null ? void 0 : le.sort_field]: Q + 1 }) : Ce(re({}, ce[Q]), { [p.value]: pe, [(fe = o.value.meta) == null ? void 0 : fe.sort_field]: Q + 1 }) })) } } } }), or = e => (Qe("data-v-01bcb041"), e = e(), Xe(), e), _H = { class: "m2a-builder" }, yH = { key: 0, class: "loader" }, gH = { class: "collection" }, hH = { key: 1 }, bH = or(() => S("div", { class: "spacer" }, null, -1)), $H = or(() => S("div", { class: "spacer" }, null, -1)), wH = { class: "buttons" }; function kH(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-notice"), r = c("v-icon"), p = c("render-template"), f = c("v-list-item"), v = c("draggable"), _ = c("v-list"), y = c("v-button"), g = c("v-list-item-icon"), w = c("v-text-overflow"), h = c("v-menu"), k = c("drawer-collection"), F = c("drawer-item"); return m(), I("div", _H, [e.previewLoading && !e.previewValues ? (m(), I("div", yH, [(m(!0), I(se, null, he((e.value || []).length, A => (m(), C(o, { key: A }))), 128))])) : (m(), C(_, { key: 1 }, { default: d(() => [e.previewValues.length === 0 ? (m(), C(s, { key: 0 }, { default: d(() => [D(b(e.t("no_items")), 1)]), _: 1 })) : R("", !0), a(v, { "force-fallback": !0, "model-value": e.previewValues, "item-key": "$index", "set-data": e.hideDragImage, disabled: !e.o2mRelation.meta || !e.o2mRelation.meta.sort_field, "onUpdate:modelValue": e.onSort }, { item: d(({ element: A }) => [e.allowedCollections.includes(A[e.anyRelation.meta.one_collection_field]) ? (m(), C(f, { key: 0, block: "", dense: e.previewValues.length > 4, clickable: "", onClick: P => e.editExisting((e.value || [])[A.$index]) }, { default: d(() => [e.o2mRelation.meta && e.o2mRelation.meta.sort_field ? (m(), C(r, { key: 0, class: "drag-handle", left: "", name: "drag_handle", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) })) : R("", !0), S("span", gH, b(e.collections[A[e.anyRelation.meta.one_collection_field]].name) + ":", 1), typeof A[e.anyRelation.field] == "number" || typeof A[e.anyRelation.field] == "string" ? (m(), I("span", hH, b(A[e.anyRelation.field]), 1)) : (m(), C(p, { key: 2, collection: A[e.anyRelation.meta.one_collection_field], template: e.templates[A[e.anyRelation.meta.one_collection_field]], item: A[e.anyRelation.field] }, null, 8, ["collection", "template", "item"])), bH, e.disabled ? R("", !0) : (m(), C(r, { key: 3, class: "clear-icon", name: "clear", onClick: Ae(P => e.deselect((e.value || [])[A.$index]), ["stop"]) }, null, 8, ["onClick"]))]), _: 2 }, 1032, ["dense", "onClick"])) : (m(), C(f, { key: 1, block: "" }, { default: d(() => [a(r, { class: "invalid-icon", name: "warning", left: "" }), S("span", null, b(e.t("invalid_item")), 1), $H, e.disabled ? R("", !0) : (m(), C(r, { key: 0, class: "clear-icon", name: "clear", onClick: Ae(P => e.deselect((e.value || [])[A.$index]), ["stop"]) }, null, 8, ["onClick"]))]), _: 2 }, 1024))]), _: 1 }, 8, ["model-value", "set-data", "disabled", "onUpdate:modelValue"])]), _: 1 })), S("div", wH, [e.enableCreate ? (m(), C(h, { key: 0, "show-arrow": "" }, { activator: d(({ toggle: A }) => [a(y, { onClick: A }, { default: d(() => [D(b(e.t("create_new")) + " ", 1), a(r, { name: "arrow_drop_down", right: "" })]), _: 2 }, 1032, ["onClick"])]), default: d(() => [a(_, null, { default: d(() => [(m(!0), I(se, null, he(e.collections, A => (m(), C(f, { key: A.collection, clickable: "", onClick: P => e.createNew(A.collection) }, { default: d(() => [a(g, null, { default: d(() => [a(r, { name: A.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(w, { text: A.name }, null, 8, ["text"])]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })]), _: 1 })) : R("", !0), e.enableSelect ? (m(), C(h, { key: 1, "show-arrow": "" }, { activator: d(({ toggle: A }) => [a(y, { class: "existing", onClick: A }, { default: d(() => [D(b(e.t("add_existing")) + " ", 1), a(r, { name: "arrow_drop_down", right: "" })]), _: 2 }, 1032, ["onClick"])]), default: d(() => [a(_, null, { default: d(() => [(m(!0), I(se, null, he(e.collections, A => (m(), C(f, { key: A.collection, clickable: "", onClick: P => e.selectingFrom = A.collection }, { default: d(() => [a(g, null, { default: d(() => [a(r, { name: A.icon }, null, 8, ["name"])]), _: 2 }, 1024), a(w, { text: A.name }, null, 8, ["text"])]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })]), _: 1 })) : R("", !0)]), !e.disabled && !!e.selectingFrom ? (m(), C(k, { key: 2, multiple: "", active: !!e.selectingFrom, collection: e.selectingFrom, selection: [], onInput: e.stageSelection, "onUpdate:active": t[1] || (t[1] = A => e.selectingFrom = null) }, null, 8, ["active", "collection", "onInput"])) : R("", !0), e.disabled ? R("", !0) : (m(), C(F, { key: 3, active: !!e.currentlyEditing, collection: e.o2mRelation.collection, "primary-key": e.currentlyEditing || "+", "related-primary-key": e.relatedPrimaryKey || "+", "junction-field": e.o2mRelation.meta.junction_field, edits: e.editsAtStart, "circular-field": e.o2mRelation.field, onInput: e.stageEdits, "onUpdate:active": e.cancelEdit }, null, 8, ["active", "collection", "primary-key", "related-primary-key", "junction-field", "edits", "circular-field", "onInput", "onUpdate:active"]))]) } var SH = B(vH, [["render", kH], ["__scopeId", "data-v-01bcb041"]]), CH = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18.4443" y="9" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19.4443" y="10" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25"
		stroke-width="2" />
	<rect x="46" y="17" width="10" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="60" y="17" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 18H28V19.2691H38V18ZM28 21.7778H38V20.5087H28V21.7778Z" fill="var(--primary)" />
	<rect x="18" y="65" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19" y="66" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25" stroke-width="2" />
	<rect x="46" y="73" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 74H28V75.2691H38V74ZM28 77.7778H38V76.5087H28V77.7778Z" fill="var(--primary)" />
	<rect x="18" y="37" width="120" height="22" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="38" width="118" height="20" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="46" y="45" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="80" y="45" width="10" height="6" rx="2" fill="var(--primary)" />
	<path d="M38 46H28V47.2691H38V46ZM28 49.7778H38V48.5087H28V49.7778Z" fill="var(--primary)" />
	<path
		d="M127.074 52.0742H118.926V43.9258H123V42.75H118.926C118.27 42.75 117.75 43.2695 117.75 43.9258V52.0742C117.75 52.7305 118.27 53.25 118.926 53.25H127.074C127.73 53.25 128.25 52.7305 128.25 52.0742V48H127.074V52.0742ZM124.176 42.75V43.9258H126.254L120.539 49.6406L121.359 50.4609L127.074 44.7461V46.8242H128.25V42.75H124.176Z"
		fill="var(--primary)" />
</svg>
`, VH = Me({ id: "list-m2a", name: "$t:list-m2a", icon: "note_add", component: SH, relational: !0, types: ["alias"], localTypes: ["m2a"], group: "relational", options: [{ field: "enableSelect", name: "$t:selecting_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_select_button" }, width: "half" } }, { field: "enableCreate", name: "$t:creating_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_create_button" }, width: "half" } }], preview: CH }), FH = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: VH }); const AH = z({ components: { DrawerItem: Bt, DrawerCollection: Jt, Draggable: kt }, props: { value: { type: Array, default: null }, primaryKey: { type: [Number, String], required: !0 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, template: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, enableCreate: { type: Boolean, default: !0 }, enableSelect: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { value: l, collection: i, field: u } = je(e), { junction: o, junctionCollection: s, relation: r, relationCollection: p, relationInfo: f } = Pl(i, u), v = V(() => { var Q, Z; if (e.template) return e.template; if ((Q = s.value.meta) == null ? void 0 : Q.display_template) return s.value.meta.display_template; let H = (Z = p.value.meta) == null ? void 0 : Z.display_template; if (H) { const le = /({{.*?}})/g, fe = H.split(le).filter(J => J); for (const J of fe) { if (J.startsWith("{{") === !1) continue; const ie = J.replace(/{{/g, "").replace(/}}/g, "").trim(), oe = `{{${r.value.field}.${ie}}}`; H = H.replace(J, oe) } return H } return `{{${r.value.field}.${f.value.relationPkField}}}` }), _ = V(() => Qt(vt(v.value), s.value.collection)), { deleteItem: y, getUpdatedItems: g, getNewItems: w, getPrimaryKeys: h, getNewSelectedItems: k } = Qs(l, f, pe), { tableHeaders: F, items: A, initialItems: P, loading: L } = Zs(l, _, f, k, g, w, h), { currentlyEditing: T, editItem: N, editsAtStart: O, stageEdits: U, cancelEdit: q, relatedPrimaryKey: K, editModalActive: W } = Ys(l, f, pe), { stageSelection: te, selectModalActive: G, selectedPrimaryKeys: X } = xs(A, P, f, pe), { sort: ve, sortItems: ae, sortedItems: ne } = er(f, _, A, pe), { createAllowed: Y, selectAllowed: ce } = tr(s, p); return { t: n, junction: o, relation: r, tableHeaders: F, loading: L, currentlyEditing: T, editItem: N, junctionCollection: s, relationCollection: p, editsAtStart: O, stageEdits: U, cancelEdit: q, stageSelection: te, selectModalActive: G, deleteItem: y, selectedPrimaryKeys: X, items: A, relationInfo: f, relatedPrimaryKey: K, get: M.exports.get, editModalActive: W, sort: ve, sortItems: ae, sortedItems: ne, templateWithDefaults: v, createAllowed: Y, selectAllowed: ce }; function pe(H) { t("input", H) } } }), IH = e => (Qe("data-v-f90dc504"), e = e(), Xe(), e), EH = { key: 1, class: "many-to-many" }, DH = IH(() => S("div", { class: "spacer" }, null, -1)), TH = { key: 3, class: "actions" }; function PH(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-skeleton-loader"), r = c("v-icon"), p = c("render-template"), f = c("v-list-item"), v = c("draggable"), _ = c("v-list"), y = c("v-button"), g = c("drawer-item"), w = c("drawer-collection"); return !e.junction || !e.relation ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("relationship_not_setup")), 1)]), _: 1 })) : (m(), I("div", EH, [e.loading ? (m(!0), I(se, { key: 0 }, he((e.value || []).length || 3, h => (m(), C(s, { key: h, type: (e.value || []).length > 4 ? "block-list-item-dense" : "block-list-item" }, null, 8, ["type"]))), 128)) : e.sortedItems.length === 0 ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("no_items")), 1)]), _: 1 })) : (m(), C(_, { key: 2 }, { default: d(() => [a(v, { "force-fallback": !0, "model-value": e.sortedItems, "item-key": "id", handle: ".drag-handle", disabled: !e.junction.meta.sort_field, "onUpdate:modelValue": t[1] || (t[1] = h => e.sortItems(h)) }, { item: d(({ element: h }) => [a(f, { dense: e.sortedItems.length > 4, block: "", clickable: "", onClick: k => e.editItem(h) }, { default: d(() => [e.junction.meta.sort_field ? (m(), C(r, { key: 0, name: "drag_handle", class: "drag-handle", left: "", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) })) : R("", !0), a(p, { collection: e.junctionCollection.collection, item: h, template: e.templateWithDefaults }, null, 8, ["collection", "item", "template"]), DH, e.disabled ? R("", !0) : (m(), C(r, { key: 1, name: "close", onClick: Ae(k => e.deleteItem(h), ["stop"]) }, null, 8, ["onClick"]))]), _: 2 }, 1032, ["dense", "onClick"])]), _: 1 }, 8, ["model-value", "disabled"])]), _: 1 })), e.disabled ? R("", !0) : (m(), I("div", TH, [e.enableCreate && e.createAllowed ? (m(), C(y, { key: 0, onClick: t[2] || (t[2] = h => e.editModalActive = !0) }, { default: d(() => [D(b(e.t("create_new")), 1)]), _: 1 })) : R("", !0), e.enableSelect && e.selectAllowed ? (m(), C(y, { key: 1, onClick: t[3] || (t[3] = h => e.selectModalActive = !0) }, { default: d(() => [D(b(e.t("add_existing")), 1)]), _: 1 })) : R("", !0)])), e.disabled ? R("", !0) : (m(), C(g, { key: 4, active: e.editModalActive, collection: e.relationInfo.junctionCollection, "primary-key": e.currentlyEditing || "+", "related-primary-key": e.relatedPrimaryKey || "+", "junction-field": e.relationInfo.junctionField, edits: e.editsAtStart, "circular-field": e.junction.field, onInput: e.stageEdits, "onUpdate:active": e.cancelEdit }, null, 8, ["active", "collection", "primary-key", "related-primary-key", "junction-field", "edits", "circular-field", "onInput", "onUpdate:active"])), e.disabled ? R("", !0) : (m(), C(w, { key: 5, active: e.selectModalActive, "onUpdate:active": t[4] || (t[4] = h => e.selectModalActive = h), collection: e.relationCollection.collection, selection: e.selectedPrimaryKeys, multiple: "", onInput: e.stageSelection }, null, 8, ["active", "collection", "selection", "onInput"]))])) } var OH = B(AH, [["render", PH], ["__scopeId", "data-v-f90dc504"]]), LH = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18.4443" y="9" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19.4443" y="10" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25"
		stroke-width="2" />
	<rect x="46" y="17" width="10" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="60" y="17" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 18H28V19.2691H38V18ZM28 21.7778H38V20.5087H28V21.7778Z" fill="var(--primary)" />
	<rect x="18" y="65" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19" y="66" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25" stroke-width="2" />
	<rect x="46" y="73" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 74H28V75.2691H38V74ZM28 77.7778H38V76.5087H28V77.7778Z" fill="var(--primary)" />
	<rect x="18" y="37" width="120" height="22" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="38" width="118" height="20" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="46" y="45" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="80" y="45" width="10" height="6" rx="2" fill="var(--primary)" />
	<path d="M38 46H28V47.2691H38V46ZM28 49.7778H38V48.5087H28V49.7778Z" fill="var(--primary)" />
	<path
		d="M127.074 52.0742H118.926V43.9258H123V42.75H118.926C118.27 42.75 117.75 43.2695 117.75 43.9258V52.0742C117.75 52.7305 118.27 53.25 118.926 53.25H127.074C127.73 53.25 128.25 52.7305 128.25 52.0742V48H127.074V52.0742ZM124.176 42.75V43.9258H126.254L120.539 49.6406L121.359 50.4609L127.074 44.7461V46.8242H128.25V42.75H124.176Z"
		fill="var(--primary)" />
</svg>
`, jH = Me({ id: "list-m2m", name: "$t:interfaces.list-m2m.many-to-many", description: "$t:interfaces.list-m2m.description", icon: "note_add", component: OH, relational: !0, types: ["alias"], localTypes: ["m2m"], group: "relational", options: ({ relations: e }) => { var t; return [{ field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: (t = e.o2m) == null ? void 0 : t.collection } } }, { field: "enableCreate", name: "$t:creating_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_create_button" }, width: "half" } }, { field: "enableSelect", name: "$t:selecting_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_select_button" }, width: "half" } }] }, recommendedDisplays: ["related-values"], preview: LH }), RH = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: jH }); const MH = z({ components: { DrawerItem: Bt, DrawerCollection: Jt, Draggable: kt }, props: { value: { type: Array, default: null }, primaryKey: { type: [Number, String], required: !0 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, template: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, enableCreate: { type: Boolean, default: !0 }, enableSelect: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = ut(), i = He(), u = Pe(), o = Dt(), s = Ze(), { relation: r, relatedCollection: p, relatedPrimaryKeyField: f } = ae(), v = V(() => { var Q; return e.template || ((Q = p.value.meta) == null ? void 0 : Q.display_template) || `{{${u.getPrimaryKeyFieldForCollection(r.value.collection).field}}}` }), _ = V(() => Qt(vt(v.value), p.value.collection)), { items: y, loading: g } = ne(), { currentlyEditing: w, editItem: h, editsAtStart: k, stageEdits: F, cancelEdit: A } = Y(), { selectModalActive: P, selectedPrimaryKeys: L } = ce(), { sort: T, sortItems: N, sortedItems: O } = ve(), { createAllowed: U, updateAllowed: q } = H(); return { t: n, relation: r, loading: g, currentlyEditing: w, editItem: h, relatedCollection: p, editsAtStart: k, stageEdits: F, cancelEdit: A, selectModalActive: P, deleteItem: X, items: y, sortItems: N, selectedPrimaryKeys: L, sort: T, sortedItems: O, get: M.exports.get, getItemFromIndex: K, templateWithDefaults: v, createAllowed: U, updateAllowed: q }; function K(Q) { return (O.value || y.value)[Q] } function W() { var Z; const Q = (Z = f.value) == null ? void 0 : Z.field; return e.value === null || !Q ? [] : e.value.filter(le => typeof le == "object" && !(Q in le)) } function te() { var Z; const Q = (Z = f.value) == null ? void 0 : Z.field; return e.value === null || !Q ? [] : e.value.filter(le => typeof le == "object" && Q in le) } function G() { var Z; const Q = (Z = f.value) == null ? void 0 : Z.field; return e.value === null || !Q ? [] : e.value.map(le => { if (typeof le == "object") { if (Q in le) return le[Q] } else return le }).filter(le => le) } function X(Q) { var fe; const Z = (fe = f.value) == null ? void 0 : fe.field; if (e.value === null || !Z) return; if (!(Z in Q)) { t("input", e.value.filter(J => M.exports.isEqual(Q, J) === !1)); return } const le = Q[Z]; t("input", e.value.filter(J => typeof J == "number" || typeof J == "string" ? J !== le : typeof J == "object" && Z in J ? J[Z] !== le : !0)) } function ve() { var fe; const Q = E({ by: ((fe = r.value.meta) == null ? void 0 : fe.sort_field) || _.value[0], desc: !1 }); function Z(J) { var oe; if (!((oe = r.value.meta) == null ? void 0 : oe.sort_field)) return; const ie = J.map((me, ge) => (me[r.value.meta.sort_field] = ge, me)); t("input", ie) } const le = V(() => { var oe, me; if (!((oe = r.value.meta) == null ? void 0 : oe.sort_field) || Q.value.by !== ((me = r.value.meta) == null ? void 0 : me.sort_field)) return y.value; const J = Q.value.desc, ie = M.exports.sortBy(y.value, [r.value.meta.sort_field]); return J ? ie.reverse() : ie }); return { sort: Q, sortItems: Z, sortedItems: le } } function ae() { const Q = V(() => { var fe; return (fe = l.getRelationsForField(e.collection, e.field)) == null ? void 0 : fe[0] }), Z = V(() => i.getCollection(Q.value.collection)), { primaryKeyField: le } = ot(Z.value.collection); return { relation: Q, relatedCollection: Z, relatedPrimaryKeyField: le } } function ne() { const Q = E(!1), Z = E([]); return _e(() => e.value, async (le, fe) => { var me, ge; if (M.exports.isEqual(le, fe)) return; Q.value = !0; const J = (me = f.value) == null ? void 0 : me.field; if (!J) return; const ie = [..._.value.length > 0 ? _.value : pe()]; ie.includes(J) === !1 && ie.push(J), ((ge = r.value.meta) == null ? void 0 : ge.sort_field) && ie.includes(r.value.meta.sort_field) === !1 && ie.push(r.value.meta.sort_field); const oe = Xs(p.value.collection, ie); try { const be = p.value.collection.startsWith("directus_") ? `/${p.value.collection.substring(9)}` : `/items/${p.value.collection}`, ke = G(); let Ie = []; ke && ke.length > 0 && (Ie = (await ue.get(be, { params: { fields: oe, [`filter[${J}][_in]`]: ke.join(",") } })).data.data); const De = te(), Be = W(); Z.value = Ie.map(lt => { const Te = De.find(Oe => Oe[J] === lt[J]); return Te !== void 0 ? re(re({}, lt), Te) : lt }).concat(...Be) } catch (be) { Ve(be) } finally { Q.value = !1 } }, { immediate: !0 }), { items: Z, loading: Q } } function Y() { const Q = E(null), Z = E({}); return { currentlyEditing: Q, editItem: le, editsAtStart: Z, stageEdits: fe, cancelEdit: J }; function le(ie) { var be; const oe = (be = f.value) == null ? void 0 : be.field; if (!oe) return; const me = oe in ie, ge = (e.value || []).find(ke => { var Ie, De, Be; return typeof ke == "object" && ((Ie = f.value) == null ? void 0 : Ie.field) && ke[(De = f.value) == null ? void 0 : De.field] === ie[(Be = f.value) == null ? void 0 : Be.field] }); Z.value = ge || { [oe]: ie[oe] || {} }, Q.value = me ? ie[oe] : "+" } function fe(ie) { var ge; const oe = (ge = f.value) == null ? void 0 : ge.field; if (!oe) return; const me = (e.value || []).map(be => be && typeof be == "object" && oe in be && oe in ie && be[oe] === ie[oe] || be === ie[oe] || Z.value === be ? ie : be); me.includes(ie) === !1 && me.push(ie), me.length === 0 ? t("input", null) : t("input", me) } function J() { Z.value = {}, Q.value = null } } function ce() { const Q = E(!1), Z = V(() => { var fe; const le = (fe = f.value) == null ? void 0 : fe.field; return y.value === null || !le ? [] : y.value.filter(J => le in J).map(J => J[le]) }); return { selectModalActive: Q, selectedPrimaryKeys: Z } } function pe() { return u.getFieldsForCollection(p.value.collection).slice(0, 3).map(Z => Z.field) } function H() { const Q = V(() => { var fe; return ((fe = s.currentUser) == null ? void 0 : fe.role.admin_access) === !0 ? !0 : !!o.permissions.find(J => J.action === "create" && J.collection === p.value.collection) }), Z = V(() => { var fe; return ((fe = s.currentUser) == null ? void 0 : fe.role.admin_access) === !0 ? !0 : !!o.permissions.find(J => J.action === "update" && J.collection === p.value.collection) }); return { createAllowed: Q, updateAllowed: Z } } } }), UH = e => (Qe("data-v-785ae440"), e = e(), Xe(), e), NH = { key: 1, class: "one-to-many" }, BH = UH(() => S("div", { class: "spacer" }, null, -1)), qH = { key: 3, class: "actions" }; function zH(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-skeleton-loader"), r = c("v-icon"), p = c("render-template"), f = c("v-list-item"), v = c("draggable"), _ = c("v-list"), y = c("v-button"), g = c("drawer-item"), w = c("drawer-collection"); return e.relation ? (m(), I("div", NH, [e.loading ? (m(!0), I(se, { key: 0 }, he((e.value || []).length || 3, h => (m(), C(s, { key: h, type: (e.value || []).length > 4 ? "block-list-item-dense" : "block-list-item" }, null, 8, ["type"]))), 128)) : e.sortedItems.length === 0 ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("no_items")), 1)]), _: 1 })) : (m(), C(_, { key: 2 }, { default: d(() => [a(v, { "force-fallback": !0, "model-value": e.sortedItems, "item-key": "id", handle: ".drag-handle", disabled: !e.relation.meta.sort_field, "onUpdate:modelValue": t[1] || (t[1] = h => e.sortItems(h)) }, { item: d(({ element: h }) => [a(f, { dense: e.sortedItems.length > 4, block: "", clickable: "", disabled: e.disabled || e.updateAllowed === !1, onClick: k => e.editItem(h) }, { default: d(() => [e.relation.meta.sort_field ? (m(), C(r, { key: 0, name: "drag_handle", class: "drag-handle", left: "", onClick: t[0] || (t[0] = Ae(() => { }, ["stop"])) })) : R("", !0), a(p, { collection: e.relation.collection, item: h, template: e.templateWithDefaults }, null, 8, ["collection", "item", "template"]), BH, !e.disabled && e.updateAllowed ? (m(), C(r, { key: 1, name: "close", onClick: Ae(k => e.deleteItem(h), ["stop"]) }, null, 8, ["onClick"])) : R("", !0)]), _: 2 }, 1032, ["dense", "disabled", "onClick"])]), _: 1 }, 8, ["model-value", "disabled"])]), _: 1 })), e.disabled ? R("", !0) : (m(), I("div", qH, [e.enableCreate && e.createAllowed && e.updateAllowed ? (m(), C(y, { key: 0, onClick: t[2] || (t[2] = h => e.currentlyEditing = "+") }, { default: d(() => [D(b(e.t("create_new")), 1)]), _: 1 })) : R("", !0), e.enableSelect && e.updateAllowed ? (m(), C(y, { key: 1, onClick: t[3] || (t[3] = h => e.selectModalActive = !0) }, { default: d(() => [D(b(e.t("add_existing")), 1)]), _: 1 })) : R("", !0)])), e.disabled ? R("", !0) : (m(), C(g, { key: 4, active: e.currentlyEditing !== null, collection: e.relatedCollection.collection, "primary-key": e.currentlyEditing || "+", edits: e.editsAtStart, "circular-field": e.relation.field, onInput: e.stageEdits, "onUpdate:active": e.cancelEdit }, null, 8, ["active", "collection", "primary-key", "edits", "circular-field", "onInput", "onUpdate:active"])), e.disabled ? R("", !0) : (m(), C(w, { key: 5, active: e.selectModalActive, "onUpdate:active": t[4] || (t[4] = h => e.selectModalActive = h), collection: e.relatedCollection.collection, selection: e.selectedPrimaryKeys, multiple: "", onInput: t[5] || (t[5] = h => e.$emit("input", h.length > 0 ? h : null)) }, null, 8, ["active", "collection", "selection"]))])) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("relationship_not_setup")), 1)]), _: 1 })) } var KH = B(MH, [["render", zH], ["__scopeId", "data-v-785ae440"]]), HH = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18.4443" y="9" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19.4443" y="10" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25"
		stroke-width="2" />
	<rect x="46" y="17" width="10" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="60" y="17" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 18H28V19.2691H38V18ZM28 21.7778H38V20.5087H28V21.7778Z" fill="var(--primary)" />
	<rect x="18" y="65" width="120" height="22" rx="6" fill="var(--background-page)" />
	<rect x="19" y="66" width="118" height="20" rx="5" stroke="var(--primary)" stroke-opacity="0.25" stroke-width="2" />
	<rect x="46" y="73" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path opacity="0.5" d="M38 74H28V75.2691H38V74ZM28 77.7778H38V76.5087H28V77.7778Z" fill="var(--primary)" />
	<rect x="18" y="37" width="120" height="22" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="38" width="118" height="20" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="46" y="45" width="30" height="6" rx="2" fill="var(--primary)" />
	<rect x="80" y="45" width="10" height="6" rx="2" fill="var(--primary)" />
	<path d="M38 46H28V47.2691H38V46ZM28 49.7778H38V48.5087H28V49.7778Z" fill="var(--primary)" />
	<path
		d="M127.074 52.0742H118.926V43.9258H123V42.75H118.926C118.27 42.75 117.75 43.2695 117.75 43.9258V52.0742C117.75 52.7305 118.27 53.25 118.926 53.25H127.074C127.73 53.25 128.25 52.7305 128.25 52.0742V48H127.074V52.0742ZM124.176 42.75V43.9258H126.254L120.539 49.6406L121.359 50.4609L127.074 44.7461V46.8242H128.25V42.75H124.176Z"
		fill="var(--primary)" />
</svg>
`, WH = Me({ id: "list-o2m", name: "$t:interfaces.list-o2m.one-to-many", description: "$t:interfaces.list-o2m.description", icon: "arrow_right_alt", component: KH, types: ["alias"], localTypes: ["o2m"], group: "relational", relational: !0, options: ({ relations: e }) => { var n; const t = (n = e.o2m) == null ? void 0 : n.collection; return [{ field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: t }, width: "full" } }, { field: "enableCreate", name: "$t:creating_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_create_button" }, width: "half" } }, { field: "enableSelect", name: "$t:selecting_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_select_button" }, width: "half" } }] }, recommendedDisplays: ["related-values"], preview: HH }), GH = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: WH }); const JH = z({ components: { DrawerItem: Bt }, props: { collection: { type: String, required: !0 }, template: { type: String, required: !0 }, item: { type: Object, required: !0 }, primaryKeyField: { type: String, required: !0 }, disabled: { type: Boolean, default: !1 }, parentField: { type: String, required: !0 } }, emits: ["deselect", "input"], setup() { const { t: e } = x(), t = E(!1); return { t: e, editActive: t } } }), QH = e => (Qe("data-v-569bebef"), e = e(), Xe(), e), XH = { class: "preview" }, ZH = QH(() => S("div", { class: "spacer" }, null, -1)), YH = { key: 0, class: "actions" }; function xH(e, t, n, l, i, u) { const o = c("render-template"), s = c("v-icon"), r = c("drawer-item"), p = we("tooltip"); return m(), I("div", XH, [a(o, { collection: e.collection, template: e.template, item: e.item }, null, 8, ["collection", "template", "item"]), ZH, e.disabled ? R("", !0) : (m(), I("div", YH, [ee(a(s, { name: "launch", clickable: "", onClick: t[0] || (t[0] = f => e.editActive = !0) }, null, 512), [[p, e.t("edit")]]), ee(a(s, { name: "clear", clickable: "", onClick: t[1] || (t[1] = f => e.$emit("deselect")) }, null, 512), [[p, e.t("deselect")]])])), a(r, { active: e.editActive, "onUpdate:active": t[2] || (t[2] = f => e.editActive = f), collection: e.collection, "primary-key": e.item[e.primaryKeyField] || "+", edits: e.item, "circular-field": e.parentField, onInput: t[3] || (t[3] = f => e.$emit("input", f)) }, null, 8, ["active", "collection", "primary-key", "edits", "circular-field"])]) } var eW = B(JH, [["render", xH], ["__scopeId", "data-v-569bebef"]]); const tW = z({ name: "NestedDraggable", components: { Draggable: kt, ItemPreview: eW }, props: { tree: { required: !0, type: Array, default: () => [] }, root: { type: Boolean, default: !1 }, collection: { type: String, required: !0 }, template: { type: String, required: !0 }, primaryKeyField: { type: String, required: !0 }, parentField: { type: String, required: !0 }, childrenField: { type: String, required: !0 }, disabled: { type: Boolean, default: !1 } }, emits: ["change", "input"], setup(e, { emit: t }) { const n = E(!1), l = E(!1); return { drag: n, hideDragImage: Nt, editActive: l, dragOptions: { animation: 150, group: "description", disabled: !1, ghostClass: "ghost" }, replaceItem: i, removeItem: u, replaceChildren: o }; function i(s, r) { t("input", e.tree.map((p, f) => f === s ? r : p)) } function u(s) { t("input", e.tree.filter((r, p) => p !== s)) } function o(s, r) { t("input", e.tree.map((p, f) => f === s ? Ce(re({}, p), { [e.childrenField]: r }) : p)) } } }), nW = { class: "row" }; function lW(e, t, n, l, i, u) { const o = c("item-preview"), s = c("nested-draggable", !0), r = c("draggable"); return m(), C(r, dt(e.dragOptions, { class: ["drag-area", { root: e.root, drag: e.drag }], tag: "ul", list: e.tree, group: { name: "g1" }, "item-key": "id", draggable: ".row", "set-data": e.hideDragImage, disabled: e.disabled, "force-fallback": !0, onStart: t[1] || (t[1] = p => e.drag = !0), onEnd: t[2] || (t[2] = p => e.drag = !1), onChange: t[3] || (t[3] = p => e.$emit("change", p)) }), { item: d(({ element: p, index: f }) => [S("li", nW, [a(o, { item: p, template: e.template, collection: e.collection, "primary-key-field": e.primaryKeyField, disabled: e.disabled, "parent-field": e.parentField, onInput: v => e.replaceItem(f, v), onDeselect: v => e.removeItem(f) }, null, 8, ["item", "template", "collection", "primary-key-field", "disabled", "parent-field", "onInput", "onDeselect"]), a(s, { tree: p[e.childrenField] || [], template: e.template, collection: e.collection, "primary-key-field": e.primaryKeyField, "parent-field": e.parentField, "children-field": e.childrenField, disabled: e.disabled, onChange: t[0] || (t[0] = v => e.$emit("change", v)), onInput: v => e.replaceChildren(f, v) }, null, 8, ["tree", "template", "collection", "primary-key-field", "parent-field", "children-field", "disabled", "onInput"])])]), _: 1 }, 16, ["class", "list", "set-data", "disabled"]) } var oW = B(tW, [["render", lW], ["__scopeId", "data-v-0de81f94"]]); const aW = z({ components: { NestedDraggable: oW, DrawerCollection: Jt, DrawerItem: Bt }, props: { value: { type: Array, default: null }, displayTemplate: { type: String, default: void 0 }, disabled: { type: Boolean, default: !1 }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, primaryKey: { type: [String, Number], default: void 0 }, enableCreate: { type: Boolean, default: !0 }, enableSelect: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = ut(), i = E([]), { relation: u } = P(), { info: o, primaryKeyField: s } = ot(u.value.related_collection), { loading: r, error: p, stagedValues: f, fetchValues: v, emitValue: _ } = A(), { stageSelection: y, selectDrawer: g } = T(), { addNewActive: w, addNew: h } = N(), k = V(() => { var O, U, q; return e.displayTemplate || ((U = (O = o.value) == null ? void 0 : O.meta) == null ? void 0 : U.display_template) || `{{${(q = s.value) == null ? void 0 : q.field}}}` }); at(v), _e(() => e.primaryKey, v, { immediate: !0 }); const F = E(!1); return { t: n, relation: u, openItems: i, template: k, loading: r, error: p, stagedValues: f, fetchValues: v, primaryKeyField: s, onDraggableChange: L, hideDragImage: Nt, dragging: F, emitValue: _, stageSelection: y, selectDrawer: g, addNewActive: w, addNew: h }; function A() { const O = E(!1), U = E(null), q = E([]); return { loading: O, error: U, stagedValues: q, fetchValues: K, emitValue: te, getFieldsToFetch: W }; async function K() { var G, X, ve; if (!(!e.primaryKey || !u.value || e.primaryKey === "+")) { if (((G = e.value) == null ? void 0 : G.length) > 0 && e.value.every(ae => typeof ae == "object")) { q.value = e.value; return } O.value = !0; try { const ae = await ue.get(`/items/${e.collection}/${encodeURIComponent(e.primaryKey)}`, { params: { fields: W() } }); q.value = (ve = (X = ae.data.data) == null ? void 0 : X[u.value.meta.one_field]) != null ? ve : [] } catch (ae) { U.value = ae } finally { O.value = !1 } } } function W() { var ae; const G = [...new Set([(ae = s.value) == null ? void 0 : ae.field, u.value.meta.one_field, ...vt(k.value)])], X = [], ve = `${u.value.meta.one_field}.`; for (let ne = 1; ne <= 5; ne++)for (const Y of G) X.push(`${ve.repeat(ne)}${Y}`); return X } function te(G) { var ve; if (q.value = G, (ve = u.value.meta) == null ? void 0 : ve.sort_field) return t("input", X(G)); t("input", G); function X(ae) { return (ae || []).map((ne, Y) => Ce(re({}, ne), { [u.value.meta.sort_field]: Y + 1, [u.value.meta.one_field]: X(ne[u.value.meta.one_field]) })) } } } function P() { return { relation: V(() => { var U; return (U = l.getRelationsForField(e.collection, e.field)) == null ? void 0 : U[0] }) } } function L() { _(f.value) } function T() { const O = E(!1), U = V(() => { var te; const K = (te = s.value) == null ? void 0 : te.field; if (f.value === null || !K || !e.primaryKey) return []; return [e.primaryKey, ...W(f.value)]; function W(G) { const X = []; if (K) for (const ve of G) { if (!ve[K]) continue; X.push(ve[K]); const ae = W(ve[u.value.meta.one_field]); X.push(...ae) } return X } }); return { stageSelection: q, selectDrawer: O }; async function q(K) { var ne, Y, ce; r.value = !0; const W = K.filter(pe => U.value.includes(pe) === !1), te = [...new Set([(ne = s.value) == null ? void 0 : ne.field, u.value.meta.one_field, ...vt(k.value)])], G = [], X = `${u.value.meta.one_field}.`; for (let pe = 1; pe <= 5; pe++)for (const H of te) G.push(`${X.repeat(pe)}${H}`); if (!((Y = s.value) == null ? void 0 : Y.field)) return; const ae = [...(await ue.get(`/items/${e.collection}`, { params: { fields: [...te, ...G], filter: { [(ce = s.value) == null ? void 0 : ce.field]: { _in: W } } } })).data.data, ...f.value]; ae.length === 0 ? _([]) : _(ae), r.value = !1 } } function N() { return { addNewActive: E(!1), addNew: U }; function U(q) { _([...f.value, q]) } } } }), iW = { key: 1, class: "tree-view" }, sW = { key: 0, class: "actions" }; function rW(e, t, n, l, i, u) { const o = c("v-notice"), s = c("nested-draggable"), r = c("v-button"), p = c("drawer-item"), f = c("drawer-collection"); return e.relation.collection !== e.relation.related_collection ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("interfaces.list-o2m-tree-view.recursive_only")), 1)]), _: 1 })) : (m(), I("div", iW, [a(s, { template: e.template, collection: e.collection, tree: e.stagedValues || [], "primary-key-field": e.primaryKeyField.field, "children-field": e.relation.meta.one_field, "parent-field": e.relation.field, disabled: e.disabled, root: "", onChange: e.onDraggableChange, onInput: e.emitValue }, null, 8, ["template", "collection", "tree", "primary-key-field", "children-field", "parent-field", "disabled", "onChange", "onInput"]), e.disabled ? R("", !0) : (m(), I("div", sW, [e.enableCreate ? (m(), C(r, { key: 0, onClick: t[0] || (t[0] = v => e.addNewActive = !0) }, { default: d(() => [D(b(e.t("create_new")), 1)]), _: 1 })) : R("", !0), e.enableSelect ? (m(), C(r, { key: 1, onClick: t[1] || (t[1] = v => e.selectDrawer = !0) }, { default: d(() => [D(b(e.t("add_existing")), 1)]), _: 1 })) : R("", !0)])), e.disabled ? R("", !0) : (m(), C(p, { key: 1, active: e.addNewActive, collection: e.collection, "primary-key": "+", edits: {}, "circular-field": e.relation.field, onInput: e.addNew, "onUpdate:active": t[2] || (t[2] = v => e.addNewActive = !1) }, null, 8, ["active", "collection", "circular-field", "onInput"])), e.disabled ? R("", !0) : (m(), C(f, { key: 2, active: e.selectDrawer, "onUpdate:active": t[3] || (t[3] = v => e.selectDrawer = v), collection: e.collection, selection: [], multiple: "", onInput: e.stageSelection }, null, 8, ["active", "collection", "onInput"]))])) } var dW = B(aW, [["render", rW], ["__scopeId", "data-v-1d7230b5"]]), uW = Me({ id: "list-o2m-tree-view", name: "$t:tree_view", description: "$t:interfaces.list-o2m-tree-view.description", icon: "account_tree", types: ["alias"], localTypes: ["o2m"], group: "relational", relational: !0, component: dW, options: ({ relations: e }) => { var n; const t = (n = e.o2m) == null ? void 0 : n.collection; return [{ field: "template", name: "$t:display_template", meta: { interface: "system-display-template", options: { collectionName: t }, width: "full" } }, { field: "enableCreate", name: "$t:creating_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_create_button" }, width: "half" } }, { field: "enableSelect", name: "$t:selecting_items", schema: { default_value: !0 }, meta: { interface: "boolean", options: { label: "$t:enable_select_button" }, width: "half" } }] } }), cW = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: uW }); class Ko { constructor(t, n) { mt(this, "active"); mt(this, "element"); mt(this, "groupElement"); this.className = t, this.callback = n, this.element = document.createElement("button"), this.element.className = this.className, this.element.onpointerdown = n, this.active = !1 } click(...t) { this.callback(...t) } activate(t) { this.element.classList[t ? "add" : "remove"]("active"), this.active = t } show(t) { this.element.classList[t ? "remove" : "add"]("hidden") } onAdd() { return this.groupElement = document.createElement("div"), this.groupElement.className = "mapboxgl-ctrl mapboxgl-ctrl-group", this.groupElement.appendChild(this.element), this.groupElement } onRemove() { var t; this.element.remove(), (t = this.groupElement) == null || t.remove() } } class pW { constructor(t) { mt(this, "groupElement"); mt(this, "boxElement"); mt(this, "selectButton"); mt(this, "map"); mt(this, "layers"); mt(this, "selecting", !1); mt(this, "shiftPressed", !1); mt(this, "startPos"); mt(this, "lastPos"); mt(this, "onKeyDownHandler"); mt(this, "onKeyUpHandler"); mt(this, "onMouseDownHandler"); mt(this, "onMouseMoveHandler"); mt(this, "onMouseUpHandler"); var n, l, i, u; this.layers = (n = t == null ? void 0 : t.layers) != null ? n : [], this.boxElement = document.createElement("div"), this.boxElement.className = (l = t == null ? void 0 : t.boxElementClass) != null ? l : "selection-box", this.groupElement = document.createElement("div"), this.groupElement.className = (i = t == null ? void 0 : t.groupElementClass) != null ? i : "mapboxgl-ctrl mapboxgl-ctrl-group", this.selectButton = new Ko((u = t == null ? void 0 : t.selectButtonClass) != null ? u : "ctrl-select", () => { this.activate(!this.shiftPressed) }), this.groupElement.appendChild(this.selectButton.element), this.onKeyDownHandler = this.onKeyDown.bind(this), this.onKeyUpHandler = this.onKeyUp.bind(this), this.onMouseDownHandler = this.onMouseDown.bind(this), this.onMouseMoveHandler = this.onMouseMove.bind(this), this.onMouseUpHandler = this.onMouseUp.bind(this) } onAdd(t) { return this.map = t, this.map.boxZoom.disable(), this.map.getContainer().appendChild(this.boxElement), this.map.getContainer().addEventListener("pointerdown", this.onMouseDownHandler, !0), document.addEventListener("keydown", this.onKeyDownHandler), document.addEventListener("keyup", this.onKeyUpHandler), this.groupElement } onRemove() { this.map.boxZoom.enable(), this.boxElement.remove(), this.groupElement.remove(), this.map.getContainer().removeEventListener("pointerdown", this.onMouseDownHandler), document.removeEventListener("keydown", this.onKeyDownHandler), document.removeEventListener("keyup", this.onKeyUpHandler) } active() { return this.shiftPressed || this.selecting } getMousePosition(t) { const n = this.map.getContainer(), l = n.getBoundingClientRect(); return new zt.exports.Point(t.clientX - l.left - n.clientLeft, t.clientY - l.top - n.clientTop) } onKeyDown(t) { t.key == "Shift" && this.activate(!0), t.key == "Escape" && (this.reset(), this.activate(!1), this.map.fire("select.end", { features: [] })) } activate(t) { this.shiftPressed = t, this.selectButton.activate(t), this.map.fire(`select.${t ? "enable" : "disable"}`) } onKeyUp(t) { t.key == "Shift" && this.activate(!1) } onMouseDown(t) { !this.shiftPressed || t.button === 0 && (this.selecting = !0, this.map.dragPan.disable(), this.startPos = this.getMousePosition(t), this.lastPos = this.startPos, document.addEventListener("pointermove", this.onMouseMoveHandler), document.addEventListener("pointerup", this.onMouseUpHandler), this.map.fire("select.start")) } onMouseMove(t) { this.lastPos = this.getMousePosition(t); const n = Math.min(this.startPos.x, this.lastPos.x), l = Math.max(this.startPos.x, this.lastPos.x), i = Math.min(this.startPos.y, this.lastPos.y), u = Math.max(this.startPos.y, this.lastPos.y), o = `translate(${n}px, ${i}px)`, s = l - n + "px", r = u - i + "px"; this.updateBoxStyle({ transform: o, width: s, height: r }) } onMouseUp(t) { if (this.reset(), !this.active()) return; const n = this.map.queryRenderedFeatures([this.startPos, this.lastPos], { layers: this.layers }); this.map.fire("select.end", { features: n, alt: t.altKey }) } reset() { this.selecting = !1, this.updateBoxStyle({ width: "0", height: "0", transform: "" }), document.removeEventListener("pointermove", this.onMouseMoveHandler), document.removeEventListener("pointerup", this.onMouseUpHandler), this.map.dragPan.enable() } updateBoxStyle(t) { this.boxElement.style.transform = t.transform, this.boxElement.style.width = t.width, this.boxElement.style.height = t.height } } function Ho(e, t) { return [Math.min(e[0], t[0]), Math.min(e[1], t[1]), Math.max(e[2], t[0]), Math.max(e[3], t[1])] } function Ol(e) { let t = [1 / 0, 1 / 0, -1 / 0, -1 / 0]; return Vd(e, n => { t = Ho(t, n) }), t } function mW(e) { switch (e) { case "json": return "geojson"; case "text": case "string": return "wkt"; case "csv": return "lnglat"; default: return e.startsWith("geometry") ? "native" : void 0 } } function fW(e) { const { geometryFormat: t } = e; switch (t) { case "native": case "geojson": return n => n; case "wkt": return n => Fd(n); case "lnglat": return n => n.coordinates; default: throw new Error(ze.global.t("interfaces.map.invalid_format", { format: t })) } } function vW(e) { const { geometryFormat: t } = e; switch (t) { case "native": case "geojson": return n => n; case "wkt": return n => Ad(n); case "lnglat": return n => ({ type: "Point", coordinates: [Number(n[0]), Number(n[1])] }); default: throw new Error(ze.global.t("interfaces.map.invalid_format", { format: t })) } } function ar(e) { const t = vW(e); return function (n) { const l = n[e.geometryField], i = l && t(l); if (!!i) return i.bbox = Ol(i), i } } function _W(e, t) { const n = ar(t), l = { type: "FeatureCollection", features: [], bbox: [1 / 0, 1 / 0, -1 / 0, -1 / 0] }; for (let i = 0; i < e.length; i++) { const u = n(e[i]); if (!u) continue; const [o, s, r, p] = u.bbox; l.bbox = Ho(l.bbox, [o, s]), l.bbox = Ho(l.bbox, [r, p]); const f = re({}, e[i]); delete f[t.geometryField]; const v = { type: "Feature", properties: f, geometry: u }; l.features.push(v) } return l.features.length == 0 && delete l.bbox, l } function ir(e) { if (!e) return []; if (e.type == "GeometryCollection") return e.geometries.flatMap(ir); if (e.type.startsWith("Multi")) { const t = e.type.replace("Multi", ""); return e.coordinates.map(n => ({ type: t, coordinates: n })) } return [e] } const yW = "#9e8de4", gW = "#68b0f4", hW = "#00c897", bW = "#ffb300", $W = "#ee9746", wW = "#e35169", kW = "#000000", SW = "#ffffff"; var sr = { purple: yW, blue: gW, green: hW, yellow: bW, orange: $W, red: wW, black: kW, white: SW }; const { green: CW, orange: Ll, black: Wo, white: rr } = sr, al = ["case", ["==", ["get", "mode"], "static"], Wo, ["==", ["get", "active"], "true"], Ll, CW]; var VW = [{ id: "directus-polygon-fill", type: "fill", filter: ["all", ["==", "$type", "Polygon"]], paint: { "fill-color": al, "fill-outline-color": al, "fill-opacity": .15 } }, { id: "directus-polygon-stroke", type: "line", filter: ["all", ["==", "$type", "Polygon"]], layout: { "line-cap": "round", "line-join": "round" }, paint: { "line-color": al, "line-width": 2 } }, { id: "directus-polygon-midpoint", type: "circle", filter: ["all", ["==", "$type", "Point"], ["==", "meta", "midpoint"]], paint: { "circle-radius": 3, "circle-color": Ll } }, { id: "directus-line", type: "line", filter: ["all", ["==", "$type", "LineString"]], layout: { "line-cap": "round", "line-join": "round" }, paint: { "line-color": al, "line-width": 2 } }, { id: "directus-polygon-and-line-vertex", type: "circle", filter: ["all", ["==", "meta", "vertex"], ["==", "$type", "Point"]], paint: { "circle-radius": 3, "circle-color": Ll, "circle-opacity": ["case", ["==", ["get", "active"], "true"], 1, .2], "circle-stroke-color": ["case", ["==", ["get", "active"], "true"], rr, Ll], "circle-stroke-width": 2 } }, { id: "directus-point-shadow", filter: ["all", ["==", "$type", "Point"], ["==", "meta", "feature"], ["!=", "meta", "midpoint"], ["!=", "mode", "static"]], type: "circle", layout: {}, paint: { "circle-radius": 10, "circle-blur": 1, "circle-opacity": .9, "circle-color": Wo } }, { id: "directus-point", filter: ["all", ["==", "$type", "Point"], ["==", "meta", "feature"], ["!=", "meta", "midpoint"]], type: "circle", layout: {}, paint: { "circle-radius": 6, "circle-color": al, "circle-stroke-color": ["case", ["==", ["get", "mode"], "static"], Wo, rr], "circle-opacity": ["case", ["==", ["get", "mode"], "static"], .2, 1], "circle-stroke-width": 2, "circle-stroke-opacity": 1 } }]; const FW = ["directus-point", "directus-line", "directus-polygon-fill", "directus-polygon-stroke", "directus-polygon-midpoint", "directus-polygon-and-line-vertex"].flatMap(e => [e + ".hot", e + ".cold"]), AW = z({ props: { type: { type: String, default: null }, fieldData: { type: Object, default: void 0 }, value: { type: [Object, Array, String], default: null }, loading: { type: Boolean, default: !0 }, disabled: { type: Boolean, default: !1 }, geometryType: { type: String, default: void 0 }, defaultView: { type: Object, default: () => ({}) } }, emits: ["input"], setup(e, { emit: t }) { var fe; const { t: n } = x(), l = E(null); let i, u = E(!0), o; const s = E(), r = E(), p = e.geometryType || ((fe = e.fieldData) == null ? void 0 : fe.type.split(".")[1]), f = mW(e.type), v = An("mapbox_key"), _ = Yn(), y = wt(), { basemap: g } = je(y), w = V(() => { var ie; const J = (ie = _.find(oe => oe.name == g.value)) != null ? ie : _[0]; return g.value, To(J) }); let h, k; try { h = ar({ geometryFormat: f, geometryField: "value" }), k = fW({ geometryFormat: f, geometryField: "value" }) } catch (J) { s.value = J } const F = E([]), A = E(), P = E(); function L() { P.value = A.value ? i.project(A.value) : null } _e(A, L); const T = { draw: new Wl(ne(p)), fitData: new Ko("mapboxgl-ctrl-fitdata", ae), navigation: new zt.exports.NavigationControl({ showCompass: !1 }), geolocate: new zt.exports.GeolocateControl({ showUserLocation: !1 }), geocoder: void 0 }; v && (T.geocoder = new ca({ accessToken: v, collapsed: !0, flyTo: { speed: 1.4 }, marker: !1, mapboxgl: Bl, placeholder: n("layouts.map.find_location") })); const N = E(!1), O = E(""), U = E({ x: 0, y: 0 }); function q() { N.value = !1 } const K = M.exports.debounce(J => { var oe; const ie = (oe = J.features) == null ? void 0 : oe[0]; ie && ie.properties.active === "false" && (O.value = n("interfaces.map.click_to_select", { geometry: ie.geometry.type }), N.value = !0, U.value = J.point) }, 200); function W(J) { N.value = !1, K({ point: J.point, features: J.features }) } return at(() => { const J = te(); At(J) }), { t: n, tooltipPosition: U, tooltipVisible: N, tooltipMessage: O, container: l, mapLoading: u, resetValue: ve, geometryParsingError: r, geometryOptionsError: s, basemaps: _, basemap: g, location: A, projection: P, selection: F }; function te() { return i = new zt.exports.Map(re(re({ container: l.value, style: w.value, attributionControl: !1, dragRotate: !1, logoPosition: "bottom-right" }, e.defaultView), v ? { accessToken: v } : {})), T.geocoder && (i.addControl(T.geocoder, "top-right"), T.geocoder.on("result", J => { A.value = J.result.center }), T.geocoder.on("clear", () => { A.value = null })), T.geolocate.on("geolocate", J => { const { longitude: ie, latitude: oe } = J.coords; A.value = [ie, oe] }), i.addControl(T.navigation, "top-left"), i.addControl(T.geolocate, "top-left"), i.addControl(T.fitData, "top-left"), i.addControl(T.draw, "top-left"), i.on("load", async () => { i.resize(), u.value = !1, i.on("draw.create", Z), i.on("draw.delete", Z), i.on("draw.update", Z), i.on("draw.modechange", H), i.on("draw.selectionchange", Q), i.on("move", L); for (const J of FW) i.on("mousedown", J, q), i.on("mousemove", J, W), i.on("mouseleave", J, W); window.addEventListener("keydown", le) }), _e(() => e.value, G, { immediate: !0 }), _e(() => w.value, X), _e(() => e.disabled, X), () => { window.removeEventListener("keydown", le), i.remove() } } function G(J) { if (J) M.exports.isEqual(J, o && k(o)) || (ce(), T.draw.changeMode("simple_select")); else if (T.draw.deleteAll(), o = null, p) { const oe = `draw_${M.exports.snakeCase(p.replace("Multi", ""))}`; T.draw.changeMode(oe) } e.disabled && T.draw.changeMode("static") } function X() { i.removeControl(T.draw), i.setStyle(w.value, { diff: !1 }), T.draw = new Wl(ne(p)), i.addControl(T.draw, "top-left"), ce() } function ve(J) { r.value = void 0, J && t("input", null) } function ae(J) { i && o && i.fitBounds(o.bbox, re({ padding: 80, maxZoom: 8 }, J)) } function ne(J) { const ie = { styles: VW, controls: {}, userProperties: !0, displayControlsDefault: !1, modes: Object.assign(Wl.modes, { static: Id }) }; if (e.disabled) return ie; if (J) { const oe = M.exports.snakeCase(J.replace("Multi", "")); return ie.controls[oe] = !0, ie.controls.trash = !0, ie } else return ie.controls.line_string = !0, ie.controls.polygon = !0, ie.controls.point = !0, ie.controls.trash = !0, ie } function Y(J, ie) { return !J || !ie ? !0 : J.startsWith("Multi") ? J.replace("Multi", "") == ie.replace("Multi", "") : J == ie } function ce() { try { T.draw.deleteAll(); const J = h(e); if (!J) return; !e.disabled && !Y(p, J.type) && (r.value = n("interfaces.map.unexpected_geometry", { expected: p, got: J.type })); const ie = ir(J); for (const oe of ie) T.draw.add(oe); if (o = pe(), o.bbox = Ol(o), r.value) { const oe = Ol(J); i.fitBounds(oe, { padding: 0, maxZoom: 8, duration: 0 }) } else ae({ duration: 0 }) } catch (J) { r.value = J } } function pe() { const ie = T.draw.getAll().features.map(me => me.geometry); let oe; if (ie.length == 0) return null; if (!p) ie.length > 1 ? oe = { type: "GeometryCollection", geometries: ie } : oe = ie[0]; else if (p.startsWith("Multi")) { const me = ie.filter(({ type: ge }) => `Multi${ge}` == p).map(({ coordinates: ge }) => ge); oe = { type: p, coordinates: me } } else oe = ie[ie.length - 1]; return oe.bbox = Ol(oe), oe } function H(J) { if (!e.disabled && J.mode.startsWith("draw") && p && !p.startsWith("Multi")) for (const ie of T.draw.getAll().features.slice(0, -1)) T.draw.delete(ie.id) } function Q(J) { F.value = J.features } function Z() { o = pe(), o ? t("input", k(o)) : (T.draw.deleteAll(), t("input", null)) } function le(J) { [8, 46].includes(J.keyCode) && T.draw.trash() } } }), IW = { class: "interface-map" }, EW = { ref: "container" }, DW = { class: "mapboxgl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-dropdown basemap-select" }; function TW(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-select"), r = c("v-notice"), p = c("v-info"), f = c("v-button"), v = c("v-card-actions"); return m(), I("div", IW, [S("div", { class: de(["map", { loading: e.mapLoading, error: e.geometryParsingError || e.geometryOptionsError, "has-selection": e.selection.length > 0 }]) }, [S("div", EW, null, 512)], 2), e.location ? (m(), I("div", { key: 0, class: "mapboxgl-user-location-dot mapboxgl-search-location-dot", style: Ke(`transform: translate(${e.projection.x}px, ${e.projection.y}px) translate(-50%, -50%) rotateX(0deg) rotateZ(0deg)`) }, null, 4)) : R("", !0), a(Lt, { name: "fade" }, { default: d(() => [e.tooltipVisible ? (m(), I("div", { key: 0, class: "tooltip top", style: Ke(`display: block; transform: translate(${e.tooltipPosition.x}px, ${e.tooltipPosition.y}px) translate(-50%, -150%) rotateX(0deg) rotateZ(0deg)`) }, b(e.tooltipMessage), 5)) : R("", !0)]), _: 1 }), S("div", DW, [a(o, { name: "map" }), a(s, { modelValue: e.basemap, "onUpdate:modelValue": t[0] || (t[0] = _ => e.basemap = _), inline: "", items: e.basemaps.map(_ => ({ text: _.name, value: _.name })) }, null, 8, ["modelValue", "items"])]), a(Lt, { name: "fade" }, { default: d(() => [e.geometryOptionsError ? (m(), C(p, { key: 0, icon: "error", center: "", type: "danger", title: e.t("interfaces.map.invalid_options") }, { default: d(() => [a(r, { type: "danger", icon: !1 }, { default: d(() => [D(b(e.geometryOptionsError), 1)]), _: 1 })]), _: 1 }, 8, ["title"])) : e.geometryParsingError ? (m(), C(p, { key: 1, icon: "error", center: "", type: "warning", title: e.t("layouts.map.invalid_geometry") }, { append: d(() => [a(v, null, { default: d(() => [a(f, { small: "", secondary: "", onClick: t[1] || (t[1] = _ => e.resetValue(!1)) }, { default: d(() => [D(b(e.t("continue")), 1)]), _: 1 }), a(f, { small: "", kind: "danger", onClick: t[2] || (t[2] = _ => e.resetValue(!0)) }, { default: d(() => [D(b(e.t("reset")), 1)]), _: 1 })]), _: 1 })]), default: d(() => [a(r, { type: "warning", icon: !1 }, { default: d(() => [D(b(e.geometryParsingError), 1)]), _: 1 })]), _: 1 }, 8, ["title"])) : R("", !0)]), _: 1 })]) } var PW = B(AW, [["render", TW], ["__scopeId", "data-v-c220717c"]]); const OW = z({ props: { collection: { type: String, required: !0 }, field: { type: Object, default: null }, value: { type: Object, default: null } }, emits: ["input"], setup(e, { emit: t }) { var h, k, F, A; const { t: n } = x(), l = V(() => e.field.type.split(".")[1]), i = E((F = (k = l.value) != null ? k : (h = e.value) == null ? void 0 : h.geometryType) != null ? F : "Point"), u = E((A = e.value) == null ? void 0 : A.defaultView); _e(() => e.field.type, o), _e(l, s), _e([i, u], r, { immediate: !0 }); function o(P) { P === "csv" && (i.value = "Point") } function s(P) { i.value = P } function r() { t("input", { defaultView: u, geometryType: i.value }) } const p = E(null); let f; const v = An("mapbox_key"), _ = Yn(), y = wt(), { basemap: g } = je(y), w = V(() => { var L; const P = (L = _.find(T => T.name == g.value)) != null ? L : _[0]; return To(P) }); return at(() => { f = new zt.exports.Map(re(re({ container: p.value, style: w.value, attributionControl: !1 }, u.value || {}), v ? { accessToken: v } : {})), f.on("moveend", () => { u.value = { center: f.getCenter(), zoom: f.getZoom(), bearing: f.getBearing(), pitch: f.getPitch() } }) }), At(() => { f.remove() }), { t: n, nativeGeometryType: l, GEOMETRY_TYPES: ha, geometryType: i, mapContainer: p } } }), LW = { class: "form-grid" }, jW = { key: 0, class: "field half-left" }, RW = { class: "type-label" }, MW = { class: "field" }, UW = { class: "type-label" }, NW = { ref: "mapContainer", class: "map" }; function BW(e, t, n, l, i, u) { const o = c("v-select"); return m(), I("div", LW, [!e.nativeGeometryType && e.field.type !== "csv" ? (m(), I("div", jW, [S("div", RW, b(e.t("interfaces.map.geometry_type")), 1), a(o, { modelValue: e.geometryType, "onUpdate:modelValue": t[0] || (t[0] = s => e.geometryType = s), placeholder: e.t("any"), "show-deselect": !0, items: e.GEOMETRY_TYPES.map(s => ({ value: s, text: s })) }, null, 8, ["modelValue", "placeholder", "items"])])) : R("", !0), S("div", MW, [S("div", UW, b(e.t("interfaces.map.default_view")), 1), S("div", NW, null, 512)])]) } var qW = B(OW, [["render", BW], ["__scopeId", "data-v-6367459a"]]), zW = Me({ id: "map", name: "$t:interfaces.map.map", description: "$t:interfaces.map.description", icon: "map", component: PW, types: ["geometry.Point", "geometry.LineString", "geometry.Polygon", "geometry.MultiPoint", "geometry.MultiLineString", "geometry.MultiPolygon", "geometry", "json", "string", "text", "csv"], group: "selection", options: qW, recommendedDisplays: [] }), KW = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: zW }); const HW = z({ props: { color: { type: String, default: null }, icon: { type: String, default: null }, title: { type: String, default: null }, inlineTitle: { type: Boolean, default: !1 }, marginTop: { type: Boolean, default: !0 } } }); function WW(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-divider"); return m(), C(s, { class: de({ "add-margin-top": e.marginTop }), style: Ke({ "--v-divider-label-color": e.color, "--v-divider-color": "var(--border-subdued)" }), large: "", "inline-title": e.inlineTitle }, et({ _: 2 }, [e.icon ? { name: "icon", fn: d(() => [a(o, { name: e.icon }, null, 8, ["name"])]) } : void 0, e.title ? { name: "default", fn: d(() => [D(b(e.title), 1)]) } : void 0]), 1032, ["class", "style", "inline-title"]) } var GW = B(HW, [["render", WW], ["__scopeId", "data-v-63cedea8"]]), JW = Me({ id: "presentation-divider", name: "$t:interfaces.presentation-divider.divider", description: "$t:interfaces.presentation-divider.description", icon: "remove", component: GW, hideLabel: !0, hideLoader: !0, types: ["alias"], localTypes: ["presentation"], group: "presentation", options: [{ field: "color", name: "$t:color", type: "string", meta: { width: "half", interface: "select-color" } }, { field: "icon", name: "$t:icon", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "title", name: "$t:title", type: "string", meta: { width: "full", interface: "input", options: { placeholder: "$t:interfaces.presentation-divider.title_placeholder" } } }, { field: "marginTop", name: "$t:interfaces.presentation-divider.margin_top", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.presentation-divider.margin_top_label" } }, schema: { default_value: !0 } }, { field: "inlineTitle", name: "$t:interfaces.presentation-divider.inline_title", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.presentation-divider.inline_title_label" } }, schema: { default_value: !1 } }] }), QW = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: JW }); const XW = z({ props: { disabled: { type: Boolean, default: !1 }, links: { type: Array, default: null } }, setup(e) { const t = ht("values", E({})); return { linksParsed: V(() => e.links.map(l => { var o; const i = M.exports.omit(l, ["url"]), u = Mn((o = l.url) != null ? o : "", t.value); return u.startsWith("/") ? i.to = u : i.href = u, i })) } } }), ZW = { class: "presentation-links" }, YW = { key: 1 }; function xW(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-button"); return m(), I("div", ZW, [(m(!0), I(se, null, he(e.linksParsed, (r, p) => (m(), C(s, { key: p, class: de(["action", [r.type]]), secondary: r.type !== "primary", disabled: e.disabled, icon: !r.label, href: r.href, to: r.to }, { default: d(() => [r.icon ? (m(), C(o, { key: 0, left: "", name: r.icon }, null, 8, ["name"])) : R("", !0), r.label ? (m(), I("span", YW, b(r.label), 1)) : R("", !0)]), _: 2 }, 1032, ["class", "secondary", "disabled", "icon", "href", "to"]))), 128))]) } var eG = B(XW, [["render", xW], ["__scopeId", "data-v-406a838a"]]), tG = Me({ id: "presentation-links", name: "$t:interfaces.presentation-links.presentation-links", description: "$t:interfaces.presentation-links.description", icon: "smart_button", component: eG, hideLabel: !0, hideLoader: !0, types: ["alias"], localTypes: ["presentation"], group: "presentation", options: ({ collection: e }) => [{ field: "links", name: "$t:interfaces.presentation-links.links", type: "json", meta: { interface: "list", options: { fields: [{ field: "label", type: "string", name: "$t:label", meta: { width: "full", interface: "input", options: { placeholder: "$t:label" } } }, { field: "icon", name: "$t:icon", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "type", name: "$t:type", type: "string", meta: { width: "half", interface: "select-dropdown", default_value: "normal", options: { choices: [{ text: "$t:primary", value: "primary" }, { text: "$t:normal", value: "normal" }, { text: "$t:info", value: "info" }, { text: "$t:success", value: "success" }, { text: "$t:warning", value: "warning" }, { text: "$t:danger", value: "danger" }] } }, schema: { default_value: "normal" } }, { field: "url", type: "string", name: "$t:url", meta: { width: "full", interface: "system-display-template", options: { collectionName: e, font: "monospace", placeholder: "https://example.com/articles/{{ id }}/{{ slug }}" } } }] } } }] }), nG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: tG }); const lG = z({ props: { color: { type: String, default: "normal" }, icon: { type: String, default: "info" }, text: { type: String, default: "No text configured..." } } }), oG = { class: "presentation-notice" }; function aG(e, t, n, l, i, u) { const o = c("v-notice"), s = we("md"); return m(), I("div", oG, [a(o, { icon: e.icon, type: e.color }, { default: d(() => [ee(S("div", null, null, 512), [[s, e.text]])]), _: 1 }, 8, ["icon", "type"])]) } var iG = B(lG, [["render", aG]]), sG = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="25" width="120" height="46" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="46" y="35" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="46" y="45" width="74" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="46" y="55" width="30" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="100" y="35" width="20" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<path
		d="M31.426 45.074h1.148v1.176h-1.148v-1.176zm0 2.352h1.148v3.5h-1.148v-3.5zm.574-5.25A5.811 5.811 0 0026.176 48 5.811 5.811 0 0032 53.824 5.811 5.811 0 0037.824 48 5.811 5.811 0 0032 42.176zm0 10.5A4.691 4.691 0 0127.324 48 4.691 4.691 0 0132 43.324 4.691 4.691 0 0136.676 48 4.691 4.691 0 0132 52.676z"
		fill="var(--primary)" />
</svg>
`, rG = Me({ id: "presentation-notice", name: "$t:interfaces.presentation-notice.notice", description: "$t:interfaces.presentation-notice.description", icon: "info", component: iG, hideLabel: !0, hideLoader: !0, types: ["alias"], localTypes: ["presentation"], group: "presentation", options: [{ field: "color", name: "$t:color", type: "string", meta: { width: "half", interface: "select-dropdown", options: { choices: [{ text: "$t:normal", value: "normal" }, { text: "$t:info", value: "info" }, { text: "$t:success", value: "success" }, { text: "$t:warning", value: "warning" }, { text: "$t:danger", value: "danger" }] } }, schema: { default_value: "normal" } }, { field: "icon", name: "$t:icon", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "text", name: "$t:text", type: "string", meta: { width: "full", interface: "input-multiline", options: { placeholder: "$t:interfaces.presentation-notice.text" } } }], preview: sG }), dG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: rG }); const uG = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null, validator: e => e === null || e === "" || Tl(e) }, placeholder: { type: String, default: null }, presets: { type: Array, default: () => [{ name: "Red", color: "#E35169" }, { name: "Orange", color: "#F7971C" }, { name: "Yellow", color: "#F2C94C" }, { name: "Green", color: "#00C897" }, { name: "Blue", color: "#68B0F4" }, { name: "Purple", color: "#9E8DE4" }, { name: "Gray", color: "#607D8B" }, { name: "Light Gray", color: "#ECEFF1" }, { name: "White", color: "#FFFFFF" }] }, width: { type: String, required: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null), i = ["RGB", "HSL"], u = E("RGB"); function o() { t("input", null) } function s() { var h; ((h = l.value) == null ? void 0 : h.$el).getElementsByTagName("input")[0].click() } const r = V(() => v.value !== null && e.value !== null), p = V(() => { if (y.value === null) return !0; const h = getComputedStyle(document.body).getPropertyValue("--background-page").trim(), k = qt(h); return y.value.contrast(k) < 1.1 }), { hsl: f, rgb: v, hex: _, color: y } = w(); return { t: n, colorTypes: i, colorType: u, rgb: v, hsl: f, hex: _, htmlColorInput: l, activateColorPicker: s, isValidColor: r, Color: qt, setValue: g, lowContrast: p, unsetColor: o }; function g(h, k, F) { if (h === "rgb") { const A = [...v.value]; A[k] = F, v.value = A } else { const A = [...f.value]; A[k] = F, f.value = A } } function w() { const h = E(null); _e(() => e.value, L => { h.value = L !== null ? qt(L) : null }, { immediate: !0 }); const k = V({ get() { return h.value !== null ? h.value.rgb().array().map(Math.round) : [0, 0, 0] }, set(L) { P(qt.rgb(L)) } }), F = V({ get() { return h.value !== null ? h.value.hsl().array().map(Math.round) : [0, 0, 0] }, set(L) { P(qt.hsl(L)) } }), A = V({ get() { return h.value !== null ? h.value.hex() : null }, set(L) { if (L === null || L === "") o(); else { if (Tl(L) === !1) return; P(qt(L)) } } }); return { rgb: k, hsl: F, hex: A, color: h }; function P(L) { h.value = L, L === null ? o() : t("input", L.hex()) } } } }), cG = { class: "color-data-input color-type" }, pG = { key: 0, class: "presets" }; function mG(e, t, n, l, i, u) { const o = c("v-input"), s = c("v-icon"), r = c("v-button"), p = c("v-select"), f = c("v-menu"), v = we("tooltip"); return m(), C(f, { attached: "", disabled: e.disabled, "close-on-content-click": !1 }, { activator: d(({ activate: _ }) => [a(o, { modelValue: e.hex, "onUpdate:modelValue": t[1] || (t[1] = y => e.hex = y), disabled: e.disabled, placeholder: e.placeholder || e.t("interfaces.select-color.placeholder"), pattern: /#([a-f\d]{2}){3}/i, class: "color-input", maxlength: "7", onFocus: _ }, { prepend: d(() => [a(o, { ref: "htmlColorInput", modelValue: e.hex, "onUpdate:modelValue": t[0] || (t[0] = y => e.hex = y), type: "color", class: "html-color-select" }, null, 8, ["modelValue"]), a(r, { class: "swatch", icon: !0, style: Ke({ "--v-button-background-color": e.isValidColor ? e.hex : "transparent", border: e.lowContrast === !1 ? "none" : "var(--border-width) solid var(--border-normal)" }), onClick: e.activateColorPicker }, { default: d(() => [e.isValidColor ? R("", !0) : (m(), C(s, { key: 0, name: "colorize" }))]), _: 1 }, 8, ["style", "onClick"])]), append: d(() => [a(s, { name: e.isValidColor ? "close" : "palette", clickable: "", onClick: e.unsetColor }, null, 8, ["name", "onClick"])]), _: 2 }, 1032, ["modelValue", "disabled", "placeholder", "pattern", "onFocus"])]), default: d(() => [S("div", { class: de(["color-data-inputs", { stacked: e.width === "half" }]) }, [S("div", cG, [a(p, { modelValue: e.colorType, "onUpdate:modelValue": t[2] || (t[2] = _ => e.colorType = _), items: e.colorTypes }, null, 8, ["modelValue", "items"])]), e.colorType === "RGB" ? (m(!0), I(se, { key: 0 }, he(e.rgb, (_, y) => (m(), C(o, { key: y, type: "number", "model-value": _, class: "color-data-input", pattern: "\\d*", min: 0, max: 255, step: 1, maxlength: "3", "onUpdate:modelValue": g => e.setValue("rgb", y, g) }, null, 8, ["model-value", "onUpdate:modelValue"]))), 128)) : R("", !0), e.colorType === "HSL" ? (m(!0), I(se, { key: 1 }, he(e.hsl, (_, y) => (m(), C(o, { key: y, type: "number", "model-value": _, class: "color-data-input", pattern: "\\d*", min: 0, max: y === 0 ? 360 : 100, step: 1, maxlength: "3", "onUpdate:modelValue": g => e.setValue("hsl", y, g) }, null, 8, ["model-value", "max", "onUpdate:modelValue"]))), 128)) : R("", !0)], 2), e.presets ? (m(), I("div", pG, [(m(!0), I(se, null, he(e.presets, _ => ee((m(), C(r, { key: _.color, class: "preset", rounded: "", icon: "", style: Ke({ "--v-button-background-color": _.color }), onClick: () => e.hex = _.color }, null, 8, ["style", "onClick"])), [[v, _.name]])), 128))])) : R("", !0)]), _: 1 }, 8, ["disabled"]) } var fG = B(uG, [["render", mG], ["__scopeId", "data-v-751d12b2"]]), vG = Me({ id: "select-color", name: "$t:interfaces.select-color.color", description: "$t:interfaces.select-color.description", icon: "palette", component: fG, types: ["string"], recommendedDisplays: ["color"], group: "selection", options: [{ field: "presets", name: "$t:interfaces.select-color.preset_colors", type: "string", meta: { width: "full", interface: "list", options: { addLabel: "$t:interfaces.select-color.preset_colors_add_label", template: "{{ name }} - {{ color }}", fields: [{ field: "name", type: "string", name: "$t:name", meta: { interface: "input", width: "half", options: { placeholder: "$t:interfaces.select-color.name_placeholder" } } }, { field: "color", type: "string", name: "$t:color", meta: { interface: "select-color", width: "half" } }] } } }] }), _G = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: vG }); const yG = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null }, choices: { type: Array, default: null }, icon: { type: String, default: null }, allowNone: { type: Boolean, default: !1 }, placeholder: { type: String, default: () => ze.global.t("select_an_item") }, allowOther: { type: Boolean, default: !1 } }, emits: ["input"], setup() { const { t: e } = x(); return { t: e } } }); function gG(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-icon"), r = c("v-select"); return e.choices ? (m(), C(r, { key: 1, "model-value": e.value, items: e.choices, disabled: e.disabled, "show-deselect": e.allowNone, placeholder: e.placeholder, "allow-other": e.allowOther, "onUpdate:modelValue": t[0] || (t[0] = p => e.$emit("input", p)) }, et({ _: 2 }, [e.icon ? { name: "prepend", fn: d(() => [a(s, { name: e.icon }, null, 8, ["name"])]) } : void 0]), 1032, ["model-value", "items", "disabled", "show-deselect", "placeholder", "allow-other"])) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("choices_option_configured_incorrectly")), 1)]), _: 1 })) } var hG = B(yG, [["render", gG]]), bG = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="17.037" width="120" height="62" rx="6" fill="var(--background-page)" />
	<rect x="19" y="18.037" width="118" height="60" rx="5" stroke="var(--primary)" stroke-opacity=".25"
		stroke-width="2" />
	<rect x="28" y="51" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="63" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="18" y="17" width="120" height="26" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="18" width="118" height="24" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="27" width="70" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<path d="M120.966 28a.4.4 0 00-.283.683l3.034 3.034a.4.4 0 00.566 0l3.034-3.034a.4.4 0 00-.283-.683h-6.068z"
		fill="var(--primary)" />
</svg>
`, $G = Me({ id: "select-dropdown", name: "$t:dropdown", description: "$t:interfaces.select-dropdown.description", icon: "arrow_drop_down_circle", component: hG, types: ["string"], group: "selection", preview: bG, options: [{ field: "choices", type: "json", name: "$t:choices", meta: { width: "full", interface: "list", options: { placeholder: "$t:interfaces.select-dropdown.choices_placeholder", template: "{{ text }}", fields: [{ field: "text", type: "string", name: "$t:text", meta: { interface: "input", width: "half", options: { placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }, { field: "value", type: "string", name: "$t:value", meta: { interface: "input", options: { font: "monospace", placeholder: "$t:interfaces.select-dropdown.choices_value_placeholder" }, width: "half" } }] } } }, { field: "allowOther", name: "$t:interfaces.select-dropdown.allow_other", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_other_label" } }, schema: { default_value: !1 } }, { field: "allowNone", name: "$t:interfaces.select-dropdown.allow_none", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_none_label" } }, schema: { default_value: !1 } }, { field: "icon", name: "$t:icon", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "half", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }], recommendedDisplays: ["labels"] }), wG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: $G }); const kG = z({ components: { DrawerItem: Bt, DrawerCollection: Jt }, props: { value: { type: [Number, String, Object], default: null }, collection: { type: String, required: !0 }, field: { type: String, required: !0 }, template: { type: String, default: null }, selectMode: { type: String, default: "auto" }, disabled: { type: Boolean, default: !1 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { collection: l } = je(e), i = ut(), u = He(), { relation: o, relatedCollection: s, relatedPrimaryKeyField: r } = X(), { usesMenu: p, menuActive: f } = ve(), { info: v } = ot(l), { selection: _, stageSelection: y, selectModalActive: g } = ne(), { displayTemplate: w, onPreviewClick: h, requiredFields: k } = ae(), { totalCount: F, loading: A, fetchItems: P, items: L } = G(), { setCurrent: T, currentItem: N, loading: O, currentPrimaryKey: U } = te(), { edits: q, stageEdits: K } = Y(), W = E(!1); return { t: n, collectionInfo: v, currentItem: N, displayTemplate: w, items: L, itemsLoading: A, loadingCurrent: O, menuActive: f, onPreviewClick: h, relatedCollection: s, relation: o, selection: _, selectModalActive: g, setCurrent: T, totalCount: F, stageSelection: y, useMenu: ve, currentPrimaryKey: U, edits: q, stageEdits: K, editModalActive: W, relatedPrimaryKeyField: r }; function te() { const ce = E(null), pe = E(!1); _e(() => e.value, le => { var fe; le !== null && le !== ((fe = ce.value) == null ? void 0 : fe[r.value.field]) && (typeof le == "string" || typeof le == "number") ? Z(le) : le === null ? ce.value = null : !ce.value && typeof le == "object" && le[r.value.field] && Z(le[r.value.field]) }, { immediate: !0 }); const H = V(() => { var le, fe, J; return !ce.value || !e.value || !r.value ? "+" : typeof e.value == "number" || typeof e.value == "string" ? e.value : typeof e.value == "object" && r.value.field in ((le = e.value) != null ? le : {}) && (J = (fe = e.value) == null ? void 0 : fe[r.value.field]) != null ? J : "+" }); return { setCurrent: Q, currentItem: ce, loading: pe, currentPrimaryKey: H }; function Q(le) { !r.value || (ce.value = le, t("input", le[r.value.field])) } async function Z(le) { if (!r.value || !s.value) return; pe.value = !0; const fe = k.value || []; fe.includes(r.value.field) === !1 && fe.push(r.value.field); try { const J = s.value.collection.startsWith("directus_") ? `/${s.value.collection.substring(9)}/${le}` : `/items/${s.value.collection}/${encodeURIComponent(le)}`, ie = await ue.get(J, { params: { fields: fe } }); ce.value = ie.data.data } catch (J) { Ve(J) } finally { pe.value = !1 } } } function G() { const ce = E(null), pe = E(null), H = E(!1); return _e(s, () => { Z(), pe.value = null }), { totalCount: ce, fetchItems: Q, items: pe, loading: H }; async function Q() { if (pe.value !== null || !s.value || !r.value) return; H.value = !0; const le = k.value || []; le.includes(r.value.field) === !1 && le.push(r.value.field); try { const fe = s.value.collection.startsWith("directus_") ? `/${s.value.collection.substring(9)}` : `/items/${s.value.collection}`, J = await ue.get(fe, { params: { fields: le, limit: -1 } }); pe.value = J.data.data } catch (fe) { Ve(fe) } finally { H.value = !1 } } async function Z() { if (!s.value) return; const le = s.value.collection.startsWith("directus_") ? `/${s.value.collection.substring(9)}` : `/items/${s.value.collection}`, fe = await ue.get(le, { params: { limit: 0, meta: "total_count" } }); ce.value = fe.data.meta.total_count } } function X() { const ce = V(() => { var Z; return (Z = i.getRelationsForField(e.collection, e.field)) == null ? void 0 : Z[0] }), pe = V(() => { var Z; return ((Z = ce.value) == null ? void 0 : Z.related_collection) ? u.getCollection(ce.value.related_collection) : null }), H = V(() => { var Z, le; return (le = (Z = pe.value) == null ? void 0 : Z.collection) != null ? le : null }), { primaryKeyField: Q } = ot(H); return { relation: ce, relatedCollection: pe, relatedPrimaryKeyField: Q } } function ve() { const ce = E(!1), pe = V(() => e.selectMode === "modal" ? !1 : e.selectMode === "dropdown" || F.value !== null && F.value <= 100); return { menuActive: ce, usesMenu: pe } } function ae() { const ce = V(() => { var Q, Z, le; return e.template !== null ? e.template : ((Z = (Q = v.value) == null ? void 0 : Q.meta) == null ? void 0 : Z.display_template) || `{{ ${((le = r == null ? void 0 : r.value) == null ? void 0 : le.field) || ""} }}` }), pe = V(() => !ce.value || !s.value ? null : Qt(vt(ce.value), s.value.collection)); return { onPreviewClick: H, displayTemplate: ce, requiredFields: pe }; function H() { if (!e.disabled) if (p.value === !0) { const Q = !f.value; f.value = Q, Q === !0 && P() } else g.value = !0 } } function ne() { const ce = E(!1); return { selection: V(() => { var Q; return e.value ? r.value ? typeof e.value == "object" && r.value.field in ((Q = e.value) != null ? Q : {}) ? [e.value[r.value.field]] : typeof e.value == "string" || typeof e.value == "number" ? [e.value] : [] : [] : [] }), stageSelection: H, selectModalActive: ce }; function H(Q) { Q.length === 0 ? t("input", null) : t("input", Q[0]) } } function Y() { return { edits: V(() => e.value && typeof e.value == "object" ? e.value : {}), stageEdits: pe }; function pe(H) { !r.value || (U.value && U.value !== "+" ? t("input", re({ [r.value.field]: U.value }, H)) : (r.value.field in H && H[r.value.field] === "+" && delete H[r.value.field], t("input", H)), N.value = re(re({}, N.value), H)) } } } }), SG = { key: 2, class: "many-to-one" }, CG = { class: "preview" }; function VG(e, t, n, l, i, u) { var F; const o = c("v-notice"), s = c("v-skeleton-loader"), r = c("render-template"), p = c("v-icon"), f = c("v-input"), v = c("v-list-item-content"), _ = c("v-list-item"), y = c("v-list"), g = c("v-menu"), w = c("drawer-item"), h = c("drawer-collection"), k = we("tooltip"); return e.relation ? e.displayTemplate ? (m(), I("div", SG, [a(g, { modelValue: e.menuActive, "onUpdate:modelValue": t[3] || (t[3] = A => e.menuActive = A), attached: "", disabled: e.disabled }, { activator: d(({ active: A }) => [e.loadingCurrent ? (m(), C(s, { key: 0, type: "input" })) : (m(), C(f, { key: 1, active: A, clickable: "", placeholder: e.t("select_an_item"), disabled: e.disabled, onClick: e.onPreviewClick }, et({ _: 2 }, [e.currentItem ? { name: "input", fn: d(() => [S("div", CG, [a(r, { collection: e.relatedCollection.collection, item: e.currentItem, template: e.displayTemplate }, null, 8, ["collection", "item", "template"])])]) } : void 0, e.disabled ? void 0 : { name: "append", fn: d(() => [e.currentItem ? (m(), I(se, { key: 0 }, [ee(a(p, { name: "open_in_new", class: "edit", onClick: t[0] || (t[0] = Ae(P => e.editModalActive = !0, ["stop"])) }, null, 512), [[k, e.t("edit")]]), ee(a(p, { name: "close", class: "deselect", onClick: t[1] || (t[1] = Ae(P => e.$emit("input", null), ["stop"])) }, null, 512), [[k, e.t("deselect")]])], 64)) : (m(), I(se, { key: 1 }, [ee(a(p, { class: "add", name: "add", onClick: t[2] || (t[2] = Ae(P => e.editModalActive = !0, ["stop"])) }, null, 512), [[k, e.t("create_item")]]), a(p, { class: de(["expand", { active: A }]), name: "expand_more" }, null, 8, ["class"])], 64))]) }]), 1032, ["active", "placeholder", "disabled", "onClick"]))]), default: d(() => [a(y, null, { default: d(() => [e.itemsLoading ? (m(), I(se, { key: 0 }, he(10, A => a(_, { key: `loader-${A}` }, { default: d(() => [a(v, null, { default: d(() => [a(s, { type: "text" })]), _: 1 })]), _: 2 }, 1024)), 64)) : (m(!0), I(se, { key: 1 }, he(e.items, A => (m(), C(_, { key: A[e.relatedPrimaryKeyField.field], active: e.value === A[e.relatedPrimaryKeyField.field], clickable: "", onClick: P => e.setCurrent(A) }, { default: d(() => [a(v, null, { default: d(() => [a(r, { collection: e.relatedCollection.collection, template: e.displayTemplate, item: A }, null, 8, ["collection", "template", "item"])]), _: 2 }, 1024)]), _: 2 }, 1032, ["active", "onClick"]))), 128))]), _: 1 })]), _: 1 }, 8, ["modelValue", "disabled"]), e.disabled ? R("", !0) : (m(), C(w, { key: 0, active: e.editModalActive, "onUpdate:active": t[4] || (t[4] = A => e.editModalActive = A), collection: e.relatedCollection.collection, "primary-key": e.currentPrimaryKey, edits: e.edits, "circular-field": (F = e.relation.meta) == null ? void 0 : F.one_field, onInput: e.stageEdits }, null, 8, ["active", "collection", "primary-key", "edits", "circular-field", "onInput"])), e.disabled ? R("", !0) : (m(), C(h, { key: 1, active: e.selectModalActive, "onUpdate:active": t[5] || (t[5] = A => e.selectModalActive = A), collection: e.relatedCollection.collection, selection: e.selection, onInput: e.stageSelection }, null, 8, ["active", "collection", "selection", "onInput"]))])) : (m(), C(o, { key: 1, type: "warning" }, { default: d(() => [D(b(e.t("display_template_not_setup")), 1)]), _: 1 })) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("relationship_not_setup")), 1)]), _: 1 })) } var FG = B(kG, [["render", VG], ["__scopeId", "data-v-1f8e6a47"]]), AG = `<svg width="156" height="96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="17.037" width="120" height="62" rx="6" fill="var(--background-page)" />
	<rect x="19" y="18.037" width="118" height="60" rx="5" stroke="var(--primary)" stroke-opacity=".25"
		stroke-width="2" />
	<rect x="28" y="51" width="40" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="28" y="63" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<rect x="18" y="17" width="120" height="26" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="18" width="118" height="24" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="27" width="70" height="6" rx="2" fill="var(--primary)" fill-opacity=".25" />
	<path d="M120.966 28a.4.4 0 00-.283.683l3.034 3.034a.4.4 0 00.566 0l3.034-3.034a.4.4 0 00-.283-.683h-6.068z"
		fill="var(--primary)" />
</svg>
`, IG = Me({ id: "select-dropdown-m2o", name: "$t:interfaces.select-dropdown-m2o.many-to-one", description: "$t:interfaces.select-dropdown-m2o.description", icon: "arrow_right_alt", component: FG, types: ["uuid", "string", "text", "integer", "bigInteger"], relational: !0, localTypes: ["m2o"], group: "relational", options: ({ relations: e }) => { var n; const t = (n = e.m2o) == null ? void 0 : n.related_collection; return [{ field: "template", name: "$t:interfaces.select-dropdown-m2o.display_template", meta: { interface: "system-display-template", options: { collectionName: t } } }] }, recommendedDisplays: ["related-values"], preview: AG }), EG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: IG }), dr = [{ name: "action", icons: ["3d_rotation", "accessibility", "accessibility_new", "accessible", "accessible_forward", "account_balance", "account_balance_wallet", "account_box", "account_circle", "add_shopping_cart", "addchart", "admin_panel_settings", "alarm", "alarm_add", "alarm_off", "alarm_on", "all_inbox", "all_out", "analytics", "anchor", "android", "announcement", "api", "app_blocking", "arrow_circle_down", "arrow_circle_up", "arrow_right_alt", "article", "aspect_ratio", "assessment", "assignment", "assignment_ind", "assignment_late", "assignment_return", "assignment_returned", "assignment_turned_in", "autorenew", "backup", "backup_table", "batch_prediction", "book", "book_online", "bookmark", "bookmark_border", "bookmarks", "bug_report", "build", "build_circle", "cached", "calendar_today", "calendar_view_day", "camera_enhance", "cancel_schedule_send", "card_giftcard", "card_membership", "card_travel", "change_history", "check_circle", "check_circle_outline", "chrome_reader_mode", "class", "close_fullscreen", "code", "comment_bank", "commute", "compare_arrows", "contact_support", "contactless", "copyright", "credit_card", "dashboard", "date_range", "delete", "delete_forever", "delete_outline", "description", "dns", "done", "done_all", "done_outline", "donut_large", "donut_small", "drag_indicator", "dynamic_form", "eco", "eject", "euro_symbol", "event", "event_seat", "exit_to_app", "explore", "explore_off", "extension", "face", "fact_check", "favorite", "favorite_border", "feedback", "filter_alt", "find_in_page", "find_replace", "fingerprint", "flaky", "flight_land", "flight_takeoff", "flip_to_back", "flip_to_front", "g_translate", "gavel", "get_app", "gif", "grade", "grading", "group_work", "help", "help_center", "help_outline", "highlight_alt", "highlight_off", "history", "history_toggle_off", "home", "horizontal_split", "hourglass_disabled", "hourglass_empty", "hourglass_full", "http", "https", "important_devices", "info", "input", "integration_instructions", "invert_colors", "label", "label_important", "label_off", "language", "launch", "line_style", "line_weight", "list", "lock", "lock_open", "login", "loyalty", "markunread_mailbox", "maximize", "mediation", "minimize", "motorcycle", "note_add", "offline_bolt", "offline_pin", "online_prediction", "opacity", "open_in_browser", "open_in_full", "open_in_new", "open_with", "outlet", "pageview", "pan_tool", "payment", "pending", "pending_actions", "perm_camera_mic", "perm_contact_calendar", "perm_data_setting", "perm_device_information", "perm_identity", "perm_media", "perm_phone_msg", "perm_scan_wifi", "pets", "picture_in_picture", "picture_in_picture_alt", "plagiarism", "play_for_work", "polymer", "power_settings_new", "pregnant_woman", "preview", "print", "privacy_tip", "query_builder", "question_answer", "quickreply", "receipt", "record_voice_over", "redeem", "remove_shopping_cart", "reorder", "report_problem", "request_page", "restore", "restore_from_trash", "restore_page", "room", "rounded_corner", "rowing", "rule", "schedule", "search", "search_off", "settings", "settings_applications", "settings_backup_restore", "settings_bluetooth", "settings_brightness", "settings_cell", "settings_ethernet", "settings_input_antenna", "settings_input_component", "settings_input_composite", "settings_input_hdmi", "settings_input_svideo", "settings_overscan", "settings_phone", "settings_power", "settings_remote", "settings_voice", "shop", "shop_two", "shopping_bag", "shopping_basket", "shopping_cart", "smart_button", "source", "speaker_notes", "speaker_notes_off", "spellcheck", "star_rate", "stars", "store", "subject", "subtitles_off", "supervised_user_circle", "supervisor_account", "support", "swap_horiz", "swap_horizontal_circle", "swap_vert", "swap_vertical_circle", "sync_alt", "system_update_alt", "tab", "tab_unselected", "table_view", "text_rotate_up", "text_rotate_vertical", "text_rotation_angledown", "text_rotation_angleup", "text_rotation_down", "text_rotation_none", "theaters", "thumb_down", "thumb_up", "thumbs_up_down", "timeline", "toc", "today", "toll", "touch_app", "tour", "track_changes", "translate", "trending_down", "trending_flat", "trending_up", "turned_in", "turned_in_not", "update", "upgrade", "verified", "verified_user", "vertical_split", "view_agenda", "view_array", "view_carousel", "view_column", "view_day", "view_headline", "view_list", "view_module", "view_quilt", "view_sidebar", "view_stream", "view_week", "visibility", "visibility_off", "voice_over_off", "watch_later", "wifi_protected_setup", "work", "work_off", "work_outline", "wysiwyg", "youtube_searched_for", "zoom_in", "zoom_out"] }, { name: "alert", icons: ["add_alert", "auto_delete", "error", "error_outline", "notification_important", "warning"] }, { name: "av", icons: ["4k", "5g", "add_to_queue", "airplay", "album", "art_track", "av_timer", "branding_watermark", "call_to_action", "closed_caption", "closed_caption_disabled", "control_camera", "equalizer", "explicit", "fast_forward", "fast_rewind", "featured_play_list", "featured_video", "fiber_dvr", "fiber_manual_record", "fiber_new", "fiber_pin", "fiber_smart_record", "forward_10", "forward_30", "forward_5", "games", "hd", "hearing", "hearing_disabled", "high_quality", "library_add", "library_add_check", "library_books", "library_music", "loop", "mic", "mic_none", "mic_off", "missed_video_call", "movie", "music_video", "new_releases", "not_interested", "note", "pause", "pause_circle_filled", "pause_circle_outline", "play_arrow", "play_circle_filled", "play_circle_filled_white", "play_circle_outline", "playlist_add", "playlist_add_check", "playlist_play", "queue", "queue_music", "queue_play_next", "radio", "recent_actors", "remove_from_queue", "repeat", "repeat_one", "replay", "replay_10", "replay_30", "replay_5", "shuffle", "skip_next", "skip_previous", "slow_motion_video", "snooze", "sort_by_alpha", "speed", "stop", "stop_circle", "subscriptions", "subtitles", "surround_sound", "video_call", "video_label", "video_library", "video_settings", "videocam", "videocam_off", "volume_down", "volume_mute", "volume_off", "volume_up", "web", "web_asset"] }, { name: "communication", icons: ["add_ic_call", "alternate_email", "business", "call", "call_end", "call_made", "call_merge", "call_missed", "call_missed_outgoing", "call_received", "call_split", "cancel_presentation", "wifi", "chat", "chat_bubble", "chat_bubble_outline", "clear_all", "comment", "contact_mail", "contact_phone", "contacts", "desktop_access_disabled", "dialer_sip", "dialpad", "domain_disabled", "domain_verification", "duo", "email", "forum", "forward_to_inbox", "hourglass_bottom", "hourglass_top", "import_contacts", "import_export", "invert_colors_off", "list_alt", "live_help", "location_off", "location_on", "mail_outline", "mark_chat_read", "mark_chat_unread", "mark_email_read", "mark_email_unread", "message", "mobile_screen_share", "more_time", "nat", "no_sim", "pause_presentation", "person_add_disabled", "person_search", "phone", "phone_disabled", "phone_enabled", "phonelink_erase", "phonelink_lock", "phonelink_ring", "phonelink_setup", "portable_wifi_off", "present_to_all", "print_disabled", "qr_code", "qr_code_scanner", "read_more", "ring_volume", "rss_feed", "screen_share", "sentiment_satisfied_alt", "speaker_phone", "stay_current_landscape", "stay_current_portrait", "stay_primary_landscape", "stay_primary_portrait", "stop_screen_share", "swap_calls", "textsms", "unsubscribe", "voicemail", "vpn_key", "wifi_calling"] }, { name: "content", icons: ["add", "add_box", "add_circle", "add_circle_outline", "amp_stories", "archive", "backspace", "ballot", "biotech", "block", "calculate", "clear", "content_copy", "content_cut", "content_paste", "create", "delete_sweep", "drafts", "dynamic_feed", "file_copy", "filter_list", "flag", "font_download", "forward", "gesture", "how_to_reg", "how_to_vote", "inbox", "insights", "link", "link_off", "low_priority", "mail", "markunread", "move_to_inbox", "next_week", "outlined_flag", "policy", "push_pin", "redo", "remove", "remove_circle", "remove_circle_outline", "reply", "reply_all", "report", "report_off", "save", "save_alt", "select_all", "send", "sort", "square_foot", "text_format", "unarchive", "undo", "waves", "weekend", "where_to_vote"] }, { name: "device", icons: ["access_alarm", "access_alarms", "access_time", "ad_units", "add_alarm", "add_to_home_screen", "airplanemode_active", "airplanemode_inactive", "battery_alert", "battery_charging_full", "battery_full", "battery_unknown", "bluetooth", "bluetooth_connected", "bluetooth_disabled", "bluetooth_searching", "brightness_auto", "brightness_high", "brightness_low", "brightness_medium", "data_usage", "developer_mode", "devices", "dvr", "gps_fixed", "graphic_eq", "location_disabled", "location_searching", "mobile_friendly", "mobile_off", "nfc", "screen_lock_landscape", "screen_lock_portrait", "screen_lock_rotation", "screen_rotation", "sd_storage", "settings_system_daydream", "signal_cellular_alt", "signal_cellular_no_sim", "signal_cellular_null", "signal_cellular_off", "signal_wifi_off", "storage", "usb", "wallpaper", "widgets", "wifi_lock", "wifi_tethering"] }, { name: "editor", icons: ["add_comment", "attach_file", "attach_money", "bar_chart", "border_all", "border_bottom", "border_clear", "border_horizontal", "border_inner", "border_left", "border_outer", "border_right", "border_style", "border_top", "border_vertical", "bubble_chart", "drag_handle", "format_align_center", "format_align_justify", "format_align_left", "format_align_right", "format_bold", "format_clear", "format_color_reset", "format_indent_decrease", "format_indent_increase", "format_italic", "format_line_spacing", "format_list_bulleted", "format_list_numbered", "format_list_numbered_rtl", "format_paint", "format_quote", "format_shapes", "format_size", "format_strikethrough", "format_textdirection_l_to_r", "format_textdirection_r_to_l", "format_underlined", "functions", "height", "highlight", "horizontal_rule", "insert_chart", "insert_comment", "insert_drive_file", "insert_emoticon", "insert_invitation", "insert_link", "insert_photo", "linear_scale", "merge_type", "mode_comment", "monetization_on", "money_off", "multiline_chart", "notes", "pie_chart", "post_add", "publish", "scatter_plot", "score", "short_text", "show_chart", "space_bar", "strikethrough_s", "subscript", "superscript", "table_chart", "table_rows", "text_fields", "title", "vertical_align_bottom", "vertical_align_center", "vertical_align_top", "wrap_text"] }, { name: "file", icons: ["attach_email", "attachment", "cloud", "cloud_circle", "cloud_done", "cloud_download", "cloud_off", "cloud_queue", "cloud_upload", "create_new_folder", "folder", "folder_open", "folder_shared", "request_quote", "rule_folder", "snippet_folder", "text_snippet", "topic"] }, { name: "hardware", icons: ["browser_not_supported", "cast", "cast_connected", "cast_for_education", "computer", "desktop_mac", "desktop_windows", "developer_board", "device_hub", "device_unknown", "devices_other", "dock", "gamepad", "headset", "headset_mic", "keyboard", "keyboard_arrow_down", "keyboard_arrow_left", "keyboard_arrow_right", "keyboard_arrow_up", "keyboard_backspace", "keyboard_capslock", "keyboard_hide", "keyboard_return", "keyboard_tab", "keyboard_voice", "laptop", "laptop_chromebook", "laptop_mac", "laptop_windows", "memory", "mouse", "phone_android", "phone_iphone", "phonelink", "phonelink_off", "point_of_sale", "power_input", "router", "scanner", "security", "sim_card", "smartphone", "speaker", "speaker_group", "tablet", "tablet_android", "tablet_mac", "toys", "tv", "videogame_asset", "watch"] }, { name: "home", icons: ["sensor_door", "sensor_window"] }, { name: "image", icons: ["add_a_photo", "add_photo_alternate", "add_to_photos", "adjust", "assistant", "assistant_photo", "audiotrack", "bedtime", "blur_circular", "blur_linear", "blur_off", "blur_on", "brightness_1", "brightness_2", "brightness_3", "brightness_4", "brightness_5", "brightness_6", "brightness_7", "broken_image", "brush", "burst_mode", "camera", "camera_alt", "camera_front", "camera_rear", "camera_roll", "center_focus_strong", "center_focus_weak", "collections", "collections_bookmark", "color_lens", "colorize", "compare", "control_point", "control_point_duplicate", "crop", "crop_16_9", "crop_3_2", "crop_5_4", "crop_7_5", "crop_din", "crop_free", "crop_landscape", "crop_original", "crop_portrait", "crop_rotate", "crop_square", "dehaze", "details", "edit", "euro", "exposure", "exposure_neg_1", "exposure_neg_2", "exposure_plus_1", "exposure_plus_2", "exposure_zero", "filter", "filter_1", "filter_2", "filter_3", "filter_4", "filter_5", "filter_6", "filter_7", "filter_8", "filter_9", "filter_9_plus", "filter_b_and_w", "filter_center_focus", "filter_drama", "filter_frames", "filter_hdr", "filter_none", "filter_tilt_shift", "filter_vintage", "flare", "flash_auto", "flash_off", "flash_on", "flip", "flip_camera_android", "flip_camera_ios", "gradient", "grain", "grid_off", "grid_on", "hdr_off", "hdr_on", "hdr_strong", "hdr_weak", "healing", "image", "image_aspect_ratio", "image_not_supported", "image_search", "iso", "landscape", "leak_add", "leak_remove", "lens", "linked_camera", "looks", "looks_3", "looks_4", "looks_5", "looks_6", "looks_one", "looks_two", "loupe", "monochrome_photos", "motion_photos_on", "motion_photos_paused", "movie_creation", "movie_filter", "music_note", "music_off", "nature", "nature_people", "navigate_before", "navigate_next", "palette", "panorama", "panorama_fish_eye", "panorama_horizontal", "panorama_vertical", "panorama_wide_angle", "photo", "photo_album", "photo_camera", "photo_filter", "photo_library", "photo_size_select_actual", "photo_size_select_large", "photo_size_select_small", "picture_as_pdf", "portrait", "receipt_long", "remove_red_eye", "rotate_90_degrees_ccw", "rotate_left", "rotate_right", "shutter_speed", "slideshow", "straighten", "style", "switch_camera", "switch_video", "tag_faces", "texture", "timelapse", "timer", "timer_10", "timer_3", "timer_off", "tonality", "transform", "tune", "view_comfy", "view_compact", "vignette", "wb_auto", "wb_cloudy", "wb_incandescent", "wb_iridescent", "wb_sunny"] }, { name: "maps", icons: ["360", "add_business", "add_location", "add_location_alt", "add_road", "agriculture", "alt_route", "atm", "beenhere", "bike_scooter", "category", "cleaning_services", "compass_calibration", "departure_board", "design_services", "directions", "directions_bike", "directions_boat", "directions_bus", "directions_car", "directions_railway", "directions_run", "directions_subway", "directions_transit", "directions_walk", "edit_attributes", "edit_location", "edit_road", "electric_bike", "electric_car", "electric_moped", "electric_scooter", "electrical_services", "ev_station", "fastfood", "flight", "handyman", "home_repair_service", "hotel", "hvac", "layers", "layers_clear", "local_activity", "local_airport", "local_atm", "local_bar", "local_cafe", "local_car_wash", "local_convenience_store", "local_dining", "local_drink", "local_fire_department", "local_florist", "local_gas_station", "local_grocery_store", "local_hospital", "local_hotel", "local_laundry_service", "local_library", "local_mall", "local_movies", "local_offer", "local_parking", "local_pharmacy", "local_phone", "local_pizza", "local_play", "local_police", "local_post_office", "local_printshop", "local_see", "local_shipping", "local_taxi", "map", "maps_ugc", "medical_services", "menu_book", "miscellaneous_services", "money", "moped", "multiple_stop", "museum", "my_location", "navigation", "near_me", "no_meals", "no_transfer", "not_listed_location", "pedal_bike", "person_pin", "person_pin_circle", "pest_control", "pest_control_rodent", "pin_drop", "place", "plumbing", "rate_review", "restaurant", "restaurant_menu", "run_circle", "satellite", "store_mall_directory", "streetview", "subway", "terrain", "traffic", "train", "tram", "transfer_within_a_station", "transit_enterexit", "trip_origin", "two_wheeler", "wrong_location", "zoom_out_map"] }, { name: "navigation", icons: ["app_settings_alt", "apps", "arrow_back", "arrow_back_ios", "arrow_downward", "arrow_drop_down", "arrow_drop_down_circle", "arrow_drop_up", "arrow_forward", "arrow_forward_ios", "arrow_left", "arrow_right", "arrow_upward", "campaign", "cancel", "check", "chevron_left", "chevron_right", "close", "double_arrow", "east", "expand_less", "expand_more", "first_page", "fullscreen", "fullscreen_exit", "home_work", "last_page", "legend_toggle", "menu", "menu_open", "more_horiz", "more_vert", "north", "north_east", "north_west", "payments", "refresh", "south", "south_east", "south_west", "subdirectory_arrow_left", "subdirectory_arrow_right", "switch_left", "switch_right", "unfold_less", "unfold_more", "west"] }, { name: "notification", icons: ["account_tree", "adb", "airline_seat_flat", "airline_seat_flat_angled", "airline_seat_individual_suite", "airline_seat_legroom_extra", "airline_seat_legroom_normal", "airline_seat_legroom_reduced", "airline_seat_recline_extra", "airline_seat_recline_normal", "bluetooth_audio", "confirmation_number", "directions_off", "disc_full", "drive_eta", "enhanced_encryption", "event_available", "event_busy", "event_note", "folder_special", "live_tv", "mms", "more", "network_check", "network_locked", "no_encryption", "ondemand_video", "personal_video", "phone_bluetooth_speaker", "phone_callback", "phone_forwarded", "phone_in_talk", "phone_locked", "phone_missed", "phone_paused", "power", "power_off", "priority_high", "sd_card", "sms", "sms_failed", "support_agent", "sync", "sync_disabled", "sync_problem", "system_update", "tap_and_play", "time_to_leave", "tv_off", "vibration", "voice_chat", "vpn_lock", "wc", "wifi", "wifi_off"] }, { name: "places", icons: ["ac_unit", "airport_shuttle", "all_inclusive", "apartment", "baby_changing_station", "backpack", "bathtub", "beach_access", "business_center", "casino", "charging_station", "checkroom", "child_care", "child_friendly", "corporate_fare", "do_not_step", "do_not_touch", "dry", "elevator", "escalator", "escalator_warning", "family_restroom", "fire_extinguisher", "fitness_center", "free_breakfast", "golf_course", "grass", "hot_tub", "house", "kitchen", "meeting_room", "no_cell", "no_drinks", "no_flash", "no_food", "no_meeting_room", "no_photography", "no_stroller", "pool", "room_preferences", "room_service", "rv_hookup", "smoke_free", "smoking_rooms", "soap", "spa", "stairs", "storefront", "stroller", "tty", "umbrella", "wash", "wheelchair_pickup"] }, { name: "social", icons: ["6_ft_apart", "architecture", "cake", "clean_hands", "construction", "deck", "domain", "emoji_emotions", "emoji_events", "emoji_flags", "emoji_food_beverage", "emoji_nature", "emoji_objects", "emoji_people", "emoji_symbols", "emoji_transportation", "engineering", "fireplace", "group", "group_add", "history_edu", "king_bed", "location_city", "luggage", "military_tech", "mood", "mood_bad", "nights_stay", "no_luggage", "notifications", "notifications_active", "notifications_none", "notifications_off", "notifications_paused", "outdoor_grill", "pages", "party_mode", "people", "people_alt", "person", "person_add", "person_add_alt_1", "person_outline", "person_remove", "plus_one", "poll", "psychology", "public", "public_off", "school", "science", "self_improvement", "sentiment_dissatisfied", "sentiment_satisfied", "sentiment_very_dissatisfied", "sentiment_very_satisfied", "share", "single_bed", "sports", "sports_baseball", "sports_basketball", "sports_cricket", "sports_esports", "sports_football", "sports_golf", "sports_handball", "sports_hockey", "sports_kabaddi", "sports_mma", "sports_motorsports", "sports_rugby", "sports_soccer", "sports_tennis", "sports_volleyball", "thumb_down_alt", "thumb_up_alt", "whatshot"] }, { name: "toggle", icons: ["check_box", "check_box_outline_blank", "indeterminate_check_box", "radio_button_checked", "radio_button_unchecked", "star", "star_border", "star_half", "toggle_off", "toggle_on"] }]; const DG = z({ props: { value: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, width: { type: String, default: "half" } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(""), i = V(() => dr.map(o => { if (l.value.length === 0) return o; const s = o.icons.filter(r => r.includes(l.value.toLowerCase())); return Ce(re({}, o), { icons: s, length: s.length }) })); return { t: n, icons: dr, setIcon: u, searchQuery: l, filteredIcons: i, formatTitle: Vt }; function u(o) { l.value = "", t("input", o) } } }), TG = { key: 0, class: "icons" }; function PG(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-divider"), p = c("v-menu"); return m(), C(p, { attached: "", disabled: e.disabled }, { activator: d(({ active: f, activate: v }) => [a(s, { modelValue: e.searchQuery, "onUpdate:modelValue": t[1] || (t[1] = _ => e.searchQuery = _), disabled: e.disabled, placeholder: e.value ? e.formatTitle(e.value) : e.t("interfaces.select-icon.search_for_icon"), class: de({ "has-value": e.value }), nullable: !1, onFocus: v }, et({ append: d(() => [e.value !== null ? (m(), C(o, { key: 0, clickable: "", name: "close", onClick: t[0] || (t[0] = _ => e.setIcon(null)) })) : (m(), C(o, { key: 1, clickable: "", name: "expand_more", class: de(["open-indicator", { open: f }]), onClick: v }, null, 8, ["class", "onClick"]))]), _: 2 }, [e.value ? { name: "prepend", fn: d(() => [a(o, { clickable: "", name: e.value, class: de({ active: e.value }), onClick: v }, null, 8, ["name", "class", "onClick"])]) } : void 0]), 1032, ["modelValue", "disabled", "placeholder", "class", "onFocus"])]), default: d(() => [S("div", { class: de(["content", e.width]) }, [(m(!0), I(se, null, he(e.filteredIcons, (f, v) => (m(), I(se, { key: f.name }, [f.icons.length > 0 ? (m(), I("div", TG, [(m(!0), I(se, null, he(f.icons, _ => (m(), C(o, { key: _, name: _, class: de({ active: _ === e.value }), clickable: "", onClick: y => e.setIcon(_) }, null, 8, ["name", "class", "onClick"]))), 128))])) : R("", !0), f.icons.length > 0 && v !== e.filteredIcons.length - 1 ? (m(), C(r, { key: 1 })) : R("", !0)], 64))), 128))], 2)]), _: 1 }, 8, ["disabled"]) } var OG = B(DG, [["render", PG], ["__scopeId", "data-v-80080b9a"]]), LG = Me({ id: "select-icon", name: "$t:interfaces.select-icon.icon", description: "$t:interfaces.select-icon.description", icon: "insert_emoticon", component: OG, types: ["string"], group: "selection", options: [], recommendedDisplays: ["icon"] }), jG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: LG }); const RG = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: Array, default: null }, choices: { type: Array, default: null }, allowOther: { type: Boolean, default: !1 }, width: { type: String, default: null }, iconOn: { type: String, default: "check_box" }, iconOff: { type: String, default: "check_box_outline_blank" }, color: { type: String, default: "var(--primary)" }, itemsShown: { type: Number, default: 8 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { choices: l, value: i } = je(e), u = E(!1), o = V(() => e.choices.length > e.itemsShown), s = V(() => u.value || o.value === !1 ? e.choices : e.choices.slice(0, e.itemsShown)), r = V(() => e.choices.length - e.itemsShown), p = V(() => { var g; if (l.value === null) return null; const y = l.value.reduce((w, h) => (h.text.length > w.length && (w = h.text), w), "").length; return ((g = e.width) == null ? void 0 : g.startsWith("half")) ? y <= 10 ? "grid-2" : "grid-1" : y <= 10 ? "grid-4" : y > 10 && y <= 15 ? "grid-3" : y > 15 && y <= 25 ? "grid-2" : "grid-1" }), { otherValues: f, addOtherValue: v, setOtherValue: _ } = Os(i, l, y => t("input", y)); return { t: n, gridClass: p, otherValues: f, addOtherValue: v, setOtherValue: _, choicesDisplayed: s, hideChoices: o, showAll: u, hiddenCount: r } } }), MG = ["disabled"]; function UG(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-checkbox"), r = c("v-detail"), p = c("v-icon"); return e.choices ? (m(), I("div", { key: 1, class: de(["checkboxes", e.gridClass]), style: Ke({ "--v-checkbox-color": e.color }) }, [(m(!0), I(se, null, he(e.choicesDisplayed, f => (m(), C(s, { key: f.value, block: "", value: f.value, label: f.text, disabled: e.disabled, "icon-on": e.iconOn, "icon-off": e.iconOff, "model-value": e.value || [], "onUpdate:modelValue": t[0] || (t[0] = v => e.$emit("input", v)) }, null, 8, ["value", "label", "disabled", "icon-on", "icon-off", "model-value"]))), 128)), e.hideChoices && e.showAll === !1 ? (m(), C(r, { key: 0, class: de(e.gridClass), label: e.t("interfaces.select-multiple-checkbox.show_more", { count: e.hiddenCount }), "onUpdate:modelValue": t[1] || (t[1] = f => e.showAll = !0) }, null, 8, ["class", "label"])) : R("", !0), e.allowOther ? (m(), I(se, { key: 1 }, [(m(!0), I(se, null, he(e.otherValues, f => (m(), C(s, { key: f.key, block: "", "custom-value": "", value: f.value, disabled: e.disabled, "icon-on": e.iconOn, "icon-off": e.iconOff, "model-value": e.value || [], "onUpdate:value": v => e.setOtherValue(f.key, v), "onUpdate:modelValue": t[2] || (t[2] = v => e.$emit("input", v)) }, null, 8, ["value", "disabled", "icon-on", "icon-off", "model-value", "onUpdate:value"]))), 128)), e.allowOther ? (m(), I("button", { key: 0, disabled: e.disabled, class: "add-new custom", align: "left", outlined: "", dashed: "", secondary: "", onClick: t[3] || (t[3] = f => e.addOtherValue()) }, [a(p, { name: "add" }), D(" " + b(e.t("other")), 1)], 8, MG)) : R("", !0)], 64)) : R("", !0)], 6)) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("choices_option_configured_incorrectly")), 1)]), _: 1 })) } var NG = B(RG, [["render", UG], ["__scopeId", "data-v-eb2534aa"]]), BG = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="54" y="36" width="70" height="6" rx="2" fill="var(--primary)" />
	<path
		d="M43.0742 33.75H34.9258C34.2695 33.75 33.75 34.2695 33.75 34.9258V43.0742C33.75 43.7305 34.2695 44.25 34.9258 44.25H43.0742C43.7305 44.25 44.25 43.7305 44.25 43.0742V34.9258C44.25 34.2695 43.7305 33.75 43.0742 33.75ZM43.0742 43.0742H34.9258V34.9258H43.0742V43.0742ZM42.5 37.25L41.6797 36.4297L37.8242 40.2578L36.3203 38.7539L35.5 39.6016L37.8242 41.9258L42.5 37.25Z"
		fill="var(--primary)" />
	<rect x="54" y="72" width="50" height="6" rx="2" fill="var(--primary)" />
	<path
		d="M43.0742 69.75H34.9258C34.2695 69.75 33.75 70.2695 33.75 70.9258V79.0742C33.75 79.7305 34.2695 80.25 34.9258 80.25H43.0742C43.7305 80.25 44.25 79.7305 44.25 79.0742V70.9258C44.25 70.2695 43.7305 69.75 43.0742 69.75ZM43.0742 79.0742H34.9258V70.9258H43.0742V79.0742ZM42.5 73.25L41.6797 72.4297L37.8242 76.2578L36.3203 74.7539L35.5 75.6016L37.8242 77.9258L42.5 73.25Z"
		fill="var(--primary)" />
	<rect x="54" y="18" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path
		d="M43.0742 16.9258V25.0742H34.9258V16.9258H43.0742ZM43.0742 15.75H34.9258C34.2695 15.75 33.75 16.2695 33.75 16.9258V25.0742C33.75 25.7305 34.2695 26.25 34.9258 26.25H43.0742C43.7305 26.25 44.25 25.7305 44.25 25.0742V16.9258C44.25 16.2695 43.7305 15.75 43.0742 15.75Z"
		fill="var(--primary)" fill-opacity="0.25" />
	<rect x="54" y="54" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path
		d="M43.0742 52.9258V61.0742H34.9258V52.9258H43.0742ZM43.0742 51.75H34.9258C34.2695 51.75 33.75 52.2695 33.75 52.9258V61.0742C33.75 61.7305 34.2695 62.25 34.9258 62.25H43.0742C43.7305 62.25 44.25 61.7305 44.25 61.0742V52.9258C44.25 52.2695 43.7305 51.75 43.0742 51.75Z"
		fill="var(--primary)" fill-opacity="0.25" />
</svg>
`, qG = Me({ id: "select-multiple-checkbox", name: "$t:interfaces.select-multiple-checkbox.checkboxes", icon: "check_box", component: NG, description: "$t:interfaces.select-multiple-checkbox.description", types: ["json", "csv"], group: "selection", preview: BG, options: [{ field: "choices", type: "json", name: "$t:choices", meta: { width: "full", interface: "list", options: { template: "{{ text }}", fields: [{ field: "text", type: "string", name: "$t:text", meta: { width: "half", interface: "input", options: { placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }, { field: "value", type: "string", name: "$t:value", meta: { width: "half", interface: "input", options: { font: "monospace", placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }] } } }, { field: "allowOther", name: "$t:interfaces.select-multiple-checkbox.allow_other", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:enable_custom_values" } }, schema: { default_value: !1 } }, { field: "color", name: "$t:color", type: "string", meta: { width: "half", interface: "select-color" }, schema: { default_value: "#00C897" } }, { field: "iconOn", name: "$t:icon_on", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "check_box" } }, { field: "iconOff", name: "$t:icon_off", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "check_box_outline_blank" } }, { field: "itemsShown", name: "$t:interfaces.select-multiple-checkbox.items_shown", type: "integer", meta: { width: "half", interface: "input" }, schema: { default_value: 8 } }], recommendedDisplays: ["labels"] }), zG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: qG }); const KG = z({ props: { value: { type: Array, default: () => [] }, disabled: { type: Boolean, default: !1 }, choices: { type: Array, default: () => [] }, valueCombining: { type: String, default: "all" } }, emits: ["input"], setup() { const { t: e } = x(), t = E(""), n = E(!1), l = M.exports.debounce(u => { i.value = u }, 250); _e(t, l); const i = E(""); return { search: t, t: e, searchDebounced: i, showSelectionOnly: n } } }), HG = { class: "select-multiple-checkbox-tree" }, WG = { class: "search" }, GG = { class: "footer" }, JG = D(" / "); function QG(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-checkbox-tree"); return m(), I("div", HG, [S("div", WG, [a(s, { modelValue: e.search, "onUpdate:modelValue": t[1] || (t[1] = p => e.search = p), class: "input", type: "text", placeholder: e.t("search") }, et({ prepend: d(() => [a(o, { name: "search" })]), _: 2 }, [e.search ? { name: "append", fn: d(() => [a(o, { name: "clear", clickable: "", onClick: t[0] || (t[0] = p => e.search = "") })]) } : void 0]), 1032, ["modelValue", "placeholder"])]), a(r, { "model-value": e.value, search: e.searchDebounced, disabled: e.disabled, choices: e.choices, "value-combining": e.valueCombining, "show-selection-only": e.showSelectionOnly, "onUpdate:modelValue": t[2] || (t[2] = p => e.$emit("input", p)) }, null, 8, ["model-value", "search", "disabled", "choices", "value-combining", "show-selection-only"]), S("div", GG, [S("span", { class: de({ active: e.showSelectionOnly === !1 }), onClick: t[3] || (t[3] = p => e.showSelectionOnly = !1) }, b(e.t("interfaces.select-multiple-checkbox-tree.show_all")), 3), JG, S("span", { class: de({ active: e.showSelectionOnly === !0 }), onClick: t[4] || (t[4] = p => e.showSelectionOnly = !0) }, b(e.t("interfaces.select-multiple-checkbox-tree.show_selected")), 3)])]) } var XG = B(KG, [["render", QG], ["__scopeId", "data-v-4588d42a"]]); const Go = [{ field: "text", type: "string", name: "$t:text", meta: { width: "half", interface: "input", options: { placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }, { field: "value", type: "string", name: "$t:value", meta: { width: "half", interface: "input", options: { font: "monospace", placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }], ur = { field: "children", type: "json", name: "$t:children", meta: { width: "full", interface: "list", options: { fields: Go } } }; function cr(e = 0, t = 3) { return e < t ? [...Go, Ce(re({}, ur), { meta: Ce(re({}, ur.meta), { options: { fields: cr(e + 1) } }) })] : Go } var ZG = Me({ id: "select-multiple-checkbox-tree", name: "$t:interfaces.select-multiple-checkbox-tree.name", icon: "account_tree", component: XG, description: "$t:interfaces.select-multiple-checkbox-tree.description", types: ["json", "csv"], group: "selection", options: [{ field: "choices", type: "json", name: "$t:choices", meta: { width: "full", interface: "list", options: { template: "{{ text }}", fields: cr() } } }, { field: "valueCombining", type: "string", name: "$t:interfaces.select-multiple-checkbox-tree.value_combining", schema: { default_value: "all" }, meta: { note: "$t:interfaces.select-multiple-checkbox-tree.value_combining_note", interface: "select-dropdown", options: { choices: [{ text: "$t:all", value: "all" }, { text: "$t:branch", value: "branch" }, { text: "$t:leaf", value: "leaf" }, { text: "$t:indeterminate", value: "indeterminate" }, { text: "$t:exclusive", value: "exclusive" }] } } }], recommendedDisplays: ["labels"] }), YG = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: ZG }); const xG = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: Array, default: null }, choices: { type: Array, default: null }, icon: { type: String, default: null }, allowNone: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, allowOther: { type: Boolean, default: !1 } }, emits: ["input"], setup() { const { t: e } = x(); return { t: e } } }); function eJ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-icon"), r = c("v-select"); return e.choices ? (m(), C(r, { key: 1, multiple: "", "model-value": e.value, items: e.choices, disabled: e.disabled, "show-deselect": e.allowNone, placeholder: e.placeholder, "allow-other": e.allowOther, "close-on-content-click": !1, "onUpdate:modelValue": t[0] || (t[0] = p => e.$emit("input", p)) }, et({ _: 2 }, [e.icon ? { name: "prepend", fn: d(() => [a(s, { name: e.icon }, null, 8, ["name"])]) } : void 0]), 1032, ["model-value", "items", "disabled", "show-deselect", "placeholder", "allow-other"])) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("choices_option_configured_incorrectly")), 1)]), _: 1 })) } var tJ = B(xG, [["render", eJ]]), nJ = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="18" y="15" width="120" height="66" rx="6" fill="var(--background-page)" class="glow" />
	<rect x="19" y="16" width="118" height="64" rx="5" stroke="var(--primary)" stroke-width="2" />
	<rect x="28" y="25" width="80" height="6" rx="2" fill="var(--primary)" />
	<rect x="28" y="45.1479" width="70" height="6" rx="2" fill="var(--primary)" />
	<rect x="28" y="55.2222" width="80" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="28" y="65.2959" width="90" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<rect x="28" y="35.0737" width="90" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
</svg>
`, lJ = Me({ id: "select-multiple-dropdown", name: "$t:interfaces.select-multiple-dropdown.select-multiple-dropdown", description: "$t:interfaces.select-multiple-dropdown.description", icon: "arrow_drop_down_circle", component: tJ, types: ["json", "csv"], group: "selection", preview: nJ, options: [{ field: "choices", type: "json", name: "$t:choices", meta: { width: "full", interface: "list", options: { placeholder: "$t:interfaces.select-dropdown.choices_placeholder", template: "{{ text }}", fields: [{ field: "text", type: "string", name: "$t:text", meta: { width: "half", interface: "input", options: { placeholder: "$t:interfaces.select-dropdown.choices_name_placeholder" } } }, { field: "value", type: "string", name: "$t:value", meta: { width: "half", interface: "input", options: { font: "monospace", placeholder: "$t:interfaces.select-dropdown.choices_value_placeholder" } } }] } } }, { field: "allowOther", name: "$t:interfaces.select-dropdown.allow_other", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_other_label" } }, schema: { default_value: !1 } }, { field: "allowNone", name: "$t:interfaces.select-dropdown.allow_none", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_none_label" } }, schema: { default_value: !1 } }, { field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "half", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "icon", name: "$t:icon", type: "string", meta: { width: "half", interface: "select-icon" } }], recommendedDisplays: ["labels"] }), oJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: lJ }); const aJ = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null }, choices: { type: Array, default: null }, allowOther: { type: Boolean, default: !1 }, width: { type: String, default: null }, iconOn: { type: String, default: "radio_button_checked" }, iconOff: { type: String, default: "radio_button_unchecked" }, color: { type: String, default: "var(--primary)" } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { choices: l, value: i } = je(e), u = V(() => { var f; if (l.value === null) return null; const p = l.value.reduce((v, _) => (_.text.length > v.length && (v = _.text), v), "").length; return ((f = e.width) == null ? void 0 : f.startsWith("half")) ? p <= 10 ? "grid-2" : "grid-1" : p <= 10 ? "grid-4" : p > 10 && p <= 15 ? "grid-3" : p > 15 && p <= 25 ? "grid-2" : "grid-1" }), { otherValue: o, usesOtherValue: s } = Ps(i, l, p => t("input", p)), r = V(() => o.value ? o.value && s.value === !0 ? e.iconOn : e.iconOff : "add"); return { t: n, gridClass: u, otherValue: o, usesOtherValue: s, customIcon: r } } }), iJ = ["placeholder", "disabled"]; function sJ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-radio"), r = c("v-icon"); return e.choices ? (m(), I("div", { key: 1, class: de(["radio-buttons", e.gridClass]), style: Ke({ "--v-radio-color": e.color }) }, [(m(!0), I(se, null, he(e.choices, p => (m(), C(s, { key: p.value, block: "", value: p.value, label: p.text, disabled: e.disabled, "icon-on": e.iconOn, "icon-off": e.iconOff, "model-value": e.value, "onUpdate:modelValue": t[0] || (t[0] = f => e.$emit("input", f)) }, null, 8, ["value", "label", "disabled", "icon-on", "icon-off", "model-value"]))), 128)), e.allowOther ? (m(), I("div", { key: 0, class: de(["custom", { active: !e.disabled && e.usesOtherValue, "has-value": !e.disabled && e.otherValue, disabled: e.disabled }]) }, [a(r, { disabled: e.disabled, name: e.customIcon, clickable: "", onClick: t[1] || (t[1] = p => e.$emit("input", e.otherValue)) }, null, 8, ["disabled", "name"]), ee(S("input", { "onUpdate:modelValue": t[2] || (t[2] = p => e.otherValue = p), placeholder: e.t("other"), disabled: e.disabled, onFocus: t[3] || (t[3] = p => e.$emit("input", e.otherValue)) }, null, 40, iJ), [[Hl, e.otherValue]])], 2)) : R("", !0)], 6)) : (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("choices_option_configured_incorrectly")), 1)]), _: 1 })) } var rJ = B(aJ, [["render", sJ], ["__scopeId", "data-v-3c9fc610"]]), dJ = `<svg width="156" height="96" viewBox="0 0 156 96" fill="none" xmlns="http://www.w3.org/2000/svg">
	<rect x="54" y="36" width="70" height="6" rx="2" fill="var(--primary)" />
	<path
		d="M39 33.1758C35.7734 33.1758 33.1758 35.7734 33.1758 39C33.1758 42.2266 35.7734 44.8242 39 44.8242C42.2266 44.8242 44.8242 42.2266 44.8242 39C44.8242 35.7734 42.2266 33.1758 39 33.1758ZM39 43.6758C36.4297 43.6758 34.3242 41.5703 34.3242 39C34.3242 36.4297 36.4297 34.3242 39 34.3242C41.5703 34.3242 43.6758 36.4297 43.6758 39C43.6758 41.5703 41.5703 43.6758 39 43.6758ZM36.0742 39C36.0742 37.3867 37.3867 36.0742 39 36.0742C40.6133 36.0742 41.9258 37.3867 41.9258 39C41.9258 40.6133 40.6133 41.9258 39 41.9258C37.3867 41.9258 36.0742 40.6133 36.0742 39Z"
		fill="var(--primary)" />
	<rect x="54" y="72" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path
		d="M39 69.1758C35.7734 69.1758 33.1758 71.7734 33.1758 75C33.1758 78.2266 35.7734 80.8242 39 80.8242C42.2266 80.8242 44.8242 78.2266 44.8242 75C44.8242 71.7734 42.2266 69.1758 39 69.1758ZM39 79.6758C36.4297 79.6758 34.3242 77.5703 34.3242 75C34.3242 72.4297 36.4297 70.3242 39 70.3242C41.5703 70.3242 43.6758 72.4297 43.6758 75C43.6758 77.5703 41.5703 79.6758 39 79.6758Z"
		fill="var(--primary)" fill-opacity="0.25" />
	<rect x="54" y="18" width="50" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path
		d="M39 15.1758C35.7734 15.1758 33.1758 17.7734 33.1758 21C33.1758 24.2266 35.7734 26.8242 39 26.8242C42.2266 26.8242 44.8242 24.2266 44.8242 21C44.8242 17.7734 42.2266 15.1758 39 15.1758ZM39 25.6758C36.4297 25.6758 34.3242 23.5703 34.3242 21C34.3242 18.4297 36.4297 16.3242 39 16.3242C41.5703 16.3242 43.6758 18.4297 43.6758 21C43.6758 23.5703 41.5703 25.6758 39 25.6758Z"
		fill="var(--primary)" fill-opacity="0.25" />
	<rect x="54" y="54" width="60" height="6" rx="2" fill="var(--primary)" fill-opacity="0.25" />
	<path
		d="M39 51.1758C35.7734 51.1758 33.1758 53.7734 33.1758 57C33.1758 60.2266 35.7734 62.8242 39 62.8242C42.2266 62.8242 44.8242 60.2266 44.8242 57C44.8242 53.7734 42.2266 51.1758 39 51.1758ZM39 61.6758C36.4297 61.6758 34.3242 59.5703 34.3242 57C34.3242 54.4297 36.4297 52.3242 39 52.3242C41.5703 52.3242 43.6758 54.4297 43.6758 57C43.6758 59.5703 41.5703 61.6758 39 61.6758Z"
		fill="var(--primary)" fill-opacity="0.25" />
</svg>
`, uJ = Me({ id: "select-radio", name: "$t:interfaces.select-radio.radio-buttons", description: "$t:interfaces.select-radio.description", icon: "radio_button_checked", component: rJ, types: ["string"], recommendedDisplays: ["badge"], group: "selection", preview: dJ, options: [{ field: "choices", type: "json", name: "$t:choices", meta: { width: "full", interface: "list", options: { template: "{{ text }}", fields: [{ field: "text", type: "string", name: "$t:text", meta: { width: "half", interface: "input" } }, { field: "value", type: "string", name: "$t:value", meta: { width: "half", interface: "input", options: { font: "monospace" } } }] } } }, { field: "iconOn", name: "$t:icon_on", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "radio_button_checked" } }, { field: "iconOff", name: "$t:icon_off", type: "string", meta: { width: "half", interface: "select-icon" }, schema: { default_value: "radio_button_unchecked" } }, { field: "color", name: "$t:color", type: "string", meta: { width: "half", interface: "select-color" } }, { field: "allowOther", name: "$t:interfaces.select-dropdown.allow_other", type: "string", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_other_label" } }, schema: { default_value: !1 } }] }), cJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: uJ }); const pJ = z({ props: { value: { type: Number, default: null }, disabled: { type: Boolean, default: !1 }, minValue: { type: Number, default: 0 }, maxValue: { type: Number, default: 100 }, stepInterval: { type: Number, default: 1 }, alwaysShowValue: { type: Boolean, default: !1 } }, emits: ["input"] }); function mJ(e, t, n, l, i, u) { const o = c("v-slider"); return m(), C(o, { "model-value": e.value, disabled: e.disabled, min: e.minValue, max: e.maxValue, step: e.stepInterval, "always-show-value": e.alwaysShowValue, "show-thumb-label": "", "show-ticks": "", "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("input", s)) }, null, 8, ["model-value", "disabled", "min", "max", "step", "always-show-value"]) } var fJ = B(pJ, [["render", mJ], ["__scopeId", "data-v-26b36e86"]]), vJ = Me({ id: "slider", name: "$t:interfaces.slider.slider", description: "$t:interfaces.slider.description", icon: "linear_scale", component: fJ, types: ["integer", "decimal", "float", "bigInteger"], group: "other", options: [{ field: "minValue", name: "$t:interfaces.input.minimum_value", type: "integer", meta: { width: "half", interface: "input" } }, { field: "maxValue", name: "$t:interfaces.input.maximum_value", type: "integer", meta: { width: "half", interface: "input" } }, { field: "stepInterval", name: "$t:interfaces.input.step_interval", type: "integer", meta: { width: "half", interface: "input" } }, { field: "alwaysShowValue", name: "$t:interfaces.slider.always_show_value", type: "boolean", meta: { width: "half", interface: "boolean" } }] }), _J = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: vJ }); const yJ = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: Array, default: null }, placeholder: { type: String, default: null }, whitespace: { type: String, default: null }, capitalization: { type: String, default: null }, alphabetize: { type: Boolean, default: !1 }, iconLeft: { type: String, default: null }, iconRight: { type: String, default: "local_offer" }, presets: { type: Array, default: null }, allowCustom: { type: Boolean, default: !0 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = V(() => e.presets !== null ? s(e.presets) : []), i = E(s(e.value || [])); _e(() => e.value, y => { Array.isArray(y) && (i.value = s(y)), y === null && (i.value = []) }); const u = V(() => { let y = s(i.value); return e.allowCustom || (y = y.filter(g => l.value.includes(g))), y }), o = V(() => u.value.filter(y => !l.value.includes(y))); function s(y) { return y = y.map(g => { g = g.trim(), e.capitalization === "uppercase" && (g = g.toUpperCase()), e.capitalization === "lowercase" && (g = g.toLowerCase()); const w = e.whitespace === null ? " " : e.whitespace; return e.capitalization === "auto-format" && (g = Vt(g, new RegExp(w))), g = g.replace(/ +/g, w), g }), e.alphabetize && (y = y.concat().sort()), y = [...new Set(y)], y } return { t: n, onInput: r, addTag: f, removeTag: v, toggleTag: p, presetVals: l, customVals: o, selectedVals: u }; function r(y) { y.target && (y.key === "Enter" || y.key === ",") && (y.preventDefault(), f(y.target.value), y.target.value = "") } function p(y) { u.value.includes(y) ? v(y) : f(y) } function f(y) { !y || y === "" || (y = y.trim(), i.value.push(y), _()) } function v(y) { i.value = i.value.filter(g => g !== y), _() } function _() { t("input", u.value) } } }), gJ = { class: "interface-tags" }, hJ = { key: 1, class: "tags" }, bJ = { key: 0, class: "presets tag-container" }, $J = { key: 1, class: "custom tag-container" }; function wJ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-input"), r = c("v-chip"); return m(), I("div", gJ, [e.allowCustom ? (m(), C(s, { key: 0, placeholder: e.placeholder || e.t("interfaces.tags.add_tags"), disabled: e.disabled, onKeydown: e.onInput }, et({ append: d(() => [a(o, { name: e.iconRight }, null, 8, ["name"])]), _: 2 }, [e.iconLeft ? { name: "prepend", fn: d(() => [a(o, { name: e.iconLeft }, null, 8, ["name"])]) } : void 0]), 1032, ["placeholder", "disabled", "onKeydown"])) : R("", !0), e.presetVals.length > 0 || e.customVals.length > 0 ? (m(), I("div", hJ, [e.presetVals.length > 0 ? (m(), I("span", bJ, [(m(!0), I(se, null, he(e.presetVals, p => (m(), C(r, { key: p, class: de(["tag", { inactive: !e.selectedVals.includes(p) }]), disabled: e.disabled, small: "", label: "", clickable: "", onClick: f => e.toggleTag(p) }, { default: d(() => [D(b(p), 1)]), _: 2 }, 1032, ["class", "disabled", "onClick"]))), 128))])) : R("", !0), e.customVals.length > 0 && e.allowCustom ? (m(), I("span", $J, [e.presetVals.length > 0 ? (m(), C(o, { key: 0, class: "custom-tags-delimeter", name: "chevron_right" })) : R("", !0), (m(!0), I(se, null, he(e.customVals, p => (m(), C(r, { key: p, disabled: e.disabled, class: "tag", small: "", label: "", clickable: "", onClick: f => e.removeTag(p) }, { default: d(() => [D(b(p), 1)]), _: 2 }, 1032, ["disabled", "onClick"]))), 128))])) : R("", !0)])) : R("", !0)]) } var kJ = B(yJ, [["render", wJ], ["__scopeId", "data-v-5f85ff84"]]), SJ = Me({ id: "tags", name: "$t:interfaces.tags.tags", description: "$t:interfaces.tags.description", icon: "local_offer", component: kJ, types: ["json", "csv"], group: "standard", options: [{ field: "presets", name: "$t:presets", type: "string", meta: { width: "full", interface: "tags" } }, { field: "placeholder", name: "$t:placeholder", type: "string", meta: { width: "full", interface: "input", options: { placeholder: "$t:enter_a_placeholder" } } }, { field: "alphabetize", name: "$t:interfaces.tags.alphabetize", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.tags.alphabetize_label" } }, schema: { default_value: !1 } }, { field: "allowCustom", name: "$t:interfaces.select-dropdown.allow_other", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.select-dropdown.allow_other_label" } }, schema: { default_value: !0 } }, { field: "whitespace", name: "$t:interfaces.tags.whitespace", type: "string", meta: { width: "half", interface: "select-dropdown", options: { allowNone: !0, choices: [{ text: "$t:interfaces.tags.hyphen", value: "-" }, { text: "$t:interfaces.tags.underscore", value: "_" }, { text: "$t:interfaces.tags.remove", value: "" }] } } }, { field: "capitalization", name: "$t:interfaces.tags.capitalization", type: "string", meta: { width: "half", interface: "select-dropdown", options: { allowNone: !0, choices: [{ text: "$t:interfaces.tags.uppercase", value: "uppercase" }, { text: "$t:interfaces.tags.lowercase", value: "lowercase" }, { text: "$t:interfaces.tags.auto_formatter", value: "auto-format" }] } } }, { field: "iconLeft", name: "$t:icon_left", type: "string", meta: { width: "half", interface: "select-icon" } }, { field: "iconRight", name: "$t:icon_right", type: "string", meta: { width: "half", interface: "select-icon" } }], recommendedDisplays: ["labels"] }), CJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: SJ }); const VJ = z({ components: {}, props: { modelValue: { type: String, default: null }, items: { type: Array, default: () => [] }, secondary: { type: Boolean, default: !1 } }, emits: ["update:modelValue"], setup(e) { return { displayValue: V(() => { var l; const n = e.items.find(i => i.value === e.modelValue); return (l = n == null ? void 0 : n.text) != null ? l : e.modelValue }) } } }), FJ = ["onClick"], AJ = { class: "display-value" }, IJ = { class: "append-slot" }, EJ = { class: "start" }, DJ = { class: "end" }; function TJ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-progress-linear"), r = c("v-list-item"), p = c("v-list"), f = c("v-menu"), v = we("tooltip"); return m(), C(f, { attached: "", class: de(["language-select", { secondary: e.secondary }]) }, { activator: d(({ toggle: _, active: y }) => [S("button", { class: "toggle", onClick: _ }, [a(o, { class: "translate", name: "translate" }), S("span", AJ, b(e.displayValue), 1), a(o, { name: "expand_more", class: de({ active: y }) }, null, 8, ["class"]), S("span", IJ, [ye(e.$slots, "append", {}, void 0, !0)])], 8, FJ)]), default: d(() => [a(p, null, { default: d(() => [(m(!0), I(se, null, he(e.items, (_, y) => (m(), C(r, { key: y, onClick: g => e.$emit("update:modelValue", _.value) }, { default: d(() => [S("div", EJ, [S("div", { class: de(["dot", { show: _.edited }]) }, null, 2), D(" " + b(_.text), 1)]), S("div", DJ, [ee(a(s, { value: _.progress, rounded: "", colorful: "" }, null, 8, ["value"]), [[v, `${Math.round(_.current / _.max * 100)}%`]])])]), _: 2 }, 1032, ["onClick"]))), 128))]), _: 1 })]), _: 3 }, 8, ["class"]) } var PJ = B(VJ, [["render", TJ], ["__scopeId", "data-v-0ebb08d8"]]); function OJ(e = { throttle: 100 }) { const t = E(0), n = E(0); function l() { t.value = window.innerWidth, n.value = window.innerHeight } const i = M.exports.throttle(l, e.throttle); return na(l), at(() => { window.addEventListener("resize", i, { passive: !0 }) }), At(() => { window.removeEventListener("resize", i) }), { width: t, height: n } } const LJ = z({ components: { LanguageSelect: PJ }, props: { collection: { type: String, required: !0 }, field: { type: String, required: !0 }, primaryKey: { type: [Number, String], required: !0 }, languageField: { type: String, default: null }, value: { type: Array, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { collection: n, field: l } = je(e), { t: i } = x(), u = Pe(), o = Ze(), { width: s } = OJ(), r = E(!1), p = E(), f = E(), { info: v } = ot(n); _e(r, ae => { const ne = A.value; ae && f.value === p.value && (f.value = ne[0].value === p.value ? ne[1].value : ne[0].value) }); const { junction: _, junctionCollection: y, junctionPrimaryKeyField: g, relation: w, relationCollection: h, relationPrimaryKeyField: k } = Pl(n, l), F = V(() => w.value ? w.value.field : null), { languageOptions: A, loading: P } = X(), { items: L, firstItem: T, loading: N, updateValue: O, secondItem: U, firstItemInitial: q, secondItemInitial: K } = ve(), W = V(() => y.value === null ? [] : u.getFieldsForCollection(y.value.collection)), te = V(() => s.value > 960 && A.value.length > 1), G = V(() => te.value && r.value); return { collectionInfo: v, splitView: r, firstLang: p, secondLang: f, t: i, languageOptions: A, fields: W, translationsRelation: _, translationsCollection: y, translationsPrimaryKeyField: g, languagesRelation: w, languagesCollection: h, languagesPrimaryKeyField: k, translationsLanguageField: F, items: L, firstItem: T, secondItem: U, updateValue: O, firstItemInitial: q, secondItemInitial: K, splitViewAvailable: te, splitViewEnabled: G, languagesLoading: P, valuesLoading: N }; function X() { const ae = E([]), ne = E(!1), Y = E(null); return _e(h, pe, { immediate: !0 }), { languageOptions: V(() => { const H = F.value; if (H === null) return []; const Q = W.value.filter(le => { var fe; return le.type !== "alias" && ((fe = le.meta) == null ? void 0 : fe.hidden) === !1 && le.meta.readonly === !1 }), Z = Q.length; return ae.value.map(le => { var ge, be, ke; if (k.value === null) return le; const fe = le[k.value.field], J = (ge = L.value.find(Ie => Ie[H] === fe)) != null ? ge : {}, ie = (be = e.value) == null ? void 0 : be.find(Ie => typeof Ie == "object" && Ie[H] === fe), oe = re(re({}, J), ie != null ? ie : {}), me = Q.filter(Ie => Ie.field in oe && Ut(oe[Ie.field])).length; return { text: le[(ke = e.languageField) != null ? ke : k.value.field], value: fe, edited: ie !== void 0, progress: Math.round(me / Z * 100), max: Z, current: me } }) }), loading: ne, error: Y }; async function pe() { var Q, Z, le, fe, J, ie, oe; if (!h.value || !k.value) return; const H = new Set; e.languageField !== null && H.add(e.languageField), H.add(k.value.field), ne.value = !0; try { const me = await ue.get(`/items/${h.value.collection}`, { params: { fields: Array.from(H), limit: -1, sort: (Q = e.languageField) != null ? Q : k.value.field } }); if (ae.value = me.data.data, !p.value) { const ge = (le = (Z = me.data.data) == null ? void 0 : Z.find(be => be[k.value.field] === o.currentUser.language)) == null ? void 0 : le[k.value.field]; p.value = ge || ((J = (fe = me.data.data) == null ? void 0 : fe[0]) == null ? void 0 : J[k.value.field]) } f.value || (f.value = (oe = (ie = me.data.data) == null ? void 0 : ie[1]) == null ? void 0 : oe[k.value.field]) } catch (me) { Ve(me) } finally { ne.value = !1 } } } function ve() { const ae = E([]), ne = E(!1), Y = E(null), ce = V(() => fe(p)), pe = V(() => fe(f)), H = V(() => le(p)), Q = V(() => le(f)); _e(() => e.value, (oe, me) => { oe && oe !== me && (oe == null ? void 0 : oe.every(ge => typeof ge == "string" || typeof ge == "number")) && J(), (oe === null || oe.length === 0) && (ae.value = []) }, { immediate: !0 }); const Z = V(() => { var ge, be; const oe = (ge = g.value) == null ? void 0 : ge.field; if (!oe) return []; const me = [...ae.value.map(ke => ke[oe])]; return (be = e.value) == null || be.forEach(ke => { if (typeof ke == "object") if (oe in ke) { const Ie = me.findIndex(De => De === ke[oe]); me[Ie] = ke } else me.push(ke) }), me }); return { items: ae, firstItem: ce, updateValue: ie, secondItem: pe, firstItemInitial: H, secondItemInitial: Q, loading: ne, error: Y }; function le(oe) { var be; const me = Rn(oe), ge = F.value; return ge === null ? {} : (be = ae.value.find(ke => ke[ge] === me)) != null ? be : {} } function fe(oe) { var be, ke; const me = Rn(oe), ge = F.value; return ge === null ? {} : (ke = (be = e.value) == null ? void 0 : be.find(Ie => typeof Ie == "object" && Ie[ge] === me)) != null ? ke : {} } async function J() { var oe; if (!(!((oe = _.value) == null ? void 0 : oe.field) || e.primaryKey === "+")) { ne.value = !0; try { const me = await ue.get(`/items/${y.value.collection}`, { params: { fields: "*", limit: -1, filter: { [_.value.field]: { _eq: e.primaryKey } } } }); ae.value = me.data.data } catch (me) { Y.value = me, Ve(me) } finally { ne.value = !1 } } } function ie(oe, me) { var Be, lt; const ge = (Be = g.value) == null ? void 0 : Be.field, be = F.value, ke = le(me), Ie = M.exports.assign({}, ke, oe); if (!ge || !be) return; let De = M.exports.cloneDeep((lt = Z.value) != null ? lt : []); if (ge in Ie) { const Te = ae.value.find(Oe => Oe[be] === me); De = De.map(Oe => typeof Oe == "number" || typeof Oe == "string" ? Ie[ge] === Oe ? Ie : Oe : Ie[ge] === Oe[ge] ? M.exports.isEqual(Te, re(re({}, Te), Ie)) ? Ie[ge] : Ie : Oe) } else { const Te = De.findIndex(Oe => typeof Oe == "object" && Oe[be] === me); Te !== -1 ? Object.keys(Ie).length === 1 && be in Ie ? De.splice(Te, 1) : De[Te] = Ie : De.push(Ce(re({}, Ie), { [be]: me })) } t("input", De) } } } }); function jJ(e, t, n, l, i, u) { var v, _; const o = c("v-icon"), s = c("language-select"), r = c("v-form"), p = c("v-divider"), f = we("tooltip"); return m(), I("div", { class: de(["translations", { split: e.splitViewEnabled }]) }, [S("div", { class: de(["primary", e.splitViewEnabled ? "half" : "full"]) }, [a(s, { modelValue: e.firstLang, "onUpdate:modelValue": t[1] || (t[1] = y => e.firstLang = y), items: e.languageOptions }, { append: d(() => [e.splitViewAvailable && !e.splitViewEnabled ? ee((m(), C(o, { key: 0, name: "flip", clickable: "", onClick: t[0] || (t[0] = Ae(y => e.splitView = !0, ["stop"])) }, null, 512)), [[f, e.t("interfaces.translations.toggle_split_view")]]) : R("", !0)]), _: 1 }, 8, ["modelValue", "items"]), a(r, { loading: e.valuesLoading, fields: e.fields, "model-value": e.firstItem, "initial-values": e.firstItemInitial, badge: (v = e.languageOptions.find(y => y.value === e.firstLang)) == null ? void 0 : v.text, "onUpdate:modelValue": t[2] || (t[2] = y => e.updateValue(y, e.firstLang)) }, null, 8, ["loading", "fields", "model-value", "initial-values", "badge"]), a(p)], 2), e.splitViewEnabled ? (m(), I("div", { key: 0, class: de(["secondary", e.splitViewEnabled ? "half" : "full"]) }, [a(s, { modelValue: e.secondLang, "onUpdate:modelValue": t[4] || (t[4] = y => e.secondLang = y), items: e.languageOptions, secondary: "" }, { append: d(() => [ee(a(o, { name: "close", clickable: "", onClick: t[3] || (t[3] = Ae(y => e.splitView = !e.splitView, ["stop"])) }, null, 512), [[f, e.t("interfaces.translations.toggle_split_view")]])]), _: 1 }, 8, ["modelValue", "items"]), a(r, { loading: e.valuesLoading, "initial-values": e.secondItemInitial, fields: e.fields, badge: (_ = e.languageOptions.find(y => y.value === e.secondLang)) == null ? void 0 : _.text, "model-value": e.secondItem, "onUpdate:modelValue": t[5] || (t[5] = y => e.updateValue(y, e.secondLang)) }, null, 8, ["loading", "initial-values", "fields", "badge", "model-value"]), a(p)], 2)) : R("", !0)], 2) } var RJ = B(LJ, [["render", jJ], ["__scopeId", "data-v-6104b69c"]]), MJ = Me({ id: "translations", name: "$t:translations", icon: "translate", types: ["alias"], localTypes: ["translations"], group: "relational", relational: !0, component: RJ, options: ({ relations: e }) => { var i; const t = Pe(), n = (i = e.m2o) == null ? void 0 : i.related_collection; let l = []; return n && (l = t.getFieldsForCollection(n).map(u => ({ text: u.name, value: u.field }))), [{ field: "languageField", type: "string", name: "$t:interfaces.translations.language_field", meta: { interface: "select-dropdown", options: { placeholder: "$t:primary_key", choices: l } } }] } }), UJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: MJ }); const NJ = z({ props: { value: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, includeSystem: { type: Boolean, default: !1 } }, emits: ["input"], setup(e) { const { t } = x(), n = He(), l = V(() => [...n.collections.filter(u => u.collection.startsWith("directus_") === !1), ...e.includeSystem ? n.crudSafeSystemCollections : []]); return { items: V(() => l.value.map(u => ({ text: u.name, value: u.collection }))), t } } }); function BJ(e, t, n, l, i, u) { const o = c("v-select"); return m(), C(o, { "model-value": e.value, disabled: e.disabled, items: e.items, placeholder: e.t("select_a_collection"), "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("input", s)) }, null, 8, ["model-value", "disabled", "items", "placeholder"]) } var qJ = B(NJ, [["render", BJ]]), zJ = Me({ id: "system-collection", name: "$t:interfaces.system-collection.collection", description: "$t:interfaces.system-collection.description", icon: "featured_play_list", component: qJ, types: ["string"], options: [{ field: "includeSystem", name: "$t:system", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.system-collection.include_system_collections" } }, schema: { default_value: !1 } }], system: !0, recommendedDisplays: ["collection"] }), KJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: zJ }); const HJ = z({ props: { value: { type: Array, default: null }, disabled: { type: Boolean, default: !1 }, includeSystem: { type: Boolean, default: !1 } }, emits: ["input"], setup(e) { const { t } = x(), n = He(), l = V(() => e.includeSystem ? n.collections : n.collections.filter(u => u.collection.startsWith("directus_") === !1)), i = V(() => l.value.map(u => ({ text: u.name, value: u.collection }))); return { t, items: i } } }); function WJ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("interface-select-multiple-checkbox"); return e.items.length === 0 ? (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("no_collections")), 1)]), _: 1 })) : (m(), C(s, { key: 1, choices: e.items, value: e.value, disabled: e.disabled, onInput: t[0] || (t[0] = r => e.$emit("input", r)) }, null, 8, ["choices", "value", "disabled"])) } var GJ = B(HJ, [["render", WJ]]), JJ = Me({ id: "system-collections", name: "$t:interfaces.system-collections.collections", description: "$t:interfaces.system-collections.description", icon: "featured_play_list", component: GJ, types: ["json", "csv"], options: [{ field: "includeSystem", name: "$t:system", type: "boolean", meta: { width: "half", interface: "boolean", options: { label: "$t:interfaces.system-collections.include_system_collections" } }, schema: { default_value: !1 } }], system: !0, recommendedDisplays: ["labels"] }), QJ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: JJ }); const XJ = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null }, collectionField: { type: String, default: null }, collectionName: { type: String, default: null } }, emits: ["input"], setup(e) { const { t } = x(), n = He(), l = ht("values", E({})), i = V(() => { if (!e.collectionField) return e.collectionName ? e.collectionName : null; const u = l.value[e.collectionField]; return !!n.collections.find(s => s.collection === u) === !1 ? null : u }); return { t, collection: i } } }), ZJ = { class: "system-display-template" }; function YJ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-field-template"); return m(), I("div", ZJ, [e.collection === null ? (m(), C(o, { key: 0, type: "info" }, { default: d(() => [D(b(e.t("interfaces.system-display-template.select_a_collection")), 1)]), _: 1 })) : (m(), C(s, { key: 1, collection: e.collection, "model-value": e.value, disabled: e.disabled, "onUpdate:modelValue": t[0] || (t[0] = r => e.$emit("input", r)) }, null, 8, ["collection", "model-value", "disabled"]))]) } var xJ = B(XJ, [["render", YJ]]), eQ = Me({ id: "system-display-template", name: "$t:interfaces.system-display-template.display-template", description: "$t:interfaces.system-display-template.description", icon: "arrow_drop_down_circle", component: xJ, types: ["string"], system: !0, options: [{ field: "collectionField", name: "$t:interfaces.system-display-template.collection_field", type: "string", meta: { width: "full", interface: "input" }, schema: { default_value: null } }] }), tQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: eQ }); const nQ = z({ props: { collectionField: { type: String, default: null }, collection: { type: String, default: null }, typeAllowList: { type: Array, default: () => [] }, value: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, allowNone: { type: Boolean, default: !1 }, allowPrimaryKey: { type: Boolean, default: !1 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = Pe(), i = ht("values", E({})), u = V(() => i.value[e.collectionField] || e.collection), o = V(() => !e.collectionField && !e.collection ? [] : l.getFieldsForCollection(u.value)); _e(u, (r, p) => { p !== null && r !== p && t("input", null) }); const s = V(() => o.value.map(r => { var f; let p = !1; return e.allowPrimaryKey === !1 && ((f = r == null ? void 0 : r.schema) == null ? void 0 : f.is_primary_key) === !0 && (p = !0), e.typeAllowList.length > 0 && e.typeAllowList.includes(r.type) === !1 && (p = !0), { text: r.name, value: r.field, disabled: p } })); return { t: n, selectItems: s, values: i, fields: o } } }); function lQ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-select"); return !e.collectionField && !e.collection ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("collection_field_not_setup")), 1)]), _: 1 })) : e.selectItems.length === 0 ? (m(), C(o, { key: 1, type: "warning" }, { default: d(() => [D(b(e.t("select_a_collection")), 1)]), _: 1 })) : (m(), C(s, { key: 2, "show-deselect": e.allowNone, "model-value": e.value, disabled: e.disabled, items: e.selectItems, placeholder: e.placeholder || e.t("select_a_field"), "onUpdate:modelValue": t[0] || (t[0] = r => e.$emit("input", r)) }, null, 8, ["show-deselect", "model-value", "disabled", "items", "placeholder"])) } var oQ = B(nQ, [["render", lQ]]), aQ = Me({ id: "system-field", name: "$t:field", icon: "box", component: oQ, types: ["string"], options: [], system: !0 }), iQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: aQ }); const sQ = z({ props: { collectionField: { type: String, default: null }, collection: { type: String, default: null }, value: { type: Array, default: null }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: null }, allowNone: { type: Boolean, default: !1 } }, emits: ["input"], setup(e) { const { t } = x(), n = ht("values", E({})), l = V(() => n.value[e.collectionField] || e.collection), { treeList: i, loadFieldRelations: u } = ol(l); return { t, values: n, treeList: i, chosenCollection: l, loadFieldRelations: u } } }), rQ = { key: 2, class: "system-field-tree" }; function dQ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-checkbox-tree"); return !e.collectionField && !e.collection ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("collection_field_not_setup")), 1)]), _: 1 })) : e.chosenCollection ? (m(), I("div", rQ, [a(s, { "model-value": e.value, disabled: e.disabled, choices: e.treeList, "item-text": "name", "item-value": "key", "value-combining": "exclusive", "onUpdate:modelValue": t[0] || (t[0] = r => e.$emit("input", r)), onGroupToggle: t[1] || (t[1] = r => e.loadFieldRelations(r.value)) }, null, 8, ["model-value", "disabled", "choices"])])) : (m(), C(o, { key: 1, type: "warning" }, { default: d(() => [D(b(e.t("select_a_collection")), 1)]), _: 1 })) } var uQ = B(sQ, [["render", dQ], ["__scopeId", "data-v-1bd9310a"]]), cQ = Me({ id: "system-field-tree", name: "$t:field", icon: "box", component: uQ, types: ["string"], options: [], system: !0 }), pQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: cQ }); const mQ = z({ props: { is: { type: String, required: !0 }, type: { type: String, required: !0 }, value: { type: [String, Number, Object, Boolean, Array], default: null }, focus: { type: Boolean, default: !0 }, choices: { type: Array, default: () => [] } }, emits: ["input"], setup(e, { emit: t }) { const n = E(), { t: l } = x(), i = V(() => e.value === null || e.value === void 0 ? null : typeof e.value == "string" && e.value.length > 25 ? e.value.substring(0, 22) + "..." : e.value), u = V(() => { var r; return (((r = e.value) == null ? void 0 : r.toString().length) || 2) + 1 + "ch" }), o = V(() => { switch (e.type) { case "integer": case "bigInteger": return "[+-]?[0-9]+"; case "decimal": case "float": return "[+-]?[0-9]+\\.?[0-9]*"; case "uuid": return "[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}"; default: return "" } }); return at(() => { var r; e.focus && ((r = n.value) == null || r.focus()) }), { displayValue: i, width: u, t: l, emitValue: s, inputEl: n, inputPattern: o }; function s(r) { if (r === "") return t("input", null); if (typeof r == "string" && ["$NOW", "$CURRENT_USER", "$CURRENT_ROLE"].some(p => r.startsWith(p)) || typeof r != "string" || new RegExp(o.value).test(r)) return t("input", r) } } }), fQ = ["pattern", "value"], vQ = ["onClick"]; function _Q(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-select"), r = c("v-menu"); return e.type === "boolean" ? (m(), C(o, { key: 0, name: e.value === null ? "indeterminate_check_box" : e.value ? "check_box" : "check_box_outline_blank", clickable: "", class: "preview", small: "", onClick: t[0] || (t[0] = p => e.$emit("input", !e.value)) }, null, 8, ["name"])) : e.is === "interface-input" ? (m(), I("input", { key: 1, ref: "inputEl", type: "text", pattern: e.inputPattern, value: e.value, style: Ke({ width: e.width }), placeholder: "--", onInput: t[1] || (t[1] = p => e.emitValue(p.target.value)) }, null, 44, fQ)) : e.is === "select" ? (m(), C(s, { key: 2, inline: "", items: e.choices, "model-value": e.value, placeholder: e.t("select"), "allow-other": "", "onUpdate:modelValue": t[2] || (t[2] = p => e.emitValue(p)) }, null, 8, ["items", "model-value", "placeholder"])) : (m(), C(r, { key: 3, "close-on-content-click": !1, "show-arrow": !0, placement: "bottom-start" }, { activator: d(({ toggle: p }) => [e.type.startsWith("geometry") || e.type === "json" ? (m(), C(o, { key: 0, class: "preview", name: e.type === "json" ? "integration_instructions" : "map", onClick: p }, null, 8, ["name", "onClick"])) : (m(), I("div", { key: 1, class: "preview", onClick: p }, b(e.displayValue), 9, vQ))]), default: d(() => [S("div", { class: de(["input", e.type]) }, [(m(), C(Ne(e.is), { class: "input-component", small: "", type: e.type, value: e.value, onInput: t[3] || (t[3] = p => e.emitValue(p)) }, null, 8, ["type", "value"]))], 2)]), _: 1 })) } var yQ = B(mQ, [["render", _Q], ["__scopeId", "data-v-0cdd55fb"]]); function il(e) { return Object.keys(e)[0] } function on(e) { const t = il(e); if (t.startsWith("_")) return ""; const n = on(e[t]); return n !== "" ? `${t}.${n}` : t } function On(e) { return il(M.exports.get(e, on(e))) } function Jo(e, t, n) { return l(e.split(".")); function l(i) { const u = i.shift(); return u !== void 0 ? { [u]: l(i) } : { [t]: n } } } const gQ = z({ components: { InputComponent: yQ }, props: { field: { type: Object, required: !0 }, collection: { type: String, required: !0 } }, emits: ["update:field"], setup(e, { emit: t }) { const n = Pe(), { t: l } = x(), i = V(() => n.getField(e.collection, on(e.field))), u = V(() => { var f, v, _, y; return ((_ = (v = (f = i.value) == null ? void 0 : f.meta) == null ? void 0 : v.options) == null ? void 0 : _.choices) ? "select" : "interface-" + { bigInteger: "input", binary: "input", boolean: "boolean", date: "datetime", dateTime: "datetime", decimal: "input", float: "input", integer: "input", json: "input-code", string: "input", text: "input-multiline", time: "datetime", timestamp: "datetime", uuid: "input", csv: "input", hash: "input-hash", geometry: "map" }[((y = i.value) == null ? void 0 : y.type) || "string"] }), o = V({ get() { const p = on(e.field), f = On(e.field), v = M.exports.get(e.field, `${p}.${f}`); return ["_in", "_nin"].includes(On(e.field)) ? [...v.filter(_ => _ !== null && _ !== ""), null] : v }, set(p) { const f = on(e.field), v = On(e.field); let _;["_in", "_nin"].includes(v) ? _ = p.filter(y => y !== null && y !== "") : _ = p, t("update:field", Jo(f, v, _)) } }), s = V(() => { var p, f, v, _; return Ct((_ = (v = (f = (p = i.value) == null ? void 0 : p.meta) == null ? void 0 : f.options) == null ? void 0 : v.choices) != null ? _ : {}) }); return { t: l, choices: s, fieldInfo: i, interfaceType: u, value: o, setValueAt: r, getComparator: On }; function r(p, f) { let v = Array.isArray(o.value) ? M.exports.clone(o.value) : new Array(p + 1); v[p] = f, o.value = v } } }), hQ = { class: "and" }; function bQ(e, t, n, l, i, u) { var s, r, p, f, v, _; const o = c("input-component"); return ["_eq", "_neq", "_lt", "_gt", "_lte", "_gte", "_contains", "_ncontains", "_starts_with", "_nstarts_with", "_ends_with", "_nends_with"].includes(e.getComparator(e.field)) ? (m(), C(o, { key: 0, is: e.interfaceType, choices: e.choices, type: (r = (s = e.fieldInfo) == null ? void 0 : s.type) != null ? r : "unknown", value: e.value, onInput: t[0] || (t[0] = y => e.value = y) }, null, 8, ["is", "choices", "type", "value"])) : ["_in", "_nin"].includes(e.getComparator(e.field)) ? (m(), I("div", { key: 1, class: de(["list", { moveComma: e.interfaceType === "interface-input" }]) }, [(m(!0), I(se, null, he(e.value, (y, g) => { var w, h; return m(), I("div", { key: g, class: "value" }, [a(o, { is: e.interfaceType, type: (h = (w = e.fieldInfo) == null ? void 0 : w.type) != null ? h : "unknown", value: y, focus: !1, choices: e.choices, onInput: k => e.setValueAt(g, k) }, null, 8, ["is", "type", "value", "choices", "onInput"])]) }), 128))], 2)) : ["_between", "_nbetween"].includes(e.getComparator(e.field)) ? (m(), I(se, { key: 2 }, [a(o, { is: e.interfaceType, choices: e.choices, type: (f = (p = e.fieldInfo) == null ? void 0 : p.type) != null ? f : "unknown", value: e.value[0], onInput: t[1] || (t[1] = y => e.setValueAt(0, y)) }, null, 8, ["is", "choices", "type", "value"]), S("div", hQ, b(e.t("interfaces.filter.and")), 1), a(o, { is: e.interfaceType, choices: e.choices, type: (_ = (v = e.fieldInfo) == null ? void 0 : v.type) != null ? _ : "unknown", value: e.value[1], onInput: t[2] || (t[2] = y => e.setValueAt(1, y)) }, null, 8, ["is", "choices", "type", "value"])], 64)) : R("", !0) } var $Q = B(gQ, [["render", bQ], ["__scopeId", "data-v-21d4a8ae"]]); const wQ = z({ name: "Nodes", components: { Draggable: kt, InputGroup: $Q }, props: { filter: { type: Object, required: !0 }, collection: { type: String, required: !0 }, depth: { type: Number, default: 1 }, inline: { type: Boolean, default: !1 } }, emits: ["remove-node", "update:filter", "change"], setup(e, { emit: t }) { const { collection: n } = je(e), l = Re(e, "filter", t), { treeList: i, loadFieldRelations: u } = ol(n), o = Pe(), { t: s } = x(), r = V({ get() { return e.filter.map((h, k) => { const F = il(h), A = F.startsWith("_") === !1; return A ? { id: k, isField: A, name: F, field: on(h), comparator: On(h), node: h } : { id: k, name: F, isField: A, node: h } }) }, set(h) { t("update:filter", h.map(k => k.node)) } }); return { fieldOptions: i, getCompareOptions: w, updateField: y, updateComparator: _, t: s, replaceNode: g, toggleLogic: v, loadFieldRelations: u, getNodeName: il, getField: on, getComparator: On, filterInfo: r, getIndex: f, getFieldPreview: p, filterSync: l }; function p(h) { const F = on(h).split("."); return F.map((P, L) => { var O; const T = F.slice(0, L), N = o.getField(e.collection, [...T, P].join(".")); return (O = N == null ? void 0 : N.name) != null ? O : P }).join(" -> ") } function f(h) { return e.filter.findIndex(k => k === h) } function v(h) { const k = r.value[h]; r.value[h].isField || ("_and" in k.node ? l.value = l.value.map((F, A) => A === h ? { _or: k.node._and } : F) : l.value = l.value.map((F, A) => A === h ? { _and: k.node._or } : F)) } function _(h, k) { const F = r.value[h]; if (F.isField === !1) return; const A = F.field + "." + F.comparator; let P = M.exports.get(F.node, A); switch (k) { case "_in": case "_nin": L(vl(P) || []); break; case "_between": case "_nbetween": L((vl(P) || []).slice(0, 2)); break; case "_null": case "_nnull": case "_empty": case "_nempty": L(!0); break; case "_intersects": case "_nintersects": case "_intersects_bbox": case "_nintersects_bbox": ["_intersects", "_nintersects", "_intersects_bbox", "_nintersects_bbox"].includes(F.comparator) ? L(P) : L(null); break; default: L(Array.isArray(P) ? P[0] : P); break }function L(T) { F.isField !== !1 && (l.value = l.value.map((N, O) => O === h ? Jo(F.field, k, T) : N)) } } function y(h, k) { const F = r.value[h], A = o.getField(e.collection, F.name), P = o.getField(e.collection, k); if (F.isField === !1) return; const L = F.field + "." + F.comparator; let T = M.exports.get(F.node, L), N = F.comparator; (A == null ? void 0 : A.type) !== (P == null ? void 0 : P.type) && (T = null, N = w(k)[0].value), l.value = l.value.map((O, U) => U === h ? Jo(k, N, T) : O) } function g(h, k) { l.value = l.value.map((F, A) => A === h ? k : F) } function w(h) { const k = o.getField(e.collection, h); return k === null ? [] : ga(k.type).map(F => ({ text: s(`operators.${F}`), value: `_${F}` })) } } }), kQ = { class: "row" }, SQ = { key: 0, block: "", class: "node field" }, CQ = { class: "delete" }, VQ = { key: 1, class: "node logic" }, FQ = ["onClick"], AQ = { class: "text" }, IQ = { class: "delete" }; function EQ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-select"), r = c("input-group"), p = c("nodes", !0), f = c("draggable"), v = we("tooltip"); return m(), C(f, { tag: "ul", draggable: ".row", handle: ".drag-handle", class: "group", list: e.filterSync, group: { name: "g1" }, "item-key": e.getIndex, "swap-threshold": .3, "force-fallback": !0, onChange: t[2] || (t[2] = _ => e.$emit("change")) }, { item: d(({ element: _, index: y }) => [S("li", kQ, [e.filterInfo[y].isField ? (m(), I("div", SQ, [S("div", { class: de(["header", { inline: e.inline }]) }, [a(o, { name: "drag_indicator", class: "drag-handle", small: "" }), a(s, { inline: "", class: "name", "item-text": "name", "item-value": "key", placement: "bottom-start", "full-width": !1, "model-value": e.filterInfo[y].field, items: e.fieldOptions, mandatory: !1, "groups-clickable": !0, onGroupToggle: t[0] || (t[0] = g => e.loadFieldRelations(g.value)), "onUpdate:modelValue": g => e.updateField(y, g) }, { preview: d(() => [D(b(e.getFieldPreview(_)), 1)]), _: 2 }, 1032, ["model-value", "items", "onUpdate:modelValue"]), a(s, { inline: "", class: "comparator", placement: "bottom-start", "model-value": e.filterInfo[y].comparator, items: e.getCompareOptions(e.filterInfo[y].field), "onUpdate:modelValue": g => e.updateComparator(y, g) }, null, 8, ["model-value", "items", "onUpdate:modelValue"]), a(r, { field: _, collection: e.collection, "onUpdate:field": g => e.replaceNode(y, g) }, null, 8, ["field", "collection", "onUpdate:field"]), S("span", CQ, [ee(a(o, { name: "close", small: "", clickable: "", onClick: g => e.$emit("remove-node", [y]) }, null, 8, ["onClick"]), [[v, e.t("delete_label")]])])], 2)])) : (m(), I("div", VQ, [S("div", { class: de(["header", { inline: e.inline }]) }, [a(o, { name: "drag_indicator", class: "drag-handle", small: "" }), S("div", { class: de(["logic-type", { or: e.filterInfo[y].name === "_or" }]) }, [S("span", { class: "key", onClick: g => e.toggleLogic(y) }, b(e.filterInfo[y].name === "_and" ? e.t("interfaces.filter.all") : e.t("interfaces.filter.any")), 9, FQ), S("span", AQ, b(e.t("interfaces.filter.of_the_following")), 1)], 2), S("span", IQ, [ee(a(o, { name: "close", small: "", clickable: "", onClick: g => e.$emit("remove-node", [y]) }, null, 8, ["onClick"]), [[v, e.t("delete_label")]])])], 2), a(p, { filter: _[e.filterInfo[y].name], collection: e.collection, depth: e.depth + 1, inline: e.inline, onChange: t[1] || (t[1] = g => e.$emit("change")), onRemoveNode: g => e.$emit("remove-node", [`${y}.${e.filterInfo[y].name}`, ...g]), "onUpdate:filter": g => e.replaceNode(y, { [e.filterInfo[y].name]: g }) }, null, 8, ["filter", "collection", "depth", "inline", "onRemoveNode", "onUpdate:filter"])]))])]), _: 1 }, 8, ["list", "item-key", "swap-threshold"]) } var DQ = B(wQ, [["render", EQ], ["__scopeId", "data-v-8fb0011e"]]); const TQ = z({ components: { Nodes: DQ }, props: { value: { type: Object, default: null }, disabled: { type: Boolean, default: !1 }, collectionName: { type: String, default: null }, collectionField: { type: String, default: null }, inline: { type: Boolean, default: !1 } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = ht("values", E({})), i = V(() => { var y; return e.collectionName ? e.collectionName : (y = l.value[e.collectionField]) != null ? y : null }), u = Pe(), { treeList: o, loadFieldRelations: s } = ol(i), r = V({ get() { return !e.value || M.exports.isEmpty(e.value) ? [] : il(e.value) === "_and" ? M.exports.cloneDeep(e.value._and) : M.exports.cloneDeep([e.value]) }, set(y) { switch (y.length) { case 0: t("input", null); break; case 1: t("input", y[0]); break; default: t("input", { _and: y }); break } } }), p = V(() => [{ key: "$group", name: n("interfaces.filter.add_group") }, { divider: !0 }, ...o.value]); return { t: n, addNode: v, removeNode: _, innerValue: r, fieldOptions: p, loadFieldRelations: s, emitValue: f, collection: i }; function f() { r.value.length === 0 ? t("input", null) : t("input", { _and: r.value }) } function v(y) { if (y === "$group") r.value = r.value.concat({ _and: [] }); else { const g = u.getField(i.value, y), w = ga(g.type)[0], h = M.exports.set({}, y, { ["_" + w]: null }); r.value = r.value.concat(h) } } function _(y) { const g = y.pop(); if (y.length === 0) { r.value = r.value.filter((h, k) => k !== Number(g)); return } let w = M.exports.get(r.value, y.join(".")); w = w.filter((h, k) => k !== Number(g)), r.value = M.exports.set(r.value, y.join("."), w) } } }), PQ = { key: 0, class: "no-rules" }, OQ = { class: "buttons" }; function LQ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("nodes"), r = c("v-list"), p = c("v-icon"), f = c("v-select"); return !e.collectionField && !e.collection ? (m(), C(o, { key: 0, type: "warning" }, { default: d(() => [D(b(e.t("collection_field_not_setup")), 1)]), _: 1 })) : e.collection ? (m(), I("div", { key: 2, class: de(["system-filter", { inline: e.inline, empty: e.innerValue.length === 0 }]) }, [a(r, { mandatory: !0 }, { default: d(() => [e.innerValue.length === 0 ? (m(), I("div", PQ, b(e.t("interfaces.filter.no_rules")), 1)) : (m(), C(s, { key: 1, filter: e.innerValue, "onUpdate:filter": t[0] || (t[0] = v => e.innerValue = v), collection: e.collection, depth: 1, onRemoveNode: t[1] || (t[1] = v => e.removeNode(v)), onChange: e.emitValue }, null, 8, ["filter", "collection", "onChange"]))]), _: 1 }), S("div", OQ, [a(f, { inline: !e.inline, "item-text": "name", "item-value": "key", placement: "bottom-start", class: "add-filter", placeholder: e.t("interfaces.filter.add_filter"), "full-width": e.inline, "model-value": null, items: e.fieldOptions, mandatory: !1, "groups-clickable": !0, onGroupToggle: t[2] || (t[2] = v => e.loadFieldRelations(v.value)), "onUpdate:modelValue": t[3] || (t[3] = v => e.addNode(v)) }, et({ _: 2 }, [e.inline ? { name: "prepend", fn: d(() => [a(p, { name: "add", small: "" })]) } : void 0]), 1032, ["inline", "placeholder", "full-width", "items"])])], 2)) : (m(), C(o, { key: 1, type: "warning" }, { default: d(() => [D(b(e.t("select_a_collection")), 1)]), _: 1 })) } var jQ = B(TQ, [["render", LQ], ["__scopeId", "data-v-404ba734"]]), RQ = Me({ id: "system-filter", name: "$t:interfaces.filter.name", icon: "search", component: jQ, types: ["json"], options: [], system: !0 }), MQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: RQ }); const UQ = z({ name: "FolderListItem", props: { folder: { type: Object, required: !0 }, currentFolder: { type: String, default: null }, disabled: { type: Boolean, default: !1 }, disabledFolders: { type: Array, default: () => [] } }, emits: ["click"] }); function NQ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-icon"), r = c("v-list-item-content"), p = c("v-list-item"), f = c("folder-list-item", !0), v = c("v-list-group"); return !e.folder.children || e.folder.children.length === 0 ? (m(), C(p, { key: 0, active: e.currentFolder === e.folder.id, disabled: e.disabled, clickable: "", onClick: t[0] || (t[0] = _ => e.$emit("click", e.folder.id)) }, { default: d(() => [a(s, null, { default: d(() => [a(o, { name: e.currentFolder === e.folder.id ? "folder_open" : "folder" }, null, 8, ["name"])]), _: 1 }), a(r, null, { default: d(() => [D(b(e.folder.name), 1)]), _: 1 })]), _: 1 }, 8, ["active", "disabled"])) : (m(), C(v, { key: 1, clickable: "", active: e.currentFolder === e.folder.id, disabled: e.disabled, onClick: t[2] || (t[2] = _ => e.$emit("click", e.folder.id)) }, { activator: d(() => [a(s, null, { default: d(() => [a(o, { name: e.currentFolder === e.folder.id ? "folder_open" : "folder" }, null, 8, ["name"])]), _: 1 }), a(r, null, { default: d(() => [D(b(e.folder.name), 1)]), _: 1 })]), default: d(() => [(m(!0), I(se, null, he(e.folder.children, _ => (m(), C(f, { key: _.id, folder: _, "current-folder": e.currentFolder, disabled: e.disabledFolders.includes(_.id), "disabled-folders": e.disabledFolders, onClick: t[1] || (t[1] = y => e.$emit("click", y)) }, null, 8, ["folder", "current-folder", "disabled", "disabled-folders"]))), 128))]), _: 1 }, 8, ["active", "disabled"])) } var BQ = B(UQ, [["render", NQ]]); const qQ = z({ components: { FolderListItem: BQ }, props: { value: { type: String, default: void 0 }, disabledFolders: { type: Array, default: () => [] }, disabled: { type: Boolean, default: !1 }, placeholder: { type: String, default: "" } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { nestedFolders: l, folders: i, loading: u } = Hn(), o = V(() => { if (!e.value || !i.value) return n("interfaces.system-folder.root_name"); const f = i.value.find(v => v.id === e.value); return f ? r(f, i.value).map(v => v.name).join(" / ") : e.value }); return { emitValue: s, loading: u, folderPath: o, nestedFolders: l, onFolderSelect: p, t: n }; function s(f) { return t("input", f) } function r(f, v) { const _ = new Map(v.map(g => [g.id, g])), y = g => (_.has(g.parent) ? y(_.get(g.parent)) : []).concat(g); return y(f) } function p(f) { e.disabled || t("input", f) } } }); function zQ(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-icon"), r = c("v-input"), p = c("v-list-item-icon"), f = c("v-list-item-content"), v = c("v-list-item"), _ = c("v-divider"), y = c("folder-list-item"), g = c("v-list"), w = c("v-menu"); return e.loading ? (m(), C(o, { key: 0 })) : (m(), C(w, { key: 1, class: "v-select", attached: !0, "show-arrow": !1, disabled: e.disabled, "close-on-content-click": !0 }, { activator: d(({ toggle: h, active: k }) => [a(r, { readonly: "", active: k, "model-value": e.folderPath, placeholder: e.placeholder, disabled: e.disabled, onClick: h }, { prepend: d(() => [a(s, { name: e.value ? "folder_open" : "folder_special" }, null, 8, ["name"])]), append: d(() => [a(s, { name: "expand_more", class: de({ active: k }) }, null, 8, ["class"])]), _: 2 }, 1032, ["active", "model-value", "placeholder", "disabled", "onClick"])]), default: d(() => [a(g, null, { default: d(() => [a(v, { clickable: "", active: !e.value, onClick: t[0] || (t[0] = h => e.emitValue(null)) }, { default: d(() => [a(p, null, { default: d(() => [a(s, { name: "folder_special" })]), _: 1 }), a(f, null, { default: d(() => [D(b(e.t("interfaces.system-folder.root_name")), 1)]), _: 1 })]), _: 1 }, 8, ["active"]), e.nestedFolders && e.nestedFolders.length > 0 ? (m(), C(_, { key: 0 })) : R("", !0), (m(!0), I(se, null, he(e.nestedFolders, h => (m(), C(y, { key: h.id, clickbable: "", folder: h, "current-folder": e.value, disabled: e.disabledFolders.includes(h.id), "disabled-folders": e.disabledFolders, onClick: e.emitValue }, null, 8, ["folder", "current-folder", "disabled", "disabled-folders", "onClick"]))), 128))]), _: 1 })]), _: 1 }, 8, ["disabled"])) } var KQ = B(qQ, [["render", zQ], ["__scopeId", "data-v-243bccaf"]]), HQ = Me({ id: "system-folder", name: "$t:interfaces.system-folder.folder", description: "$t:interfaces.system-folder.description", icon: "folder", component: KQ, types: ["uuid"], options: [], system: !0, recommendedDisplays: ["raw"] }), WQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: HQ }); const GQ = z({ props: { value: { type: String, default: null }, typeField: { type: String, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { interfaces: l } = St(), i = ht("values", E({})), u = V(() => { if (!(e.typeField === null || !i.value[e.typeField])) return i.value[e.typeField] }); _e(() => i.value[e.typeField], () => { t("input", null) }); const o = V(() => l.value.filter(s => s.relational !== !0 && s.system !== !0).filter(s => u.value === void 0 || s.types.includes(u.value)).map(s => ({ text: s.name, value: s.id }))); return { t: n, items: o, selectedType: u, values: i } } }); function JQ(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-select"); return e.selectedType === void 0 ? (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("select_field_type")), 1)]), _: 1 })) : (m(), C(s, { key: 1, items: e.items, "model-value": e.value, placeholder: e.t("interfaces.system-interface.placeholder"), "onUpdate:modelValue": t[0] || (t[0] = r => e.$emit("input", r)) }, null, 8, ["items", "model-value", "placeholder"])) } var QQ = B(GQ, [["render", JQ]]), XQ = Me({ id: "system-interface", name: "$t:interfaces.system-interface.interface", description: "$t:interfaces.system-interface.description", icon: "box", component: QQ, types: ["string"], system: !0, options: [] }), ZQ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: XQ }); const YQ = z({ props: { value: { type: Object, default: null }, interfaceField: { type: String, default: null }, interface: { type: String, default: null }, collection: { type: String, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), { interfaces: l } = St(), i = V({ get() { return e.value }, set(p) { t("input", p) } }), u = ht("values", E({})), o = V(() => { if (e.interface) return l.value.find(p => p.id === e.interface); if (!!u.value[e.interfaceField]) return l.value.find(p => p.id === u.value[e.interfaceField]) }), s = V(() => o.value ? o.value.options && "render" in o.value.options : !1), r = V(() => { if (!o.value) return []; if (!o.value.options) return []; if (s.value === !0) return []; let p; return typeof o.value.options == "function" ? p = o.value.options({ field: { type: "unknown" }, editing: "+", collection: e.collection, relations: { o2m: void 0, m2o: void 0, m2a: void 0 }, collections: { related: void 0, junction: void 0 }, fields: { corresponding: void 0, junctionCurrent: void 0, junctionRelated: void 0, sort: void 0 }, items: {}, localType: "standard", autoGenerateJunctionRelation: !1, saving: !1 }) : p = o.value.options, Array.isArray(p) ? p : [...p.standard, ...p.advanced] }); return { t: n, selectedInterface: o, values: u, usesCustomComponent: s, optionsFields: r, options: i } } }), xQ = { key: 2, class: "inset" }; function eX(e, t, n, l, i, u) { const o = c("v-notice"), s = c("v-form"); return e.selectedInterface ? e.usesCustomComponent === !1 && e.optionsFields.length === 0 ? (m(), C(o, { key: 1 }, { default: d(() => [D(b(e.t("no_options_available")), 1)]), _: 1 })) : (m(), I("div", xQ, [e.usesCustomComponent === !1 ? (m(), C(s, { key: 0, modelValue: e.options, "onUpdate:modelValue": t[0] || (t[0] = r => e.options = r), class: "extension-options", fields: e.optionsFields, "primary-key": "+" }, null, 8, ["modelValue", "fields"])) : (m(), C(Ne(`interface-options-${e.selectedInterface.id}`), { key: 1, value: e.value, collection: e.collection, onInput: t[1] || (t[1] = r => e.$emit("input", r)) }, null, 8, ["value", "collection"]))])) : (m(), C(o, { key: 0 }, { default: d(() => [D(b(e.t("select_interface")), 1)]), _: 1 })) } var tX = B(YQ, [["render", eX], ["__scopeId", "data-v-89e693a8"]]), nX = Me({ id: "system-interface-options", name: "$t:interfaces.system-interface-options.interface-options", description: "$t:interfaces.system-interface-options.description", icon: "box", component: tX, types: ["string"], options: [], system: !0 }), lX = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: nX }); const oX = z({ props: { disabled: { type: Boolean, default: !1 }, value: { type: String, default: null } }, emits: ["input"], setup() { return { languages: Object.entries(_a).map(([t, n]) => ({ text: n, value: t })) } } }); function aX(e, t, n, l, i, u) { const o = c("v-select"); return m(), C(o, { "model-value": e.value, items: e.languages, disabled: e.disabled, "onUpdate:modelValue": t[0] || (t[0] = s => e.$emit("input", s)) }, null, 8, ["model-value", "items", "disabled"]) } var iX = B(oX, [["render", aX]]), sX = Me({ id: "system-language", name: "$t:language", icon: "translate", component: iX, system: !0, types: ["string"], options: [] }), rX = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: sX }); const dX = z({ props: { value: { type: String, default: null }, primaryKey: { type: String, default: null } }, setup(e) { const { t } = x(), n = Ze(), l = E(!!e.value), i = E(!1), u = E(!1), o = E(!1), s = E(!1), r = bt(), p = E(), f = E(""), v = E(), _ = E(""); at(() => { _.value = "" }), _e(() => e.value, () => { l.value = !!e.value }, { immediate: !0 }); const y = V(() => { var A; return ((A = n.currentUser) == null ? void 0 : A.id) === e.primaryKey }); return { t, tfaEnabled: l, tfaGenerated: i, generateTFA: w, cancelAndClose: h, enableTFA: k, toggle: g, password: _, enableActive: u, disableActive: o, loading: s, canvasID: r, secret: p, disableTFA: F, otp: f, error: v, isCurrentUser: y }; function g() { l.value === !1 ? u.value = !0 : o.value = !0 } async function w() { if (s.value !== !0) { s.value = !0; try { const A = await ue.post("/users/me/tfa/generate", { password: _.value }), P = A.data.data.otpauth_url; p.value = A.data.data.secret, await Ed.toCanvas(document.getElementById(r), P), i.value = !0, v.value = null } catch (A) { v.value = A } finally { s.value = !1 } } } function h() { i.value = !1, u.value = !1, _.value = "", f.value = "", p.value = "" } async function k() { if (s.value !== !0) { s.value = !0; try { await ue.post("/users/me/tfa/enable", { otp: f.value, secret: p.value }), l.value = !0, i.value = !1, u.value = !1, _.value = "", f.value = "", p.value = "", v.value = null } catch (A) { v.value = A } finally { s.value = !1 } } } async function F() { s.value = !0; try { await ue.post("/users/me/tfa/disable", { otp: f.value }), l.value = !1, o.value = !1, f.value = "" } catch (A) { v.value = A } finally { s.value = !1 } } } }), uX = e => (Qe("data-v-855b3ebc"), e = e(), Xe(), e), cX = uX(() => S("div", { class: "spacer" }, null, -1)), pX = ["id"], mX = { class: "secret selectable" }; function fX(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-checkbox"), r = c("v-card-title"), p = c("v-input"), f = c("v-error"), v = c("v-card-text"), _ = c("v-button"), y = c("v-card-actions"), g = c("v-progress-circular"), w = c("v-card"), h = c("v-dialog"); return m(), I("div", null, [a(s, { block: "", "model-value": e.tfaEnabled, disabled: !e.isCurrentUser, onClick: e.toggle }, { append: d(() => [a(o, { name: "launch", class: de(["checkbox-icon", { enabled: e.tfaEnabled }]) }, null, 8, ["class"])]), default: d(() => [D(b(e.tfaEnabled ? e.t("enabled") : e.t("disabled")) + " ", 1), cX]), _: 1 }, 8, ["model-value", "disabled", "onClick"]), a(h, { modelValue: e.enableActive, "onUpdate:modelValue": t[4] || (t[4] = k => e.enableActive = k), persistent: "", onEsc: e.cancelAndClose }, { default: d(() => [a(w, null, { default: d(() => [e.tfaEnabled === !1 && e.tfaGenerated === !1 && e.loading === !1 ? (m(), I("form", { key: 0, onSubmit: t[1] || (t[1] = Ae((...k) => e.generateTFA && e.generateTFA(...k), ["prevent"])) }, [a(r, null, { default: d(() => [D(b(e.t("enter_password_to_enable_tfa")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(p, { modelValue: e.password, "onUpdate:modelValue": t[0] || (t[0] = k => e.password = k), nullable: !1, type: "password", placeholder: e.t("password") }, null, 8, ["modelValue", "placeholder"]), e.error ? (m(), C(f, { key: 0, error: e.error }, null, 8, ["error"])) : R("", !0)]), _: 1 }), a(y, null, { default: d(() => [a(_, { type: "button", secondary: "", onClick: e.cancelAndClose }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(_, { type: "submit", loading: e.loading }, { default: d(() => [D(b(e.t("next")), 1)]), _: 1 }, 8, ["loading"])]), _: 1 })], 32)) : e.loading === !0 ? (m(), C(g, { key: 1, class: "loader", indeterminate: "" })) : R("", !0), ee(S("div", null, [S("form", { onSubmit: t[3] || (t[3] = Ae((...k) => e.enableTFA && e.enableTFA(...k), ["prevent"])) }, [a(r, null, { default: d(() => [D(b(e.t("tfa_scan_code")), 1)]), _: 1 }), a(v, null, { default: d(() => [S("canvas", { id: e.canvasID, class: "qr" }, null, 8, pX), S("output", mX, b(e.secret), 1), a(p, { modelValue: e.otp, "onUpdate:modelValue": t[2] || (t[2] = k => e.otp = k), type: "text", placeholder: e.t("otp"), nullable: !1 }, null, 8, ["modelValue", "placeholder"]), e.error ? (m(), C(f, { key: 0, error: e.error }, null, 8, ["error"])) : R("", !0)]), _: 1 }), a(y, null, { default: d(() => [a(_, { type: "button", secondary: "", onClick: e.cancelAndClose }, { default: d(() => [D(b(e.t("cancel")), 1)]), _: 1 }, 8, ["onClick"]), a(_, { type: "submit", disabled: e.otp.length !== 6, onClick: e.enableTFA }, { default: d(() => [D(b(e.t("done")), 1)]), _: 1 }, 8, ["disabled", "onClick"])]), _: 1 })], 32)], 512), [[Et, e.tfaEnabled === !1 && e.tfaGenerated === !0 && e.loading === !1]])]), _: 1 })]), _: 1 }, 8, ["modelValue", "onEsc"]), a(h, { modelValue: e.disableActive, "onUpdate:modelValue": t[7] || (t[7] = k => e.disableActive = k), onEsc: t[8] || (t[8] = k => e.disableActive = !1) }, { default: d(() => [a(w, null, { default: d(() => [S("form", { onSubmit: t[6] || (t[6] = Ae((...k) => e.disableTFA && e.disableTFA(...k), ["prevent"])) }, [a(r, null, { default: d(() => [D(b(e.t("enter_otp_to_disable_tfa")), 1)]), _: 1 }), a(v, null, { default: d(() => [a(p, { modelValue: e.otp, "onUpdate:modelValue": t[5] || (t[5] = k => e.otp = k), type: "text", placeholder: e.t("otp"), nullable: !1 }, null, 8, ["modelValue", "placeholder"]), e.error ? (m(), C(f, { key: 0, error: e.error }, null, 8, ["error"])) : R("", !0)]), _: 1 }), a(y, null, { default: d(() => [a(_, { type: "submit", kind: "warning", loading: e.loading, disabled: e.otp.length !== 6 }, { default: d(() => [D(b(e.t("disable_tfa")), 1)]), _: 1 }, 8, ["loading", "disabled"])]), _: 1 })], 32)]), _: 1 })]), _: 1 }, 8, ["modelValue"])]) } var vX = B(dX, [["render", fX], ["__scopeId", "data-v-855b3ebc"]]), _X = Me({ id: "system-mfa-setup", name: "mfa-setup", icon: "box", component: vX, types: ["text"], options: [], system: !0 }), yX = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: _X }); const gX = [{ field: "name", name: "$t:name", meta: { required: !0, interface: "input", width: "half-left", options: { placeholder: "$t:enter_a_name" } } }, { field: "icon", name: "$t:icon", meta: { required: !0, interface: "select-icon", width: "half-right" } }, { field: "url", name: "$t:url", meta: { required: !0, interface: "input", options: { placeholder: "https://example.com" } } }], hX = z({ name: "SystemModules", components: { Draggable: kt }, props: { value: { type: Array, default: () => mn } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(), i = E(), u = E(), { modules: o } = Gl(), s = V(() => o.value.filter(w => w.hidden !== !0).map(w => ({ type: "module", id: w.id, enabled: !1 }))), r = V({ get() { var h, k; const w = ((h = e.value) != null ? h : mn).filter(F => F.type === "module").map(F => F.id); return p([...(k = e.value) != null ? k : mn, ...s.value.filter(F => w.includes(F.id) === !1)]) }, set(w) { t("input", f(w)) } }); return { t: n, editing: l, valuesWithData: r, hideDragImage: Nt, updateItem: v, edit: _, linkFields: gX, save: y, values: i, remove: g, initialValues: u }; function p(w) { return w.filter(h => h.type === "link" ? !0 : !!o.value.find(k => k.id === h.id)).map(h => { if (h.type === "link") return Ce(re({}, h), { to: h.url, icon: h.icon, name: h.name }); const k = o.value.find(F => F.id === h.id); return Ce(re({}, h), { to: `/${k.id}`, name: k.name, icon: k.icon }) }) } function f(w) { return w.map(h => { if (h.type === "link") { const { type: L, id: T, name: N, url: O, icon: U, enabled: q, locked: K } = h; return { type: L, id: T, name: N, url: O, icon: U, enabled: q, locked: K } } const { type: k, id: F, enabled: A, locked: P } = h; return { type: k, id: F, enabled: A, locked: P } }) } function v(w, h) { r.value = r.value.map(k => k === w ? M.exports.assign({}, w, h) : k) } function _(w) { var k; l.value = w; let h; w !== "+" ? h = ((k = e.value) != null ? k : mn).find(F => F.id === w) : h = { id: bt(), type: "link", enabled: !0, url: "", name: "", icon: "" }, i.value = h, u.value = h } function y() { var w, h; l.value === "+" ? t("input", [...(w = e.value) != null ? w : mn, i.value]) : t("input", ((h = e.value) != null ? h : mn).map(k => k.id === l.value ? i.value : k)), i.value = null, l.value = null } function g(w) { var h; t("input", ((h = e.value) != null ? h : mn).filter(k => k.id !== w)) } } }), bX = e => (Qe("data-v-006bc8b7"), e = e(), Xe(), e), $X = { class: "system-modules" }, wX = { class: "info" }, kX = { class: "name" }, SX = { class: "to" }, CX = bX(() => S("div", { class: "spacer" }, null, -1)), VX = { class: "drawer-content" }; function FX(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item"), r = c("draggable"), p = c("v-list"), f = c("v-button"), v = c("v-form"), _ = c("v-drawer"), y = we("tooltip"); return m(), I("div", $X, [a(p, { class: "list" }, { default: d(() => [a(r, { modelValue: e.valuesWithData, "onUpdate:modelValue": t[0] || (t[0] = g => e.valuesWithData = g), "force-fallback": !0, "set-data": e.hideDragImage, "item-key": "id", handle: ".drag-handle", animation: 150 }, { item: d(({ element: g }) => [a(s, { block: "", class: de({ enabled: g.enabled }), clickable: g.type === "link", onClick: w => g.type === "link" ? e.edit(g.id) : void 0 }, { default: d(() => [a(o, { class: "drag-handle", name: "drag_handle" }), a(o, { class: "icon", name: g.icon }, null, 8, ["name"]), S("div", wX, [S("div", kX, b(g.name), 1), S("div", SX, b(g.to), 1)]), CX, g.locked === !0 ? (m(), C(o, { key: 0, name: "lock" })) : g.type === "link" ? (m(), C(o, { key: 1, name: "clear", onClick: Ae(w => e.remove(g.id), ["stop"]) }, null, 8, ["onClick"])) : (m(), C(o, { key: 2, name: g.enabled ? "check_box" : "check_box_outline_blank", clickable: "", onClick: Ae(w => e.updateItem(g, { enabled: !g.enabled }), ["stop"]) }, null, 8, ["name", "onClick"]))]), _: 2 }, 1032, ["class", "clickable", "onClick"])]), _: 1 }, 8, ["modelValue", "set-data"])]), _: 1 }), a(f, { onClick: t[1] || (t[1] = g => e.edit("+")) }, { default: d(() => [D(b(e.t("add_link")), 1)]), _: 1 }), a(_, { title: e.t("custom_link"), "model-value": !!e.editing, icon: "link", "onUpdate:modelValue": t[3] || (t[3] = g => e.editing = null), onCancel: t[4] || (t[4] = g => e.editing = null) }, { actions: d(() => [ee(a(f, { icon: "", rounded: "", onClick: e.save }, { default: d(() => [a(o, { name: "check" })]), _: 1 }, 8, ["onClick"]), [[y, e.t("save"), void 0, { bottom: !0 }]])]), default: d(() => [S("div", VX, [a(v, { modelValue: e.values, "onUpdate:modelValue": t[2] || (t[2] = g => e.values = g), "initial-values": e.initialValues, fields: e.linkFields }, null, 8, ["modelValue", "initial-values", "fields"])])]), _: 1 }, 8, ["title", "model-value"])]) } var AX = B(hX, [["render", FX], ["__scopeId", "data-v-006bc8b7"]]), IX = Me({ id: "system-modules", name: "$t:module_bar", icon: "arrow_drop_down_circle", component: AX, types: ["json"], options: [], system: !0 }), EX = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: IX }); const DX = z({ components: { DrawerCollection: Jt }, props: { value: { type: String, default: null } }, emits: ["input"], setup(e, { emit: t }) { const { t: n } = x(), l = E(null), i = E(null), u = E(!1), o = V(() => e.value !== null && (e.value.startsWith("role_") || e.value.startsWith("user_"))); return _e(() => e.value, f), f(), { options: V(() => { let v = [{ text: n("global") + ": " + n("all_users"), value: "all" }, { text: n("user") + ": " + n("select"), value: "directus_users" }, { text: n("role") + ": " + n("select"), value: "directus_roles" }]; if (o.value) { const [_, y] = e.value.split("_"); v = [{ text: n(_) + ": " + (i.value || y), value: e.value }, { divider: !0 }, ...v] } return v }), collection: l, onSelect: r, onSelectItem: p, loading: u }; function r(v) { if (v === "all") return l.value = null, t("input", "all"); l.value = v } function p(v) { if (l.value === "directus_users") return t("input", "user_" + v[0]); if (l.value === "directus_roles") return t("input", "role_" + v[0]) } async function f() { if (!o.value) { i.value = null; return } u.value = !0; const [v, _] = e.value.split("_"); if (v === "role") { const y = await ue.get("/roles/" + _, { params: { fields: ["id", "name"] } }); i.value = y.data.data.name } else if (v === "user") { const y = await ue.get("/users/" + _, { params: { fields: ["id", "first_name", "last_name", "email"] } }); i.value = yt(y.data.data) } u.value = !1 } } }); function TX(e, t, n, l, i, u) { const o = c("v-skeleton-loader"), s = c("v-select"), r = c("drawer-collection"); return m(), I("div", null, [e.loading ? (m(), C(o, { key: 0 })) : (m(), C(s, { key: 1, "model-value": e.value, items: e.options, "onUpdate:modelValue": e.onSelect }, null, 8, ["model-value", "items", "onUpdate:modelValue"])), e.collection !== null ? (m(), C(r, { key: 2, active: e.collection !== null, collection: e.collection, "onUpdate:active": t[0] || (t[0] = p => e.collection = null), onInput: e.onSelectItem }, null, 8, ["active", "collection", "onInput"])) : R("", !0)]) } var PX = B(DX, [["render", TX]]), OX = Me({ id: "system-scope", name: "$t:scope", icon: "arrow_drop_down_circle", component: PX, types: ["string"], options: [], system: !0 }), LX = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: OX }); const { interfacesRaw: pr } = St(); async function jX(e) { const n = Object.values({ "./boolean/index.ts": Vq, "./datetime/index.ts": Nq, "./file/index.ts": Jq, "./file-image/index.ts": pz, "./files/index.ts": wz, "./group-accordion/index.ts": Tz, "./group-detail/index.ts": Mz, "./group-raw/index.ts": Kz, "./input/index.ts": Xz, "./input-autocomplete-api/index.ts": lK, "./input-code/index.ts": pK, "./input-hash/index.ts": gK, "./input-multiline/index.ts": SK, "./input-rich-text-html/index.ts": AK, "./input-rich-text-md/index.ts": JK, "./list/index.ts": fH, "./list-m2a/index.ts": FH, "./list-m2m/index.ts": RH, "./list-o2m/index.ts": GH, "./list-o2m-tree-view/index.ts": cW, "./map/index.ts": KW, "./presentation-divider/index.ts": QW, "./presentation-links/index.ts": nG, "./presentation-notice/index.ts": dG, "./select-color/index.ts": _G, "./select-dropdown/index.ts": wG, "./select-dropdown-m2o/index.ts": EG, "./select-icon/index.ts": jG, "./select-multiple-checkbox/index.ts": zG, "./select-multiple-checkbox-tree/index.ts": YG, "./select-multiple-dropdown/index.ts": oJ, "./select-radio/index.ts": cJ, "./slider/index.ts": _J, "./tags/index.ts": CJ, "./translations/index.ts": UJ, "./_system/system-collection/index.ts": KJ, "./_system/system-collections/index.ts": QJ, "./_system/system-display-template/index.ts": tQ, "./_system/system-field/index.ts": iQ, "./_system/system-field-tree/index.ts": pQ, "./_system/system-filter/index.ts": MQ, "./_system/system-folder/index.ts": WQ, "./_system/system-interface/index.ts": ZQ, "./_system/system-interface-options/index.ts": lX, "./_system/system-language/index.ts": rX, "./_system/system-mfa-setup/index.ts": yX, "./_system/system-modules/index.ts": EX, "./_system/system-scope/index.ts": LX }).map(l => l.default); try { const l = await j(() => import(`${Ye()}extensions/interfaces/index.js`), []); n.push(...l.default) } catch (l) { console.warn("Couldn't load custom interfaces"), console.warn(l) } pr.value = n, pr.value.forEach(l => { e.component(`interface-${l.id}`, l.component), typeof l.options != "function" && Array.isArray(l.options) === !1 && l.options !== null && e.component(`interface-options-${l.id}`, l.options) }) } function RX(e) { switch (e) { case "af": return j(() => import("./assets/af.0ae12dd5.js").then(function (t) { return t.a }), []); case "ar-dz": return j(() => import("./assets/ar-dz.4def840c.js").then(function (t) { return t.a }), []); case "ar-kw": return j(() => import("./assets/ar-kw.8e19bfac.js").then(function (t) { return t.a }), []); case "ar-ly": return j(() => import("./assets/ar-ly.1c517370.js").then(function (t) { return t.a }), []); case "ar-ma": return j(() => import("./assets/ar-ma.f01598f3.js").then(function (t) { return t.a }), []); case "ar-sa": return j(() => import("./assets/ar-sa.c5fe14e9.js").then(function (t) { return t.a }), []); case "ar-tn": return j(() => import("./assets/ar-tn.121f69b2.js").then(function (t) { return t.a }), []); case "ar": return j(() => import("./assets/ar.bed29460.js").then(function (t) { return t.a }), []); case "az": return j(() => import("./assets/az.706ff558.js").then(function (t) { return t.a }), []); case "bg": return j(() => import("./assets/bg.1c68ab52.js").then(function (t) { return t.b }), []); case "bn": return j(() => import("./assets/bn.52d26e23.js").then(function (t) { return t.b }), []); case "bs": return j(() => import("./assets/bs.4d20add5.js").then(function (t) { return t.b }), []); case "ca": return j(() => import("./assets/ca.a79eb6d2.js").then(function (t) { return t.c }), []); case "cs": return j(() => import("./assets/cs.b1e8bc14.js").then(function (t) { return t.c }), []); case "cy": return j(() => import("./assets/cy.ac181a59.js").then(function (t) { return t.c }), []); case "da": return j(() => import("./assets/da.4016bc22.js").then(function (t) { return t.d }), []); case "de-at": return j(() => import("./assets/de-at.c36ba3d5.js").then(function (t) { return t.d }), []); case "de": return j(() => import("./assets/de.31ae30a8.js").then(function (t) { return t.d }), []); case "el": return j(() => import("./assets/el.59a913c2.js").then(function (t) { return t.e }), []); case "en-au": return j(() => import("./assets/en-au.169355d7.js").then(function (t) { return t.e }), []); case "en-gb": return j(() => import("./assets/en-gb.0b977da8.js").then(function (t) { return t.e }), []); case "en-nz": return j(() => import("./assets/en-nz.6296f2b6.js").then(function (t) { return t.e }), []); case "eo": return j(() => import("./assets/eo.d92d8fbf.js").then(function (t) { return t.e }), []); case "es-us": return j(() => import("./assets/es-us.35915abe.js").then(function (t) { return t.e }), []); case "es": return j(() => import("./assets/es.c516dd05.js").then(function (t) { return t.e }), []); case "et": return j(() => import("./assets/et.420b5f6d.js").then(function (t) { return t.e }), []); case "eu": return j(() => import("./assets/eu.edaff4b0.js").then(function (t) { return t.e }), []); case "fa": return j(() => import("./assets/fa.f3993a60.js").then(function (t) { return t.f }), []); case "fi": return j(() => import("./assets/fi.3ee32d07.js").then(function (t) { return t.f }), []); case "fr-ca": return j(() => import("./assets/fr-ca.e2e64899.js").then(function (t) { return t.f }), []); case "fr-ch": return j(() => import("./assets/fr-ch.e9042a4c.js").then(function (t) { return t.f }), []); case "fr": return j(() => import("./assets/fr.9d599b24.js").then(function (t) { return t.f }), []); case "gl": return j(() => import("./assets/gl.b8341ed4.js").then(function (t) { return t.g }), []); case "he": return j(() => import("./assets/he.18403882.js").then(function (t) { return t.h }), []); case "hi": return j(() => import("./assets/hi.e2a17765.js").then(function (t) { return t.h }), []); case "hr": return j(() => import("./assets/hr.57f77dc3.js").then(function (t) { return t.h }), []); case "hu": return j(() => import("./assets/hu.adb9ccdc.js").then(function (t) { return t.h }), []); case "hy-am": return j(() => import("./assets/hy-am.59b7a75e.js").then(function (t) { return t.h }), []); case "id": return j(() => import("./assets/id.bc299c4a.js").then(function (t) { return t.i }), []); case "is": return j(() => import("./assets/is.2eb43668.js").then(function (t) { return t.i }), []); case "it": return j(() => import("./assets/it.e663f69e.js").then(function (t) { return t.i }), []); case "ja": return j(() => import("./assets/ja.21755c02.js").then(function (t) { return t.j }), []); case "ka": return j(() => import("./assets/ka.09267484.js").then(function (t) { return t.k }), []); case "kk": return j(() => import("./assets/kk.c27d7d0f.js").then(function (t) { return t.k }), []); case "ko": return j(() => import("./assets/ko.86462d08.js").then(function (t) { return t.k }), []); case "lb": return j(() => import("./assets/lb.b4fb4102.js").then(function (t) { return t.l }), []); case "lt": return j(() => import("./assets/lt.bec1e735.js").then(function (t) { return t.l }), []); case "lv": return j(() => import("./assets/lv.1d9eac62.js").then(function (t) { return t.l }), []); case "mk": return j(() => import("./assets/mk.ac873732.js").then(function (t) { return t.m }), []); case "ms": return j(() => import("./assets/ms.a8caaf33.js").then(function (t) { return t.m }), []); case "nb": return j(() => import("./assets/nb.c4e12345.js").then(function (t) { return t.n }), []); case "ne": return j(() => import("./assets/ne.8c2e7d13.js").then(function (t) { return t.n }), []); case "nl": return j(() => import("./assets/nl.15edef36.js").then(function (t) { return t.n }), []); case "nn": return j(() => import("./assets/nn.33ea37c6.js").then(function (t) { return t.n }), []); case "pl": return j(() => import("./assets/pl.8a0826b3.js").then(function (t) { return t.p }), []); case "pt-br": return j(() => import("./assets/pt-br.e87cb008.js").then(function (t) { return t.p }), []); case "pt": return j(() => import("./assets/pt.de450764.js").then(function (t) { return t.p }), []); case "ro": return j(() => import("./assets/ro.1786958f.js").then(function (t) { return t.r }), []); case "ru": return j(() => import("./assets/ru.2c0e4894.js").then(function (t) { return t.r }), []); case "sk": return j(() => import("./assets/sk.e174a41b.js").then(function (t) { return t.s }), []); case "sl": return j(() => import("./assets/sl.34422efd.js").then(function (t) { return t.s }), []); case "sq": return j(() => import("./assets/sq.ee367a13.js").then(function (t) { return t.s }), []); case "sr-cyrl": return j(() => import("./assets/sr-cyrl.0abb2793.js").then(function (t) { return t.s }), []); case "sr": return j(() => import("./assets/sr.efb7e3ec.js").then(function (t) { return t.s }), []); case "sv": return j(() => import("./assets/sv.b9d19aa9.js").then(function (t) { return t.s }), []); case "ta-in": return j(() => import("./assets/ta-in.8c88aa82.js").then(function (t) { return t.t }), []); case "th": return j(() => import("./assets/th.d0e24ade.js").then(function (t) { return t.t }), []); case "tr": return j(() => import("./assets/tr.d887c301.js").then(function (t) { return t.t }), []); case "ug": return j(() => import("./assets/ug.2ae6849b.js").then(function (t) { return t.u }), []); case "uk": return j(() => import("./assets/uk.69d22b7d.js").then(function (t) { return t.u }), []); case "uz": return j(() => import("./assets/uz.a2abf7be.js").then(function (t) { return t.u }), []); case "vi": return j(() => import("./assets/vi.cc30f87c.js").then(function (t) { return t.v }), []); case "zh-cn": return j(() => import("./assets/zh-cn.f12689f7.js").then(function (t) { return t.z }), []); case "zh-tw": return j(() => import("./assets/zh-tw.c5aeda5a.js").then(function (t) { return t.z }), []); default: return Promise.resolve() } } async function MX(e) { const t = [e, e.split("-")[0], "en-US"]; let n; for (const l of t) try { const i = await RX(l); n = i.default.default || i.default; break } catch { continue } return n } const UX = z({ inheritAttrs: !1, props: { itemCount: { type: Number, default: null }, showingCount: { type: String, default: null } } }), NX = { key: 0, class: "item-count" }; function BX(e, t, n, l, i, u) { return m(), C(Lt, { name: "fade" }, { default: d(() => [e.itemCount ? (m(), I("span", NX, b(e.showingCount), 1)) : R("", !0)]), _: 1 }) } var qX = B(UX, [["render", BX], ["__scopeId", "data-v-ceefb89c"]]); const zX = z({ inheritAttrs: !1, props: { createCalendar: { type: Function, required: !0 }, destroyCalendar: { type: Function, required: !0 } }, setup(e) { const t = E(); return at(() => { e.createCalendar(t.value) }), At(() => { e.destroyCalendar() }), { calendarElement: t } } }), KX = { class: "calendar-layout" }, HX = { ref: "calendarElement" }; function WX(e, t, n, l, i, u) { return m(), I("div", KX, [S("div", HX, null, 512)]) } var GX = B(zX, [["render", WX], ["__scopeId", "data-v-eebe6fa2"]]); const JX = z({ inheritAttrs: !1, props: { collection: { type: String, required: !0 }, template: { type: String, default: null }, dateFields: { type: Array, required: !0 }, startDateField: { type: String, default: null }, endDateField: { type: String, default: null } }, emits: ["update:template", "update:startDateField", "update:endDateField"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "template", t), i = Re(e, "startDateField", t), u = Re(e, "endDateField", t); return { t: n, templateWritable: l, startDateFieldWritable: i, endDateFieldWritable: u } } }), QX = { class: "field" }, XX = { class: "type-label" }, ZX = { class: "field" }, YX = { class: "type-label" }, xX = { class: "field" }, eZ = { class: "type-label" }; function tZ(e, t, n, l, i, u) { const o = c("v-field-template"), s = c("v-select"); return m(), I(se, null, [S("div", QX, [S("div", XX, b(e.t("display_template")), 1), a(o, { modelValue: e.templateWritable, "onUpdate:modelValue": t[0] || (t[0] = r => e.templateWritable = r), collection: e.collection }, null, 8, ["modelValue", "collection"])]), S("div", ZX, [S("div", YX, b(e.t("layouts.calendar.start_date_field")), 1), a(s, { modelValue: e.startDateFieldWritable, "onUpdate:modelValue": t[1] || (t[1] = r => e.startDateFieldWritable = r), "show-deselect": "", items: e.dateFields, "item-text": "name", "item-value": "field" }, null, 8, ["modelValue", "items"])]), S("div", xX, [S("div", eZ, b(e.t("layouts.calendar.end_date_field")), 1), a(s, { modelValue: e.endDateFieldWritable, "onUpdate:modelValue": t[2] || (t[2] = r => e.endDateFieldWritable = r), "show-deselect": "", items: e.dateFields, "item-text": "name", "item-value": "field" }, null, 8, ["modelValue", "items"])])], 64) } var nZ = B(JX, [["render", tZ]]), lZ = cl({ id: "calendar", name: "$t:layouts.calendar.calendar", icon: "event", component: GX, slots: { options: nZ, sidebar: () => { }, actions: qX }, setup(e, { emit: t }) { const { t: n, locale: l } = x(), i = E(), u = wt(), o = Re(e, "layoutOptions", t), { selection: s, collection: r, filter: p, search: f } = je(e), { primaryKeyField: v, fields: _ } = ot(r), y = V(() => _.value.filter(H => ["timestamp", "dateTime", "date"].includes(H.type))), g = V(() => { if (!i.value || !F.value) return; const H = Un(i.value.view.activeStart), Q = Un(i.value.view.activeEnd), Z = { [F.value]: { _between: [H, Q] } }; if (!P.value) return Z; const le = { [P.value]: { _between: [H, Q] } }, fe = { [F.value]: { _lte: H } }, J = { [P.value]: { _gte: Q } }; return { _or: [Z, le, { _and: [fe, J] }] } }), w = V(() => g.value ? p.value ? { _and: [p.value, g.value] } : null : p.value), h = ct(o, "template", void 0), k = ct(o, "viewInfo", void 0), F = ct(o, "startDateField", void 0), A = V(() => _.value.find(H => H.field === F.value)), P = ct(o, "endDateField", void 0), L = V(() => _.value.find(H => H.field === P.value)), { items: T, loading: N, error: O, totalPages: U, itemCount: q, totalCount: K, changeManualSort: W, getItems: te } = pl(r, { sort: V(() => { var H; return [((H = v.value) == null ? void 0 : H.field) || ""] }), page: E(1), limit: E(-1), fields: V(() => { if (!v.value) return []; const H = [v.value.field]; return h.value && H.push(...vt(h.value)), F.value && H.push(F.value), P.value && H.push(P.value), H }), filter: w, search: f }, !1), G = V(() => T.value.map(H => ce(H)).filter(H => H) || []), X = V(() => { var Q, Z, le, fe, J, ie; const H = { editable: !0, eventStartEditable: !0, eventResizableFromStart: !0, eventDurationEditable: !0, dayMaxEventRows: !0, height: "100%", nextDayThreshold: "01:00:00", plugins: [Dd, Td, Pd, Od], initialView: (Z = (Q = k.value) == null ? void 0 : Q.type) != null ? Z : "dayGridMonth", headerToolbar: { left: "prevYear,prev,next,nextYear today", center: "title", right: "dayGridMonth,dayGridWeek,dayGridDay,listWeek" }, events: G.value, initialDate: (fe = (le = k.value) == null ? void 0 : le.startDateStr) != null ? fe : Un(new Date), eventClick(oe) { var me; if (!!r.value) if (e.selectMode || ((me = s.value) == null ? void 0 : me.length) > 0) { const ge = T.value.find(be => be[v.value.field] == oe.event.id); ge && (s.value.includes(ge) ? s.value = s.value.filter(be => be !== ge) : s.value = [...s.value, ge], ae()) } else { const ge = oe.event.id, be = r.value.startsWith("directus") ? r.value.substring(9) : `content/${r.value}`; Rt.push(`/${be}/${ge}`) } }, async eventChange(oe) { if (!r.value || !F.value || !A.value) return; const me = { [F.value]: pe(oe.event.startStr, A.value.type) }; P.value && L.value && oe.event.endStr && (me[P.value] = pe(oe.event.endStr, L.value.type)); const ge = r.value.startsWith("directus") ? r.value.substring(9) : `/items/${r.value}`; try { await ue.patch(`${ge}/${oe.event.id}`, me) } catch (be) { Ve(be) } } }; return (((J = A.value) == null ? void 0 : J.type) === "dateTime" || ((ie = A.value) == null ? void 0 : ie.type) === "timestamp") && (H.headerToolbar = Ce(re({}, H.headerToolbar), { right: "dayGridMonth,timeGridWeek,timeGridDay,listWeek" })), H }); _e(() => u.sidebarOpen, () => setTimeout(() => { var H; return (H = i.value) == null ? void 0 : H.updateSize() }, 300)), _e(X, () => ae(), { deep: !0, immediate: !0 }), _e([i, l], async () => { if (i.value) { const H = await MX(l.value); i.value.setOption("locale", H) } }, { immediate: !0 }); const ve = V(() => q.value ? n("item_count", q.value) : null); return { items: T, loading: N, error: O, totalPages: U, itemCount: q, totalCount: K, changeManualSort: W, getItems: te, filterWithCalendarView: w, template: h, dateFields: y, startDateField: F, endDateField: P, showingCount: ve, createCalendar: ne, destroyCalendar: Y }; function ae() { i.value && (i.value.pauseRendering(), i.value.resetOptions(X.value), i.value.resumeRendering(), i.value.render()) } function ne(H) { i.value = new Ld(H, X.value), i.value.on("datesSet", Q => { k.value = { type: Q.view.type, startDateStr: Un(Q.view.currentStart) } }), i.value.render() } function Y() { var H; (H = i.value) == null || H.destroy() } function ce(H) { if (!F.value || !v.value) return null; let Q; const Z = L.value && L.value.type === "date"; if (P.value) if (Z) { const le = sn(H[P.value], "yyyy-MM-dd", new Date); le.setDate(le.getDate() + 1), Q = an(le, "yyyy-MM-dd") } else Q = H[P.value]; return { id: H[v.value.field], title: _8(h.value || `{{ ${v.value.field} }}`, H) || void 0, start: H[F.value], end: Q, allDay: Z, className: s.value.includes(H) ? "selected" : void 0 } } function pe(H, Q) { return Q === "dateTime" ? H.substring(0, 19) : H } } }), oZ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: lZ }); const aZ = z({ props: { icon: { type: String, default: "box" }, file: { type: Object, default: null }, crop: { type: Boolean, default: !1 }, loading: { type: Boolean, default: !1 }, item: { type: Object, default: null }, modelValue: { type: Array, default: () => [] }, selectMode: { type: Boolean, default: !1 }, to: { type: String, default: "" }, readonly: { type: Boolean, default: !1 }, itemKey: { type: String, required: !0 } }, emits: ["update:modelValue"], setup(e, { emit: t }) { const n = tt(), l = E(!1), i = V(() => !e.file || !e.file.type || !l.value && e.file.type.startsWith("image") ? null : Jn(e.file.type, !0)), u = V(() => { if (!e.file || !e.file.type || e.file.type.startsWith("image") === !1 || e.file.type.includes("svg")) return null; let f = "system-medium-cover"; e.crop === !1 && (f = "system-medium-contain"); const v = Ye() + `assets/${e.file.id}?key=${f}&modified=${e.file.modified_on}`; return st(v) }), o = V(() => { if (!e.file || !e.file.type || e.file.type.startsWith("image") === !1 || e.file.type.includes("svg") === !1) return null; const f = Ye() + `assets/${e.file.id}?modified=${e.file.modified_on}`; return st(f) }), s = V(() => e.item && e.modelValue.includes(e.item[e.itemKey]) ? "check_circle" : "radio_button_unchecked"); return { imageSource: u, svgSource: o, type: i, selectionIcon: s, toggleSelection: r, handleClick: p, imgError: l }; function r() { if (!e.item) return null; e.modelValue.includes(e.item[e.itemKey]) ? t("update:modelValue", e.modelValue.filter(f => f !== e.item[e.itemKey])) : t("update:modelValue", [...e.modelValue, e.item[e.itemKey]]) } function p() { e.selectMode === !0 ? r() : n.push(e.to) } } }), iZ = e => (Qe("data-v-2f2457e2"), e = e(), Xe(), e), sZ = { class: "header" }, rZ = iZ(() => S("div", { class: "selection-fade" }, null, -1)), dZ = { key: 0, class: "type type-title" }, uZ = ["src"], cZ = ["src"], pZ = { key: 0, class: "title" }, mZ = { key: 1, class: "subtitle" }; function fZ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-skeleton-loader"); return m(), I("div", { class: de(["card", { loading: e.loading, readonly: e.readonly, selected: e.item && e.modelValue.includes(e.item[e.itemKey]), "select-mode": e.selectMode }]), onClick: t[2] || (t[2] = (...r) => e.handleClick && e.handleClick(...r)) }, [a(o, { class: "selector", name: e.selectionIcon, onClick: Ae(e.toggleSelection, ["stop"]) }, null, 8, ["name", "onClick"]), S("div", sZ, [rZ, e.loading ? (m(), C(s, { key: 0 })) : (m(), I(se, { key: 1 }, [e.type || e.imgError ? (m(), I("p", dZ, b(e.type), 1)) : (m(), I(se, { key: 1 }, [e.imageSource ? (m(), I("img", { key: 0, class: "image", loading: "lazy", src: e.imageSource, alt: "", role: "presentation", onError: t[0] || (t[0] = r => e.imgError = !0) }, null, 40, uZ)) : e.svgSource ? (m(), I("img", { key: 1, class: "svg", src: e.svgSource, alt: "", role: "presentation", onError: t[1] || (t[1] = r => e.imgError = !0) }, null, 40, cZ)) : (m(), C(o, { key: 2, large: "", name: e.icon }, null, 8, ["name"]))], 64))], 64))]), e.loading ? (m(), C(s, { key: 0, type: "text" })) : (m(), I(se, { key: 1 }, [e.$slots.title ? (m(), I("div", pZ, [ye(e.$slots, "title", {}, void 0, !0)])) : R("", !0), e.$slots.subtitle ? (m(), I("div", mZ, [ye(e.$slots, "subtitle", {}, void 0, !0)])) : R("", !0)], 64))], 2) } var vZ = B(aZ, [["render", fZ], ["__scopeId", "data-v-2f2457e2"]]); const _Z = z({ props: { fields: { type: Array, required: !0 }, size: { type: Number, required: !0 }, sort: { type: Array, required: !0 }, selection: { type: Array, default: () => [] } }, emits: ["select-all", "update:size", "update:sort", "update:selection"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "size", t), i = Re(e, "sort", t), u = Re(e, "selection", t), o = V(() => e.sort[0].startsWith("-")), s = V(() => e.sort[0].startsWith("-") ? e.sort[0].substring(1) : e.sort[0]), r = V(() => e.fields.find(_ => _.field === s.value)), p = V(() => e.fields.filter(_ => _.field.startsWith("$") === !1).map(_ => ({ field: _.field, name: _.name, disabled: ["json", "o2m", "m2o", "m2a", "file", "files", "alias", "presentation"].includes(_.type) }))); return { t: n, toggleSize: f, descending: o, toggleDescending: v, sortField: r, sizeSync: l, sortSync: i, selectionSync: u, sortKey: s, fieldsWithoutFake: p }; function f() { e.size >= 2 && e.size < 5 ? l.value++ : l.value = 2 } function v() { o.value === !0 ? i.value = [i.value[0].substring(1)] : i.value = ["-" + i.value] } } }), yZ = { class: "cards-header" }, gZ = { class: "start" }, hZ = { class: "label" }, bZ = { class: "label" }, $Z = { class: "end" }, wZ = ["onClick"]; function kZ(e, t, n, l, i, u) { const o = c("v-icon"), s = c("v-list-item-content"), r = c("v-list-item"), p = c("v-list"), f = c("v-menu"), v = we("tooltip"); return m(), I("div", yZ, [S("div", gZ, [e.selectionSync.length > 0 ? (m(), I("div", { key: 0, class: "selected", onClick: t[0] || (t[0] = _ => e.selectionSync = []) }, [a(o, { name: "cancel", outline: "" }), S("span", hZ, b(e.t("n_items_selected", e.selectionSync.length)), 1)])) : (m(), I("button", { key: 1, class: "select-all", onClick: t[1] || (t[1] = _ => e.$emit("select-all")) }, [a(o, { name: "check_circle", outline: "" }), S("span", bZ, b(e.t("select_all")), 1)]))]), S("div", $Z, [ee(a(o, { class: "size-selector", name: `grid_${7 - e.size}`, clickable: "", onClick: e.toggleSize }, null, 8, ["name", "onClick"]), [[v, e.t("card_size"), void 0, { top: !0 }]]), a(f, { "show-arrow": "", placement: "bottom" }, { activator: d(({ toggle: _ }) => [ee(S("div", { class: "sort-selector", onClick: _ }, [D(b(e.sortField && e.sortField.name), 1)], 8, wZ), [[v, e.t("sort_field"), void 0, { top: !0 }]])]), default: d(() => [a(p, null, { default: d(() => [(m(!0), I(se, null, he(e.fieldsWithoutFake, _ => (m(), C(r, { key: _.field, disabled: _.disabled, active: _.field === e.sortKey, clickable: "", onClick: y => e.sortSync = [_.field] }, { default: d(() => [a(s, null, { default: d(() => [D(b(_.name), 1)]), _: 2 }, 1024)]), _: 2 }, 1032, ["disabled", "active", "onClick"]))), 128))]), _: 1 })]), _: 1 }), ee(a(o, { class: de(["sort-direction", { descending: e.descending }]), name: "sort", clickable: "", onClick: e.toggleDescending }, null, 8, ["class", "onClick"]), [[v, e.t("sort_direction"), void 0, { top: !0 }]])])]) } var SZ = B(_Z, [["render", kZ], ["__scopeId", "data-v-333e0228"]]); const CZ = z({ components: { Card: vZ, CardsHeader: SZ }, inheritAttrs: !1, props: { collection: { type: String, required: !0 }, selection: { type: Array, required: !0 }, selectMode: { type: Boolean, required: !0 }, readonly: { type: Boolean, required: !0 }, items: { type: Array, required: !0 }, loading: { type: Boolean, required: !0 }, error: { type: Object, default: null }, totalPages: { type: Number, required: !0 }, page: { type: Number, required: !0 }, toPage: { type: Function, required: !0 }, itemCount: { type: Number, default: null }, fieldsInCollection: { type: Array, required: !0 }, limit: { type: Number, required: !0 }, size: { type: Number, required: !0 }, primaryKeyField: { type: Object, default: null }, icon: { type: String, required: !0 }, imageSource: { type: String, default: null }, title: { type: String, default: null }, subtitle: { type: String, default: null }, getLinkForItem: { type: Function, required: !0 }, imageFit: { type: String, required: !0 }, sort: { type: Array, required: !0 }, info: { type: Object, default: null }, isSingleRow: { type: Boolean, required: !0 }, width: { type: Number, required: !0 }, selectAll: { type: Function, required: !0 }, resetPresetAndRefresh: { type: Function, required: !0 }, filter: { type: Object, default: null }, search: { type: String, default: null } }, emits: ["update:selection", "update:limit", "update:size", "update:sort", "update:width"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "selection", t), i = Re(e, "limit", t), u = Re(e, "size", t), o = Re(e, "sort", t), s = ht("main-element"), r = E(), { width: p } = Qn(r); return _e(() => e.page, () => { var f; return (f = s.value) == null ? void 0 : f.scrollTo({ top: 0, behavior: "smooth" }) }), _e(p, () => { t("update:width", p.value) }), { t: n, selectionWritable: l, limitWritable: i, sizeWritable: u, sortWritable: o, layoutElement: r } } }), VZ = { class: "footer" }, FZ = { class: "pagination" }, AZ = { key: 0, class: "per-page" }; function IZ(e, t, n, l, i, u) { const o = c("cards-header"), s = c("render-template"), r = c("card"), p = c("v-pagination"), f = c("v-select"), v = c("v-error"), _ = c("v-button"), y = c("v-info"); return m(), I("div", { ref: "layoutElement", class: "layout-cards", style: Ke({ "--size": e.size * 40 + "px" }) }, [e.loading || e.itemCount > 0 ? (m(), I(se, { key: 0 }, [a(o, { size: e.sizeWritable, "onUpdate:size": t[0] || (t[0] = g => e.sizeWritable = g), selection: e.selectionWritable, "onUpdate:selection": t[1] || (t[1] = g => e.selectionWritable = g), sort: e.sortWritable, "onUpdate:sort": t[2] || (t[2] = g => e.sortWritable = g), fields: e.fieldsInCollection, onSelectAll: e.selectAll }, null, 8, ["size", "selection", "sort", "fields", "onSelectAll"]), S("div", { class: de(["grid", { "single-row": e.isSingleRow }]) }, [(m(!0), I(se, null, he(e.items, g => (m(), C(r, { key: g[e.primaryKeyField.field], modelValue: e.selectionWritable, "onUpdate:modelValue": t[3] || (t[3] = w => e.selectionWritable = w), "item-key": e.primaryKeyField.field, crop: e.imageFit === "crop", icon: e.icon, file: e.imageSource ? g[e.imageSource] : null, item: g, "select-mode": e.selectMode || e.selection && e.selection.length > 0, to: e.getLinkForItem(g), readonly: e.readonly }, et({ _: 2 }, [e.title ? { name: "title", fn: d(() => [a(s, { collection: e.collection, item: g, template: e.title }, null, 8, ["collection", "item", "template"])]) } : void 0, e.subtitle ? { name: "subtitle", fn: d(() => [a(s, { collection: e.collection, item: g, template: e.subtitle }, null, 8, ["collection", "item", "template"])]) } : void 0]), 1032, ["modelValue", "item-key", "crop", "icon", "file", "item", "select-mode", "to", "readonly"]))), 128))], 2), S("div", VZ, [S("div", FZ, [e.totalPages > 1 ? (m(), C(p, { key: 0, length: e.totalPages, "total-visible": 7, "show-first-last": "", "model-value": e.page, "onUpdate:modelValue": e.toPage }, null, 8, ["length", "model-value", "onUpdate:modelValue"])) : R("", !0)]), e.loading === !1 && e.items.length >= 25 ? (m(), I("div", AZ, [S("span", null, b(e.t("per_page")), 1), a(f, { "model-value": `${e.limit}`, items: ["25", "50", "100", "250", "500", "1000"], inline: "", "onUpdate:modelValue": t[4] || (t[4] = g => e.limitWritable = +g) }, null, 8, ["model-value"])])) : R("", !0)])], 64)) : e.error ? (m(), C(y, { key: 1, type: "danger", title: e.t("unexpected_error"), icon: "error", center: "" }, { append: d(() => [a(v, { error: e.error }, null, 8, ["error"]), a(_, { small: "", class: "reset-preset", onClick: e.resetPresetAndRefresh }, { default: d(() => [D(b(e.t("reset_page_preferences")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("unexpected_error_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : e.itemCount === 0 && (e.filter || e.search) ? ye(e.$slots, "no-results", { key: 2 }, void 0, !0) : e.itemCount === 0 ? ye(e.$slots, "no-items", { key: 3 }, void 0, !0) : R("", !0)], 4) } var EZ = B(CZ, [["render", IZ], ["__scopeId", "data-v-d275a1b8"]]); const DZ = z({ inheritAttrs: !1, props: { collection: { type: String, required: !0 }, icon: { type: String, required: !0 }, fileFields: { type: Array, required: !0 }, imageSource: { type: String, default: null }, title: { type: String, default: null }, subtitle: { type: String, default: null }, imageFit: { type: String, required: !0 } }, emits: ["update:icon", "update:imageSource", "update:title", "update:subtitle", "update:imageFit"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "icon", t), i = Re(e, "imageSource", t), u = Re(e, "title", t), o = Re(e, "subtitle", t), s = Re(e, "imageFit", t); return { t: n, iconWritable: l, imageSourceWritable: i, titleWritable: u, subtitleWritable: o, imageFitWritable: s } } }), TZ = { class: "field" }, PZ = { class: "type-label" }, OZ = { class: "field" }, LZ = { class: "type-label" }, jZ = { class: "field" }, RZ = { class: "type-label" }, MZ = { class: "nested-options" }, UZ = { class: "field" }, NZ = { class: "type-label" }, BZ = { class: "field" }, qZ = { class: "type-label" }; function zZ(e, t, n, l, i, u) { const o = c("v-select"), s = c("v-field-template"), r = c("interface-select-icon"), p = c("v-detail"); return m(), I(se, null, [S("div", TZ, [S("div", PZ, b(e.t("layouts.cards.image_source")), 1), a(o, { modelValue: e.imageSourceWritable, "onUpdate:modelValue": t[0] || (t[0] = f => e.imageSourceWritable = f), "show-deselect": "", "item-value": "field", "item-text": "name", items: e.fileFields }, null, 8, ["modelValue", "items"])]), S("div", OZ, [S("div", LZ, b(e.t("layouts.cards.title")), 1), a(s, { modelValue: e.titleWritable, "onUpdate:modelValue": t[1] || (t[1] = f => e.titleWritable = f), collection: e.collection }, null, 8, ["modelValue", "collection"])]), S("div", jZ, [S("div", RZ, b(e.t("layouts.cards.subtitle")), 1), a(s, { modelValue: e.subtitleWritable, "onUpdate:modelValue": t[2] || (t[2] = f => e.subtitleWritable = f), collection: e.collection }, null, 8, ["modelValue", "collection"])]), a(p, { class: "field" }, { title: d(() => [D(b(e.t("layout_setup")), 1)]), default: d(() => [S("div", MZ, [S("div", UZ, [S("div", NZ, b(e.t("layouts.cards.image_fit")), 1), a(o, { modelValue: e.imageFitWritable, "onUpdate:modelValue": t[3] || (t[3] = f => e.imageFitWritable = f), disabled: e.imageSource === null, items: [{ text: e.t("layouts.cards.crop"), value: "crop" }, { text: e.t("layouts.cards.contain"), value: "contain" }] }, null, 8, ["modelValue", "disabled", "items"])]), S("div", BZ, [S("div", qZ, b(e.t("fallback_icon")), 1), a(r, { value: e.icon, onInput: t[4] || (t[4] = f => e.iconWritable = f) }, null, 8, ["value"])])])]), _: 1 })], 64) } var KZ = B(DZ, [["render", zZ], ["__scopeId", "data-v-1167aeea"]]); const HZ = z({ inheritAttrs: !1, props: { itemCount: { type: Number, default: null }, showingCount: { type: String, required: !0 } } }), WZ = { key: 0, class: "item-count" }; function GZ(e, t, n, l, i, u) { return m(), C(Lt, { name: "fade" }, { default: d(() => [e.itemCount ? (m(), I("span", WZ, b(e.showingCount), 1)) : R("", !0)]), _: 1 }) } var JZ = B(HZ, [["render", GZ], ["__scopeId", "data-v-4039d1ee"]]), QZ = cl({ id: "cards", name: "$t:layouts.cards.cards", icon: "grid_4", component: EZ, slots: { options: KZ, sidebar: () => { }, actions: JZ }, setup(e, { emit: t }) { const { t: n, n: l } = x(), i = ut(), u = Re(e, "selection", t), o = Re(e, "layoutOptions", t), s = Re(e, "layoutQuery", t), { collection: r, filter: p, search: f, filterUser: v } = je(e), { info: _, primaryKeyField: y, fields: g } = ot(r), w = V(() => g.value.filter(J => J.field === "$thumbnail" ? !0 : !!i.relations.find(oe => oe.collection === e.collection && oe.field === J.field && oe.related_collection === "directus_files"))), { size: h, icon: k, imageSource: F, title: A, subtitle: P, imageFit: L } = Q(), { sort: T, limit: N, page: O, fields: U } = Z(), { items: q, loading: K, error: W, totalPages: te, itemCount: G, totalCount: X, getItems: ve } = pl(r, { sort: T, limit: N, page: O, fields: U, filter: p, search: f }), ae = V(() => (G.value || 0) < (X.value || 0) && v.value ? G.value === 1 ? n("one_filtered_item") : n("start_end_of_count_filtered_items", { start: l((+O.value - 1) * N.value + 1), end: l(Math.min(O.value * N.value, G.value || 0)), count: l(G.value || 0) }) : G.value === 1 ? n("one_item") : n("start_end_of_count_items", { start: l((+O.value - 1) * N.value + 1), end: l(Math.min(O.value * N.value, G.value || 0)), count: l(G.value || 0) })), ne = E(0), Y = V(() => q.value.length * (h.value * 40) + (q.value.length - 1) * 24 <= ne.value); return { items: q, loading: K, error: W, totalPages: te, page: O, toPage: H, itemCount: G, totalCount: X, fieldsInCollection: g, limit: N, size: h, primaryKeyField: y, icon: k, fileFields: w, imageSource: F, title: A, subtitle: P, getLinkForItem: le, imageFit: L, sort: T, info: _, showingCount: ae, isSingleRow: Y, width: ne, refresh: pe, selectAll: fe, resetPresetAndRefresh: ce, filter: p, search: f }; async function ce() { var J; await ((J = e == null ? void 0 : e.resetPreset) == null ? void 0 : J.call(e)), pe() } function pe() { ve() } function H(J) { O.value = J } function Q() { var Ie, De; const J = ke("size", 4), ie = ke("icon", "box"), oe = ke("title", null), me = ke("subtitle", null), ge = ke("imageSource", (De = (Ie = w.value[0]) == null ? void 0 : Ie.field) != null ? De : null), be = ke("imageFit", "crop"); return { size: J, icon: ie, imageSource: ge, title: oe, subtitle: me, imageFit: be }; function ke(Be, lt) { return V({ get() { var Te, Oe; return ((Te = o.value) == null ? void 0 : Te[Be]) !== void 0 ? (Oe = o.value) == null ? void 0 : Oe[Be] : lt }, set(Te) { o.value = Ce(re({}, o.value), { [Be]: Te }) } }) } } function Z() { const J = ct(s, "page", 1), ie = ct(s, "limit", 25), oe = V(() => { var be; return y.value ? [(be = y.value) == null ? void 0 : be.field] : [] }), me = ct(s, "sort", oe), ge = V(() => { if (!y.value || !e.collection) return []; const be = [y.value.field]; F.value && (be.push(`${F.value}.modified_on`), be.push(`${F.value}.type`), be.push(`${F.value}.filename_disk`), be.push(`${F.value}.storage`), be.push(`${F.value}.id`)), e.collection === "directus_files" && F.value === "$thumbnail" && (be.push("modified_on"), be.push("type")); const ke = []; return A.value && ke.push(...vt(A.value)), P.value && ke.push(...vt(P.value)), [...be, ...Qt(ke, e.collection)] }); return { sort: me, limit: ie, page: J, fields: ge } } function le(J) { if (!!y.value) return `/content/${e.collection}/${encodeURIComponent(J[y.value.field])}` } function fe() { if (!y.value) return; const J = y.value; u.value = M.exports.clone(q.value).map(ie => ie[J.field]) } } }), XZ = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: QZ }); const ZZ = z({ components: {}, props: { data: { type: Object, required: !0 }, source: { type: Object, required: !0 }, layers: { type: Array, default: () => [] }, camera: { type: Object, default: () => ({}) }, bounds: { type: Array, default: void 0 }, featureId: { type: String, default: void 0 }, selection: { type: Array, default: () => [] } }, emits: ["moveend", "featureclick", "featureselect", "fitdata", "updateitempopup"], setup(e, { emit: t }) { const { t: n } = x(), l = wt(); let i; const u = E(), o = E(), s = E(), r = E(), p = [], { sidebarOpen: f, basemap: v } = je(l), _ = An("mapbox_key"), y = Yn(), g = V(() => { var Y; const ne = (Y = y.find(ce => ce.name === v.value)) != null ? Y : y[0]; return To(ne) }), w = new zt.exports.AttributionControl({ compact: !0 }), h = new zt.exports.NavigationControl({ showCompass: !1 }), k = new zt.exports.GeolocateControl, F = new Ko("mapboxgl-ctrl-fitdata", () => { t("fitdata") }), A = new pW({ boxElementClass: "map-selection-box", selectButtonClass: "mapboxgl-ctrl-select", layers: ["__directus_polygons", "__directus_points", "__directus_lines"] }); let P; if (_) { const ne = document.createElement("div"); ne.className = "mapboxgl-user-location-dot mapboxgl-search-location-dot", P = new ca({ accessToken: _, collapsed: !0, marker: { element: ne }, flyTo: { speed: 1.4 }, mapboxgl: Bl, placeholder: n("layouts.map.find_location") }) } return at(() => { L() }), At(() => { i.remove() }), { container: r, hoveredFeature: u, hoveredCluster: o, selectMode: s }; function L() { i = new zt.exports.Map(re(re({ container: "map-container", style: g.value, attributionControl: !1, dragRotate: !1 }, e.camera), _ ? { accessToken: _ } : {})), P && i.addControl(P, "top-right"), i.addControl(w, "top-right"), i.addControl(h, "top-left"), i.addControl(k, "top-left"), i.addControl(F, "top-left"), i.addControl(A, "top-left"), i.on("load", () => { _e(() => g.value, N), _e(() => e.bounds, T); const ne = ["__directus_polygons", "__directus_points", "__directus_lines"]; for (const Y of ne) i.on("click", Y, te), i.on("mousemove", Y, G), i.on("mouseleave", Y, G); i.on("move", X), i.on("click", "__directus_clusters", ve), i.on("mousemove", "__directus_clusters", ae), i.on("mouseleave", "__directus_clusters", ae), i.on("select.enable", () => s.value = !0), i.on("select.disable", () => s.value = !1), i.on("select.end", Y => { var pe; const ce = (pe = Y.features) == null ? void 0 : pe.map(H => H.id); t("featureselect", { ids: ce, replace: !Y.alt }) }), i.on("moveend", Y => { !Y.originalEvent || t("moveend", { center: i.getCenter(), zoom: i.getZoom(), bearing: i.getBearing(), pitch: i.getPitch(), bbox: i.getBounds().toArray().flat() }) }), O() }), _e(() => f.value, ne => { ne || setTimeout(() => i.resize(), 300) }), setTimeout(() => i.resize(), 300) } function T() { const ne = e.data.bbox; i && ne && i.fitBounds(ne, { padding: 100, speed: 1.3, maxZoom: 14 }) } function N(ne) { p.forEach(Y => Y()), p.length = 0, i.setStyle(ne, { diff: !1 }), i.once("styledata", O) } function O() { p.push(_e(() => e.source, q, { immediate: !0 }), _e(() => e.selection, W, { immediate: !0 }), _e(() => e.layers, K), _e(() => e.data, U)) } function U(ne) { i.getSource("__directus").setData(ne), W(e.selection, void 0) } function q(ne) { var ce, pe; const Y = new Set((ce = i.getStyle().layers) == null ? void 0 : ce.map(({ id: H }) => H)); for (const H of e.layers) Y.has(H.id) && i.removeLayer(H.id); e.featureId ? ne.promoteId = e.featureId : ne.generateId = !0, ((pe = i.getStyle().sources) == null ? void 0 : pe.__directus) && i.removeSource("__directus"), i.addSource("__directus", Ce(re({}, ne), { data: e.data })), i.once("sourcedata", () => { setTimeout(() => e.layers.forEach(H => i.addLayer(H))) }) } function K(ne, Y) { var pe; const ce = new Set((pe = i.getStyle().layers) == null ? void 0 : pe.map(({ id: H }) => H)); Y == null || Y.forEach(H => { ce.has(H.id) && i.removeLayer(H.id) }), ne == null || ne.forEach(H => { i.addLayer(H) }) } function W(ne, Y) { Y == null || Y.forEach(ce => { i.setFeatureState({ id: ce, source: "__directus" }, { selected: !1 }), i.removeFeatureState({ id: ce, source: "__directus" }) }), ne == null || ne.forEach(ce => { i.setFeatureState({ id: ce, source: "__directus" }, { selected: !0 }) }) } function te(ne) { var pe; const Y = (pe = ne.features) == null ? void 0 : pe[0], ce = !ne.originalEvent.altKey; Y && e.featureId && (A.active() ? t("featureselect", { ids: [Y.id], replace: ce }) : t("featureclick", { id: Y.id, replace: ce })) } function G(ne) { var H; const Y = i.queryRenderedFeatures(ne.point, { layers: ["__directus_polygons", "__directus_points", "__directus_lines"] })[0], ce = (H = u.value) == null ? void 0 : H.id, pe = ce !== (Y == null ? void 0 : Y.id); if (ce && pe && i.setFeatureState({ id: ce, source: "__directus" }, { hovered: !1 }), Y && Y.properties) { if (Y.geometry.type === "Point") { const { x: Q, y: Z } = i.project(Y.geometry.coordinates), le = i.getContainer().getBoundingClientRect(); t("updateitempopup", { position: { x: le.x + Q, y: le.y + Z } }) } else { const { clientX: Q, clientY: Z } = ne.originalEvent; t("updateitempopup", { position: { x: Q, y: Z } }) } pe && (i.setFeatureState({ id: Y.id, source: "__directus" }, { hovered: !0 }), u.value = Y, t("updateitempopup", { item: Y.id })) } else pe && (u.value = Y, t("updateitempopup", { item: null })) } function X(ne) { if (u.value && ne.originalEvent) { const { x: Y, y: ce } = ne.originalEvent; t("updateitempopup", { position: { x: Y, y: ce } }) } } function ve(ne) { var H, Q; const Y = i.queryRenderedFeatures(ne.point, { layers: ["__directus_clusters"] }), ce = (Q = (H = Y[0]) == null ? void 0 : H.properties) == null ? void 0 : Q.cluster_id; i.getSource("__directus").getClusterExpansionZoom(ce, (Z, le) => { Z || i.flyTo({ center: Y[0].geometry.coordinates, zoom: le, speed: 1.3 }) }) } function ae(ne) { ne.type == "mousemove" ? o.value = !0 : o.value = !1 } } }); function YZ(e, t, n, l, i, u) { return m(), I("div", { id: "map-container", ref: "container", class: de({ select: e.selectMode, hover: e.hoveredFeature || e.hoveredCluster }) }, null, 2) } var xZ = B(ZZ, [["render", YZ], ["__scopeId", "data-v-7eee34bd"]]); const eY = z({ components: { MapComponent: xZ }, inheritAttrs: !1, props: { collection: { type: String, required: !0 }, selection: { type: Array, default: () => [] }, loading: { type: Boolean, required: !0 }, error: { type: Object, default: null }, geojsonError: { type: String, default: null }, geometryOptions: { type: Object, default: void 0 }, geojson: { type: Object, required: !0 }, featureId: { type: String, default: null }, geojsonBounds: { type: Object, default: void 0 }, directusSource: { type: Object, required: !0 }, directusLayers: { type: Array, required: !0 }, handleClick: { type: Function, required: !0 }, handleSelect: { type: Function, required: !0 }, cameraOptions: { type: Object, default: void 0 }, resetPresetAndRefresh: { type: Function, required: !0 }, geojsonLoading: { type: Boolean, required: !0 }, itemCount: { type: Number, default: null }, totalPages: { type: Number, required: !0 }, page: { type: Number, required: !0 }, toPage: { type: Function, required: !0 }, limit: { type: Number, required: !0 }, autoLocationFilter: { type: Boolean, default: void 0 }, fitDataBounds: { type: Function, required: !0 }, template: { type: String, default: () => { } }, itemPopup: { type: Object, default: () => { } }, updateItemPopup: { type: Function, required: !0 } }, emits: ["update:cameraOptions", "update:limit"], setup(e, { emit: t }) { const { t: n, n: l } = x(), i = Re(e, "cameraOptions", t), u = Re(e, "limit", t); return { t: n, n: l, cameraOptionsWritable: i, limitWritable: u } } }), tY = { class: "layout-map" }, nY = { key: 0, class: "footer" }, lY = { class: "pagination" }, oY = { class: "mapboxgl-ctrl-dropdown" }; function aY(e, t, n, l, i, u) { const o = c("map-component"), s = c("render-template"), r = c("v-error"), p = c("v-button"), f = c("v-info"), v = c("v-progress-circular"), _ = c("v-pagination"), y = c("v-select"); return m(), I("div", tY, [a(o, { ref: "map", class: de(["mapboxgl-map", { loading: e.loading, error: e.error || e.geojsonError || !e.geometryOptions }]), data: e.geojson, "feature-id": e.featureId, selection: e.selection, camera: e.cameraOptions, bounds: e.geojsonBounds, source: e.directusSource, layers: e.directusLayers, onFeatureclick: e.handleClick, onFeatureselect: e.handleSelect, onMoveend: t[0] || (t[0] = g => e.cameraOptionsWritable = g), onFitdata: e.fitDataBounds, onUpdateitempopup: e.updateItemPopup }, null, 8, ["class", "data", "feature-id", "selection", "camera", "bounds", "source", "layers", "onFeatureclick", "onFeatureselect", "onFitdata", "onUpdateitempopup"]), a(Lt, { name: "fade" }, { default: d(() => [e.itemPopup.item ? (m(), I("div", { key: 0, class: "popup", style: Ke({ top: e.itemPopup.position.y + "px", left: e.itemPopup.position.x + "px" }) }, [a(s, { template: e.template, item: e.itemPopup.item, collection: e.collection }, null, 8, ["template", "item", "collection"])], 4)) : R("", !0)]), _: 1 }), a(Lt, { name: "fade" }, { default: d(() => [e.error ? (m(), C(f, { key: 0, type: "danger", title: e.t("unexpected_error"), icon: "error", center: "" }, { append: d(() => [a(r, { error: e.error }, null, 8, ["error"]), a(p, { small: "", class: "reset-preset", onClick: e.resetPresetAndRefresh }, { default: d(() => [D(b(e.t("reset_page_preferences")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("unexpected_error_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : e.geojsonError ? (m(), C(f, { key: 1, type: "warning", icon: "wrong_location", center: "", title: e.t("layouts.map.invalid_geometry") }, { default: d(() => [D(b(e.geojsonError), 1)]), _: 1 }, 8, ["title"])) : e.loading || e.geojsonLoading ? (m(), C(v, { key: 2, indeterminate: "", "x-large": "", class: "center" })) : R("", !0)]), _: 1 }), e.loading || e.itemCount > 0 ? (m(), I("div", nY, [S("div", lY, [e.totalPages > 1 ? (m(), C(_, { key: 0, length: e.totalPages, "total-visible": 7, "show-first-last": "", "model-value": e.page, "onUpdate:modelValue": e.toPage }, null, 8, ["length", "model-value", "onUpdate:modelValue"])) : R("", !0)]), S("div", oY, [S("span", null, b(e.t("limit")), 1), a(y, { "model-value": e.limit, items: [{ text: e.n(100), value: 100 }, { text: e.n(1e3), value: 1e3 }, { text: e.n(1e4), value: 1e4 }, { text: e.n(1e5), value: 1e5 }], inline: "", "onUpdate:modelValue": t[1] || (t[1] = g => e.limitWritable = +g) }, null, 8, ["model-value", "items"])])])) : R("", !0)]) } var iY = B(eY, [["render", aY], ["__scopeId", "data-v-0152f6e2"]]); const sY = z({ inheritAttrs: !1, props: { collection: { type: String, required: !0 }, geometryFields: { type: Array, required: !0 }, geometryField: { type: String, default: void 0 }, geometryOptions: { type: Object, default: void 0 }, clusterData: { type: Boolean, default: void 0 }, displayTemplate: { type: String, default: void 0 } }, emits: ["update:geometryField", "update:autoLocationFilter", "update:clusterData"], setup(e, { emit: t }) { const { t: n } = x(), l = wt(), i = Re(e, "geometryField", t), u = Re(e, "clusterData", t), o = Re(e, "displayTemplate", t), s = Yn(), { basemap: r } = je(l); return { t: n, geometryFieldWritable: i, clusterDataWritable: u, displayTemplateWritable: o, basemaps: s, basemap: r } } }), rY = { class: "field" }, dY = { class: "type-label" }, uY = { key: 0, class: "field" }, cY = { key: 1, class: "field" }, pY = { class: "type-label" }, mY = { class: "field" }, fY = { class: "type-label" }, vY = { class: "field" }; function _Y(e, t, n, l, i, u) { const o = c("v-select"), s = c("v-input"), r = c("v-field-template"), p = c("v-checkbox"); return m(), I(se, null, [S("div", rY, [S("div", dY, b(e.t("layouts.map.basemap")), 1), a(o, { modelValue: e.basemap, "onUpdate:modelValue": t[0] || (t[0] = f => e.basemap = f), items: e.basemaps.map(f => ({ text: f.name, value: f.name })) }, null, 8, ["modelValue", "items"])]), e.geometryFields.length == 0 ? (m(), I("div", uY, [a(s, { type: "text", disabled: "", prefix: e.t("layouts.map.no_compatible_fields") }, null, 8, ["prefix"])])) : (m(), I("div", cY, [S("div", pY, b(e.t("layouts.map.field")), 1), a(o, { modelValue: e.geometryFieldWritable, "onUpdate:modelValue": t[1] || (t[1] = f => e.geometryFieldWritable = f), items: e.geometryFields.map(({ name: f, field: v }) => ({ text: f, value: v })) }, null, 8, ["modelValue", "items"])])), S("div", mY, [S("div", fY, b(e.t("display_template")), 1), a(r, { modelValue: e.displayTemplateWritable, "onUpdate:modelValue": t[2] || (t[2] = f => e.displayTemplateWritable = f), collection: e.collection, placeholder: e.t("layouts.map.default_template") }, null, 8, ["modelValue", "collection", "placeholder"])]), S("div", vY, [a(p, { modelValue: e.clusterDataWritable, "onUpdate:modelValue": t[3] || (t[3] = f => e.clusterDataWritable = f), label: e.t("layouts.map.cluster"), disabled: e.geometryOptions && e.geometryOptions.geometryType !== "Point" }, null, 8, ["modelValue", "label", "disabled"])])], 64) } var yY = B(sY, [["render", _Y]]); const gY = z({ inheritAttrs: !1, props: { itemCount: { type: Number, default: null }, showingCount: { type: String, required: !0 } } }), hY = { key: 0, class: "item-count" }; function bY(e, t, n, l, i, u) { return m(), C(Lt, { name: "fade" }, { default: d(() => [e.itemCount ? (m(), I("span", hY, b(e.showingCount), 1)) : R("", !0)]), _: 1 }) } var $Y = B(gY, [["render", bY], ["__scopeId", "data-v-08898882"]]); const { green: jl, orange: Ln, yellow: mr, black: wY, white: kY } = sr, SY = [{ id: "__directus_polygons_outline", type: "line", source: "__directus", filter: ["all", ["!has", "point_count"], ["==", "$type", "Polygon"]], paint: { "line-color": ["case", ["boolean", ["feature-state", "selected"], !1], Ln, ["boolean", ["feature-state", "hovered"], !1], Ln, jl], "line-width": 2 }, layout: { "line-join": "round" } }, { id: "__directus_polygons", type: "fill", source: "__directus", filter: ["all", ["!has", "point_count"], ["==", "$type", "Polygon"]], paint: { "fill-color": ["case", ["boolean", ["feature-state", "selected"], !1], mr, ["boolean", ["feature-state", "hovered"], !1], mr, jl], "fill-opacity": .15 } }, { id: "__directus_lines", type: "line", source: "__directus", filter: ["all", ["!has", "point_count"], ["==", "$type", "LineString"]], paint: { "line-color": ["case", ["boolean", ["feature-state", "selected"], !1], Ln, ["boolean", ["feature-state", "hovered"], !1], Ln, jl], "line-width": 2 } }, { id: "__directus_points_shadow", type: "circle", source: "__directus", filter: ["all", ["!has", "point_count"], ["==", "$type", "Point"]], layout: {}, paint: { "circle-radius": 10, "circle-blur": 1, "circle-opacity": .9, "circle-color": wY } }, { id: "__directus_points", type: "circle", source: "__directus", filter: ["all", ["!has", "point_count"], ["==", "$type", "Point"]], layout: {}, paint: { "circle-radius": 6, "circle-color": ["case", ["boolean", ["feature-state", "selected"], !1], Ln, ["boolean", ["feature-state", "hovered"], !1], Ln, jl], "circle-stroke-color": kY, "circle-stroke-width": 2 } }, { id: "__directus_clusters", type: "circle", source: "__directus", filter: ["has", "point_count"], paint: { "circle-radius": ["step", ["get", "point_count"], 20, 100, 30, 750, 40], "circle-color": ["step", ["get", "point_count"], "#7fe3ca", 100, "#fde2a7", 750, "#f0a7b3"], "circle-opacity": .7 } }, { id: "__directus_cluster_count", type: "symbol", source: "__directus", filter: ["has", "point_count"], layout: { "text-field": "{point_count_abbreviated}", "text-font": ["Open Sans Semibold"], "text-size": ["step", ["get", "point_count"], 15, 100, 17, 750, 19] }, paint: { "text-opacity": .85 } }]; var CY = cl({ id: "map", name: "$t:layouts.map.map", icon: "map", smallHeader: !0, component: iY, slots: { options: yY, sidebar: () => { }, actions: $Y }, setup(e, { emit: t }) { const { t: n, n: l } = x(), i = tt(), u = Re(e, "selection", t), o = Re(e, "layoutOptions", t), s = Re(e, "layoutQuery", t), { collection: r, filter: p, filterUser: f, search: v } = je(e), { info: _, primaryKeyField: y, fields: g } = ot(r), w = ct(s, "page", 1), h = ct(s, "limit", 1e3), k = V(() => { var $e; return y.value ? [($e = y.value) == null ? void 0 : $e.field] : [] }), F = ct(s, "sort", k), A = E(), P = V(() => A.value ? p.value ? { _and: [p.value, A.value] } : A.value : p.value), L = ct(o, "displayTemplate", void 0), T = ct(o, "cameraOptions", void 0), N = ct(o, "clusterData", !1), O = ct(o, "geometryField", void 0), U = V({ get: () => { var $e; return ($e = o.value) == null ? void 0 : $e.geometryFormat }, set($e) { o.value = Ce(re({}, o.value || {}), { geometryFormat: $e, geometryField: void 0 }) } }), q = V(() => g.value.find($e => $e.field == O.value)), K = V(() => { var $e; return ($e = q.value) == null ? void 0 : $e.type.startsWith("geometry") }), W = V(() => g.value.filter(({ type: $e, meta: Ue }) => $e.startsWith("geometry") || (Ue == null ? void 0 : Ue.interface) == "map")); _e(W, $e => { !O.value && $e.length > 0 && (O.value = $e[0].field) }, { immediate: !0 }); const te = V(() => { var pt, gt, jn, sl, Qo; const $e = q.value; if (!$e) return; const Ue = $e.field, Ge = K.value ? "native" : (gt = (pt = $e.meta) == null ? void 0 : pt.options) == null ? void 0 : gt.geometryFormat, it = (Qo = $e.type.split(".")[1]) != null ? Qo : (sl = (jn = $e.meta) == null ? void 0 : jn.options) == null ? void 0 : sl.geometryType; if (!!Ge) return { geometryField: Ue, geometryFormat: Ge, geometryType: it } }), G = V(() => { var $e, Ue, Ge; return L.value || ((Ue = ($e = _.value) == null ? void 0 : $e.meta) == null ? void 0 : Ue.display_template) || `{{ ${(Ge = y.value) == null ? void 0 : Ge.field} }}` }), X = V(() => { var $e; return [O.value, ...vt(G.value)].concat(($e = y.value) == null ? void 0 : $e.field).filter(Ue => !!Ue) }); function ve() { if (!K.value || !T.value || !O.value) return; const $e = T.value.bbox, Ue = [[$e[0], $e[1]], [$e[2], $e[1]], [$e[2], $e[3]], [$e[0], $e[3]], [$e[0], $e[1]]]; return { [O.value]: { _intersects_bbox: { type: "Polygon", coordinates: [Ue] } } } } const ae = E(!1); function ne() { var $e; if (ae.value = !0, K.value) { A.value = void 0; return } (($e = fe.value) == null ? void 0 : $e.features.length) && (J.value = M.exports.cloneDeep(fe.value.bbox)) } _e(T, () => { ae.value = !1, A.value = ve() }); const { items: Y, loading: ce, error: pe, totalPages: H, itemCount: Q, totalCount: Z, getItems: le } = pl(r, { sort: F, limit: h, page: w, search: v, filter: P, fields: X }), fe = E({ type: "FeatureCollection", features: [] }), J = E(), ie = E(null), oe = E(!1); _e([v, r, h, F], me), _e(Y, ge), _e(O, () => ae.value = !0); function me() { ae.value = !0, oe.value = !1 } function ge() { if (te.value) try { fe.value = { type: "FeatureCollection", features: [] }, oe.value = !0, ie.value = null, fe.value = _W(Y.value, te.value), oe.value = !1, (!T.value || ae.value) && (J.value = fe.value.bbox) } catch ($e) { oe.value = !1, ie.value = $e, fe.value = { type: "FeatureCollection", features: [] } } else fe.value = { type: "FeatureCollection", features: [] } } const be = E({ type: "geojson", data: { type: "FeatureCollection", features: [] } }); _e(N, ke, { immediate: !0 }); function ke() { be.value = M.exports.merge({}, be.value, { cluster: N.value }) } function Ie($e) { u.value = $e } function De($e) { u.value = Array.from(new Set(u.value.concat($e))) } function Be({ ids: $e, replace: Ue }) { Ue ? Ie($e) : De($e) } function lt({ id: $e, replace: Ue }) { e.selectMode ? Be({ ids: [$e], replace: Ue }) : i.push(`/content/${r.value}/${$e}`) } const Te = V(() => { var $e, Ue; return e.readonly ? null : (Ue = ($e = y.value) == null ? void 0 : $e.field) != null ? Ue : null }), Oe = V(() => (Q.value || 0) < (Z.value || 0) && f.value ? Q.value === 1 ? n("one_filtered_item") : n("start_end_of_count_filtered_items", { start: l((+w.value - 1) * h.value + 1), end: l(Math.min(w.value * h.value, Q.value || 0)), count: l(Q.value || 0) }) : Q.value === 1 ? n("one_item") : n("start_end_of_count_items", { start: l((+w.value - 1) * h.value + 1), end: l(Math.min(w.value * h.value, Q.value || 0)), count: l(Q.value || 0) })), qe = E({ item: null }); function Le($e) { var Ue, Ge; if ("item" in $e) { const it = (Ue = y.value) == null ? void 0 : Ue.field; $e.item = it && (Ge = Y.value.find(pt => pt[it] === $e.item)) != null ? Ge : null } qe.value = M.exports.merge({}, qe.value, $e) } return { collection: r, geojson: fe, directusSource: be, directusLayers: SY, featureId: Te, geojsonBounds: J, geojsonLoading: oe, geojsonError: ie, geometryOptions: te, handleClick: lt, handleSelect: Be, geometryFormat: U, geometryField: O, displayTemplate: L, isGeometryFieldNative: K, cameraOptions: T, clusterData: N, items: Y, loading: ce, error: pe, totalPages: H, page: w, toPage: We, itemCount: Q, fieldsInCollection: g, limit: h, filter: p, primaryKeyField: y, sort: F, info: _, showingCount: Oe, refresh: Se, resetPresetAndRefresh: Fe, geometryFields: W, fitDataBounds: ne, template: G, itemPopup: qe, updateItemPopup: Le }; async function Fe() { var $e; await (($e = e == null ? void 0 : e.resetPreset) == null ? void 0 : $e.call(e)), Se() } function Se() { le() } function We($e) { w.value = $e } } }), VY = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: CY }); const FY = z({ inheritAttrs: !1, props: { collection: { type: String, required: !0 }, selection: { type: Array, default: () => [] }, readonly: { type: Boolean, required: !0 }, tableHeaders: { type: Array, required: !0 }, items: { type: Array, required: !0 }, loading: { type: Boolean, required: !0 }, error: { type: Object, default: null }, totalPages: { type: Number, required: !0 }, tableSort: { type: Object, required: !0 }, onRowClick: { type: Function, required: !0 }, onSortChange: { type: Function, required: !0 }, tableRowHeight: { type: Number, required: !0 }, page: { type: Number, required: !0 }, toPage: { type: Function, required: !0 }, itemCount: { type: Number, default: null }, fields: { type: Array, required: !0 }, limit: { type: Number, required: !0 }, primaryKeyField: { type: Object, default: null }, info: { type: Object, default: null }, sortField: { type: String, default: null }, changeManualSort: { type: Function, required: !0 }, resetPresetAndRefresh: { type: Function, required: !0 }, selectAll: { type: Function, required: !0 }, filterUser: { type: Object, default: null }, search: { type: String, default: null } }, emits: ["update:selection", "update:tableHeaders", "update:limit"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "selection", t), i = Re(e, "tableHeaders", t), u = Re(e, "limit", t), o = ht("main-element"), s = E(); return _e(() => e.page, () => { var r; return (r = o.value) == null ? void 0 : r.scrollTo({ top: 0, behavior: "smooth" }) }), nt("meta+a", () => { e.selectAll() }, s), { t: n, selectionWritable: l, tableHeadersWritable: i, limitWritable: u, table: s } } }), AY = { class: "layout-tabular" }, IY = { class: "footer" }, EY = { class: "pagination" }, DY = { key: 0, class: "per-page" }; function TY(e, t, n, l, i, u) { const o = c("render-display"), s = c("v-pagination"), r = c("v-select"), p = c("v-table"), f = c("v-error"), v = c("v-button"), _ = c("v-info"); return m(), I("div", AY, [e.loading || e.itemCount > 0 ? (m(), C(p, { key: 0, ref: "table", modelValue: e.selectionWritable, "onUpdate:modelValue": t[1] || (t[1] = y => e.selectionWritable = y), headers: e.tableHeadersWritable, "onUpdate:headers": t[2] || (t[2] = y => e.tableHeadersWritable = y), class: "table", "fixed-header": "", "show-select": e.readonly ? !1 : e.selection !== void 0, "show-resize": "", "must-sort": "", sort: e.tableSort, items: e.items, loading: e.loading, "row-height": e.tableRowHeight, "server-sort": e.itemCount === e.limit || e.totalPages > 1, "item-key": e.primaryKeyField.field, "show-manual-sort": e.sortField !== null, "manual-sort-key": e.sortField, "selection-use-keys": "", "onClick:row": e.onRowClick, "onUpdate:sort": e.onSortChange, onManualSort: e.changeManualSort }, et({ footer: d(() => [S("div", IY, [S("div", EY, [e.totalPages > 1 ? (m(), C(s, { key: 0, length: e.totalPages, "total-visible": 7, "show-first-last": "", "model-value": e.page, "onUpdate:modelValue": e.toPage }, null, 8, ["length", "model-value", "onUpdate:modelValue"])) : R("", !0)]), e.loading === !1 && e.items.length >= 25 ? (m(), I("div", DY, [S("span", null, b(e.t("per_page")), 1), a(r, { "model-value": `${e.limit}`, items: ["25", "50", "100", "250", "500", " 1000"], inline: "", "onUpdate:modelValue": t[0] || (t[0] = y => e.limitWritable = +y) }, null, 8, ["model-value"])])) : R("", !0)])]), _: 2 }, [he(e.tableHeaders, y => ({ name: `item.${y.value}`, fn: d(({ item: g }) => [a(o, { value: g[y.value], display: y.field.display, options: y.field.displayOptions, interface: y.field.interface, "interface-options": y.field.interfaceOptions, type: y.field.type, collection: e.collection, field: y.field.field }, null, 8, ["value", "display", "options", "interface", "interface-options", "type", "collection", "field"])]) }))]), 1032, ["modelValue", "headers", "show-select", "sort", "items", "loading", "row-height", "server-sort", "item-key", "show-manual-sort", "manual-sort-key", "onClick:row", "onUpdate:sort", "onManualSort"])) : e.error ? (m(), C(_, { key: 1, type: "danger", title: e.t("unexpected_error"), icon: "error", center: "" }, { append: d(() => [a(f, { error: e.error }, null, 8, ["error"]), a(v, { small: "", class: "reset-preset", onClick: e.resetPresetAndRefresh }, { default: d(() => [D(b(e.t("reset_page_preferences")), 1)]), _: 1 }, 8, ["onClick"])]), default: d(() => [D(b(e.t("unexpected_error_copy")) + " ", 1)]), _: 1 }, 8, ["title"])) : e.itemCount === 0 && (e.filterUser || e.search) ? ye(e.$slots, "no-results", { key: 2 }, void 0, !0) : e.itemCount === 0 ? ye(e.$slots, "no-items", { key: 3 }, void 0, !0) : R("", !0)]) } var PY = B(FY, [["render", TY], ["__scopeId", "data-v-2edb585c"]]); const OY = z({ components: { Draggable: kt }, inheritAttrs: !1, props: { fields: { type: Array, required: !0 }, activeFields: { type: Array, required: !0 }, tableSpacing: { type: String, required: !0 }, hideDragImage: { type: Function, required: !0 }, availableFields: { type: Array, required: !0 } }, emits: ["update:tableSpacing", "update:activeFields", "update:fields"], setup(e, { emit: t }) { const { t: n } = x(), l = Re(e, "fields", t), i = Re(e, "activeFields", t), u = Re(e, "tableSpacing", t); return { t: n, fieldsWritable: l, activeFieldsWritable: i, tableSpacingWritable: u } } }), LY = e => (Qe("data-v-4a9cb74e"), e = e(), Xe(), e), jY = { class: "field" }, RY = { class: "type-label" }, MY = { class: "field" }, UY = { class: "type-label" }, NY = LY(() => S("div", { class: "spacer" }, null, -1)); function BY(e, t, n, l, i, u) { const o = c("v-select"), s = c("v-icon"), r = c("v-checkbox"), p = c("draggable"); return m(), I(se, null, [S("div", jY, [S("div", RY, b(e.t("layouts.tabular.spacing")), 1), a(o, { modelValue: e.tableSpacingWritable, "onUpdate:modelValue": t[0] || (t[0] = f => e.tableSpacingWritable = f), items: [{ text: e.t("layouts.tabular.compact"), value: "compact" }, { text: e.t("layouts.tabular.cozy"), value: "cozy" }, { text: e.t("layouts.tabular.comfortable"), value: "comfortable" }] }, null, 8, ["modelValue", "items"])]), S("div", MY, [S("div", UY, b(e.t("layouts.tabular.fields")), 1), a(p, { modelValue: e.activeFieldsWritable, "onUpdate:modelValue": t[3] || (t[3] = f => e.activeFieldsWritable = f), "item-key": "field", handle: ".drag-handle", "set-data": e.hideDragImage, "force-fallback": !0 }, { item: d(({ element: f }) => [a(r, { modelValue: e.fieldsWritable, "onUpdate:modelValue": t[2] || (t[2] = v => e.fieldsWritable = v), value: f.field, label: f.name }, { append: d(() => [NY, a(s, { name: "drag_handle", class: "drag-handle", onClick: t[1] || (t[1] = Ae(() => { }, ["stop"])) })]), _: 2 }, 1032, ["modelValue", "value", "label"])]), _: 1 }, 8, ["modelValue", "set-data"]), (m(!0), I(se, null, he(e.availableFields.filter(f => e.fields.includes(f.field) === !1), f => (m(), C(r, { key: f.field, modelValue: e.fieldsWritable, "onUpdate:modelValue": t[4] || (t[4] = v => e.fieldsWritable = v), value: f.field, label: f.name }, null, 8, ["modelValue", "value", "label"]))), 128))])], 64) } var qY = B(OY, [["render", BY], ["__scopeId", "data-v-4a9cb74e"]]); const zY = z({ inheritAttrs: !1, props: { itemCount: { type: Number, default: null }, showingCount: { type: String, required: !0 } } }), KY = { key: 0, class: "item-count" }; function HY(e, t, n, l, i, u) { return m(), C(Lt, { name: "fade" }, { default: d(() => [e.itemCount ? (m(), I("span", KY, b(e.showingCount), 1)) : R("", !0)]), _: 1 }) } var WY = B(zY, [["render", HY], ["__scopeId", "data-v-34941803"]]), GY = cl({ id: "tabular", name: "$t:layouts.tabular.tabular", icon: "reorder", component: PY, slots: { options: qY, sidebar: () => { }, actions: WY }, setup(e, { emit: t }) { const { t: n, n: l } = x(), i = tt(), u = Re(e, "selection", t), o = Re(e, "layoutOptions", t), s = Re(e, "layoutQuery", t), { collection: r, filter: p, filterUser: f, search: v } = je(e), { info: _, primaryKeyField: y, fields: g, sortField: w } = ot(r), { sort: h, limit: k, page: F, fields: A, fieldsWithRelational: P } = fe(), { items: L, loading: T, error: N, totalPages: O, itemCount: U, totalCount: q, changeManualSort: K, getItems: W } = pl(r, { sort: h, limit: k, page: F, fields: P, filter: p, search: v }), { tableSort: te, tableHeaders: G, tableRowHeight: X, onRowClick: ve, onSortChange: ae, activeFields: ne, tableSpacing: Y } = J(), ce = V(() => (U.value || 0) < (q.value || 0) && f.value ? U.value === 1 ? n("one_filtered_item") : n("start_end_of_count_filtered_items", { start: l((+F.value - 1) * k.value + 1), end: l(Math.min(F.value * k.value, U.value || 0)), count: l(U.value || 0) }) : U.value === 1 ? n("one_item") : n("start_end_of_count_items", { start: l((+F.value - 1) * k.value + 1), end: l(Math.min(F.value * k.value, U.value || 0)), count: l(U.value || 0) })), pe = V(() => g.value.filter(ie => { var oe, me; return ((me = (oe = ie.meta) == null ? void 0 : oe.special) == null ? void 0 : me.includes("no-data")) !== !0 })); return { tableHeaders: G, items: L, loading: T, error: N, totalPages: O, tableSort: te, onRowClick: ve, onSortChange: ae, tableRowHeight: X, page: F, toPage: Z, itemCount: U, totalCount: q, fieldsInCollection: g, fields: A, limit: k, activeFields: ne, tableSpacing: Y, primaryKeyField: y, info: _, showingCount: ce, sortField: w, changeManualSort: K, hideDragImage: Nt, refresh: Q, resetPresetAndRefresh: H, selectAll: le, availableFields: pe, filter: p, search: v }; async function H() { var ie; await ((ie = e == null ? void 0 : e.resetPreset) == null ? void 0 : ie.call(e)), Q() } function Q() { W() } function Z(ie) { F.value = ie } function le() { if (!y.value) return; const ie = y.value; u.value = M.exports.clone(L.value).map(oe => oe[ie.field]) } function fe() { const ie = ct(s, "page", 1), oe = ct(s, "limit", 25), me = V(() => { var De; return y.value ? [(De = y.value) == null ? void 0 : De.field] : [] }), ge = ct(s, "sort", me), be = V(() => g.value.filter(De => { var Be; return !((Be = De.meta) == null ? void 0 : Be.hidden) }).slice(0, 4).map(({ field: De }) => De).sort()), ke = ct(s, "fields", be), Ie = V(() => e.collection ? Qt(ke.value, e.collection) : []); return { sort: ge, limit: oe, page: ie, fields: ke, fieldsWithRelational: Ie } } function J() { const ie = V(() => { var Te, Oe; return ((Te = h.value) == null ? void 0 : Te[0]) ? ((Oe = h.value) == null ? void 0 : Oe[0].startsWith("-")) ? { by: h.value[0].substring(1), desc: !0 } : { by: h.value[0], desc: !1 } : null }), oe = E({}); _e(() => o.value, () => { oe.value = {} }); const me = M.exports.debounce(() => { o.value = Object.assign({}, o.value, { widths: oe.value }) }, 350), ge = V({ get() { return A.value.map(Te => g.value.find(Oe => Oe.field === Te)).filter(Te => Te) }, set(Te) { A.value = Te.map(Oe => Oe.field) } }), be = V({ get() { return ge.value.map(Te => { var Oe, qe, Le, Fe, Se, We; return { text: Te.name, value: Te.field, width: oe.value[Te.field] || ((qe = (Oe = o.value) == null ? void 0 : Oe.widths) == null ? void 0 : qe[Te.field]) || null, field: { display: ((Le = Te.meta) == null ? void 0 : Le.display) || Ds(Te.type), displayOptions: (Fe = Te.meta) == null ? void 0 : Fe.display_options, interface: (Se = Te.meta) == null ? void 0 : Se.interface, interfaceOptions: (We = Te.meta) == null ? void 0 : We.options, type: Te.type, field: Te.field }, sortable: ["json", "o2m", "m2o", "m2m", "m2a", "file", "files", "alias", "presentation", "translations"].includes(Te.type) === !1 } }) }, set(Te) { const Oe = {}; Te.forEach(qe => { qe.width && (Oe[qe.value] = qe.width) }), oe.value = Oe, me() } }), ke = ct(o, "spacing", "cozy"), Ie = V(() => { switch (ke.value) { case "compact": return 32; case "cozy": default: return 48; case "comfortable": return 64 } }); return { tableSort: ie, tableHeaders: be, tableSpacing: ke, tableRowHeight: Ie, onRowClick: De, onSortChange: Be, activeFields: ge, getFieldDisplay: lt }; function De({ item: Te, event: Oe }) { var Le, Fe; if (e.readonly === !0 || !y.value) return; const qe = Te[y.value.field]; if (e.selectMode || ((Le = u.value) == null ? void 0 : Le.length) > 0) ((Fe = u.value) == null ? void 0 : Fe.includes(qe)) === !1 ? u.value.push(qe) : u.value = u.value.filter(Se => Se !== qe); else { const Se = i.resolve(`/content/${r.value}/${encodeURIComponent(qe)}`); Oe.ctrlKey || Oe.metaKey ? window.open(Se.href, "_blank") : i.push(Se) } } function Be(Te) { let Oe = Te.by; if (!Te.by) { h.value = []; return } Te.desc === !0 && (Oe = "-" + Oe), h.value = [Oe] } function lt(Te) { var qe; const Oe = g.value.find(Le => Le.field === Te); return ((qe = Oe == null ? void 0 : Oe.meta) == null ? void 0 : qe.display) ? { display: Oe.meta.display, options: Oe.meta.display_options } : null } } } }), JY = Object.freeze({ __proto__: null, [Symbol.toStringTag]: "Module", default: GY }); const { layoutsRaw: fr } = dn(); async function QY(e) { const n = Object.values({ "./calendar/index.ts": oZ, "./cards/index.ts": XZ, "./map/index.ts": VY, "./tabular/index.ts": JY }).map(l => l.default); try { const l = await j(() => import(`${Ye()}extensions/layouts/index.js`), []); n.push(...l.default) } catch (l) { console.warn("Couldn't load custom layouts"), console.warn(l) } fr.value = n, fr.value.forEach(l => { e.component(`layout-${l.id}`, l.component), e.component(`layout-options-${l.id}`, l.slots.options), e.component(`layout-sidebar-${l.id}`, l.slots.sidebar), e.component(`layout-actions-${l.id}`, l.slots.actions) }) } var XY = "assets/logo-light.7a327cdd.svg"; const ZY = z({ props: { wide: { type: Boolean, default: !1 } }, setup() { var o; const e = Pn(), t = V(() => { var s, r; return !!((r = (s = e.info) == null ? void 0 : s.project) == null ? void 0 : r.project_color) }), n = V(() => { var r, p, f, v, _; const s = "#263238"; return ((p = (r = e.info) == null ? void 0 : r.project) == null ? void 0 : p.public_background) ? `url(${Ye() + `assets/${(f = e.info.project) == null ? void 0 : f.public_background}`})` : ((_ = (v = e.info) == null ? void 0 : v.project) == null ? void 0 : _.project_color) || s }), l = V(() => ({ background: n.value, backgroundSize: "cover", backgroundPosition: "center center" })), i = V(() => { var s, r, p; return ((r = (s = e.info) == null ? void 0 : s.project) == null ? void 0 : r.public_foreground) ? Ye() + `assets/${(p = e.info.project) == null ? void 0 : p.public_foreground}` : null }), u = V(() => { var s, r, p; return ((r = (s = e.info) == null ? void 0 : s.project) == null ? void 0 : r.project_logo) ? Ye() + `assets/${(p = e.info.project) == null ? void 0 : p.project_logo}` : null }); return { version: pa, artStyles: l, branding: (o = e.info) == null ? void 0 : o.project, foregroundURL: i, logoURL: u, isBranded: t } } }), vr = e => (Qe("data-v-441fc56e"), e = e(), Xe(), e), YY = { class: "title-box" }, xY = ["src", "alt"], ex = vr(() => S("img", { src: XY, alt: "Directus", class: "directus-logo" }, null, -1)), tx = [ex], nx = { class: "title" }, lx = { class: "type-title" }, ox = vr(() => S("p", { class: "subtitle" }, "Admin App", -1)), ax = { class: "content" }, ix = { class: "notice" }, sx = ["src", "alt"], rx = { class: "note-container" }, dx = { key: 0, class: "note" }; function ux(e, t, n, l, i, u) { const o = we("md"); return m(), I("div", { class: de(["public-view", { branded: e.isBranded }]) }, [S("div", { class: de(["container", { wide: e.wide }]) }, [S("div", YY, [e.branding && e.branding.project_logo ? (m(), I("div", { key: 0, class: "logo", style: Ke({ backgroundColor: e.branding.project_color }) }, [S("img", { src: e.logoURL, alt: e.branding.project_name || "Logo" }, null, 8, xY)], 4)) : (m(), I("div", { key: 1, class: "logo", style: Ke({ backgroundColor: e.branding.project_color }) }, tx, 4)), S("div", nx, [S("h1", lx, b(e.branding && e.branding.project_name), 1), ox])]), S("div", ax, [ye(e.$slots, "default")]), S("div", ix, [ye(e.$slots, "notice")])], 2), S("div", { class: "art", style: Ke(e.artStyles) }, [a(Lt, { name: "scale" }, { default: d(() => [e.foregroundURL ? (m(), I("img", { key: 0, class: "foreground", src: e.foregroundURL, alt: e.branding && e.branding.project_name }, null, 8, sx)) : R("", !0)]), _: 1 }), S("div", rx, [e.branding && e.branding.public_note ? ee((m(), I("div", dx, null, 512)), [[o, e.branding.public_note]]) : R("", !0)])], 4)], 2) } var cx = B(ZY, [["render", ux], ["__scopeId", "data-v-441fc56e"]]); const px = ua(() => j(() => import("./assets/index.886103e5.js"), ["assets/index.886103e5.js", "assets/index.df6ec1ee.css", "assets/vendor.c46e17d6.js", "assets/vendor.fe7856f0.css", "assets/use-sync.864aa3cf.js"])); function mx(e) { e.component("PublicView", cx), e.component("PrivateView", px) } fx(); async function fx() {
    console.log(Mw), console.info(`Hey! Interested in helping build this open-source data management platform?
If so, join our growing team of contributors at: https://directus.chat`), console.info("%c\u{1F430} Starting Directus...", "color:Green"), console.time("\u{1F553} Application Loaded"); const e = jd(O6); e.use(Rt), e.use(ze), e.use(Rd()), GU(e), OU(e), mx(e), await Promise.all([jX(e), FN(e), $q(e), QY(e), u6()]), e.mount("#app"), console.timeEnd("\u{1F553} Application Loaded"), console.group("%c\u2728 Project Information", "color:DodgerBlue"), console.info("%cEnvironment: production", "color:DodgerBlue"), console.groupEnd(), window.addEventListener("dragover", t => t.preventDefault(), !1), window.addEventListener("drop", t => t.preventDefault(), !1)
} export { ZO as H, mn as M, B as _, Il as a, st as b, wt as c, el as d, Ze as e, Gl as f, Ye as g, Uo as h, Pn as i, za as j, ue as k, WN as l, f8 as m, ze as n, Va as o, C6 as p, Ct as t, tl as u };
